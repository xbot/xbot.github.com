<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:title" content="Project Euler Problem 23 Solved">
<meta property="og:description" content="Non-abundant sums A perfect number is a number for which the sum of its proper divisors is exactly equal to the number. For example, the sum of the proper divisors of 28 would be 1 + 2 + 4 + 7 + 14 = 28, which means that 28 is a perfect number.
A number n is called deficient if the sum of its proper divisors is less than n and it is called abundant if this sum exceeds n.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://0x3f.org/posts/project-euler-23/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2014-04-25T23:56:00+00:00">
<meta property="article:modified_time" content="2014-04-25T23:56:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Project Euler Problem 23 Solved">
<meta name=twitter:description content="Non-abundant sums A perfect number is a number for which the sum of its proper divisors is exactly equal to the number. For example, the sum of the proper divisors of 28 would be 1 + 2 + 4 + 7 + 14 = 28, which means that 28 is a perfect number.
A number n is called deficient if the sum of its proper divisors is less than n and it is called abundant if this sum exceeds n.">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-93233020-1','auto'),ga('send','pageview'))</script>
<meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff">
<meta name=theme-color media="(prefers-color-scheme: dark)" content="#262d33">
<title>
晴耕雨讀 - Project Euler Problem 23 Solved
</title>
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<link rel=preconnect href=https://fonts.googleapis.com>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel=stylesheet>
<link rel=stylesheet href=/minima.1641881064.css>
<script defer type=text/javascript src=/minima.1641881064.js></script>
</head>
<script>try{'theme'in localStorage||(localStorage.theme=window.matchMedia('(prefer-color-scheme: dark)').matches?'dark':'light'),document.querySelector('html').classList.add(localStorage.theme)}catch(a){console.error(a)}</script>
<body class="sm:mx-5 sm:my-0">
<header class="flex justify-between items-center sm:my-3">
<div class="flex items-center">
<div id=theme-switcher class="text-4xl cursor-pointer">🌚</div>
</div>
<nav class="flex items-center
whitespace-nowrap overflow-x-auto overflow-y-hidden">
<a class=ml-5 href=/>主頁</a>
<a class=ml-5 href=/posts>文章</a>
<a class=ml-5 href=/tags>標籤</a>
<a class=ml-5 href=/categories>分類</a>
<a class=ml-5 href=/about>關於</a>
</nav>
</header>
<h1 class="mt-8 mb-6">Project Euler Problem 23 Solved</h1>
<div class="mb-3 text-xs flex justify-between sm:flex-col">
<div>
Posted at &mdash; Apr 25, 2014
</div>
<div class=sm:mt-4>
<a class=not-first:ml-3 href=/tags/golang>#golang</a>
<a class=not-first:ml-3 href=/tags/python>#python</a>
<a class=not-first:ml-3 href=/tags/%e6%ac%a7%e6%8b%89%e5%b7%a5%e7%a8%8b>#欧拉工程</a>
<a class=not-first:ml-3 href=/tags/%e7%bc%96%e7%a8%8b>#编程</a>
</div>
</div>
<main>
<p></p>
<article class=md>
<h2 id=non-abundant-sums>Non-abundant sums</h2>
<p>A perfect number is a number for which the sum of its proper divisors is exactly equal to the number. For example, the sum of the proper divisors of 28 would be 1 + 2 + 4 + 7 + 14 = 28, which means that 28 is a perfect number.</p>
<p>A number n is called deficient if the sum of its proper divisors is less than n and it is called abundant if this sum exceeds n.</p>
<p>As 12 is the smallest abundant number, 1 + 2 + 3 + 4 + 6 = 16, the smallest number that can be written as the sum of two abundant numbers is 24. By mathematical analysis, it can be shown that all integers greater than 28123 can be written as the sum of two abundant numbers. However, this upper limit cannot be reduced any further by analysis even though it is known that the greatest number that cannot be expressed as the sum of two abundant numbers is less than this limit.</p>
<p>Find the sum of all the positive integers which cannot be written as the sum of two abundant numbers.</p>
<h2 id=solution>Solution</h2>
<p>Using sets instead of lists greatly improves performance in Python:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=ch>#!/usr/bin/python</span>
<span class=c1># -*- coding: utf-8 -*-</span>


<span class=k>def</span> <span class=nf>sum_proper_factors</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
    <span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=n>sqrt</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>n</span> <span class=o>**</span> <span class=mf>0.5</span><span class=p>)</span>

    <span class=p>(</span><span class=n>start</span><span class=p>,</span> <span class=n>step</span><span class=p>)</span> <span class=o>=</span> <span class=n>n</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>1</span> <span class=ow>and</span> <span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=ow>or</span> <span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>start</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>sqrt</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>step</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>n</span> <span class=o>%</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>result</span> <span class=o>+=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>n</span> <span class=o>/</span> <span class=n>i</span>

    <span class=k>if</span> <span class=n>sqrt</span> <span class=o>==</span> <span class=nb>int</span><span class=p>(</span><span class=n>sqrt</span><span class=p>):</span>
        <span class=n>result</span> <span class=o>-=</span> <span class=n>sqrt</span>

    <span class=k>return</span> <span class=n>result</span>


<span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
    <span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=n>limit</span><span class=p>,</span> <span class=n>abundants</span><span class=p>)</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>28124</span><span class=p>,</span> <span class=nb>set</span><span class=p>())</span>

    <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>limit</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>sum_proper_factors</span><span class=p>(</span><span class=n>n</span><span class=p>)</span> <span class=o>&gt;</span> <span class=n>n</span><span class=p>:</span>
            <span class=n>abundants</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>any</span><span class=p>(</span><span class=n>n</span> <span class=o>-</span> <span class=n>a</span> <span class=ow>in</span> <span class=n>abundants</span> <span class=k>for</span> <span class=n>a</span> <span class=ow>in</span> <span class=n>abundants</span><span class=p>):</span>
            <span class=n>result</span> <span class=o>+=</span> <span class=n>n</span>

    <span class=nb>print</span> <span class=n>result</span>


<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=kn>import</span> <span class=nn>time</span>
    <span class=n>startTime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
    <span class=n>main</span><span class=p>()</span>
    <span class=nb>print</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>startTime</span>
</code></pre></td></tr></table>
</div>
</div><p>Simulate sets using maps in Go:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
	<span class=s>&#34;fmt&#34;</span>
	<span class=s>&#34;math&#34;</span>
	<span class=s>&#34;time&#34;</span>
<span class=p>)</span>

<span class=kd>func</span> <span class=nf>sum_proper_factors</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
	<span class=nx>result</span><span class=p>,</span> <span class=nx>sqrt</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>math</span><span class=p>.</span><span class=nf>Sqrt</span><span class=p>(</span><span class=nb>float64</span><span class=p>(</span><span class=nx>n</span><span class=p>))</span>

	<span class=nx>start</span><span class=p>,</span> <span class=nx>step</span> <span class=o>:=</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span>
	<span class=k>if</span> <span class=nx>n</span><span class=o>%</span><span class=mi>2</span> <span class=o>==</span> <span class=mi>1</span> <span class=p>{</span>
		<span class=nx>start</span><span class=p>,</span> <span class=nx>step</span> <span class=p>=</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span>
	<span class=p>}</span>
	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=nx>start</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=nb>int</span><span class=p>(</span><span class=nx>sqrt</span><span class=p>);</span> <span class=nx>i</span> <span class=o>+=</span> <span class=nx>step</span> <span class=p>{</span>
		<span class=k>if</span> <span class=nx>n</span><span class=o>%</span><span class=nx>i</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
			<span class=nx>result</span> <span class=o>+=</span> <span class=nx>i</span> <span class=o>+</span> <span class=nx>n</span><span class=o>/</span><span class=nx>i</span>
		<span class=p>}</span>
	<span class=p>}</span>

	<span class=k>if</span> <span class=nx>sqrt</span> <span class=o>==</span> <span class=nb>float64</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=nx>sqrt</span><span class=p>))</span> <span class=p>{</span>
		<span class=nx>result</span> <span class=o>-=</span> <span class=nb>int</span><span class=p>(</span><span class=nx>sqrt</span><span class=p>)</span>
	<span class=p>}</span>

	<span class=k>return</span> <span class=nx>result</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>result</span><span class=p>,</span> <span class=nx>limit</span><span class=p>,</span> <span class=nx>abundants</span><span class=p>,</span> <span class=nx>startTime</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>28124</span><span class=p>,</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>int</span><span class=p>]</span><span class=kt>bool</span><span class=p>),</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>

	<span class=k>for</span> <span class=nx>n</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>n</span> <span class=p>&lt;</span> <span class=nx>limit</span><span class=p>;</span> <span class=nx>n</span><span class=o>++</span> <span class=p>{</span>
		<span class=k>if</span> <span class=nf>sum_proper_factors</span><span class=p>(</span><span class=nx>n</span><span class=p>)</span> <span class=p>&gt;</span> <span class=nx>n</span> <span class=p>{</span>
			<span class=nx>abundants</span><span class=p>[</span><span class=nx>n</span><span class=p>]</span> <span class=p>=</span> <span class=kc>true</span>
		<span class=p>}</span>
		<span class=nx>isSumOfTwoAbundants</span> <span class=o>:=</span> <span class=kc>false</span>
		<span class=k>for</span> <span class=nx>k</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>abundants</span> <span class=p>{</span>
			<span class=k>if</span> <span class=nx>abundants</span><span class=p>[</span><span class=nx>n</span><span class=o>-</span><span class=nx>k</span><span class=p>]</span> <span class=o>==</span> <span class=kc>true</span> <span class=p>{</span>
				<span class=nx>isSumOfTwoAbundants</span> <span class=p>=</span> <span class=kc>true</span>
				<span class=k>break</span>
			<span class=p>}</span>
		<span class=p>}</span>
		<span class=k>if</span> <span class=p>!</span><span class=nx>isSumOfTwoAbundants</span> <span class=p>{</span>
			<span class=nx>result</span> <span class=o>+=</span> <span class=nx>n</span>
		<span class=p>}</span>
	<span class=p>}</span>

	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>result</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Sub</span><span class=p>(</span><span class=nx>startTime</span><span class=p>))</span>
<span class=p>}</span>
</code></pre></td></tr></table>
</div>
</div><p>I&rsquo;m the 49489th person to have solved this problem.</p>
</article>
</main>
<script>const repo='xbot/blog-comments',issueTerm='pathname',theme=localStorage.theme?`github-${localStorage.theme}`:'preferred-color-scheme',script=document.createElement('script');script.src='https://utteranc.es/client.js',script.async=!0,script.crossOrigin='anonymous',script.setAttribute('repo',repo),script.setAttribute('issue-term',issueTerm),script.setAttribute('theme',theme),script.setAttribute('label','comment'),document.querySelector('main').appendChild(script)</script>
<footer class="mt-8 flex sm:flex-col-reverse justify-between items-center">
<p class="mt-0 text-sm">
© 淘气 2021 |
<a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a> on
<a href=https://github.com/mivinci/hugo-theme-minima target=_blank rel="noopener noreferrer">Minima</a>
</p>
<p class="flex items-center mt-0">
<a class="icon mx-2" href=https://github.com/xbot title=github><svg fill="#63636f" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
</a>
<a class="icon mx-2" href=/index.xml title=rss><svg fill="#63636f" t="1626591563876" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="1984" width="18" height="16"><path d="M128 768a128 128 0 100 256 128 128 0 000-256zM0 368v176c265.104.0 480 214.912 480 480h176c0-362.32-293.696-656-656-656zM0 0v176c468.336.0 848 379.664 848 848h176C1024 458.464 565.536.0.0.0z" p-id="1985"/></svg>
</a>
</p>
</footer>
</body>
</html>