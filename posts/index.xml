<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on 晴耕雨讀</title><link>http://0x3f.org/posts/</link><description>Recent content in Posts on 晴耕雨讀</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>© 淘气 2022</copyright><lastBuildDate>Wed, 30 Aug 2023 22:05:59 +0800</lastBuildDate><atom:link href="http://0x3f.org/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>OmniFocus 插件 refine-task v1.0 小记</title><link>http://0x3f.org/posts/omnifocus-plugin-refine-task-v1-release-notes/</link><pubDate>Wed, 30 Aug 2023 22:05:59 +0800</pubDate><guid>http://0x3f.org/posts/omnifocus-plugin-refine-task-v1-release-notes/</guid><description>refine-task 的功能非常简单，它为选中的任务打开一个输入框，将用户输入的内容作为新的任务内容保存，原来的任务内容会被挪到备注里：
我用快捷指令“收集 Tweet 到 OmniFocus”收集 tweets ，但是因为 tweet 内容较长，不方便 review 的时候快速了解为什么收集这条内容，所以我用快捷指令“提炼 OmniFocus”利用 ChatGPT 提炼待办事项并复制到剪贴板，接着这个快捷指令会调用 refine-task 把条目原文移动到备注里并打开输入框由用户粘贴或者输入待办事项。</description></item><item><title>夏季厨余垃圾防腐防虫绝招</title><link>http://0x3f.org/posts/summer-kitchen-organic-waste-preservation-insect-prevention-tips/</link><pubDate>Sat, 26 Aug 2023 19:01:49 +0800</pubDate><guid>http://0x3f.org/posts/summer-kitchen-organic-waste-preservation-insect-prevention-tips/</guid><description>做饭产生的湿垃圾，说多不多，说少不少，不想浪费垃圾袋，等快满了才扔。但是每次掀开桶盖都跟开盲盒似的，被各种难言的味儿熏一跟头，有几天吃水果比较多，打开桶盖跟天女散花一样，很多小虫子🪰。
疫情期间剩下不少酒精消毒液，最近灵机一动，每次饭后给厨余垃圾喷一点，几天下来既不生虫也没有怪味儿。🤪</description></item><item><title>通过 Karabiner-Elements 实现用 Esc 键关闭 Twitter App 的窗口</title><link>http://0x3f.org/posts/using-karabiner-elements-to-close-twitter-app-windows-with-the-esc-key/</link><pubDate>Fri, 25 Aug 2023 16:27:15 +0800</pubDate><guid>http://0x3f.org/posts/using-karabiner-elements-to-close-twitter-app-windows-with-the-esc-key/</guid><description>Twitter for macOS 不支持用 Esc 键关闭图片预览窗口，不符合我的习惯。下面是针对 Twitter App 把 Esc 键映射为 Cmd+W 的配置。</description></item><item><title>PictureView: 极简而好用的 macOS 看图 App</title><link>http://0x3f.org/posts/pictureview-simple-easy-to-use-macos-image-viewer-app/</link><pubDate>Fri, 25 Aug 2023 11:01:42 +0800</pubDate><guid>http://0x3f.org/posts/pictureview-simple-easy-to-use-macos-image-viewer-app/</guid><description>之前用的 Xee 看图的时候经常雪花屏，所以换了 PictureView 。
有这些特点：
启动速度很快。 界面简洁。 支持关闭图片自动退出。 提供 4 种浏览布局。 支持快捷键。</description></item><item><title>从 macOS 桌面运行 Neovide 的方法</title><link>http://0x3f.org/posts/how-to-run-neovide-from-macos-desktop/</link><pubDate>Mon, 21 Aug 2023 17:07:48 +0800</pubDate><guid>http://0x3f.org/posts/how-to-run-neovide-from-macos-desktop/</guid><description>截至当前版本（0.11.1），Neovide 在 macOS 下只能从命令行启动，为方便起见，有时候我希望通过 RayCast 或者 Dashboard 启动它，或者通过右键菜单“Open with”用它直接打开选中的文件。
方法是通过 Automator 创建一个“Application”类型的新文档，添加一个“Run AppleScript”的 Action 。然后填入下面的内容：
最后将文档保存到 Application 目录，命名为“Neovide”。</description></item><item><title>文石 Poke5S 的使用感受</title><link>http://0x3f.org/posts/hands-on-boox-poke5s/</link><pubDate>Sat, 19 Aug 2023 18:25:50 +0800</pubDate><guid>http://0x3f.org/posts/hands-on-boox-poke5s/</guid><description>之前提到想挑一个便携美观的微信读书载体，第一眼就被文石 Poke5S 的白色机身吸引了。
试用了一段时间，总结了一些比较戳我的优点：
便携：可能是长宽最小的 6 寸阅读器。 美观：白色，做工质感还可以。 屏幕：Carta 1100 （销售宣传诈称 Carta 1200）。 操作：日常操作、翻页速度较快。 配件：支持磁吸保护壳，自动休眠、唤醒。 还有缺点：
屏幕：像素密度 212 PPI 。 残影：图片显示有明显残影。 背光：有明显的灯箱效果。 购买：白色版捆绑销售保护壳，价格太贵。 鉴于 212 PPI 和背光的灯箱效果降低了阅读体验，考虑到这个价格，最后还是退货了。</description></item><item><title>翰林阅 Read6 Pro 的使用感受</title><link>http://0x3f.org/posts/hands-on-hanlinyue-read6-pro/</link><pubDate>Sat, 12 Aug 2023 15:29:09 +0800</pubDate><guid>http://0x3f.org/posts/hands-on-hanlinyue-read6-pro/</guid><description>虽然 Kindle 退出中国对我影响不大，但是近期想看的一些特定版本的书在其它地方没有找到、却在微信读书里垂手可得，所以想着挑个方便的阅读器。先是尝试了文石的 Poke5S ，各方面都挺好，就是屏幕分辨率只有 212 PPI 。然后正好看到了翰林阅 Read6 Pro 预售的消息，看配置非常符合我的想象：
便携美观：6 英寸、白色。 显示效果好：Carta 1200、300 PPI、无盖板。 运行流畅：4G 运存、4核×1.5GHz CPU 。 微信读书友好：入口在一级菜单。 但是到手后很失望。
最大的问题是背光效果很差，泛蓝、不均匀，看着很难受，到了完全无法接受的程度。
另外前面板边缝很明显，让当年的 Kindle Paperwhite 都自叹不如，按压有咔哒声。第三个问题是字体墨迹不均匀，升级固件后好了点，但还是能看出来。虽然有 4G 运存，但是翻页速度的表现不好。最后就是送了一堆非常差的配件：翻页器做工很差，按键手感难以言表；支架质感极差，有股呛人的味儿；保护套没看，没有开盒的心情了，把印象分直接拉到谷底。
没想到这都 2023 年了，挑个中意的阅读器还是那么难！</description></item><item><title>用 SuperDuper! 配合迁移助理加速 Mac 的迁移</title><link>http://0x3f.org/posts/speed-up-mac-migration-with-superduper-and-migration-assistant/</link><pubDate>Sat, 05 Aug 2023 22:29:54 +0800</pubDate><guid>http://0x3f.org/posts/speed-up-mac-migration-with-superduper-and-migration-assistant/</guid><description>用迁移助理迁移数据到一台新的 Mac ，点对点传输提示要几个小时。改用 SuperDuper! 复制到固态移动硬盘，再用迁移助理迁移，几分钟就好了。
趁着今年 SSD 降价攒了个移动硬盘，把机械的卖了，省了太多时间了。</description></item><item><title>变形金刚 MPM-13 眩晕玩评</title><link>http://0x3f.org/posts/hands-on-transformer-mpm-13-blackout/</link><pubDate>Sat, 07 Jan 2023 22:20:32 +0800</pubDate><guid>http://0x3f.org/posts/hands-on-transformer-mpm-13-blackout/</guid><description>我对 MPM-13 的感受比较复杂。
一方面，人形和隐藏形态俱佳，材质和做工在近年官方出品的东西里面也属上乘，变形过程虽然复杂，但是依然有官方玩具常有的逻辑在里面，不像很多第三方的设计为变形而变形。但是同时，面对这较大的体型和复杂的变形步骤，我要做足心理建设才能鼓足勇气变它一次。这不符合我对一款好的变形金刚的判断标准。
在我看来，变形金刚最大的价值在于变形过程是不是好玩。所谓好玩，就是流畅有逻辑，既不简陋又没有不必要的复杂，像很多第三方为了追求两种形态的极致还原而把变形过程设计得极其复杂就属于舍本逐末了。昨天收拾箱子的时候看到 IDW 的宇宙飞碟、滑翔机等几个指挥官级的老玩具，拿起来随手一变，很有乐趣。回头想想，变形金刚最吸引我们的地方不就在于玩的过程么。讲人形，不如高达，讲隐藏形态，不如各种模型，变形金刚不是什么高大上的东西，相反，就是个闲来无事时拿来享受个人时光和回忆的玩具。
一款玩具不应该让人有心理负担，所以 MPM-13 是个适合站柜的镇宅神物，但不是个可以随手变个来回享受简单乐趣的好玩具。
再来聊聊它的本体。
自从 MP 系列涨价、质量下降以及 3.0 接连翻车之后，最近几年我就没再买过这个系列的东西。这次 MPM-13 实在是挑不出什么大毛病，价格也合适，算是回坑了。
八角尖尖，不成想盒封最完美的一次来自拼多多。
隐藏形态是 MH-53 重型运输直升机，解决了 SS-08 底盘暴露的问题，360 度无死角，即便在 MP 线里也是无出其右。就是缺个支架，飞机没有支架就没有灵魂。
人形，迄今最还原的眩晕。电影线最失败的地方在于反派的造型和人设塑造得太差劲，眩晕在霸天虎里算是相对较好的，人设没那么不堪，反派形态的猥琐特征被大量的板件遮盖，反而显得很有机械感。</description></item><item><title>读《叫魂》小记</title><link>http://0x3f.org/posts/a-short-review-of-soulstealers/</link><pubDate>Thu, 22 Dec 2022 22:29:41 +0800</pubDate><guid>http://0x3f.org/posts/a-short-review-of-soulstealers/</guid><description>前段时间大概是因为防疫政策的关系，有几个书名在网上很常见，《叫魂》是其中的一个。
书的主要内容是乾隆年间起自民间、漫延数省的一阵对妖术索魂的社会性恐慌，并最终被灌水诗人、盖章爱好者乾隆大帝解读为针对满清统治的政治阴谋，继而调动全国官僚系统追索因刑讯逼供而幻想出来的幕后谋主的事件。围绕叫魂事件对其产生的社会背景、皇帝的心理和官僚阶层的应对之策等方面做了一些讨论。
翻译札记里有段话说得很好：
君主是如何实现其对官僚的控制的呢？孔飞力通过对叫魂妖术危机的进一步讨论，提出了“政治罪”这样一个概念。他强调了政治罪为帝国政治的运作提供了燃料。按照他的定义，政治罪指的是威胁帝国安全的各种形式的谋反，它们是超出常规的非常事件，无法由官僚制度的行政常规来处理。这种非常的形势给了君主极大的自由来动员、驱策和整肃他的官僚，并强化他对官僚机器的控制（因为在常规情况下，一切行政事务都可以、而且应该照章办事，专制君主也不得不遵守由这些行政则例所定下的游戏规则，这种常规的管理给君主的活动留下的空间有限） 。在叫魂危机中，乾隆皇帝正是利用了妖术恐惧这样的非常事件，迫使整个官僚机器把清剿当做压倒一切的政治，并以清剿的表现来赏罚官僚，从而强化他对官僚的控制的。
太祖的大字报和世宗的轮子大抵如此，但如果非要影射当下以寄托对时情的不满，似乎又有点玩弄阴谋论的肤浅的小聪明了。</description></item><item><title>OmniFocus 插件 generate-work-journal v4.0 小记</title><link>http://0x3f.org/posts/omnifocus-plugin-generate-work-journal-v2.0-release-notes/</link><pubDate>Sun, 18 Dec 2022 16:32:34 +0800</pubDate><guid>http://0x3f.org/posts/omnifocus-plugin-generate-work-journal-v2.0-release-notes/</guid><description>OmniFocus 是个非常强大的待办列表 App ，最大的特点之一是支持开发插件。如果你跟我一样有各种稀奇古怪的需求且其它待办 App 不能满足时，可以试试它，尽管很贵，但是很值。
generate-work-journal 是一个生成工作日志的工具，可以根据当天完成的、满足特定条件的任务一键生成日报，以节省时间。
包含以下特性：
只对特定目录下的日志有效。 支持大型任务（包含多项任务的 project ）和单项任务。 多种输出格式： 纯文本 Markdown 无序列表 Markdown 有序列表 自动追加任务状态描述： 进行中 已完成 自定义 通过标签过滤不需要的记录。 今天 generate-work-journal 发布了 4.0 版本，加入了自动判断状态为“进行中”的任务的功能。对于设置为周期重复的任务，如果还存在待执行状态的记录，那么当天已完成的记录将被认为是“进行中”。可以在设置选项中指定该状态的文字描述，和“已完成”状态一样，如果文字描述为空，最终生成的日志内容将不包含状态的描述。</description></item><item><title>OmniFocus 插件 checklist v2.0 小记</title><link>http://0x3f.org/posts/omnifocus-plugin-checklist-v2.0-release-notes/</link><pubDate>Sun, 11 Dec 2022 18:20:34 +0800</pubDate><guid>http://0x3f.org/posts/omnifocus-plugin-checklist-v2.0-release-notes/</guid><description>OmniFocus 是个非常强大的待办列表 App ，最大的特点之一是支持开发插件。如果你跟我一样有各种稀奇古怪的需求且其它待办 App 不能满足时，可以试试它，尽管很贵，但是很值。
checklist 是一个把 OmniFocus 变成检查清单 App 的插件，源自我周期性重复检查一些事项的需求，例如：收拾行李、储备物资和审查代码。
之前用过一款专门的手机 App ，对于检查清单这个领域来说，确实做得已经很极致了，但是最大的问题是没有电脑端，对于像代码审查这种需要更多、更复杂的编辑操作的清单来说，在手机上操作真是太麻烦了。还有一点就是手机毕竟还不是一个常规意义上的“正经”工具，工作时间捧着手机显得很奇怪。
checklist 就是这种背景下的产物。它的基本逻辑是：用 OmniFocus 的 project 当清单模板，一个 project 对应一个模板。模板集中存在专门的 folder 下。在需要检查清单的 project 下点击插件按钮选择清单模板，将在该 project 下创建和模板中相同的任务列表。
以下录屏直观地展示了插件的用法：
凭借 OmniFocus 原本就很强大的任务列表功能， checklist 近乎完美地实现了我对一个检查清单 App 的需求。不光我的手机上又少了一个 App ，而且考虑到那个 App 高达一百多的售价，说支持多端的 checklist 价值 200￥ 似乎也不过分。</description></item><item><title>OmniFocus 插件 reschedule-objects v3.0 小记</title><link>http://0x3f.org/posts/omnifocus-plugin-reschedule-objects-v3.0-release-notes/</link><pubDate>Fri, 02 Dec 2022 19:53:34 +0800</pubDate><guid>http://0x3f.org/posts/omnifocus-plugin-reschedule-objects-v3.0-release-notes/</guid><description>OmniFocus 是个非常强大的待办列表 App ，最大的特点之一是支持开发插件。如果你跟我一样有各种稀奇古怪的需求且其它待办 App 不能满足时，可以试试它，尽管很贵，但是很值。
reschedule-objects 是一个给选中的任务或项目快速排期的插件，源自我特定的时间做特定的事的需求。
今天 reschedule-objects 发布了 3.0 版本，主要包括三部分的变化。
首先是重构。随着我写的插件数的增加，有些代码可以复用，有些 Omni Automation API 比较烦琐，所以有了封装一个工具类的想法，正好 Omni 应用也支持这样，所以封装了 libdev 开发库。另外，之前很多地方写得很差劲，这次也一并优化了一下。
其次是用多选组件模拟单选操作，实现了用户体验的提升。Omni Automation API 对于单选操作只提供了下拉列表这一个组件，对于高频操作会显得很低效，这段时间用下来觉得很难受。文档说表单的验证方法可以增减表单里的字段，利用这一点曲线解决了这个问题，用多选组件实现了 radio group 。缺点是切换选项时表单可能产生抖动。
第三个变化是加入了清除排期的功能。目前还需要通过同一个入口触发，最多需要三次点击。还有优化空间，考虑未来重构成多 Action 的插件，可以通过单独的按钮触发，最少只要一次点击就可以了。</description></item><item><title>保存 tweet 到 OmniFocus 的快捷指令</title><link>http://0x3f.org/posts/a-shortcuts-that-saves-tweets-to-omnifocus/</link><pubDate>Tue, 22 Nov 2022 21:34:25 +0800</pubDate><guid>http://0x3f.org/posts/a-shortcuts-that-saves-tweets-to-omnifocus/</guid><description>保存 tweet 到 OnniFocus 并提取内嵌链接的快捷指令，绕过了iOS 16 快捷指令“Make rich text from HTML”丢失编码信息导致乱码的 bug 。
https://www.icloud.com/shortcuts/fc68643daa044b44959f16b0a94ec598</description></item><item><title>用 Obsidian 写博客的方法</title><link>http://0x3f.org/posts/how-to-write-blog-with-obsidian/</link><pubDate>Sun, 23 Oct 2022 17:09:28 +0800</pubDate><guid>http://0x3f.org/posts/how-to-write-blog-with-obsidian/</guid><description>我用 Hugo + GitHub Pages 写博客，之前一直通过命令新建文章，然后在编辑器里一项一项修改 Front Matters ，最后再通过命令提交上去。有一天突然觉得这样太麻烦了，应该可以用图形界面简化一下。
Typora 收费之后，Obsidian 可能是最好的免费 Markdown 编辑器了。这里用到三个插件：QuickAdd 、 Templater 和 Obsidian Git 。
在 Hugo 目录下创建两个子目录 templates 和 scripts ，设置 Templater 的选项 Template folder location 为 templates 。
然后在 templates 目录下创建模板 New Post.md：
1 2 3 4 5 6 7 8 9 --- title: &amp;#34;{{VALUE:articleTitle}}&amp;#34; slug: &amp;#34;{{VALUE:articleSlug}}&amp;#34; date: {{VALUE:articleTimestamp}} categories: [&amp;#34;{{VALUE:articleCategory}}&amp;#34;] tags: toc: false draft: true --- 在 scripts 下创建脚本 create_new_post.js：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 module.</description></item><item><title>自动设置节假日和工作日闹钟的快捷指令</title><link>http://0x3f.org/posts/yet-another-shortcuts-that-sets-alarms-for-chinese-holidays-and-workdays-automatically/</link><pubDate>Thu, 20 Oct 2022 22:23:04 +0800</pubDate><guid>http://0x3f.org/posts/yet-another-shortcuts-that-sets-alarms-for-chinese-holidays-and-workdays-automatically/</guid><description>写了个自动设置节假日和工作日闹钟的快捷指令，数据源用的是苹果官方的“中国大陆节假日”日历。
https://www.icloud.com/shortcuts/97960ed8326e43d387b0d7bb459667dd
需要先订阅上述日历，订阅方法见这个快捷指令里的说明。
最后把它配置到自动化（比如助眠开始时执行）里就可以了。</description></item><item><title>用 Hammerspoon 收集 Arc 浏览器网页到 OmniFocus 的方法</title><link>http://0x3f.org/posts/how-to-collect-webpage-from-the-arc-browser-to-omnifocus/</link><pubDate>Wed, 19 Oct 2022 23:02:50 +0800</pubDate><guid>http://0x3f.org/posts/how-to-collect-webpage-from-the-arc-browser-to-omnifocus/</guid><description>我用 Hammerspoon 收集网页到 OmniFocus ，它的 SendToOmniFocus 对 Chrome 家族的浏览器有原生的支持，但并不适用于 Arc 浏览器。
看 SendToOmniFocus 的源码是用 Apple Script 获取 Chrome 家族浏览器中网页的信息的，但最初我没有解决怎样用同样的办法拿到 Arc 浏览器网页信息的问题。所以采取通过剪贴板中转的方式实现。
首先配置 Surfingkeys 实现把网页信息组装成特定格式复制到剪贴板：
1 2 3 4 5 6 7 8 9 10 11 mapkey(&amp;#39;yO&amp;#39;, &amp;#39;Copy OmniFocus sensible info.&amp;#39;, yankOmniFocusSensibleInfo); function yankOmniFocusSensibleInfo() { var info_arr = []; info_arr.push(&amp;#34;#omnifocus_sensible&amp;#34;); info_arr.push(document.title); info_arr.push(window.location.href); Clipboard.write(info_arr.join(&amp;#34;\n&amp;#34;)); } 然后在 Hammerspoon 中监听剪贴板，一旦发现特定格式的文本，就调用 Apple Script 填充解析到的网页信息到 OmniFocus 的对话框：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 -- Interpolate table values into a string -- From http://lua-users.</description></item><item><title>用 Caddy 做 Home Lab 的反向代理</title><link>http://0x3f.org/posts/reverse-proxying-home-lab-with-caddy/</link><pubDate>Sun, 16 Oct 2022 22:37:08 +0800</pubDate><guid>http://0x3f.org/posts/reverse-proxying-home-lab-with-caddy/</guid><description>我原本用 SWAG 做 Home Lab 的反向代理，它自带很多服务的配置模板，只需要复制后改几个参数就能工作，还有通过 ACME 自动更新 SSL 证书的功能，但是从某个时间起，首次访问经由它代理的服务会报 404 或 502 的错误，刷新页面就恢复正常，然后隔段时间后又会再次发生，另外还会偶尔出现页面无法显示最新的状态的问题，尤以当服务出错时发生居多。
最近尝试用 Caddy 代替 SWAG ，效果非常好，再也没有出现上述问题。而且 Caddy 的使用很简单，只需要在 Caddyfile 中加几行配置信息就能实现对一个服务的反向代理。当然，它也集成了自动更新 SSL 证书的功能。此外，它的镜像只有 80 多 MB ，在我测试的几个反向代理服务里是最节省空间的。
出于安全考虑，我没有把 Home Lab 的服务暴露在公网上，所以需要通过 DNS challenge 的方式申请 SSL 证书。我的 Docker 容器部署在 Unraid 上，官方软件仓库里的 Caddy 镜像并不包含 Cloudflare 的模块，所以找了个打包了该模块的镜像，看起来更新得还很及时。
镜像的 README 里有申请 Cloudflare API Token 的说明，部署容器前填到环境变量里即可。这里有个小坑，创建容器前需要手动创建 Caddyfile ，空文件就行，否则会报错：
Are you trying to mount a directory onto a file
Caddy 不如 SWAG 的地方是没有为服务提供配置模板，所以我保留了后者的配置目录，作为在前者中配置服务时的参考。以下是我的 Caddyfile 的示例，展示了怎样配置泛域名的反向代理和 SSL 证书的自动申请，以及服务的几种典型反向代理配置：</description></item><item><title>Leaderf-phpnamespace: Yet another PHP namespace resolver</title><link>http://0x3f.org/posts/leaderf-phpnamespace-yet-another-php-namespace-resolver/</link><pubDate>Sun, 25 Sep 2022 22:33:13 +0800</pubDate><guid>http://0x3f.org/posts/leaderf-phpnamespace-yet-another-php-namespace-resolver/</guid><description>This plugin uses the power of LeaderF to perform PHP namespace related tasks.
https://github.com/xbot/Leaderf-phpnamespace
Features Insert use statements for FQCNs. Sort use statements alphabetically. Expand class names to FQCNs. Insert namespace for the current file. All the above features support the fuzzy searching function and all the three modes (nameonly, fullpath and regex) provided by LeaderF. Requirements LeaderF ctags is properly configured in Vim/Neovim. Install Use any of your favourite plugin manager to install it, for example:</description></item><item><title>Unraid 6.11 弃用 NerdPack 的解决办法</title><link>http://0x3f.org/posts/how-to-install-packages-after-nerdpack-is-deprecated-in-unraid-6.11/</link><pubDate>Sun, 25 Sep 2022 21:29:41 +0800</pubDate><guid>http://0x3f.org/posts/how-to-install-packages-after-nerdpack-is-deprecated-in-unraid-6.11/</guid><description>Unraid 6.11 的 release note 没提弃用 NerdPack ，浪费了我很多时间。😞
当前版本的 Unraid 是基于 Slackware 15.0 的，可以手动从以下站点下载软件包手动安装：
https://slackware.pkgs.org/15.0/slackware-x86_64/ https://slackonly.com/pub/packages/15.0-x86_64/ 把下载的软件包放到运行中的 Unraid 的 /boot/extra 目录（不存在就手动创建）下，重启系统后自动安装或者通过 installpkg 命令手动安装。例如：
1 installpkg vim-8.2.4256-x86_64-1.txz 更简单的方法是使用 un-get ：
1 2 3 4 5 6 un-get search vim un-get install python3 python-pip python-setuptools un-get remove vim un-get update un-get cleanup un-get upgrade 这个命令目前不解决依赖关系，而且存在部分包无法下载或找不到的现象，还是需要手动干预。
作者没有在项目主页写安装说明，而是写在 Reddit 帖子里了。
2022-10-07 更新 出了个新的 NerdTools ，界面和 NerdPack 一样难用，包的数量现在还很少，但版本较新，还有一些 un-get 目前搜不到的包（比如: fzf）。可以作为补充。</description></item><item><title>用 Neovim 调试 RESTful 接口</title><link>http://0x3f.org/posts/send-restful-requests-with-neovim/</link><pubDate>Sun, 18 Sep 2022 11:31:16 +0800</pubDate><guid>http://0x3f.org/posts/send-restful-requests-with-neovim/</guid><description>纯文本有很多好处，比如可以用 Git 管理，方便备份和追溯，方便多机同步和分享。
之前使用 VS Code 的插件 Rest Client ，从浏览器后台复制请求数据过来就可以用，很方便。但是存在一些用起来不舒服的地方，比如：
不方便对接口分组管理。 不方便快速查找接口。 这些在对纯文本操作效率更高的 Vim 里都可以解决，但是之前尝试过的一些 Vim 的 RESTful 客户端插件还不成熟，最近发现 rest.nvim 基本可以满足日常使用需要了。
rest.nvim 是个 Neovim 的插件，和 Rest Client 支持的格式差异较小，迁移很方便。这样我就可以用 Vim 的折叠特性对接口分组管理，用插件 Leaderf 的模糊查找特性快速定位接口，当然，对纯文本的任何编辑和操作在 Vim 里就是浑然天成、行云流水的。
它的大致用法如下：
在工作目录下创建环境变量文件 .env ：
1 2 3 4 5 6 base_url=http://myapp.dev header_accept_json=application/json, application/problem+json, text/plain, */* header_content_type_json=application/json;charset=utf-8 header_cookie_debug_session=XDEBUG_SESSION=1;app_session=1ObUjvLvEYjVhJ8tbzn5BorN7TViNtI1S625140e user_email=user@test.com user_password=password 在工作目录下创建请求文件（例如 myapp.http ）：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ### Login POST {{base_url}}/v1/sessions Accept: {{header_accept_json}} Content-Type: {{header_content_type_json}} Cookie: {{header_cookie_debug_session}} {&amp;#34;email&amp;#34;: &amp;#34;{{user_email}}&amp;#34;, &amp;#34;password&amp;#34;: &amp;#34;{{user_password}}&amp;#34;} ### Get an article GET {{base_url}}/v1/articles/DiJeb7IQHo8FOFkXulieyA Accept: {{header_accept_json}} Cookie: {{header_cookie_debug_session}} ### Create an article POST {{base_url}}/v1/articles Accept: {{header_accept_json}} Cookie: {{header_cookie_debug_session}} Content-Type: {{header_content_type_json}} { &amp;#34;title&amp;#34;: &amp;#34;Hello world&amp;#34;, &amp;#34;Content&amp;#34;: &amp;#34;This is a dummy post.</description></item><item><title>给 Vim 插件做快照</title><link>http://0x3f.org/posts/create-snapshot-for-vim-plugins/</link><pubDate>Tue, 06 Sep 2022 23:28:26 +0800</pubDate><guid>http://0x3f.org/posts/create-snapshot-for-vim-plugins/</guid><description>我的 Vim 插件数快到 150 了，弊端也越来越明显。
最大的问题是稳定性，经常批量更新后发现某个功能不工作了，尤其是大部分问题只有在用到的时候才发现，非常影响效率。
我用的插件管理工具是 vim-plug ，虽然有回滚到上一次的功能，但是我手比较欠，经常频繁更新，往往发现一个问题时已经更新了几次了，所以这个功能对我来说不是很适用。
好在它提供了做快照的命令 :PlugSnapshot ，其实就是把当前所有插件的 Git 哈希值输出到一个 Vim 脚本里，恢复快照的时候只要执行这个脚本就行了。
为了方便使用，创建一个自定义命令：
1 command! SnapshotPlugins PlugSnapshot ~/.vim/plugin.lock 然后把生成的 plugin.lock 文件加入 Git 仓库，必要的时候可以利用 git bisect 快速找到问题出处。
恢复的命令如下：
1 vim -S plugin.lock</description></item><item><title>Leaderf-folder: Quickly open a subfolder</title><link>http://0x3f.org/posts/the-leaderf-folder-plugin/</link><pubDate>Sun, 07 Aug 2022 17:31:50 +0800</pubDate><guid>http://0x3f.org/posts/the-leaderf-folder-plugin/</guid><description>LeaderF-folder is a plugin for LeaderF that aims to open a subfolder quickly.
Requirements LeaderF fd Dirbuf: Optional, can be changed to other file managers. Setup This plugin takes Dirbuf as the default solution to open the chosen subfolder. You can use the following option to customize it:
1 let g:Lf_FolderAcceptSelectionCmd = &amp;#39;Dirbuf&amp;#39; Usage 1 :LeaderfFolder Press F1 to get more help</description></item><item><title>Laravel Horizon 简介</title><link>http://0x3f.org/posts/an-introduction-of-laravel-horizon/</link><pubDate>Sat, 06 Aug 2022 20:22:36 +0800</pubDate><guid>http://0x3f.org/posts/an-introduction-of-laravel-horizon/</guid><description>简介 Horizon 针对 Laravel 的 Redis 队列，增加了可视化、进程池等特性。
特性 可视化仪表板 Worker 进程池的维护和调度 词汇表 master supervisor: 主进程，通过 proc_open() 启动 supervisor 子进程。 environments: 可以按 APP_ENV 针对不同环境创建多套配置。 supervisors: Horizon 自己的进程池概念，与托管后台进程的软件 Supervisor 没有关系。 workers: 队列消费者进程，每个 supervisor 中包含多个 worker。 负载均衡策略 false 一个 supervisor 下的所有 worker 全部用于按队列名称的顺序逐个队列消费任务。
simple 一个 supervisor 下的所有 worker 被平均分配给每个队列。
auto 一个 supervisor 下空闲的 worker 会被优先分配给负载最高的队列。同时保证空闲队列有配置项 minProcesses 数量的 worker 待命。
超时提醒 如果一个队列执行任务的时间超过预先配置的时间限制，horizon 将终止该任务并可以通过短信、邮件或 Slack 发送通知。
Horizon 每分钟查询一次执行任务的时间超过配置值的队列：
每 5 分钟发送一次通知：
吞吐量和平均耗时统计 需要通过定时任务周期性执行 artisan horizon:snapshot 命令生成统计数据并存储到 Redis 中。</description></item><item><title>Pixel 5 每月更新后重刷 Magisk 的步骤</title><link>http://0x3f.org/posts/steps-to-reflash-magisk-after-pixel-5-monthly-update/</link><pubDate>Sat, 25 Jun 2022 17:22:57 +0800</pubDate><guid>http://0x3f.org/posts/steps-to-reflash-magisk-after-pixel-5-monthly-update/</guid><description>下载最新的 Factory Image 。
解压两次得到 boot.img 。
用数据线连接电脑并允许 USB 调试。
复制 boot.img 到手机
1 adb push boot.img /sdcard/Download/ 在手机上的 Magisk 里给 boot.img 打补丁。
执行命令
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # 把打完补丁的文件复制到电脑上 adb pull /sdcard/Download/magisk_patched-25101_MNbd5.img . # 启动到 bootloader adb reboot bootloader # 查看设备连接正常 fastboot devices # 刷 boot.img fastboot flash boot_a magisk_patched-25101_MNbd5.img fastboot flash boot_b magisk_patched-25101_MNbd5.img # 重启 fastboot reboot 参考 How to Patch Stock Boot Image via Magisk and Flash it using Fastboot Root Google Pixel 5 Android 12 using Magisk 附：更新 Pixel 5 的 Magisk 缩小状态栏的模块的步骤 直接覆盖原模块会导致功能不生效。</description></item><item><title>解决 PHPUnit 生成代码覆盖报告时抛出重复定义类的错误的办法</title><link>http://0x3f.org/posts/the-solution-of-class-redeclaration-error-raised-while-generating-php-code-coverage-report/</link><pubDate>Thu, 23 Jun 2022 14:42:34 +0800</pubDate><guid>http://0x3f.org/posts/the-solution-of-class-redeclaration-error-raised-while-generating-php-code-coverage-report/</guid><description>在生成 Cobertura 格式的代码覆盖报告时程序报了如下错误：
Generating code coverage report in Cobertura XML format &amp;hellip; PHP Fatal error: Cannot declare class App\FakeNamespace\GenericProvider, because the name is already in use in /builds/fake_project/app/FakeNamespace/GenericProvider.php on line 17
对应的代码和单元测试执行均无问题。
经排查，直接原因是使用了 Mockery 的 Instance Mocking 1特性 mock 代码中的硬依赖关系（Hard Dependency）。
该特性的实现利用了类的自动加载机制和依赖注入技术。对依赖关系 mock 的实例保存在 Mockery 的容器中，同时生成一个 stub 文件：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 &amp;lt;?php namespace Mockery; class Mockery_App_FakeNamespace_GenericProvider { private Container $container; function doSomething($param) { // internal code check expectations return $this-&amp;gt;container-&amp;gt;get(&amp;#39;App\FakeNamespace\GenericProvider::doSomething&amp;#39;)-&amp;gt;expectations(); } } 当代码中实例化这个类的时候，Mockery 自动加载该文件，从而代替了对原类文件的加载。</description></item><item><title>ClashX 在使用订阅链接的同时添加自定义规则的方法</title><link>http://0x3f.org/posts/customize-rules-for-clashx-while-using-a-subscribed-link/</link><pubDate>Wed, 22 Jun 2022 22:15:12 +0800</pubDate><guid>http://0x3f.org/posts/customize-rules-for-clashx-while-using-a-subscribed-link/</guid><description>在 ClashX 中使用机场的订阅链接时，如果需要添加自定义的规则，且在定时更新订阅的链接时不会被覆盖，解决的方法是创建一个新的配置文件，使用 Clash 的 proxy-providers 和 rule-providers 分别引用订阅的链接和开源的规则集：
然后就可以在 rules 区块里添加自定义规则了。</description></item><item><title>使用 lemonade 和 autossh 辅助 Neovim 远程开发</title><link>http://0x3f.org/posts/assisting-neovim-with-remote-development-using-lemonade-and-autossh/</link><pubDate>Thu, 19 May 2022 16:02:34 +0800</pubDate><guid>http://0x3f.org/posts/assisting-neovim-with-remote-development-using-lemonade-and-autossh/</guid><description>我的开发环境部署在 Linux VM 里，普通的远程复制用 vim-oscyank 插件是可以实现的。但是当我想用 fugitive 的 :GBrowse 命令打开 Gitlab 链接的时候遇到了困难，甚至我想退而求其次、通过 :GBrowse! 复制链接都不可得，因为 fugitive 的代码里通过 has('clipboard') 判断 Vim 是否可以使用系统剪贴板，且我的 Linux VM 不满足该特性的条件（见 :help clipboard）。所以用 lemonade 解决这个问题。
实现方式 lemonade 虽然支持客户端和服务端直接通信，但是并不提供安全保障，所以我采取 SSH 端口远程转发的方式并用 autossh 保持连接。
首先分别在服务端（MacOS）和客户端（Linux VM）创建 lemonade 的配置文件（~/.config/lemonade.toml）：
服务端：
1 2 3 port = 2489 allow = &amp;#39;127.0.0.1&amp;#39; line-ending = &amp;#39;lf&amp;#39; 客户端：
1 2 3 4 5 port = 2489 host = &amp;#39;localhost&amp;#39; trans-loopback = true trans-localfile = true line-ending = &amp;#39;lf&amp;#39; 然后创建 MacOS 的服务配置文件：</description></item><item><title>让 AdGuard Home 和 OpenClash 协同工作</title><link>http://0x3f.org/posts/make-adguard-home-and-openclash-work-together/</link><pubDate>Sun, 06 Mar 2022 12:12:10 +0800</pubDate><guid>http://0x3f.org/posts/make-adguard-home-and-openclash-work-together/</guid><description>家庭网络环境 使用 OpenWrt （以下简称 OP ）做旁路网关 OP 内建 OpenClash （以下简称 OC ）访问不存在的网站 OP 内建 WireGuard （以下简称 WG ）做内网穿透 使用 AdGuard Home （以下简称 AH ）做内网 DNS 和广告过滤 之前遇到的问题 不管怎样配置，内网和 WG 下的内网主机名解析和科学上网这 4 种场景总有至少一个不工作。
期间创建过一个虚拟机做独立的 WG Server ，内建 SmartDNS （以下简称 SD ）做 AH 的上游，其它场景工作得很好，只是无法通过旁路网关访问不存在的网站。
解决方法 首先如果要正常使用 OC ，就必须使用它的 DNS 解析。
同时，又要达到使用 AH 做内网主机名解析和广告过滤的目的，所以要把 OC 设成 AH 的唯一上游。
然后最棘手的问题来了。如果把 AH 设成 dnsmasq 的上游， WG 下不能解析内网主机名。如果把 AH 设成监听 53 端口，则内网无法解析主机名。
想到之前在独立的 WG Server 上用 SD 在两种场景下都可以正常解析，就试着用它代替 dnsmasq ，结果柳暗花明，所以场景都跑通了。</description></item><item><title>为 Seafile 配置反向代理的问题</title><link>http://0x3f.org/posts/setup-reverse-proxy-for-seafile/</link><pubDate>Mon, 10 Jan 2022 23:27:08 +0800</pubDate><guid>http://0x3f.org/posts/setup-reverse-proxy-for-seafile/</guid><description>我目前用 SWAG 做 Homelab 的反向代理，在和其它服务一样为 Seafile 配置好后，访问时却报如下错误：
Contradictory scheme headers
原因是 Seafile 的 Docker 镜像里已经使用了 NGINX 做反代，而且配置里包含和 SWAG 反代相同的配置项：
1 proxy_set_header X-Forwarded-Proto $scheme； 此时，通过 HTTPS 访问的 SWAG 反代传递的 HEADER 里 X-Forwarded-Proto 是 https ，而通过 HTTP 访问的 Seafile 传递的是 http ，就会报以上错误。
一种解决方法是，把 Seafile 的 /etc/nginx/conf.d/seafile.nginx.conf 复制到宿主机，把文件中 X-Forwarded-Proto 这一行注释掉，然后映射到 Docker 容器的上述路径上：
1 -v &amp;#39;/mnt/user/appdata/seafile/seafile.nginx.conf&amp;#39;:&amp;#39;/etc/nginx/conf.d/seafile.nginx.conf&amp;#39;:&amp;#39;ro&amp;#39; 需要注意的是，不同版本的 Seafile 镜像里该文件的路径可能不同。</description></item><item><title>希捷 Basic 简系列和东芝新小黑 A3 的简单对比</title><link>http://0x3f.org/posts/seagate-basic-vs-toshiba-a3/</link><pubDate>Mon, 10 Jan 2022 22:15:16 +0800</pubDate><guid>http://0x3f.org/posts/seagate-basic-vs-toshiba-a3/</guid><description>把个人数据收集到 NAS 之后，我开始着手实现 NAS 的异地备份，以补足数据安全的最后一环。
综合考虑过多种方案之后，感觉还是通过移动硬盘冷备最合适我目前的状况。之前闲置的 Buffalo 3.5&amp;rsquo; 外置硬盘不方便携带，所以放在家里做冗余备份。新买一块 2.5&amp;rsquo; 移动硬盘，每隔一段时间拿回家更新一下备份。
正好希捷 Basic 简系列和东芝新小黑 A3 有优惠，分别以 380 ￥和 370 ￥的价格入手了 2T 容量款，对比结果如下：
写入速度方面，200G 大文件，东芝比希捷快大概一分钟，速度分别为 142 MB/s 和 137 MB/s 。另对一个总大小为 140G 的目录（内含多个大文件）做写入的结果也是前者比后者稍快一点。
温度表现上，写入过程中东芝保持在 41℃ 左右，希捷在 45℃ ~ 51℃ 的范围。
希捷的尺寸（117mm × 80mm × 14.8mm）比东芝（109mm × 78mm × 14.0mm）明显大一些。
价格也是东芝更便宜。
外观上都是塑料感很强，正面简单到只有一个 LOGO ，背面是规格标签，东芝的标签居中而且尤其大，十分难看。正面棱角稍方，底部稍圆润，虽然是为了优化握持感，但我觉得不太好看。希捷只有灰色款有优惠，到手观感确实不如黑色。
整体来说，东芝的这款 2T 的新小黑 A3 在可见的各方面都比同容量希捷 Basic 简系列更有优势。</description></item><item><title>我在用的 OmniFocus 插件</title><link>http://0x3f.org/posts/the-omnifocus-plugins-i-am-using/</link><pubDate>Sat, 25 Dec 2021 22:05:40 +0800</pubDate><guid>http://0x3f.org/posts/the-omnifocus-plugins-i-am-using/</guid><description>检查列表 xbot/omnifocus-plugin-checklist
在 OmniFocus 中指定一个 folder ，其下的所有 project 都将作为 checklist 的模板。
选中一或多个 projects 并触发这个插件的 action ，在弹出的对话框中选择要用的模板，将会在目标 projects 中创建同名 task ，模板中的 tasks 创建为该 task 的子任务。
模板的 Parallel 、 Complete with last action 、 tags 和 note 会被同步过去。
生成工作日志 xbot/omnifocus-plugin-generate-work-journal
用于每天下班前一键生成工作日志。
插件会收集名为 Work 的目录下当天完成的 Tasks 并根据 Task 标题和 Note 的内容追加不同的状态描述。例如，标题包含“面试”的 Task 不追加状态描述；Note 为空的 Task 追加“完成”，否则追加 Note 的内容。目录目前是写死的，没有做通用性适配。
打开 Jira Ticket xbot/omnifocus-plugin-open-jira-ticket
从被选中的 Project 标题中解析 Jira Ticket 序号，并根据配置的 Jira URL 打开对应的 Ticket 。如果选中的是 Task ，使用其所属的 Project 。</description></item><item><title>在 gv.vim 中使用 Diffview.nvim 查看提交内容</title><link>http://0x3f.org/posts/check-commit-with-diffview-in-gv-vim/</link><pubDate>Thu, 23 Dec 2021 14:42:03 +0800</pubDate><guid>http://0x3f.org/posts/check-commit-with-diffview-in-gv-vim/</guid><description>Vim 没有很好的 Git commits viewer ，普通的 diff 模式对于很小的 commit 还行，文件较多、改动较大的 commit 看起来很糟糕。
gv.vim + Diffview.nvim 是我目前找到的最好的解决方案，下面稍加配置，实现在 gv.vim 的 log 界面通过快捷键 vv 在 Diffview.nvim 里打开光标所在行对应的 commit ：
1 2 3 4 5 6 7 8 9 10 11 12 lua &amp;lt;&amp;lt; EOF function _G.diff_view_commit(commit_hash) require&amp;#39;diffview&amp;#39;.open(commit_hash .. &amp;#39;~1..&amp;#39; .. commit_hash) end EOF au! FileType GV nnoremap vv &amp;lt;Esc&amp;gt;:call &amp;lt;SID&amp;gt;DiffviewCommitUnderCursor()&amp;lt;CR&amp;gt; function! s:DiffviewCommitUnderCursor() normal! ^2f w call v:lua.diff_view_commit(expand(&amp;#39;&amp;lt;cword&amp;gt;&amp;#39;)) endfunction</description></item><item><title>Hammerspoon 快速入门</title><link>http://0x3f.org/posts/hammerspoon-quick-start/</link><pubDate>Mon, 13 Dec 2021 00:38:06 +0800</pubDate><guid>http://0x3f.org/posts/hammerspoon-quick-start/</guid><description>Hammerspoon（以下简称 HS）是个很好用的效率工具脚手架，我一直用它实现 APP 启动器、窗口控制、桌面常亮等功能。
HS 可以通过写脚本可以实现很多个性化的需求。最快的上手方式是直接安装别人写好的脚本，然后根据自己的需要稍加修改即可。如果需要深度定制，可以自行实现新的模块。
HS 使用 Lua 语言。我在 08 年左右用过一年的 SciTE 编辑器，它也通过内嵌的 Lua 配置和扩展功能，所以学了这个语言。当时 NGINX 也才刚起步， Lua 主要还是被用在游戏脚本的开发，并没有现在使用得如此广泛。当时对这个语言的印象是两个极端，一是速度非常快，远远超过 PHP 和 Python ，比 C 也只慢一点点；二是开发库非常简陋，其它脚本语言一行就能实现的常见功能，它往往要从头开始写。
总之 Lua 是个很精简的语言，可以通过 Y 分钟速成 X 的教程快速熟悉它的语法，然后浏览一遍官方入门指南。HS 提供了很多方便的模块，通过 API 文档查看。
由于经常需要切换键盘映射方案，所以我写了一个简单的模块来实现这个功能：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 local hotkey = require &amp;#34;hs.</description></item><item><title>自动追剧的工作流</title><link>http://0x3f.org/posts/auto-workflow-of-following-tv-series-and-movies/</link><pubDate>Sun, 21 Nov 2021 17:16:15 +0800</pubDate><guid>http://0x3f.org/posts/auto-workflow-of-following-tv-series-and-movies/</guid><description>在 NAS 上搭了个自动追剧、追影的工作流，体验非常好。
只需要把想看的美剧或者电影添加到监控列表里，就可以在资源出现之后自动下载并通知到手机或电脑，全程无值守，回家打开电视就能看。
用到这些工具：
Jackett: BT 索引工具，负责搜索资源。 Prowlarr: Jackett 的平替，和 Radarr/Sonarr 同步 indexer 更方便，对 torrent 网站的限流机制处理得更好。 Sonarr: 电视剧管理工具，负责管理追剧列表、调用 Jackett 搜索、资源监控、下载调度。 Radarr: 电影管理工具，功能同 Sonarr 。 qBittorrent: BT 下载工具。 ChineseSubFinder: 字幕搜索工具。 Jellyfin: 媒体中心，负责影视剧转码、播放、管理。 Telegram: 接收通知。 nzb360: Android APP ， Sonarr 、 Radarr 、 qBittorrent 的客户端。 LunaSea: iOS 的 nzb360 平替，功能和用户体验稍逊后者。 Jackett 是 BT 资源索引工具，可以对添加到索引列表中的 BT 资源站点做集中搜索。
在 Jackett 因某个 indexer 由于其网站的限流措施而响应失败导致 Radarr 无法搜索且无法修改 indexer 配置后，我改用了 Prowlarr 。它不仅解决了之前遇到的问题，还可以自动同步 indexer 配置到 Radarr 和 Sonarr，并且它们的 UI 也十分统一。</description></item><item><title>我的第一台 NAS</title><link>http://0x3f.org/posts/my-first-nas/</link><pubDate>Sun, 10 Oct 2021 21:50:12 +0800</pubDate><guid>http://0x3f.org/posts/my-first-nas/</guid><description>年初终于攒了一台 NAS 。
之前用一块 1T 的 Buffalo 外置硬盘，但是多年之后，我开始担心这头老水牛还能活多久，况且它的剩余空间也已经不多了。与此同时，手机和电脑的存储空间也像油腻大叔的头发一样越来越少，我必须把沉淀的冷数据迁移出去。身边像有一群饥饿的东西拼命向我伸手。
而且，随着数码设备的增加，尤其在添了一台 Apple TV 后，出于看 YouTube 的目的，我更需要通过软路由的方式改善家庭网络的翻墙体验。
再者，以前看影剧都是把 U 盘插到电视或者微投上，或者通过电脑串流，多少也有点麻烦。
于是打算用一台 All-in-one 解决所有问题。
硬件规格 最初考虑过群晖、威联通之类的品牌 NAS ，如果能得到更好的使用体验，多花点钱也是可以的。但是看过硬件规格后，感觉我要是以这个价格买了，那就算人生的污点了。
所以开始准备攒机，按优先级列举一下要求：
美观，不要傻大黑粗的直男风。 体积小。 兼顾功耗和性能。 内存大（16 ~ 32 G）。 先后拟了 4 套配置，和某淘宝店的套装做了一下对比：
- 淘宝店方案 价格 方案 1 价格 方案 2 价格 方案 3 价格 方案 4 价格 机箱 万由 410 - 万由 410 680 迎广 MS04 930 蜗牛星际B涂装改风扇 275 蜗牛星际B涂装改风扇 275 电源 益衡 200W - 益衡 7025B 236 机箱内置 - 益衡 7025B 236 益衡 7025B 236 主板 B365-ITX 定制工控板 - 华擎 Z390M-ITX/ac 1199 华擎 Z390M-ITX/ac 1199 华擎 Z390M-ITX/ac 1199 华擎 Z390M-ITX/ac（二） 700 CPU I5-8600T - I5-8600T 825 I5-8600T 825 I5-8600T 825 I5-8600T 825 散热器 - - AVC 28mm 115X 23 AVC 28mm 115X 23 AVC 28mm 115X 23 AVC 28mm 115X 23 内存 镁光 DDR4 16G 2666 - 光威 DDR4 2666 16G 379 光威 DDR4 2666 16G 379 光威 DDR4 2666 16G 379 海盗船 DDR4 3000 16G×2（二） 700 总计 - 2999 - 3342 - 3356 - 2937 - 2759 最后选了第 4 种。</description></item><item><title>用微力同步换掉了 Dropbox</title><link>http://0x3f.org/posts/replace-dropbox-with-verysync/</link><pubDate>Wed, 06 Oct 2021 01:24:41 +0800</pubDate><guid>http://0x3f.org/posts/replace-dropbox-with-verysync/</guid><description>我希望找到一种体验较好的方式，把两部手机和索尼黑卡上的照片集中同步到 NAS 上交由 PhotoPrism 托管。
需求如下：
可以方便地发送多平台照片到 NAS 。 可以单向同步手机到 NAS 并忽略手机的删除操作，以节省手机的存储空间。 可以实现内网穿透且简单稳定。 便宜。 对比了 PhotoSync 、 Resilio Sync 、 Syncthing 和微力同步（verysync）。
PhotoSync 作为专门针对同步照片的场景设计的 APP ，完美覆盖前两点，第三点可以借助 NAS 已经配置好的内网穿透实现，但是需要购买相应的 Plan ，而且 Android 和 iOS 平台要各自单独购买。
Resilio Sync 实现内网穿透需要引入新的依赖关系，不完全满足第三点。
Syncthing 看起来不错，但是没有官方的 iOS 客户端。
微力同步据说是基于 Syncthing 的，且补上了后者缺失的一环。各平台免费，只有 iOS 上需要花 12￥ 买 APP 。
我的 NAS 运行的是 Unraid ， Community Applications 里没有微力同步，在这里找到了别人配置好的模板，部署很方便。
试用后因为太好用，干脆把 Dropbox 目录也放到微力同步里，卸载了会占用很多内存且免费方案 3 个端的限制早已捉襟见肘的 Dropbox 。</description></item><item><title>使用 Remote Torrent Adder 做 qBittorrent 的客户端</title><link>http://0x3f.org/posts/take-remote-torrent-adder-as-client-of-qbittorrent/</link><pubDate>Fri, 20 Aug 2021 00:03:28 +0800</pubDate><guid>http://0x3f.org/posts/take-remote-torrent-adder-as-client-of-qbittorrent/</guid><description>我使用部署在 NAS 中的 qBittorrent 下载资源，每次手动复制磁力链链接到 qBittorrent 的 WebUI 很麻烦。
Remote Torrent Adder 是 Chrome 的扩展，可以通过右键菜单把 magnet 等协议的链接发送到多种下载工具，其中就包括 qBittorrent 。
安装过程不是那么顺利，这个开源小工具并没有对用户体验做更多的优化。
首先初次安装后，配置界面会有一个初始的、针对 Vuze SwingUI 的配置，需要把它删掉，再添加针对 qBittorrent v4.1+ WebUI 的配置，填好各项配置后选中 Label/Directory interactivity 复选框。因为我把电影和剧集分目录存放，开始下载前需要指定存储目录。
第一次点菜单的时候没有反应，后来刷新页面后就好了。但是弹出来的指定下载目录的对话框没有选项，经测试发现第一次需要手工填写，之后有了缓存就可以选了。</description></item><item><title>用 zsh-autoenv 实现目录级别的 zshrc</title><link>http://0x3f.org/posts/implement-directory-specific-zshrc-with-zsh-autoenv/</link><pubDate>Thu, 19 Aug 2021 23:34:25 +0800</pubDate><guid>http://0x3f.org/posts/implement-directory-specific-zshrc-with-zsh-autoenv/</guid><description>zsh-autoenv 可以实现当进入特定的目录时加载特定的 zshrc 文件，并当切换到其它目录时取消其中的变更。后者在当前的版本下，对环境变量、命令别名和函数有效。
使用方法为：
在目录（如 ~/project ）下创建文件 .autoenv.zsh :
1 2 3 4 5 6 7 8 autostash TEST_VAR=&amp;#39;This is a test variable.&amp;#39; autostash alias test_cmd=&amp;#39;echo &amp;#34;This is a test alias.&amp;#34;&amp;#39; autostash test_func test_func() { echo &amp;#34;This is a test function.&amp;#34; } 出于安全考虑， zsh-autoenv 会对 .autoenv.zsh 做哈希校验，所以第一次或者做变动后进入该目录时，都会要求确认是否接受此文件最新的内容。
此外，如果进入的目录不存在 .autoenv.zsh， zsh-autoenv 会自动向上查找最近的同名文件并加载，上溯的层级可以通过配置项定义。
最后，它提供了一个命令 autoenv-edit 用来快速打开和编辑 .autoenv.zsh 文件。</description></item><item><title>PHPUnit 9.x 性能分析的方法</title><link>http://0x3f.org/posts/method-for-phpunit-9.x-performance-analysis/</link><pubDate>Tue, 17 Aug 2021 14:48:12 +0800</pubDate><guid>http://0x3f.org/posts/method-for-phpunit-9.x-performance-analysis/</guid><description>利用 PHPUnit 9.x 的 extension 特性，可以记录每个测试用例的耗时并存储到 CSV 文件中。
Extension 代码：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 &amp;lt;?php declare(strict_types=1); namespace Tests; use PHPUnit\Runner\AfterTestHook; class LongRunningTestsLogger implements AfterTestHook { public function __construct(private string $log_file) { } public function executeAfterTest(string $test, float $time): void { $fp = fopen($this-&amp;gt;log_file . &amp;#39;.csv&amp;#39;, &amp;#39;a&amp;#39;); fputcsv($fp, [$test, $time]); fclose($fp); } } phpunit.xml 的配置：</description></item><item><title>Archlinux 下 PHP 不能读取 /tmp 下文件的问题</title><link>http://0x3f.org/posts/php-failed-to-open-stream-under-tmp-in-archlinux/</link><pubDate>Mon, 09 Aug 2021 15:27:58 +0800</pubDate><guid>http://0x3f.org/posts/php-failed-to-open-stream-under-tmp-in-archlinux/</guid><description>问题的场景是，以 http 用户运行的 FPM 进程访问 /tmp 下由普通用户运行的 CLI 进程创建的文件时，报如下错误：
Failed to open stream.
原因是 PHP-FPM 的 systemd 配置中默认对 FPM 进程单独挂载 /tmp 目录。
具体对应：
/usr/lib/systemd/system/php-fpm.service
中的：
PrivateTmp=true</description></item><item><title>Archlinux 下在 /var/run 下创建目录的方法</title><link>http://0x3f.org/posts/create-directory-under-/var/run-in-archlinux/</link><pubDate>Sun, 08 Aug 2021 23:30:18 +0800</pubDate><guid>http://0x3f.org/posts/create-directory-under-/var/run-in-archlinux/</guid><description>Archlinux 使用 systemd-tmpfiles 管理 /var/run 下的临时目录。这意味着如果我手动创建 /var/run/php 目录，在系统重启后将不复存在。
解决的办法是修改 /usr/lib/tmpfiles.d/php-fpm.conf 文件，把默认的目录名 php-fpm 改成 php。
但这会带来另一个问题，当 PHP 被重装或升级后，该文件会被覆盖。所以，解决的方法是复制后再修改。</description></item><item><title>给 Bose QC35 更换新耳罩</title><link>http://0x3f.org/posts/change-muffs-for-bose-qc35/</link><pubDate>Sun, 04 Oct 2020 18:43:16 +0800</pubDate><guid>http://0x3f.org/posts/change-muffs-for-bose-qc35/</guid><description>尽管我用东西很爱惜，QC35 的耳罩表面在前年也开始了剥落，并终于在今年早些时候裂开了。
了解到官方耳罩太贵（380￥左右），而且就这四年的使用情况而言，质量一般。所以打算买第三方的自己换。最终在淘宝上买了排序靠前、35包邮的蛋白皮款。
安装过程比较简单（官方说明），把旧耳罩扯下来，再把新的耳罩的包边逐个塞到耳机的卡扣里就行，就是容易边塞边松脱。
替换前后：
用了两天，不管是外观还是材质，和原装没有区别。
作为易耗品，以后可以考虑在阿里巴巴上买，更便宜。</description></item><item><title>使用 Homebrew 安装旧版程序</title><link>http://0x3f.org/posts/rollback-to-old-version-with-homebrew/</link><pubDate>Sun, 04 Oct 2020 18:21:04 +0800</pubDate><guid>http://0x3f.org/posts/rollback-to-old-version-with-homebrew/</guid><description>前几天发现因为 Hugo 的不兼容更新导致我在用的主题在部署时报错，所以打算装回旧版。但是网上找到的 Homebrew 回滚方法已过时，新的方法更简单，但找到具体说明也费了点功夫。
以回滚 Hugo 到 0.74.3 为例：
1 2 3 4 brew uninstall hugo brew tap-new donie/hugo-0-74-3 brew extract --version 0.74.3 hugo donie/hugo-0-74-3 brew install hugo@0.74.3 即：先创建一个名为“donie/hugo-0-74-3”的 tap ，然后通过 extract 命令把相应版本的数据放到里面，就可以安装了。</description></item><item><title>买了个升降台，开始站立办公</title><link>http://0x3f.org/posts/a-trial-on-standing-desk/</link><pubDate>Fri, 02 Oct 2020 20:31:17 +0800</pubDate><guid>http://0x3f.org/posts/a-trial-on-standing-desk/</guid><description>久坐疲劳，所以打算买个升降台。
乐歌 M3S 我是个颜党，在所有有白色款的型号里，先选中了造型简约的乐歌 M3S。
实物很重，虽然有些地方稍显粗糙（比如平板插槽底部很粗犷地用热熔胶粘合），但是整体上做工扎实。
但是试用之后发现一个很严重的问题，Z 形结构虽然美观，但是不够稳定，敲键盘时用力一点就会有明显晃动。
乐歌 M9S 一开始没有把 X 形结构当做首选是因为感觉不太好看。重新审视后感觉 M9S 观感尚可。
实物证明，虽然 X 形结构的美感不如 Z 形，但是稳定性远胜后者。
M9S 的另一个优点是可以把笔记本电脑放在键盘托上使用。
当然家里使用还是电动升降桌更好，毕竟桌子上摆这么个庞然大物显得很突兀，而且丧失了其它功能。升降台更适合办公室。</description></item><item><title>试用讯飞 A1 和 SR101 录音笔</title><link>http://0x3f.org/posts/a-trial-on-iflytec-a1-and-sr101-voice-recorder/</link><pubDate>Mon, 28 Sep 2020 17:30:14 +0800</pubDate><guid>http://0x3f.org/posts/a-trial-on-iflytec-a1-and-sr101-voice-recorder/</guid><description>讯飞的中文语音识别做得很好，十几年前在学校的一次讲座上就见识过讯飞的语音技术，印象深刻。录音笔结合语音识别是现在的一个趋势，把一个比较专业向的工具推向普及，做好了可以是个很有用的效率工具。我曾经跟一些产品经理讲过，如果我是他们，就买一个录音笔，无论是收集、讨论还是评审需求，都是个很好的工具，不至于丢三落四、误人误己。
讯飞的录音笔包含终身免费的转写服务，是个很吸引人的点。这次试用了 A1 和 SR101 两款，谈谈感受。
无处安放的 A1 优点 工业设计很有特点，外形模仿磁带，附带贴纸，既怀旧又酷炫，属于数码潮玩向的东西。 体积小巧，火柴盒大小。 录音效果明显好于 iPhone X。 特点 通过蓝牙和手机传输数据，交互很流畅。 缺点 不支持待机，5分钟无操作自动关机，不适合做备忘。 录音过程中不支持做标记，所以不适合做会议记录。 有安全隐患，手机可以不经授权连接并读取录音笔里的数据。 总结 几乎完全不满足我的使用场景，所以无处安放。感觉如果能增加标记功能和实现一键录音就值得一用。
五脏俱全但囿于软件的 SR101 优点 工业设计年轻时尚。 支持待机、标记、一键录音。 有屏幕，更方便。 缺点 通过触屏做标记，误操作的机率很大，影响效率。 待机状态下，一键录音有3秒左右的等待时间。 录音数据通过云盘和手机 APP 同步，等待时间超过 A1 很多，极其影响体验。 录音效果不如 A1。 总结 功能覆盖我的所有需求，但是体验总是离及格线差那么一点。
讯飞在中文语音识别这个核心技术上的成就勿庸置疑，但是它的产品总是在体验上做得差一点。我用过的讯飞产品里，手机输入法是最接近满意分数线的，但是它的动图搜索功能真的是很反人类，交互很繁复。
这两款录音笔各自有独特的点、有吸引人的地方，但是最大的短板在软件的体验上，导致不太适合把它们当成效率工具。基于这个出发点，我云了几个设想：
允许自动转写，目前只能逐条手工操作转写，如果录音较多，会不厌其烦。 做开放平台，和 IFTTT 之类的服务打通。 支持 iOS Shortcuts 之类的效率工具。</description></item><item><title>MySQL 事务的一致性、隔离级别与幻读问题</title><link>http://0x3f.org/posts/isolation-levels-and-phantom-reads-in-mysql/</link><pubDate>Tue, 21 Jul 2020 16:25:09 +0800</pubDate><guid>http://0x3f.org/posts/isolation-levels-and-phantom-reads-in-mysql/</guid><description>数据库事务的一致性 数据库事务有四个特性：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability），简称“ACID”。
其中，“一致性”指的是数据库层面的一致性，与应用层面的一致性不同。
数据库层面的一致性是说，事务具备把数据库从一个正确的状态迁移到另一个正确的状态的特性。所谓正确的状态，是指任何写入数据库的数据都满足数据库既定的规则，这些规则包括各种约束、级联回滚、触发器以及任何它们的组合。
与数据库层面的一致性不同，应用层面的一致性要求保证结果的正确性。例如，当执行如下 SQL 语句时：
1 update accounts set balance = balance + 1 where id = 3 我希望最终的结果是在事务开始时 id = 3 的这行数据 balance 列的值的基础上加一，否则，结果就是不正确的。
因此，只要写入的数据满足数据库的规则，就保证了数据库层面的一致性。数据库层面的一致性并不保证数据正确1。
MySQL 事务的隔离级别与幻读问题 隔离级别 隔离性是指：多个事务并发执行时，每个事务对数据库所做的更改必须与其它事务隔离。
隔离性是并发控制的主要目标2，并发控制用来实现在保证应用层面一致性的前提下，尽可能快地对并发请求做出响应。由此可见，隔离性和并发能力是一对此消彼长的关系。极端情况下，如果并发的请求按顺序执行，隔离性是最好的，但是响应最慢，反之亦然。
在此基础上，产生了四个隔离级别的划分。由低到高依次为：读未提交、读已提交、可重复读、序列化。据前所述，它们的并发能力是依次下降的。
因此，隔离级别的本质是通过适度地破坏隔离性来提高并发能力。
隔离级别的问题 隔离级别不同，存在的问题也不一样。
“读未提交”的级别最低、并发能力最高，存在的问题也最多，包括：脏读、不可重复读、幻读。其中，脏读是这个级别独有的，即事务 A 读取了并发事务 B 未提交的数据。
“读已提交”顾名思义，事务 A 不会读取并发事务 B 未提交的数据，但可以读取其已提交的。因此，这个级别存在不可重复读和幻读的问题。
在“可重复读”级别下，同一事务中两次同样的查询结果一致，不会受并发事务的影响，它因此也解决了不可重复读的问题。但还会存在幻读问题。
“序列化”级别要求对查询的对象加范围锁并保持到事务结束，因此，它避免了幻读的问题。
幻读问题（Phantom Reads） 幻读问题是个很 tricky 的问题，以至于网上找到的很多文章对它的理解都是不全面甚至是错误的。
幻读即同一事务中两次相同查询的结果集不一致。乍一看，好像和不可重复读是一样的。那它们的区别是什么呢？
事实上，幻读是不可重复读的一种特殊情况。换句话说，只要存在幻行（Phantom Rows），就是幻读问题。
所谓幻行，即同一事务中两次相同的查询结果集的非空差集里的元素，或者说第二次查询后发现不存在于前一次结果集中的行。
幻行产生的原因主要是除“序列化”之外的隔离级别不要求对查询结果加范围锁，导致并发事务在查询范围内插入新的行后被当前事务查到。
MVCC 在此基础上，MySQL 的 InnoDB 引擎实现了“多版本并发控制”（MVCC: Multiversion Concurrency Control）。
简单地说，InnoDB 的表存在两个隐藏列，用于记录每行数据的版本信息。当插入一行数据时，InnoDB 将当前事务的版本信息一并写入。当修改一行数据时，InnoDB 先将该行做一次复制，并把当前版本信息写入进去。查询时，只返回版本小于等于当前事务版本的数据。通过这样保证一个事务中查询到的是事务开始前已经存在的数据或当前事务写入的数据。其它事务写入的数据则不会被读取。</description></item><item><title>MacBook Pro 维修记</title><link>http://0x3f.org/posts/story-of-repairing-macbook-pro/</link><pubDate>Fri, 26 Jun 2020 23:29:24 +0800</pubDate><guid>http://0x3f.org/posts/story-of-repairing-macbook-pro/</guid><description>生平第一次修电脑。
17款的 MacBook Pro 13`，该有的问题全有——键盘随机连击或无反应、在桌面上放不平且触控板反馈很弱、疑似电池鼓包。
用过 ThinkPad X200 和 X220，虽然屏幕很渣，但从来没出过问题。上一台电脑是 15 款的 MacBook Air，用了三年，也没事儿。只能说这届苹果不行。
APP 上预约的三里屯店，时间下午两点多。太古里门口和店门口分别出示了一次健康码。虽然是工作日、而且在疫情期间，店里人不多也不少，还是等了一会儿。
常规的询问和联机检查，大概花了十几分钟，没有要求提供任何凭证。店员说因为键盘和电池都在一起，所以是要一块换的。时间上快则一天，慢则两三天，就能修好。
第二天晚上九点半，接到一个陌生座机号码打来的电话，以为是营销电话，而且之前看过有说换键盘用了一周时间的帖子，所以没往这上面想，就没接。
第三天晚上看手机电池健康状态的时候，偶然看到电脑的维修状态是已完成，才意识到，回电话过去果然是三里屯苹果商店，但是没人接。
今天早上九点多，再次打过去，说是十点才营业。于是决定直接过去。
交接需要出示身份证，花了几分钟验机，很快结束。期间问店员如果之后键盘再坏了怎么办，说是有一年保修期，而且因为批次不同的原因，换过的键盘不容易再出问题。暗笑，换个批次就能解决的话，新款何至于换回剪刀脚？！
回家后用了一会儿，新键盘和触控板体验很棒，没有打油的阻尼感沁人心脾，发了条 tweet 说：找回了初恋的感觉。</description></item><item><title>从 Hexo 到 Hugo</title><link>http://0x3f.org/posts/migrate-from-hexo-to-hugo/</link><pubDate>Fri, 19 Jun 2020 17:41:52 +0800</pubDate><guid>http://0x3f.org/posts/migrate-from-hexo-to-hugo/</guid><description>&lt;p>一切源于我这个颜党的喜新厌旧。&lt;/p>
&lt;p>总想找到一个极简而不失现代感的主题，在这个过程中，发现越来越多比较贴近我口味的主题都是适配 Hugo 的。趁最近有时间，就换了过来。&lt;/p></description></item><item><title>用 SSH 命令调试 Git 的连接问题</title><link>http://0x3f.org/posts/debug-git-connection-with-ssh/</link><pubDate>Sat, 28 Mar 2020 23:17:45 +0000</pubDate><guid>http://0x3f.org/posts/debug-git-connection-with-ssh/</guid><description>昨天执行git pull的时候发现会一直卡在那儿，排除了各种可能，而且 Github 上的项目也是可以正常拉取的，说明跟网络、代理等关系应该不大，git 命令本身也工作正常。
问题集中在公司的项目上，所有项目都无法拉取代码。起先怀疑是公司自建的 Gitlab 出了问题，但是其他人那里又是正常的，甚至跟我同一局域网的电脑上也是正常的。
也就是说问题应该出在我自己的电脑上。考虑到前两天还能正常使用，之后唯一一件相关的事就是升级 macOS 到 10.15.4 了。
然而用 Homebrew 重新安装 git 等相关的几个包也没能解决问题，于是用ssh -T -v git@gitlab.xxx.com -p 8848调试，输出如下：
donie@Donies  ~  ssh -T -v git@gitlab.xxx.com -p 8848 OpenSSH_8.1p1, LibreSSL 2.7.3 debug1: Reading configuration data /Users/donie/.ssh/config debug1: /Users/donie/.ssh/config line 9: Applying options for gitlab.xxx.com debug1: Reading configuration data /etc/ssh/ssh_config debug1: /etc/ssh/ssh_config line 47: Applying options for * debug1: Connecting to gitlab.xxx.com port 8848. 卡在了“Connecting to gitlab.</description></item><item><title>改变 Vim 模式时自动切换输入法的方法</title><link>http://0x3f.org/posts/auto-switch-input-method-while-changing-vim-mode/</link><pubDate>Wed, 19 Feb 2020 21:48:15 +0000</pubDate><guid>http://0x3f.org/posts/auto-switch-input-method-while-changing-vim-mode/</guid><description>VS Code的Vim插件有个很贴心的功能，可以在切换到普通模式时自动切换到英文输入法，而当切换回插入模式时再换到此前的输入法。
设置的方法很简单。先安装im-select，然后配置如下（macOS）：
当然，在Vim里也可以利用im-select实现这个功能。</description></item><item><title>在 VS Code 中快速创建 PHPUnit 测试类的方法</title><link>http://0x3f.org/posts/quickly-create-phpunit-test-cases-with-vscode/</link><pubDate>Tue, 18 Feb 2020 22:49:45 +0000</pubDate><guid>http://0x3f.org/posts/quickly-create-phpunit-test-cases-with-vscode/</guid><description>&lt;p>通过单元测试解决问题或者调试代码，可以避开错综复杂的依赖关系、直击问题的核心，从而极大地节约时间、提高效率。&lt;/p>
&lt;p>但是，当创建测试类成为一个经常发生的操作时，每次都手动创建类、引入基类、添加测试方法就显得很烦琐。我需要这样一个解决方案，让我可以立即开始着手写测试代码。&lt;/p></description></item><item><title>用Github当图床</title><link>http://0x3f.org/posts/take-github-as-image-hosting-service/</link><pubDate>Thu, 06 Feb 2020 22:00:00 +0000</pubDate><guid>http://0x3f.org/posts/take-github-as-image-hosting-service/</guid><description>&lt;p>微博图床的域名不知道什么时候改了，Google找不到相关信息，经过排查发现原域名中的“ws”改成了“wx”，浪费了不少时间。&lt;/p>
&lt;p>于是打算换图床。&lt;/p></description></item><item><title>关于Lumen的Facade不支持引用传递的看法</title><link>http://0x3f.org/posts/lumen-facade-doesnot-support-pass-by-reference-param/</link><pubDate>Tue, 04 Feb 2020 17:40:34 +0000</pubDate><guid>http://0x3f.org/posts/lumen-facade-doesnot-support-pass-by-reference-param/</guid><description>&lt;p>今天遇到一个奇怪的问题，一次调用带引用传递形参的方法后，该形参对应的变量值没有按预期改变。&lt;/p></description></item><item><title>用C4-PlantUML画软件架构图</title><link>http://0x3f.org/posts/design-software-architecture-with-c4-plantuml/</link><pubDate>Fri, 17 Jan 2020 17:29:24 +0000</pubDate><guid>http://0x3f.org/posts/design-software-architecture-with-c4-plantuml/</guid><description>&lt;p>&lt;a href="https://c4model.com">C4 Model&lt;/a>是一种简洁有序的架构模型，四个“C”分别表示“Context”、“Container”、“Component”和“Code”，是由上而下逐步细化的四个层级。&lt;/p></description></item><item><title>用鼠须管输入日期时间的方法</title><link>http://0x3f.org/posts/input-date-and-time-with-rime/</link><pubDate>Wed, 08 Jan 2020 13:52:49 +0000</pubDate><guid>http://0x3f.org/posts/input-date-and-time-with-rime/</guid><description>&lt;p>原来在Linux下用小小输入法，输入日期时间很方便。换到Mac后，很早就在关注这个问题，直到后来鼠须管实现了嵌入Lua脚本的功能才得以解决。&lt;/p></description></item><item><title>用 PlantUML 实现 ERD</title><link>http://0x3f.org/posts/plantuml-erd/</link><pubDate>Fri, 03 Jan 2020 17:01:41 +0000</pubDate><guid>http://0x3f.org/posts/plantuml-erd/</guid><description>&lt;p>很长一段时间，我们都在用 MySQLWorkbench 画 ER 图。但是这个东西有一些缺陷，导致体验很不好。&lt;/p>
&lt;p>首先它生成的文件是二进制的，做不了版本控制。这意味着在版本迭代的过程中做数据结构评审的体验很糟糕。其次，离线文件难以管理，不利于团队协作。第三，图形界面虽然简单，但并不等价于高效。用它画图的成本还是比较高的。&lt;/p>
&lt;p>PlantUML 是个基于文本、灵活且强大的 UML 画图工具，高度可定制，而且可以集成到多种开发工具中。主流的 IDE 、文本编辑器都可以集成 PlantUML ，以便用自己最熟悉的工具画图并实时预览。基于文本的特性使得版本控制和 Code Review 很容易实现。如果 VCS 用的是 Gitlab ，可以更进一步，借助 PlantUML Server 实现实时预览。即使对于像 Github 这种暂时没有提供支持的 Web 平台，也有变通的解决方案。&lt;/p></description></item><item><title>AirPods Pro的使用感受</title><link>http://0x3f.org/posts/the-expirence-of-airpods-pro/</link><pubDate>Tue, 05 Nov 2019 16:18:54 +0000</pubDate><guid>http://0x3f.org/posts/the-expirence-of-airpods-pro/</guid><description>&lt;p>Bose QC35曾是带给我巨大幸福感的工具，并且三年来一直处于重度使用的状态。但是它的一些弱点，使得在某些细分场景下并不能得到很好的体验。首先是包耳式的设计在夏天会很热。其次，虽然有折叠的功能，但头戴式的设计对于日常通勤来说，还是不够便携。再次，QC35一代的降噪级别只能通过APP设置，很麻烦，所以我一直都保持默认开启状态，出于安全性考虑，不适合徒步或者骑行。&lt;/p>
&lt;p>于是后来买了一副AirPods（以下简称AP）。高温和骑行的体验得以改善，但一直被通勤过程中北京公交糟糕的乘坐体验所困扰。其实在购买AP之前，更想买的是带降噪功能的耳塞，当时索尼的降噪豆一代才刚上市，评测普遍反馈体验不太好，而QC30的狗圈又让我完全接受不能，除此之外，在当时并无更多的选择。AP其实是权衡之后妥协的结果。&lt;/p>
&lt;p>所以从看到AirPods Pro（以下简称APP）上市的消息到下单，并没有考虑太久。下单时提示可能一到两周才能到货，但其实第二天就发了货，次日到手。体验了几天，说说感受。&lt;/p></description></item><item><title>解决Laravel中makeWith()无法取到被mock的实例的问题</title><link>http://0x3f.org/posts/mocking-objects-made-by-laravel-container-with-parameters/</link><pubDate>Fri, 16 Aug 2019 10:55:40 +0000</pubDate><guid>http://0x3f.org/posts/mocking-objects-made-by-laravel-container-with-parameters/</guid><description>&lt;p>被测单元有一行实例化一个类的代码，而且该类的构造方法需要参数。基于面向单元测试编程的原则，通过容器的makeWith()方法实现：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$api&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">makeWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Api&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;config&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$config&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>但是在执行单元测试时发现，虽然测试代码中已经mock了这个类且注入到容器，但在被测单元中取到的还是原类的实例。&lt;/p></description></item><item><title>利用单元测试为开发提效</title><link>http://0x3f.org/posts/use-unit-test-as-an-efficiency-tool/</link><pubDate>Tue, 13 Aug 2019 16:38:02 +0000</pubDate><guid>http://0x3f.org/posts/use-unit-test-as-an-efficiency-tool/</guid><description>&lt;p>单元测试可以方便地伪造和回滚测试数据，这个特性决定了它其实是一个效率工具。&lt;/p>
&lt;p>例如在开发退款单、发票的时候，由于这种后置的功能依赖订单、支付、库存等前置的数据，因此需要频繁地创建这些测试数据，这就导致开发的效率极低，有时甚至需要切换多个系统做诸如增加库存、下单、支付等操作。虽然在开发环境可以通过直接修改数据使之恢复可被测试的状态，但仍然存在效率很低、遗留垃圾数据和存在隐患等问题。&lt;/p>
&lt;p>单元测试可以完美地解决这些问题。&lt;/p></description></item><item><title>面向单元测试编程</title><link>http://0x3f.org/posts/unit-test-oriented-programming/</link><pubDate>Tue, 13 Aug 2019 16:35:15 +0000</pubDate><guid>http://0x3f.org/posts/unit-test-oriented-programming/</guid><description>&lt;p>同一逻辑可以有多种实现方式，选择对单元测试友好的方式可以提高写测试代码的效率。&lt;/p></description></item><item><title>PHP单元测试的技巧</title><link>http://0x3f.org/posts/phpunit-tips/</link><pubDate>Tue, 13 Aug 2019 14:21:48 +0000</pubDate><guid>http://0x3f.org/posts/phpunit-tips/</guid><description>&lt;p>以下是我平时写单元测试时总结的一些最佳实践，有些是和具体的框架强相关的。&lt;/p></description></item><item><title>Lumen单元测试提示自定义校验规则不存在的问题</title><link>http://0x3f.org/posts/unit-test-in-laravel-complains-validation-rule-not-exist/</link><pubDate>Fri, 02 Aug 2019 15:12:17 +0000</pubDate><guid>http://0x3f.org/posts/unit-test-in-laravel-complains-validation-rule-not-exist/</guid><description>&lt;p>执行单元测试时遇到报错：&lt;/p>
&lt;pre tabindex="0">&lt;code>BadMethodCallException: Method [validateIdList] does not exist.
&lt;/code>&lt;/pre></description></item><item><title>对比Laravel Excel和Spout的读写性能</title><link>http://0x3f.org/posts/performance-comparation-for-laravel-excel-and-spout/</link><pubDate>Sun, 07 Jul 2019 20:23:26 +0000</pubDate><guid>http://0x3f.org/posts/performance-comparation-for-laravel-excel-and-spout/</guid><description>./artisan excel:write --driver=spout --amount=100000 写入数据100000行。 用时：156秒。 最大使用内存：2750.5106964111 M。 ./artisan excel:write --driver=laravel-excel --amount=100000 写入数据100000行。 用时：305秒。 最大使用内存：1330.7370758057 M。 ./artisan excel:read ./storage/app/test.xlsx --driver=spout 读取数据100001行。 用时：576秒。 最大使用内存：122.15303039551 M。 ./artisan excel:read ./storage/app/test.xlsx --driver=laravel-excel 读取数据100001行。 用时：166秒。 最大使用内存：739.48976898193 M。 基本上，Laravel Excel写XLSX的性能是Spout的一半，但内存占用是对方的一半。而在读文件上，前者的性能是后者的约3倍多，而内存占用是后者的6倍。
测试环境：
MBP 3.1 GHz Intel Core i5 8G内存 PHP 7.1.30 Laravel 5.8.27 Laravel Excel 3.1.14 Spout 3.0.1</description></item><item><title>《Clean Code》第十四章读后</title><link>http://0x3f.org/posts/after-reading-chapter-14-of-clean-code/</link><pubDate>Mon, 20 May 2019 23:48:41 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-chapter-14-of-clean-code/</guid><description>&lt;p>蹩脚的译文看着实在费解，干脆去看《Clean Code》的原版。第14章“Successive Refinement（逐步改进）”讲的是对一个用Java实现的解析命令行参数的类Args重构的过程。&lt;/p>
&lt;p>很多人都应该好好看看这章。&lt;/p></description></item><item><title>Git工作流调研报告</title><link>http://0x3f.org/posts/investigation-report-of-git-flows/</link><pubDate>Wed, 15 May 2019 16:14:17 +0000</pubDate><guid>http://0x3f.org/posts/investigation-report-of-git-flows/</guid><description>&lt;h2 id="面临的问题">面临的问题&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>测试环境杂乱导致的问题&lt;/p>
&lt;p>每个任务都要搭建测试环境，或者把闲置的测试环境切换到待测试分支。麻烦，而且容易出问题。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>抢占beta环境的问题&lt;/p>
&lt;p>每个任务部署到beta环境时都要和别人确认，同时其它任务都要等待。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上线任务A把尚在测试中的任务B的部分代码部署上线的问题&lt;/p>
&lt;p>先把feature分支合并到master分支，再部署到beta环境。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>任务A和B在逻辑上互斥或者代码有冲突，导致问题在上线后才发现&lt;/p>
&lt;p>测试阶段是针对每个feature分支测试，而不是针对一个集成的分支。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>不能保证所有上线的代码都经过测试&lt;/p>
&lt;p>直接把feature分支合并到master分支，不能保证所有代码都经过测试。&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>基于Laravel的项目的单元测试规范</title><link>http://0x3f.org/posts/unit-testing-standard-for-laravel-based-projects/</link><pubDate>Sun, 24 Mar 2019 22:42:08 +0000</pubDate><guid>http://0x3f.org/posts/unit-testing-standard-for-laravel-based-projects/</guid><description>&lt;p>单元测试是个好东西，解决了我很多问题，不论开发效率还是代码质量，都给我助益良多。最近想在团队内部推广，就拟了个规范草稿：&lt;/p></description></item><item><title>用ALE替换了Syntastic</title><link>http://0x3f.org/posts/replace-syntastic-with-ale/</link><pubDate>Wed, 12 Dec 2018 20:42:10 +0000</pubDate><guid>http://0x3f.org/posts/replace-syntastic-with-ale/</guid><description>&lt;p>习惯频繁地保存源码，但是每次保存都有明显的卡顿，于是用Vim自己的调优功能跟踪了一下。&lt;/p></description></item><item><title>配置鼠须管的特殊符号输入</title><link>http://0x3f.org/posts/input-punctuations-with-rime/</link><pubDate>Sat, 13 Oct 2018 11:59:50 +0000</pubDate><guid>http://0x3f.org/posts/input-punctuations-with-rime/</guid><description>开源工具最常见的问题就是文档不全，实现一个需求的时候只能苦苦Google，甚至连蒙带猜。这也是我逐渐倾向买用户体验更好的收费软件的原因。
鼠须管是自带特殊符号码表的，在用户配置目录中的symbols.yaml，但是有的码表需要手动配置。经过查资料和摸索，关键在于以下几项配置：
1 2 3 4 5 6 7 punctuator: import_preset: symbols recognizer: import_preset: default patterns: punct: &amp;#34;^/([a-z]+|[0-9]0?)$&amp;#34; 然后就可以通过【/】+【编码】的方式显示符号备选项了，具体的编码可以到symbols.yaml里看，当然一般为了方便定制该码表，会复制并重命名该文件，然后上述的配置项里也要做相应的修改。</description></item><item><title>我叫王战斗</title><link>http://0x3f.org/posts/i-am-wang-zhandou/</link><pubDate>Sun, 01 Jul 2018 16:46:32 +0000</pubDate><guid>http://0x3f.org/posts/i-am-wang-zhandou/</guid><description>我叫王战斗，男，喵星人，狸花族，现年四个半月，折合成你们两脚兽的年龄算7岁了。
虽然刚降临你星不久，但是我已经能驯服和驾驭两脚兽这种低等生物了。因为我发现这种生物本性里有一个致命弱点：对它很好反而不会珍惜，故作高冷却奴颜婢膝求抱抱！我们喵星管这叫「贱」。
开始的时候，我的驭兽术还不熟练，而且我酷爱往两脚兽的脖子里钻，然后蹭它们的脸。结果它们不干了，在我才两个月零九天的时候就把我交给了现在这头两脚兽。是它们不懂喵星习俗好不好？！而且作为一个刚断奶的小正太，卖个萌怎么啦，怪我咯？
我一直在暗中观察现在这头两脚兽。发现每隔五天，它都会在巢穴里待上两天，然后在接下来的五天里每天都消失一段时间。虽然有点好奇，不过也不是什么大事，只要我有吃有喝、两脚兽按时铲屎，每天给它放个风什么的我也OK，这是我们喵星高等生物的自我修养。
不过还是要测试一下这货的驯服度。所以我命令它伺候我睡个午觉： 这货竟然没有反抗！！！
有一天我发现它竟然在偷看我练习家传绝学「黑虎掏心」，我就瞪它，就瞪它： 有时候两脚兽全神贯注地照镜子，我就想看看它看的啥，然后它就扒拉我，我想一定是我高大威猛的身躯挡住它了： 这老头叫马霸霸，挺能白话的，它的巢穴已经被我军占领了： 那天两脚兽带回来一只老鼠，我一眼就看出来是假的，但是这货一碰就叫啊，然后我就停不下来了，你星管这叫口嫌体正直，看著两脚兽谜之微笑，我觉得中了奸计： 更有甚者，它竟然趁我睡著的时候拍我裸照，还传到网上： 生亦何欢，死亦何惧。趁两脚兽上厕所的时候，叼走了卷纸，然后撕稀碎，有能耐学我们喵星人上完厕所自己舔干净啊？！ 没想到报复来得如此突然，两脚兽不知道从哪儿搞了一瓶毒气，走到哪儿揣到哪儿，我一想搞事情就各种喷： 真臭啊，臭到怀疑喵生啊！ 话说回来，大部分时间两脚兽还是没那么讨厌。比如这个会喷水的盒子，被我霸占后就成了我最常喝水的东西兼洗脚盆： 两脚兽的厨艺也不赖： 吹嘘自己慷慨的时候，两脚兽就指著这口袋说：「比我吃得都好。」其实就是618的打折货。 两脚兽就是个肥宅兼Nerd，且不说为了给我做饭专门买了台电动切碎机和保鲜盒。铲个屎都装绝命毒师： 某天整了把稀奇古怪的东西在床上、沙发上各种吸，完事非要说是我干的： 我的天啊！不就掉个毛么，全宇宙只有你们两脚兽光著屁股满世界跑！ 我来，我见，我征服。我是王战斗，一个普通的驯兽师。</description></item><item><title>生成PDF的方案调研</title><link>http://0x3f.org/posts/pdf-creating-solutions/</link><pubDate>Wed, 16 May 2018 15:41:36 +0000</pubDate><guid>http://0x3f.org/posts/pdf-creating-solutions/</guid><description>结论 倾向于通过wkhtmltopdf+消息队列实现。
工作流程：
用户保存表单 推送生成pdf的任务到队列 同时页面显示「正在生成PDF文档，请稍候」并轮询后端接口 PDF生成后，页面显示下载按钮 后端 dompdf 纯PHP实现。工作原理是把HTML转换成PDF。
优点：
不需要PHP调用命令行，安全性高。 缺点：
HTML/CSS支持不完全，实测多个网页转换后排版错乱。 中文网页转换后，中文都是问号（网上说有解决办法1、2，未测试）。 CPU占用比较高（网上的说法，没有实测具体有多高）。 参考：
laravel-dompdf主页 mpdf 纯PHP实现。工作原理是把HTML转换成PDF。
优点：
不需要PHP调用命令行，安全性高。 缺点（未实测）：
HTML/CSS支持不完整。 生成PDF耗时长。 参考：
laravel-pdf主页 mpdf文档 mpdf主页 mpdf与fpdf的使用比较 PDFtk Server PDFtk Server是个命令行程序。工作原理是利用FDF表单替换PDF模板中的占位符。实现方案有：纯PHP实现FDF + PDFtk、FPDI + PDFtk。
优点：
直接替换PDF模板，实现成本低，最大程度保证生成的PDF的效果。 缺点：
需要允许PHP调用命令行，有安全隐患。 只能实现简单的字符串替换（例如公司名称），不能替换有格式文本。 参考：
FPDI PHP的FDF手册 PDFtk的使用方法 纯PHP实现FDF + PDFtk wkhtmltopdf wkhtmltopdf是个命令行程序。工作原理是转换HTML到PDF。实现方案是laravel-snappy。
优点：
由于内嵌webkit核心，HTML/CSS的支持没有问题。 缺点：
需要允许PHP调用命令行，有安全隐患。 wkhtmltopdf体积40M，并发较多时影响服务器性能和稳定性（需要考虑用队列辅助实现，异步执行，需要需求变更交互方式）。 参考：
laravel-snappy主页 CutyCapt 命令行程序。工作原理和wkhtmtopdf相同。
优缺点同wkhtmltopdf，但是最近的更新在13年。
参考：
CutyCapt主页 Prince 命令行程序。工作原理是转换HTML到PDF。
优点：
HTML/CSS的支持很好。 文档很全 缺点：</description></item><item><title>少不读村上</title><link>http://0x3f.org/posts/after-reading-killing-commendatore/</link><pubDate>Sun, 22 Apr 2018 13:55:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-killing-commendatore/</guid><description>读完了《刺杀骑士团长》。
开始一直以为是类似《禁闭岛》那样的表达手法，觉得当个悬疑的故事看也不错，结果直到最后一页，才发现连装神弄鬼都不是，顿时觉得六十块钱花得有点冤。单从表达手法上说，不喜欢神神叨叨的东西。凭著炒魔幻现实主义的冷饭得诺奖怕是不大可能。
故事的大致情节是：生活平淡的画家，突遇婚变，逃避现实的过程中经历一系列魔幻和现实交错的事，最后解开心结，回到现实，找到救赎。
这本书要表达的东西很多，出现的每一个主体都存在于多条叙事线中，只粗略读过一遍，大概也就理解了个皮毛。最主要的，是两个概念和五幅画。
两个概念，分别是「理念」和「隐喻」。
理念是人在自我审视下出现的另一个「我」，包括善的和恶的。象征善的理念的是「骑士团长」，一个时隐时现、身高60厘米的古代日本武士形象。象征恶的理念的是「白色斯巴鲁男子」，随时提醒「我」：你的恶，我都知道。
隐喻是人生各种经历的具象化的形象。
五幅画，分别是《刺杀骑士团长》、《免色肖像画》、《白色斯巴鲁男子》、《杂木林中的洞穴》和《真理惠肖像画》。
《刺杀骑士团长》的作用很多。首先，从这幅画引出被遗忘的二战中的往事，包括雨田具彦在奥地利和雨田继彦在南京的遭遇。其次，骑士团长于「我」，是善的理念的象征，于雨田具彦，是隐藏数十年挥之不去的心结。第三，最终「我」刺杀了骑士团长，一方面解了雨田具彦的心结，使其安详地离世，另一方面，这是「我」进入隐喻世界的前提，也是解救真理惠的必要条件。
《白色斯巴鲁男子》象征「我」的恶的理念，也是所有人的恶的理念。
《免色肖像画》引出免色这个重要角色。免色是个从世俗的各方面看都臻于完美的男人，然而这幅画真正打动他的，恰恰是表现出了那些深藏的、消极的、恶的不完美的东西。
《杂木林中的洞穴》既是魔幻的开端，也是魔幻的终点。一切魔幻的开始，源于深夜中听到的铃声。而「我」穿过隐喻世界，逃回现实世界，也发生在这个洞里。
《真理惠肖像画》。真理惠既是「我」的妹妹「路」的替身，也是免色的心结。「我」通过刺杀骑士团长、穿过隐喻世界「解救」了真理惠，实际上解开了对「路」早逝的心结。
很多年前读过《挪威的森林》，沮丧得要命，那时就认为少不读村上春树，至今如故。</description></item><item><title>鼠须管的美化</title><link>http://0x3f.org/posts/beautify-squrrel-input-method/</link><pubDate>Sat, 21 Apr 2018 20:52:42 +0000</pubDate><guid>http://0x3f.org/posts/beautify-squrrel-input-method/</guid><description>效果如下： 尽管鼠须管的Github仓库一直在更新，但释出版已经很久没有更新了，所以下面的美化基于网络上个人编译的版本。这篇文章里有该版本和「花园明朝」字体的下载链接，按照文中的说明替换鼠须管的程序。（注意：官方当前释出版本鼠须管不支持下文通过patch自定义配置的方式，会造成原配置信息丢失。也不支持图示的样式。）
然后参考这篇文章，把新的颜色方案移植到用户配置中。
图示样式使用「dust」方案。原色彩方案的字体设置的有点小，需要把font_point和label_font_point分别从14和10修改成18和14。原方案的第一顺序字体是「HYQiHei-55S Book」，要使用图示的花园明朝字体，可以不安装或者从配置信息中去掉该字体。由于原方案中已存在的配置项不能通过patch的方式覆盖，所以只能直接修改squirrel.yaml文件。</description></item><item><title>我在用的Safari扩展</title><link>http://0x3f.org/posts/the-safari-extensions-i-am-using/</link><pubDate>Sun, 15 Apr 2018 22:29:10 +0000</pubDate><guid>http://0x3f.org/posts/the-safari-extensions-i-am-using/</guid><description>和Chrome相比，Safari更省电、需要更少的系统资源，而且Chrome还有一些莫名其妙的问题，比如在没有运行的时候，从Alfred执行搜索会启动两个窗口，一个是之前的会话，另一个是当前的搜索页面。并且，启用了一些扩展之后Safari的体验可以改进很多。所以平时用Safari更多一些。
sVim 作为注重效率的Vim党和键盘党，这种扩展是使用任何浏览器必备的东西。最常用的就是用标记打开链接的功能。
Tampermonkey 油猴脚本管理器，应该是任何浏览器必备的东西。
AutoPagerize 用Google搜索时自动滚动到下一页。
RSS Menu 当发现当前页面有可订阅的RSS链接时，在工具栏图标上显示提示。
Instapaper 稍后读工具。
Turn Off the Lights 看视频时降低网页其余部分亮度。
Scroll To Top Button 在页面右下角显示一个浮动的跳转到页首按钮。
Push for Kindle FiveFilters.org的发送到Kindle按钮。
octotree GitHub侧边栏。
Translate 翻译当前页。
WikiWand 优化维基百科阅读体验。
Xdebug Helper PHP单步调试辅助工具。
AdBlock 广告过滤器。
Sessions 网页会话管理器。如果打开的页面太多，又可能在将来再用到，可以保存会话后清理掉，用到的时候再打开保存过的会话。虽然没有Chrome下的Session Buddy和Tab Snooze好用，但是解决关键问题也够了。</description></item><item><title>广告过滤工具AdBlock、Adblock Plus和uBlock的简单对比</title><link>http://0x3f.org/posts/a-simple-comparison-among-adblock-ublock-and-adblock-plus/</link><pubDate>Sun, 01 Apr 2018 22:47:47 +0000</pubDate><guid>http://0x3f.org/posts/a-simple-comparison-among-adblock-ublock-and-adblock-plus/</guid><description>Adblock Plus作者的那篇博客可能会影响很多人。我并不关心那些情怀的东西，只看疗效。
简单地对比了下AdBlock、Adblock Plus、uBlock在Safari for Mac上的效果，所有样本和环境均为当前最新版本。AdBlock开启Safari内容过滤后是最好的，成功地过滤掉了我常访问的一个BT下载网站上的所有广告，而不开启Safari内容过滤时，会出现部分广告先显示后隐藏的情况。uBlock漏掉了个别不容易屏蔽的。而Adblock Plus最差，缺省设置下一条都没过滤掉，在选择更多的过滤规则后才过滤掉一部分。由于样本很单一，本结论不具有普适性。
说句题外话，我觉得Adblock Plus这名字起得动机就挺不纯的，没有详细考证过，印象中这个东西是比AdBlock后出现的，而且这名字很容易让人理解成AdBlock的加强版。</description></item><item><title>变形金刚真人电影系列被重置</title><link>http://0x3f.org/posts/transformers-live-action-movie-series-reset/</link><pubDate>Sun, 18 Feb 2018 11:51:13 +0000</pubDate><guid>http://0x3f.org/posts/transformers-live-action-movie-series-reset/</guid><description>根据这条消息，变形金刚真人电影系列将会被新团队重置，原定在明年的第6部被取消。也就是说，看完今年大黄蜂的电影后，2021年前都不会有变形金刚主题的新片了。
这种壮士断腕的做法多少算是个好消息吧，经历了变5的失败，再让麦克尔贝这么折腾下去，变形金刚这个IP就完蛋了。
我对这件事是无可无不可的。作为一个八零后，我对变形金刚的情怀来自G1动画，所以我的关注点主要是还原G1动画风格的Master Piece系列。在MPM-3出来之前，我对电影系的玩具没多大兴趣。
当年变1上映的时候，我很难认同电影系的风格。但是后来从变1到变3，也逐渐地开始接受它，毕竟随著技术的进步，审美风格也会发生变化，没必要固守二、三十年前的东西。我对电影系最大的意见是剧情太烂，有句话很对，说一部戏好不好关键看反派角色，《蝙蝠侠之黑暗骑士崛起》之所以口碑不错，主要是大反派小丑这个角色很立体。回头说当年的G1动画最成功的一点也是霸天虎尤其威震天这个角色塑造得比较成功。反观电影系，相对于汽车人华丽的人形态和隐藏形态，霸天虎阵营就是一群猥琐的低级生物，而且人物性格的塑造极其脸谱化。
直到后来变4的时候，风格进一步变化，加入大量骑士元素，机械元素的减少导致科技感进一步下降。最要命的是变4的玩具做得实在是一塌糊涂。至于变5，那真是电影做得和玩具一样烂。
真是成也麦克尔贝，败也麦克尔贝。</description></item><item><title>iQunix F60使用感受</title><link>http://0x3f.org/posts/iqunix-f60/</link><pubDate>Sat, 17 Feb 2018 15:40:47 +0000</pubDate><guid>http://0x3f.org/posts/iqunix-f60/</guid><description>我不喜欢冗余的东西。如果桌子足够大，我能接受的极限是87键。然而我的Filco 87圣手二代黑茶已经吃灰很久了，之前的主力是Poker II白青。所以目前主要的关注点还是在60键上。
我对Poker整体上还是比较满意的，尤其是按键编程的功能很方便。但是有两点让我很不满意。一是做工一般，键帽的活动幅度较大，远远没有Filco的扎实感。二是不支持蓝牙，无线化是一个用了就回不去的东西。
iQunix F60就是这么个东西，符合我对键盘所有的核心需求：支持蓝牙、做工好、60%布局、Cherry轴、PBT键帽。用了一段时间，整体是满意的。
买的银白色，收到的是侧刻，算是个小惊喜吧，虽然不如无刻骚气，至少不像正刻那么平庸。铝合金外框加白色PBT键帽的颜值很高，整体很有质感。
做工比Poker好很多，找回了Filco的扎实感。PBT的键帽不打油，这一点超过了Filco。
续航一般，轻度使用可以持续一周。信号强度也很一般，一米的距离，已能感受到明显的延迟。不过这些在实际的使用中不是什么大问题。
功能上，不支持键盘编程，这点不如Poker。但是可以用组合键交换左侧WIN键和ALT键，对Mac很友好。代替方向键的组合键位也比Poker合理。此外，可以用组合键切换有线和无线模式，支持在3台设备之间切换。</description></item><item><title>异地补卡下的北京中年</title><link>http://0x3f.org/posts/story-of-changing-sim-card/</link><pubDate>Fri, 16 Feb 2018 17:24:59 +0000</pubDate><guid>http://0x3f.org/posts/story-of-changing-sim-card/</guid><description>我妈的老SIM卡不能用在iPhone里。因为我的卡就是从大卡剪过来的，所以骑车转了一大圈，临近年关，大部分修手机的店、合作营业厅都关了，最后一个卖手机的店里的老板说这种老卡不能剪，只能换卡。
之前听附近移动营业厅里的大堂经理说，换卡需要机主本人、身份证和服务密码，而且异地补卡只能去部分较大的营业厅。这个可以在网上营业厅里查到。
事先在网上营业厅重置了服务密码。第二天一早，去了最近的可以异地补卡的营业厅。工作人员给了张纸条，让写下手机号、服务密码，他们查了一下，说是鉴权失败，让第二天再去。留了营业厅的电话，事先让他们查一下，确认可以办了再去。
第三天早上十点，打电话过去，说是办异地补卡的人还没来。十一点再打过去，查了一下，说是可以办了。去之前差点没带手机，因为感觉就是办张卡，回来装也一样。事实证明，不带会后悔。
补卡也需要用手写板签字和人脸识别，因为是2d图像识别，所以很傻，需要摇头、点头、眨眼、张嘴，在张嘴这一步重试了很多次都失败……
补的第一张卡插到手机里不能识别，第二张才成功。
总结以上，异地补卡需要注意这些点：
本人、身份证、服务密码（服务密码可以去网上营业厅重置，前提是卡还在，还能接到短信） 去能办理异地补卡的营业厅（可以在网上营业厅查询，或者打客服电话） 不要去太早，最好事先打电话让他们查一下，确认可以办了再去 一定要带手机和开卡槽的工具，现场装卡测试</description></item><item><title>飞利浦电动牙刷HX9903/42使用感受</title><link>http://0x3f.org/posts/philips-hx9903-42/</link><pubDate>Sat, 10 Feb 2018 17:23:15 +0000</pubDate><guid>http://0x3f.org/posts/philips-hx9903-42/</guid><description>效果虽说没别人说的夸张，也的确刷得很干净，再就是缓解了胳膊的疲劳感。
有个问题。刚开始的几天，虽然电池已经充满，但是震动强度很一般，而且手柄底部的压力警示灯一直闪，试过拔掉刷头，问题还在，说明是手柄的问题。直到提示电量紧张后第二次充电，之后才恢复正常。
App、多种刷头、多种模式、压力警示和三级震动强度都是噱头，刷个牙而已，HX6730足够了，多交的几百块钱除了智商税，也就颜值和无线充电有点价值了。
电动牙刷不是个用了就回不去的东西，不过体验确实很好，刷牙不再是例行公事和负担，而是件挺有意思的事。</description></item><item><title>用OTP Auth替换了Authy</title><link>http://0x3f.org/posts/migrate-from-authy-to-otp-auth/</link><pubDate>Tue, 06 Feb 2018 22:53:40 +0000</pubDate><guid>http://0x3f.org/posts/migrate-from-authy-to-otp-auth/</guid><description>Authy的界面很花哨，但并不实用，管理多个两步验证账号时查询效率很低。OTP Auth采用更直观的列表布局，并且支持搜索，在用户体验和效率上有更大的优势。两者之间没有批量迁移数据的方式，只能逐个手动添加，很麻烦。</description></item><item><title>对XSS的防御更适合放在前端</title><link>http://0x3f.org/posts/better-to-do-defenses-against-xss-in-front-end/</link><pubDate>Tue, 06 Feb 2018 15:13:17 +0000</pubDate><guid>http://0x3f.org/posts/better-to-do-defenses-against-xss-in-front-end/</guid><description>很多项目会把转义操作放在后端接口获取参数的地方，从而忽略了这样一个问题——为什么主流框架都不在获取参数的方法里实现这一点？
以Laravel为例，如果可以这样获取转义后的参数：$request-&amp;gt;escape('content')，代码会显得更优雅，而实际上只能用自己封装的函数手工转义：my_escape($request-&amp;gt;get('content'))，很丑陋的代码。
事实上，主流框架并非没有提供防御XSS的封装，只是都放在模板引擎里。这样做的依据是，XSS的原理是在原本用于展示的数据里包含了可执行的文本，但不是所有展示的位置都不应该包含可执行的文本。从另一角度上说，后端应该校验前端传递的数据，但不应该篡改它。</description></item><item><title>癸丑望，月有食之</title><link>http://0x3f.org/posts/lunar-eclipse/</link><pubDate>Wed, 31 Jan 2018 23:54:41 +0000</pubDate><guid>http://0x3f.org/posts/lunar-eclipse/</guid><description>大概这是我第一次看月全食，暗红色，挺大个儿，但是拍出来就显得很小。论效果， iPhone X 还不如几年前的 LX5 。</description></item><item><title>解决Laravel的Facade在被Mock时不自动注入依赖的一种方法</title><link>http://0x3f.org/posts/manual-dependency-injection-with-laravel/</link><pubDate>Tue, 30 Jan 2018 15:41:16 +0000</pubDate><guid>http://0x3f.org/posts/manual-dependency-injection-with-laravel/</guid><description>由于集成了Mockery，Laravel的Facade对单元测试非常友好，只需要一行代码就能实现mocking。
例如，测试目标方法中调用了订单工具类的一个方法，在使用依赖注入的方式时，需要用三行代码实现对这个方法的mocking：
1 2 3 $fakeOrderTool = m::mock(\App\Tool\Order::class); $fakeOrderTool-&amp;gt;shouldReceive(&amp;#39;getById&amp;#39;)-&amp;gt;once()-&amp;gt;with($id)-&amp;gt;andReturn($fakeOrder); $this-&amp;gt;app-&amp;gt;instance(\App\Tool\Order::class, $fakeOrderTool); 而用Facade是这样的：
1 OrderFacade::shouldReceive(&amp;#39;getById&amp;#39;)-&amp;gt;once()-&amp;gt;with($id)-&amp;gt;andReturn($fakeOrder); 当测试目标方法也属于订单工具类时，需要部分mock这个类，所以还要加上一行：
1 OrderFacade::makePartial(); 但如果订单工具类的构造方法里有需要注入的依赖关系，这里并不会被执行。所以我在工具类基类里封装了一个方法，用反射机制实现手工注入依赖关系：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 /** * 注入依赖，用于单元测试 * * @return void * @author donieli * @since 5 * @version 5 */ public function injectDependencies() { $reflector = new \ReflectionClass(get_class($this)); $params = $reflector-&amp;gt;getConstructor()-&amp;gt;getParameters(); $args = []; foreach ($params as $param) { $paramClass = $param-&amp;gt;getClass(); if (empty($paramClass)) { throw new \Exception(&amp;#39;Dependency named &amp;#39;.</description></item><item><title>从Vultr新加坡迁移到洛杉矶</title><link>http://0x3f.org/posts/migrate-vultr-from-singapore-to-los-angeles/</link><pubDate>Sun, 28 Jan 2018 14:15:57 +0000</pubDate><guid>http://0x3f.org/posts/migrate-vultr-from-singapore-to-los-angeles/</guid><description>Vultr新加坡节点挂了两天了，不能翻墙简直什么都干不了。早上用CloudSpeed看了下，洛杉矶机房的响应速度还不错，就迁移了过去。
ShadowsocksR 这个很简单，用一键安装脚本。
网络加速 用BBR，一键安装脚本。
Tiny Tiny RSS 先按照之前的笔记安装ttrss。
然后重建一个空的ttrss的数据库：
1 2 docker exec f6d92ad8efba /usr/bin/psql -c &amp;#34;drop database ttrss&amp;#34; docker exec f6d92ad8efba /usr/bin/psql -c &amp;#34;create database ttrss&amp;#34; 把数据库的备份复制到容器里并导入：
1 2 docker cp ttrss.sql f6d92ad8efba:/tmp/ttrss.sql docker exec f6d92ad8efba /usr/bin/psql -d ttrss -f /tmp/ttrss.sql postgres 以root身份登录容器并删除备份文件：
1 2 docker exec -it --user root f6d92ad8efba /bin/sh rm /tmp/ttrss.sql</description></item><item><title>Unlox：兼顾安全和体验的东西深得我心</title><link>http://0x3f.org/posts/unlox/</link><pubDate>Sun, 14 Jan 2018 16:52:11 +0000</pubDate><guid>http://0x3f.org/posts/unlox/</guid><description>买了Unlox。早就知道MacID，阴差阳错一直没买，所以这又是一次后知后觉的行为。
曾经用过一段时间ControlPlane，通过多种条件自动判断场景以启用或关闭锁屏密码。后来在一次系统升级之后就不能用了。因为这个东西本身体验也不是很好，免费的东西折腾起来太耗费精力，所以付费买体验也是个不错的选择。
有三个功能对我来说很有用。
首先是用Face ID解锁Mac。在Mac被唤醒后，iPhone X自动弹出解锁的通知，点击后Unlox被打开并自动调用Face ID，验证通过后Mac即被解锁。不过两次Face ID验证稍显繁琐，如果在iPhone锁屏界面验证通过后就自动解锁，体验会更好。不过我猜应该是iOS在这个地方不会通知到App。
其次是Tap解锁。用手指点击触摸板，点击次数和每次用的手指数目可以自定义。这个方式确实很方便。为了加强安全性，还可以设置当手机断开时禁用Tap解锁。
第三是离开时自动锁屏。可以设置当手机和Mac之间的蓝牙连接信号减弱多少时自动锁屏。虽然对于Macbook用处不大，也不失为忘记合上屏幕时的一种补救手段。
此外还有其它一些功能，例如通过手机锁定或解锁Mac、靠近时自动唤醒Mac等。
今年Apple应该会全系支持Face ID，所以这只是一个过渡方案。</description></item><item><title>密码管理的最佳实践</title><link>http://0x3f.org/posts/the-best-practice-of-password-management/</link><pubDate>Wed, 27 Dec 2017 17:26:17 +0000</pubDate><guid>http://0x3f.org/posts/the-best-practice-of-password-management/</guid><description>通密之所以不应该被过分指责，是因为有其存在的道理，没有哪种方案的管理成本比它更低，它不需要购买昂贵的1password，不需要担心临时用的时候突然想不起来，而且，只要这个密码足够强壮并且使用环境足够安全，大多数情况下也不会有什么问题。通密的问题在于它的风险成本太高，一旦一处泄漏，所有使用这个密码的地方都不安全。
另一个极端是，使用很复杂的密码，每个账号都不同，甚至用密码生成工具生成完全没有规律的随机字符串。这种方案的安全性很高，高到连你自己都记不住。
所以我需要这样一套好的方案，它应该在安全性和易用性之间取得一个比较好的平衡，并且随著方法论和工具链的进化，这个平衡可以无限逼近黄金分割点。
首先，密码应该是复杂但容易记住的。密码的复杂度和记忆负担并不成正比，例如如果你实在记不住“ppnn13%,dkstFeb1st”，那么这样呢——“娉娉袅袅十三余，豆蔻梢头二月初”。密码只是一个字符串，如果不去死记最终的值，而是字符串背后的规律，记忆的压力就会小很多。
但考虑到每个账号都想一个这样的密码是不现实的，而且怎么解决记忆密码和账号的对应关系的问题？所以进一步，可以用这样的密码当前缀，每个密码的前缀都一样，然后针对每个账号创造一个后缀，这个后缀应该是每个账号都不同的，且和账号有某种只有你自己才知道的关联，这样你可以随时根据账号计算出它的后缀。例如，可以用账号拼音首字母（当然，实际的规则应该更复杂一点）。
这样你就有了足够复杂、每个账号都不同并且很容易记住的密码。进一步地，在私有设备上可以利用文本替换功能（例如：Alfred for Mac的Snippets功能）快速输入通用前缀，某些支持按键编程的机械键盘会有更好的体验。
不过好记性不如烂笔头，为防万一，还是需要一个Plan B。主流的密码管理工具主要有这么几种：
浏览器的账号记忆功能 操作系统的keychain 在线密码管理工具 离线密码管理工具 浏览器一般是把密码以明文存储在本地的，firefox虽然有个主密码，但只是个幌子，别人仍然可以拿到它记录密码的数据库文件。这种做法的逻辑在于，设备上存储的数据的安全性由操作系统和用户负责，换句话说，用户不应该允许他人用自己的权限登录设备。但实际上很难避免这种情况，而且还要考虑到系统被入侵的可能。所以，只应该让浏览器记住那些最不重要的账号。
相对来说，操作系统的keychain一般有自动锁定的功能，会更安全一些。但是仍无法完全避免上述问题。而且keychain只能记录账号和密码，无法存储更多的附加信息。所以这种工具也只应该存储一些不重要的账号。
最著名的在线密码管理工具应该是Lastpass。关于它的安全性有很多种说法，不过我觉得但凡是敏感数据都不要存储到线上，所以这种方式不予考虑。
我倾向于使用离线的密码管理工具。1password据说很好用，但是太贵了，而且开源免费的keepass已经完全够用了。我在Mac上用KeePassXC，在iOS中用MiniKeePass，私钥文件离线存储，然后数据库文件用Dropbox同步就可以了。
此外，对于重要的账号，如果支持两步验证，一定要开启，然后用OTP Auth管理即可。
最终的方案是：
方法论：统一的复杂但有规律的前缀+根据账号计算出来的后缀 工具链：KeePass + OTP Auth + Dropbox</description></item><item><title>Laravel单元测试错误：1205 Lock wait timeout exceeded</title><link>http://0x3f.org/posts/1205-lock-wait-timeout-exceeded/</link><pubDate>Fri, 22 Dec 2017 15:47:32 +0000</pubDate><guid>http://0x3f.org/posts/1205-lock-wait-timeout-exceeded/</guid><description>错误信息：
1205 Lock wait timeout exceeded; try restarting transaction
原因之一是测试用例里重写的tearDown()方法中没有调用父类的该方法。因为DatabaseTransaction这个trait自动开启了事务，对应的回滚方法在测试用例基类的tearDown()中执行。</description></item><item><title>用Charles拦截iOS APP HTTPS请求</title><link>http://0x3f.org/posts/ios-app-intercepting-using-charles/</link><pubDate>Fri, 22 Dec 2017 15:17:04 +0000</pubDate><guid>http://0x3f.org/posts/ios-app-intercepting-using-charles/</guid><description>实践环境 Charles 4.2 iOS 11.2.1 安装证书 按照Charles菜单（Help -&amp;gt; SSL Proxying -&amp;gt; Install Charles Root Certificate on a Mobile Device or Remote Browser）的指示，设置iOS的系统代理。
为了以后使用方便，可以在代理工具（如ShadowRocket）里设置，注意使用时应配置代理工具对全部流量使用代理，如果使用PAC之类动态代理可能会拦截不到。
在iOS的Safari中访问上面提示中的网址，会弹出提示安装证书。iOS 10.3以后还要设置信任该证书（设置-&amp;gt;通用-&amp;gt;关于本机-&amp;gt;证书信任设置）。
配置Charles拦截HTTPS请求 路径为：Proxy -&amp;gt; SSL Proxying Settings
可以设置对特定的主机名和端口拦截，也可以直接保存，此时对所有请求均会拦截。
拦截 iOS中打开上述代理，APP中发送的请求就会在Charles里列出来。</description></item><item><title>测试驱动开发的实际收益</title><link>http://0x3f.org/posts/the-real-income-of-tdd/</link><pubDate>Sun, 17 Dec 2017 14:20:02 +0000</pubDate><guid>http://0x3f.org/posts/the-real-income-of-tdd/</guid><description>我并不试图系统地谈TDD，因为我在这方面的经验还不足以做到这一点。但是TDD的一些方法论和工具确实解决了我在实际开发过程中遇到的一些问题。
第一个问题是健壮性。尤其是对于我这样思维发散、容易迷失又喜欢重构的人，TDD给了我一个明确的目标，在一切刚开始的时候，我要做的只是满足测试用例，让它们由红变绿。到了重构阶段，我就可以把精力放到优化代码上面，且不必对健壮性有过多的担心。在此之前，由于手动测试比较麻烦，很多时候惰性会说服潜意识告诉自己这部分逻辑很简单、不会有什么bug，结果提交测试后却一再地发生问题。
第二个问题是效率。曾经只有不忙的时候才会写测试用例，但是现在一般都会写，因为确实可以提高开发效率，而不只是保证重构的健壮性。可能对于所有对单元测试不熟悉的人来说，这都是匪夷所思的，我也曾认为单元测试只是用来保证健壮性的，必然和开发效率是一对矛盾，因为要花很多时间写测试代码。这种想法首先是因为对单元测试不熟悉，所以才需要花很多时间在上面。其次是没有看到它所带来的好处。
例如你要实现一整套退款单的功能，退款单是依赖订单的，这意味著你需要不只一条符合条件的订单数据。但是订单是有状态的，随著时间的推移、人为的操作或者开发过程中程序的影响，状态会变得不再符合你的要求，这时候你就必须停下来去做更多符合要求的订单。而创建订单也存在很多麻烦，你需要找到有库存的商品，有时候还要去库管系统中补充库存，然后下单并支付。最后花了很多时间做出来的订单，因为正在开发的退款单的程序出现的一个小问题变得不能使用！时间被大量浪费在创建所依赖的上游数据上。
这时候如果用单元测试并mock出依赖关系，就可以随时随地、无限制地执行相关的业务逻辑。对效率的提高不言而喻。
特别的，mock并不是随时可以抓起的救命稻草，它的原罪在于：不负责任地滥用mock会导致很多问题被掩盖。因此，对mock的使用应该是节制的、目标明确的。
当然，这并不包括单纯地为了提高代码覆盖率而使用mock，只所以这是个在很多强制TDD的团队里的普遍现象，归根结底是因为KPI是万恶之源，任何好的方法论，一旦沦为KPI，就离死不远了。</description></item><item><title>BaiduPCS：当前最好用的百度网盘下载工具</title><link>http://0x3f.org/posts/baidupcs/</link><pubDate>Tue, 12 Dec 2017 21:21:16 +0000</pubDate><guid>http://0x3f.org/posts/baidupcs/</guid><description>BaiduPCS是个命令行工具，用于下载百度网盘中的资源。之前用的是浏览器插件，需要先创建分享，再拿到下载链接，最后用下载工具下载。这个工具可以直接执行一条命令下载指定的资源，非常方便。
这里有安装说明，然后按照使用说明操作即可。</description></item><item><title>iOS垃圾短信过滤器：熊猫吃短信</title><link>http://0x3f.org/posts/panda-eats-sms/</link><pubDate>Sun, 10 Dec 2017 12:08:47 +0000</pubDate><guid>http://0x3f.org/posts/panda-eats-sms/</guid><description>“熊猫吃短信”是个新上架的App，用于过滤垃圾短信。据说是基于机器学习训练出来的，用了一周，识别得非常准确。
之前用的腾讯手机管家，即使把“精准识别”、“上传到云端”等选项都打开，还会有漏网之鱼，而且会牺牲隐私。这个App声称不会主动上传短信。最重要的是，这一周里所有不关心的短信都被过滤掉了，而且没有失误。</description></item><item><title>全新Kindle Oasis使用感受</title><link>http://0x3f.org/posts/the-all-new-kindle-oasis/</link><pubDate>Sat, 09 Dec 2017 14:03:08 +0000</pubDate><guid>http://0x3f.org/posts/the-all-new-kindle-oasis/</guid><description>早在Paperwhite 1的时候我就不喜欢它的工业设计：边框太宽，屏幕内陷。此外，非人体工学设计和没有实体翻页键导致单手握持体验很差。再有就是做工的问题，机身表面接缝处缝隙明显而不均匀、通体强烈的塑料感。然而还是从一代用到了三代，除了kpw是kindle全系列里性价比最高的产品线之外，还有就是没有其它任何一款产品解决了kpw的主要问题。
例如Voage，虽然屏幕不内陷了、楔形机身优化了握持感、增加了翻页键，但整体的设计只算是在kpw基础上的优化，何况各项硬件配置和kpw3几乎无差。
后来当第一代Oasis发布的时候，看了第一眼就瞬间失掉了兴趣。捆绑的充电保护壳绝对是体验杀手，装上壳比kpw还要厚重，不装的话本体的续航又很差，频繁拆装也很不方便，这样的体验连kpw都不如。所以我很不看好它，果然很快在今年六月就下架了。
十月刚看到新Oasis的消息时，马上觉得这回终于有买的价值了。
首先是7寸的屏幕，瞬间和其它产品线拉开了距离。更大的屏幕意味著能展示更多内容，增加了宽度后也更接近实体书的观感。
工业设计相对于我的kpw3当然是有了质的改变。玻璃材质的纯平表面，金属背壳，没有了kpw的塑料感，显得更精致。得益于窄边框，7寸屏的机身长度比6寸的kpw还短。虽然因为加宽了屏幕和增加了单手握持的边框导致机身宽度超过kpw很多，不过在平时携带中并没有造成很多困扰。
单手握持是ko系列的主要卖点，实际使用体验当然很好。为握持设计的宽边框加上实体翻页键非常方便。虽然因为加大屏幕和增加续航导致194g的重量远远超过1代的131g，但还是比kpw轻了10g，而且主要重量集中在单手握持的一边，杠杆效应很小。配合重力感应，随时换手可以有效缓解疲劳。当然，作为长时间单手握持的阅读设备，重量自然越轻越好，这一点上，ko还有很大优化的空间。
此外，新ko的做工远远好于kpw，没有了廉价感。12颗背光灯使得背光的均匀度比kpw强了很多，几乎不会有kpw上明显的光影。性能上是现在kindle全系列里最高的，翻页时虽然还会看到闪屏，但比以前已经快了很多。自动亮度调节算是个聊胜于无的功能吧。至于防水和有声书，我没有这方面的需求。
如果说缺点的话，还是续航。虽然相对于1代本体，续航已经达到可用的水平，但是对于被其它产品线惯坏的我们来说，新ko电量的消耗还是快了点。我没有精确的对比，但是能明显地感觉到比kpw掉得快不少。</description></item><item><title>清洁手机的最佳实践</title><link>http://0x3f.org/posts/how-to-clean-a-phone/</link><pubDate>Sun, 03 Dec 2017 22:51:42 +0000</pubDate><guid>http://0x3f.org/posts/how-to-clean-a-phone/</guid><description>以前的做法是先用湿巾清理，再用纸巾擦干。后来屏幕的触感逐渐不如开始时顺滑，也更容易沾指纹和灰尘，而且不容易清除。估计应该是湿巾的酒精会腐蚀屏幕的涂层，纸巾粗糙的表面也会造成磨损。
现在先用软毛刷扫除灰尘，然后用3M魔布擦拭。效果应该会更好。</description></item><item><title>Firefox Quantum：狐狸的反击</title><link>http://0x3f.org/posts/firefox-quantum/</link><pubDate>Sun, 03 Dec 2017 21:53:18 +0000</pubDate><guid>http://0x3f.org/posts/firefox-quantum/</guid><description>不知不觉已经很多年没有用过Firefox了。在Chrome发布之前，这只狐狸以一己之力扛著互联网承前启后的大旗。后来被Chrome在网页加载速度上吊打，逐渐式微。之后还在用Firefox的人一般也只是因为受不了Chrome的内存占用。
Firefox Quantum刚发布的时候我就安装了，以为是个全新的项目，新项目初期往往特性不健全，所以就没有太多关注。
然后发现版本号接续了旧版，也兼容原Firefox的插件，所以就装上几个必要的插件，尝试了一下。新的UI借鉴了Chrome，不像原来那么过时。最重要的是内存占用和网页打开速度比Chrome有优势。如官方宣传语所说——快而不俗。
准备把默认浏览器改成FQ，用一段时间看看。</description></item><item><title>Vim最好的PHP语法高亮插件</title><link>http://0x3f.org/posts/the-best-php-syntax-file-of-vim/</link><pubDate>Tue, 28 Nov 2017 15:55:59 +0000</pubDate><guid>http://0x3f.org/posts/the-best-php-syntax-file-of-vim/</guid><description>StanAngeloff/php.vim应该是目前最新、最全的PHP语法高亮插件了，它解决了旧版本无法高亮@throws的问题。
默认会把方法注释全部当做普通注释显示，也就是没有高亮，需要专门做配置：
1 2 3 4 5 6 7 8 9 function! PhpSyntaxOverride() hi! def link phpDocTags phpDefine hi! def link phpDocParam phpType endfunction augroup phpSyntaxOverride autocmd! autocmd FileType php call PhpSyntaxOverride() augroup END</description></item><item><title>iPhone X官方硅胶保护壳使用感受</title><link>http://0x3f.org/posts/iphone-x-silicone-case/</link><pubDate>Sun, 26 Nov 2017 12:50:13 +0000</pubDate><guid>http://0x3f.org/posts/iphone-x-silicone-case/</guid><description>我相信所有注重体验的人都不愿意用保护壳，我也一样，所以用iPhone 6的两年多里绝大部分时间也都是裸奔。
对于给X加壳这件事，我是很矛盾的，然而面对这个既易碎又碎不起的东西，贫穷限制了我对体验的偏执。
对于壳的选择，我有这些考虑：
防护性好：毕竟这是加壳的唯一目的，所以那些超薄的壳就在考虑范围内了。 易装卸：只有出门时会加壳，在家要去掉，所以这是个很频繁的行为，既要容易操作，又要不伤手机。 易维护：方便清洁，所以皮质的就不考虑了。 贴合度高，触感好：体验还是很重要，软壳一般很难做到这一点，所以范围限制在硬壳上。 外观简约。 材料安全。 试错成本低：少花冤枉钱，节省时间精力。 符合这些条件的就只剩下官方硅胶壳了，然而我还是在颜色的选择上纠结了很长时间。因为硅胶壳容易粘灰，所以越是浅色越不明显，然而深色可以减少和X黑色前面板的割裂感。最终选择了钴蓝色。
用了一周的时间，完全符合预期。</description></item><item><title>电影《疾速追杀》</title><link>http://0x3f.org/posts/movie-john-wick/</link><pubDate>Sun, 26 Nov 2017 10:09:34 +0000</pubDate><guid>http://0x3f.org/posts/movie-john-wick/</guid><description>上周看了《疾速追杀》和《疾速特攻》，后者是前者的第二部。
情节比较老套：一个因爱退隐的职业杀手，在妻子病逝、黑道欺凌下，不得以奋起反击、与整个杀手行业为敌，最后善恶有报、空余萧索。
知道这部戏是因为和《极寒之城》是同一个导演，卖点都是暴力美学，风格不同。《极寒之城》用不加特效的长镜头表现格斗的残酷，画风冷峻。《疾速》系列更像《杀死比尔》，场面华丽，十步杀一人、千里不留行。
关于暴力美学，维基百科是这么解释的：
主要在官感上，使暴力以美学的方式呈现，诗意的画面，甚至幻想中的镜头来表现人性暴力面和暴力行为。观赏者本身往往惊叹于艺术化的表现形式，无法对内容产生具体的不舒适感。支持人士往往称「暴力程度与票房收入成正比」，社会道德捍卫者和舆论谴责人士则称其是对社会道德教化的阻碍和负面影响；恐引发心理未臻成熟的人们，间接以为暴力行为亦是一种美感的呈现。
在众多香港导演中，吴宇森是运用这种电影表现手法的代表性人物。其标志性的白鸽漫天飞舞，手持双枪的英雄人物纵横在屏幕之上，使象征和平和安详的白鸽与血腥暴力的枪弹形成了强烈的视觉反差，吸引了无数的目光。
然而我并不打算马上去看新《追捕》，炒冷饭的鲜有好戏，等等再说。</description></item><item><title>iPhone X使用感受</title><link>http://0x3f.org/posts/iphone-x/</link><pubDate>Sun, 12 Nov 2017 13:10:05 +0000</pubDate><guid>http://0x3f.org/posts/iphone-x/</guid><description>上手用了两天，感觉优点多于缺点，总体是进步的。
如果没有新的工业设计，我可能会把小6继续用下去。毕竟当初就对小6的白带和粗边框很不满意，虽然8因为改回玻璃背板已经基本解决白带问题，但是前面板几乎没有变化，一个工业设计用了四代，再优秀也审美疲劳了，而且那个屏占比在现在的千元机里也是倒数了，哪怕把边框做得再窄一点，8也不至于跳水成现在这样。
买的银色，实际观感更接近乳白色，而深空灰更接近黑色。后者配色的一体性并没有别人说的那么好，而前者配色也没有很强的割裂感。
宽度比6稍大，长度更长，单手握持无压力，不过单手操作就别想了，即使是6，搭配指环单手操作也不方便。
前面板在息屏状态下一体性很好。当然我不认为这是个很重要的标准，好像罗永浩说过黑色边框可以隐藏低成本的做工，白色边框想做好更难，不管真假，息屏美学就是个营销手段，有谁会盯著息屏的手机瞅？
功能方面，这次最大的卖点就是Face ID，体验真是比Touch ID好太多！尤其是我手汗多，指纹解锁失败率很高，不过这些年倒是因此养成了一天洗几十次手的习惯……
性能上，找回了6在iOS8时的流畅度。如果没有意外，6在iOS11下就现在这德性了，追求流畅度的在10.3.3止步吧。
拍照方面，「世界第二」的摄像头效果搭配人像模式效果比6好很多。
至于续航，虽然免不了一天一充，起码比6在iOS11下强多了，毕竟多了一千毫安。
此外，作为古老的小6的用户，3D Touch、抬手亮屏、随时喊Siri也有更好的体验。
屏幕方面，全面屏+OLED效果拔群。看久了X的屏幕，再看6的会觉得模糊很多。另外，True Tone比起Night Shift也更智能了。
异形屏不是苹果的首创，全面屏也不是小米的首创，而它们连同三星S8已然成了全面屏的三个流派。我个人更倾向于异形屏，虽然iPhone X的屏占比实际上并不是非常高，不过观感上更彻底。S8用曲面屏把左右边框做到视觉上宽度接近零，不过三星的供货问题是这个流派最大的障碍。至于小米MIX，完全就是在低成本、供应链和软件生态话语权弱、硬件技术落后等因素作用下、利用普通LCD面板追全面屏热度的怪胎。MIX1就是个半成品，到了MIX2才算基本可用。所以小米不是第一个做全面屏的，但是是第一个不要脸的，还是老罗实在，「全面屏」后面还加个「almost」。
未来一两年，从千元机到高端机会全面普及全面屏。中低端机型主流应该会选择坚果Pro2的风格，用普通面板，然后尽量把边框做窄。高端机型在异型屏和曲面屏之间会有一场好戏。
取消Home键换来的新的交互方式，整体上是进步了。回到主界面和切换任务这两个常用操作改用触摸手势，取消了到实体键的依赖，也提高了效率。侧边键得到了更充分的利用，呼出Siri和Apple Pay从Home键挪了过来。如果同时按侧边键+音量减能自定义或者实现像坚果Pro2闪念胶囊按键那样的功能会更好。
缺点主要是边框和厚度，原本我对小6的厚度是很满意的，只是希望把边框做窄点。现在不但祖传的粗边还在，还越做越厚是什么毛病？！</description></item><item><title>电影《极寒之城》</title><link>http://0x3f.org/posts/movie-atomic-blonde/</link><pubDate>Sun, 29 Oct 2017 10:14:56 +0000</pubDate><guid>http://0x3f.org/posts/movie-atomic-blonde/</guid><description>这是最近看的电影里让我印象最深的一部。
故事背景是1989年柏林墙倒塌前发生在德国的一场谍战。剧情组织得很一般，冷战和谍战这两个卖点做得都不成功，虽然塞隆和波多拉两位女神的床戏挽救了一切，但是女同的卖点只是一道开胃菜，最精彩的部分是中后段的一场动作戏，塞隆单挑一群克格勃，同时还要保护一个东德叛谍，长达数分钟的一个长镜头，场面极为真实，一改一般好莱坞动作片里打不死的风格。</description></item><item><title>读完《谈美》</title><link>http://0x3f.org/posts/after-reading-tan-mei/</link><pubDate>Sun, 29 Oct 2017 09:21:58 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-tan-mei/</guid><description>这本书讲的是「什么是美」。读完后对美有了一些基本的概念，才知道我的审美水平还停留在「以快感为美」的阶段。
朱自清的序里的一些话说得很好：「新文化是「外国的影响」，自然不错；但说一般青年不留余地地鄙弃旧的文学艺术，却非真理。」、「许多青年腻味了，索性一切不管，只抱著一条道理，「有文艺的嗜好就可以谈文艺」。这是「以不了了之」，究竟「谈」不出什么来。」</description></item><item><title>用Tiny Tiny RSS搭建私人阅读器的步骤</title><link>http://0x3f.org/posts/ttrss/</link><pubDate>Fri, 27 Oct 2017 14:12:16 +0000</pubDate><guid>http://0x3f.org/posts/ttrss/</guid><description>优势 自定义过滤器 全功能，无限制 利用已有VPS，无需额外费用 安装 安装并启动docker 1 2 3 4 curl https://get.docker.com/ | sh // centos7 systemctl start docker 安装postgre 1 docker run -d --name ttrssdb nornagon/postgres 安装tiny tiny rss 1 docker run -d --link ttrssdb:db -p 80:80 -e SELF_URL_PATH=http://example.org/ttrss fischerman/docker-ttrss example.org替换成VPS的IP或者对应的域名。
配置 配置主程序 访问http://example.org/ttrss，用户名admin，密码password。
伪装成fever 如果RSS阅读器不支持ttrss，但支持fever，例如reeder，可以通过安装插件伪装成fever：
1 2 3 git clone https://github.com/rannen/tinytinyrss-fever-plugin.git docker cp fever [[CONTAINER ID]]:/var/www/plugins 然后去设置见面启用fever插件，并在fever插件的配置栏设置单独的密码，该栏目中会显示在RSS阅读器中使用的接口地址，用户名就是admin。
备份 每天凌晨3点备份数据库到dropbox。
下载dropbox上传脚本 在VPS的/root下执行：
1 wget https://raw.github.com/andreafabrizi/Dropbox-Uploader/master/dropbox_uploader.sh 执行命令并按提示操作：
1 ./dropbox_uploader.sh info 创建备份脚本 创建/root/backup.</description></item><item><title>过度优化和过度设计</title><link>http://0x3f.org/posts/talk-about-excessive-design/</link><pubDate>Sun, 22 Oct 2017 21:38:08 +0000</pubDate><guid>http://0x3f.org/posts/talk-about-excessive-design/</guid><description>我见过两种程序员，一种是想做事的，一种是混饭吃的。
第一种人最容易犯两个错误，一是过度优化，二是过度设计。两种错误共同的原因是经验不足，不同的地方是过度优化往往出于知其然不知其所以然，而过度设计一般是想得太远从而脱离实际。
比如我见过的一个人，凡是联表的语句，都要拆开来写，完全不考虑这些联表语句实际会不会发生性能问题。**这就是过度优化，只记住一些成例和范式，不从实际出发，胶柱鼓瑟，刻舟求剑。**联表当然会造成数据量以笛卡尔积的形式增长，但如果所联表的数据量并不大，或者通过限制条件过滤后的数据量不大，并不会出现性能问题，而拆开SQL语句会导致代码量增大、可读性下降，是得不偿失的。
至于过度设计，我自己就是个很好的反面教材。刚工作的时候，我在写程序之前和过程中会不断地冒出新的想法，设想到很多种可能，为了照顾到这些可能性，我会不断地重构程序，导致出活很慢。多数人并不会认真了解别人，只是从结果上武断地下结论。所以关于我写程序太慢的说法就悄悄流传开，而那些程序写得很烂、混饭吃但出活很快的人反而获利颇丰。最可笑的是过了很长时间后回顾曾经设想到的可能性，几乎全部没有发生。为一些将来可能发生而实际没有发生的可能性，在一开始就花费更多的成本，这就是过度设计。
不过经验作为知识存量，是不值钱的，假以时间，有一定认知水平、不甘于庸俗的人总可以积累得到。所以相对于第二种人，我宁愿和第一种共事。</description></item><item><title>搭好了SSR</title><link>http://0x3f.org/posts/ready-for-ssr/</link><pubDate>Wed, 18 Oct 2017 15:34:33 +0000</pubDate><guid>http://0x3f.org/posts/ready-for-ssr/</guid><description>搭在vultr东京节点的SS在家里的网络上已经不能用了，lantern和大杀器也不稳定到基本没有可用性的程度。短短几天时间，三把梯子挂了仨。
搭好了SSR，等着晚上回去测试。
SSR一键部署脚本：https://github.com/91yun/shadowsocks_install Mac的SSR客户端：https://github.com/qinyuhang/ShadowsocksX-NG-R/releases iOS的SSR客户端：ShadowRocket</description></item><item><title>用gv.vim查看git提交历史</title><link>http://0x3f.org/posts/gv-vim/</link><pubDate>Wed, 18 Oct 2017 13:28:16 +0000</pubDate><guid>http://0x3f.org/posts/gv-vim/</guid><description>gv.vim是fugitive的插件，用于查看git提交历史，特点是速度快、好用。我现在用它做code review。
1 2 3 4 nnoremap &amp;lt;leader&amp;gt;gll :GV --no-merges&amp;lt;CR&amp;gt; nnoremap &amp;lt;leader&amp;gt;glc :GV!&amp;lt;CR&amp;gt; nnoremap &amp;lt;leader&amp;gt;gla :GV --no-merges --author&amp;lt;space&amp;gt; nnoremap &amp;lt;leader&amp;gt;glg :GV --no-merges --grep&amp;lt;space&amp;gt;</description></item><item><title>解决phpqa和fugitive不兼容的问题</title><link>http://0x3f.org/posts/solve-the-incompatablility-between-fugitive-and-phpqa/</link><pubDate>Wed, 18 Oct 2017 11:05:12 +0000</pubDate><guid>http://0x3f.org/posts/solve-the-incompatablility-between-fugitive-and-phpqa/</guid><description>在:Gstatus中查看diff时，报错：
Error detected while processing function Phpqa#PhpLint: line 8: E684: list index out of range: 0 E116: Invalid arguments for function match(l:php_list[0],&amp;ldquo;No syntax errors&amp;rdquo;) == -1 E15: Invalid expression: 0 != v:shell_error &amp;amp;&amp;amp; match(l:php_list[0],&amp;ldquo;No syntax errors&amp;rdquo;) == -1
这是phpqa的bug，有人创建了PR，但作者没有合并，需要手工合并：
1 curl -L https://github.com/joonty/vim-phpqa/pull/43.patch | git am</description></item><item><title>读完《美的历程》</title><link>http://0x3f.org/posts/after-reading-historical-evolution-of-aesthetics/</link><pubDate>Mon, 25 Sep 2017 16:43:08 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-historical-evolution-of-aesthetics/</guid><description>这是我读过的第一本美学书。梳理了中国文艺和审美发展的历史脉络，浅显易懂。
多读点美学还是很有必要的，能减少点俗气，那就最好了。</description></item><item><title>为什么不应该给表名加前缀</title><link>http://0x3f.org/posts/why-prefixes-are-not-needed-for-table-names/</link><pubDate>Mon, 25 Sep 2017 14:12:41 +0000</pubDate><guid>http://0x3f.org/posts/why-prefixes-are-not-needed-for-table-names/</guid><description>表前缀是个过时的东西。在计算机资源比较昂贵的时代，出于节约成本的需要，会把多个系统的数据放在同一个数据库实例里，所以才会用前缀区分。如今各种云的普及，使这个问题早已经不存在，大家的资源都是冗余的，没有人会把多个系统的表放到同一个库里，这会给运维带来不必要的麻烦。
然而身边总是会遇到胶柱鼓瑟的人，知其然而不知其所以然。表前缀既非必要，又会导致一些问题。
其一是写代码时的困扰。比如我经常会在用查询构造器时忘了给表别名加前缀，直到程序报错才突然想起来。
其二是代码重构的问题。在构造SQL语句的过程中，总是免不了会写原生的语句，这时就得写死表前缀。如果将来表前缀发生变化，重构代码时会麻烦而容易出错。</description></item><item><title>用AlfredTweet发推</title><link>http://0x3f.org/posts/tweet-with-alfredtweet/</link><pubDate>Sun, 17 Sep 2017 09:26:41 +0000</pubDate><guid>http://0x3f.org/posts/tweet-with-alfredtweet/</guid><description>AlfredTweet是用来解决“最后一公里”问题的东西，有了它就可以随时发推了。
需要修改源码指定代理：
1 2 3 4 5 6 7 8 9 // twitteroauth.php function http($url, $method, $postfields = NULL) { // ... curl_setopt($ci, CURLOPT_HTTPPROXYTUNNEL, TRUE); curl_setopt($ci, CURLOPT_PROXY, &amp;#39;127.0.0.1:1086&amp;#39;); curl_setopt($ci, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5); // ... }</description></item><item><title>读完《汉书》</title><link>http://0x3f.org/posts/after-reading-han-shu/</link><pubDate>Sun, 10 Sep 2017 23:34:19 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-han-shu/</guid><description>一周前读完了《汉书》。
因为读过《资治通鉴》，这次并没有发现太多新鲜的东西，印象最深的是班氏父子的严谨，超过了两个司马。比如对于成帝的死，作为通史的《通鉴》居然写得比断代的《汉书》还详细，对于史书，详和实似乎是一对矛盾，前者自然更好看，而后者显然更严谨。
秦汉之际，中国先后完成了两次宏大的社会实践。一次是秦的法家实践，一次是王莽的儒家改制。历史先后把机会给了构成中国日后民族性格最主要的两个思想流派，又用残酷的现实给这两个处处针锋相对的对头以当头棒喝。两家对对方缺陷的研究都在对方的失败里得到印证，而同时对自身的问题又都视而不见。这是非常戏剧性的一幕，儒法之争作为中国两千年政治的基本矛盾和规律，在一开始就被证明谁都不能独力承担给这个国家指明出路的责任。
按照钱穆在《中国历代政治得失》里的说法，昂扬向上的知识分子在先秦百家争鸣最大成就的儒法两家全部失败后就颓了，怀疑和茫然蔓延开来，第一帝国也由此走向衰亡。而从另一角度，李泽厚在《美的历程》里却认为，社会实践的失败引发了思想的解放和自我意识的觉醒，第一帝国在政治上的失败并没有影响其文化向心力，胡尘狼烟中的北方仍以文弱江南为衣冠正朔所在。
对于接下来的《后汉书》，我的期待不高，凭借门阀起家的光武帝一改前汉打压豪强的政策，章帝之后再无中兴，然后是在无休止的宦戚之争、鲜卑盗边和羌乱中回响的桓灵的叹息。
第一帝国在巅峰中死去。</description></item><item><title>什么是docker</title><link>http://0x3f.org/posts/what-is-docker/</link><pubDate>Thu, 07 Sep 2017 15:31:11 +0000</pubDate><guid>http://0x3f.org/posts/what-is-docker/</guid><description>什么是docker docker是一种容器，这篇文章对容器的定义是：
容器是一组运行在Linux操作系统上并使用命名空间进程进行分隔的进程，有了容器就无需再启动和维护虚拟机。与虚拟机技术相比，容器的最大不同之处在于打包格式和可移植性。构建容器的目的在于为现代基础设施降低占用空间和启动时间、提供重用性、更好地利用服务器资源，并更好地集成到整个开发生态系统中（例如持续集成和交付生命周期）。
容器相对于虚拟机有以下优点：
更高效地利用系统资源 更快的启动速度 一致的运行环境 持续的交付和部署 更轻松的迁移 维护和扩展的便利性 基本概念 镜像 Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。
镜像分为黑箱镜像和dockerfile。
前者通过实际创建和配置docker容器并通过docker commit记录每个版本的变更，优点是简单直观，缺点是不能记录在基础镜像上做了哪些操作，并且在多次修改之后，镜像会变得很臃肿。
dockerfile是镜像的配置文件，部署时docker根据配置内容生成容器，优点是可以清楚地记录每次修改的内容、镜像体积很小，缺点是编写时比较复杂。
容器 容器是镜像运行的实体。
仓库 分发镜像的服务。
编排 容器的编排包含如下一系列任务：
调度（包括部署、复制、扩展、复活、重新调度、升级、降级等） 资源管理（内存、CPU、存储空间、端口、IP、镜像等） 服务管理（即使用标签、分组、命名空间、负载均衡和准备就绪检查将多个容器编排在一起） 安装 我在黑苹果下安装。Mac下安装docker有两种方式：Docker for Mac或Docker Toolbox。前者最简单，后者在前者的系统要求不能被满足的情况下使用。后者的卸载比较麻烦，具体参照这里。
我用前种方式安装，启动时报错：
com.docker.osx.hyperkit.linux failed to start
解决方法是到BIOS里打开VT特性，有说法说黑苹果不支持VT，我这里是可以的。
镜像加速器 一般用阿里云的镜像服务。
docker的使用 拉取镜像 1 docker pull base/archlinux 列出镜像 1 docker images 创建容器 1 docker run --name arch --it base/archlinux bash 终止容器 exit或ctrl-d
启动已终止容器 1 docker start arch attach运行中的容器 1 docker attach arch detach运行中的容器 ctrl+p ctrl+q或者：</description></item><item><title>让hexo使用小写文件名</title><link>http://0x3f.org/posts/let-hexo-use-lowercase-filename/</link><pubDate>Tue, 15 Aug 2017 13:25:50 +0000</pubDate><guid>http://0x3f.org/posts/let-hexo-use-lowercase-filename/</guid><description>hexo在生成tag目录时默认保持大小写，如果tag名称掺杂了大小写，会导致用tag索引文章的链接无法访问。解决的办法是强制hexo使用小写的文件或目录名，修改_config.yml：
1 filename_case: 1 即便如此，还要把之前生成的结果从托管服务器上删除，不过在Mac这样的不区分大小写的文件系统中，直接部署新生成的结果是无效的，这时需要删除hexo目录下的.deploy_git目录并重新部署：
1 2 3 4 rm -rf .deploy_git hexo clean hexo d -g</description></item><item><title>用vim-test简化单元测试的编写</title><link>http://0x3f.org/posts/make-writing-unit-tests-easier-with-vim-test/</link><pubDate>Mon, 14 Aug 2017 16:43:59 +0000</pubDate><guid>http://0x3f.org/posts/make-writing-unit-tests-easier-with-vim-test/</guid><description>vim-test允许在Vim中直接执行一个或多个单元测试，并使用预设的或自定义的执行策略。
例如，命令:TestNearest可以执行当前测试文件中离光标最近的一个测试方法。而:TestFile、:TestSuite和:TestLast分别执行整个测试文件、测试项目和最近一次执行过的测试。这在编写测试代码时能很大地提高效率。
执行策略是执行测试的方式和环境。例如缺省状态下，将使用:!执行测试命令，这会从Vim切换回终端。而在MacVim下，可以选择在iTerm或者系统自带的Terminal中执行。</description></item><item><title>把博客字体改成了方正北魏楷书</title><link>http://0x3f.org/posts/set-blog-webfont-to-fzbeiweikaishu/</link><pubDate>Mon, 14 Aug 2017 16:05:30 +0000</pubDate><guid>http://0x3f.org/posts/set-blog-webfont-to-fzbeiweikaishu/</guid><description>我曾说过方正北魏楷书是最佳的阅读字体，不过后来感觉长时间阅读的体验还是普通的楷体更好。但这并不妨碍在Reeder、博客这种短时阅读场合突出页面的设计感。
今天把博客（hexo）的webfont改成了方正北魏楷书，用font-spider压缩后，从13M缩减到1.4M。方法是这样的：
首先把完整的字体复制到主题的字体目录中（themes/crisp/source/fonts），文件名为FZBeiWeiKaiShu-full.ttf。
在CSS中加入webfont配置：
1 2 3 4 5 @font-face { font-family: &amp;#39;FZBeiWeiKaiShu&amp;#39;; src: url(&amp;#39;../fonts/FZBeiWeiKaiShu.ttf&amp;#39;) format(&amp;#39;truetype&amp;#39;), url(&amp;#39;../fonts/FZBeiWeiKaiShu-full.ttf&amp;#39;) format(&amp;#39;truetype&amp;#39;); } FZBeiWeiKaiShu.ttf是压缩后的字体文件名，这样访问时浏览器会优先下载压缩后的字体。
然后把CSS中使用字体的地方都指定为FZBeiWeiKaiShu。
在博客根目录下创建脚本update_fonts.sh：
1 2 3 4 5 6 7 8 9 10 11 12 #!/bin/sh hexo clean hexo g find public -name &amp;#34;*.html&amp;#34; |xargs sed -i &amp;#39;&amp;#39; &amp;#34;s#/styles/crisp.css#$HOME/Projects/blog/public/styles/crisp.css#g&amp;#34; find public -name &amp;#34;*.html&amp;#34;|xargs font-spider cp -f public/fonts/FZBeiWeiKaiShu.ttf themes/crisp/source/fonts/FZBeiWeiKaiShu.ttf hexo clean hexo s -g 除非用到新的字符，否则不需要经常更新字体。
font-spider会提示一共使用了多少种字符，我这么多年也只用到三千多种，真是太没文化了。🤥</description></item><item><title>Mock Laravel的DB Facade的方法</title><link>http://0x3f.org/posts/how-to-mock-the-db-facade-of-laravel/</link><pubDate>Mon, 14 Aug 2017 15:51:41 +0000</pubDate><guid>http://0x3f.org/posts/how-to-mock-the-db-facade-of-laravel/</guid><description>关于数据库操作是否应该mock的问题，我认为查询一般不应该mock，可以避免一些问题，但如果查询的结果可能影响到断言，就应该mock了。
Laravel的DB facade完整的mock实例是这样的：</description></item><item><title>用vim-laravel简化laravel下的开发</title><link>http://0x3f.org/posts/speed-up-artisan-with-vim-laravel/</link><pubDate>Fri, 11 Aug 2017 15:05:30 +0000</pubDate><guid>http://0x3f.org/posts/speed-up-artisan-with-vim-laravel/</guid><description>vim-laravel是个极简而实用的插件，只提供一个:Artisan命令。但它并不仅仅是artisan的一个wrapper，还可以实现一些贴心的自动化，利如自动打开artisan make:*创建的文件。</description></item><item><title>用vim-php-namespace管理PHP的命名空间</title><link>http://0x3f.org/posts/manage-php-namespaces-with-vim-php-namespace/</link><pubDate>Fri, 11 Aug 2017 14:56:12 +0000</pubDate><guid>http://0x3f.org/posts/manage-php-namespaces-with-vim-php-namespace/</guid><description>vim-php-namespace是个简单实用的插件，提供三种功能：
自动用use语句导入光标下的类 自动把光标下的类名扩展成完整命名空间的格式 自动排序use语句 此外，还提供一个选项控制是否在导入类后自动排序use语句。</description></item><item><title>使neocomplete和ultisnips共用tab键的方法</title><link>http://0x3f.org/posts/reconcile-neocomplete-with-ultisnips/</link><pubDate>Fri, 11 Aug 2017 14:43:14 +0000</pubDate><guid>http://0x3f.org/posts/reconcile-neocomplete-with-ultisnips/</guid><description>昨天用vim-clevertab换掉了supertab，但是实际使用中总是出莫名其妙的问题。看了一下插件源码，使用全局变量判断状态，这是个很不靠谱的方案，所以还是卸掉了。
下面的配置可以很好的解决问题：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 let g:UltiSnipsExpandTrigger=&amp;#34;&amp;lt;c-tab&amp;gt;&amp;#34; let g:UltiSnipsJumpForwardTrigger=&amp;#34;&amp;lt;c-tab&amp;gt;&amp;#34; let g:UltiSnipsJumpBackwardTrigger=&amp;#34;&amp;lt;s-tab&amp;gt;&amp;#34; let g:UltiSnipsSnippetsDir=&amp;#39;~/.vim/UltiSnips&amp;#39; let g:ulti_expand_or_jump_res = 0 function! CleverTab()&amp;#34;{{{ call UltiSnips#ExpandSnippetOrJump() if g:ulti_expand_or_jump_res return &amp;#34;&amp;#34; else if pumvisible() return &amp;#34;\&amp;lt;c-n&amp;gt;&amp;#34; else return neocomplete#start_manual_complete() endif endif endfunction&amp;#34;}}} inoremap &amp;lt;silent&amp;gt; &amp;lt;tab&amp;gt; &amp;lt;c-r&amp;gt;=CleverTab()&amp;lt;cr&amp;gt; snoremap &amp;lt;silent&amp;gt; &amp;lt;tab&amp;gt; &amp;lt;esc&amp;gt;:call UltiSnips#ExpandSnippetOrJump()&amp;lt;cr&amp;gt; ultisnips没有禁用按键映射的开关，而默认的映射会干扰上述配置，所以这里把默认的映射改成了&amp;lt;c-tab&amp;gt;。</description></item><item><title>GraphQL：RESTful之外的接口实现方案</title><link>http://0x3f.org/posts/graphql-vs-restful/</link><pubDate>Tue, 01 Aug 2017 17:36:27 +0000</pubDate><guid>http://0x3f.org/posts/graphql-vs-restful/</guid><description>和RESTfull一样，GraphQL也是一种基于HTTP的接口实现方式。它区别于前者的主要有两点：数据格式的自定义和请求的合并。
本质上，GraphQL是为了解决RESTful中前后端在业务逻辑上的耦合关系。在RESTful中，接口是为前端具体的业务需求定制的，从实现什么样的功能，到返回哪些数据，都是既定的，所以很难被其它业务逻辑共用，即使可以共用，前端也必须发送多个请求到后端，因而造成资源浪费、效率下降。
GraphQL实现的是一套逻辑积木，每个封装好的业务逻辑都是原子的，前端可以自由选择使用哪些，也可以定制返回数据的格式。并且这一切，都可以通过一次请求实现。
当然，GraphQL也有一些短板。比如缓存，对于RESTfull接口，可以根据操作的幂等性实现负载均衡层面的缓存，而对于GraphQL，由于请求数据格式灵活且可能很大，请求会用POST方式发送，这样就必须改变缓存的实现方式。再一点是嵌套的层级问题，GraphQL的灵活性允许查询类型之间彼此嵌套，如果层级过多，可能导致严重的性能和可用性问题，因此需要注意限制嵌套的层级。还有就是GraphQL的实现复杂度比RESTful要高，需要权衡使用哪种实现方案。
GraphQL用schema管理接口，可以根据业务等因素划分schema，例如需要权限验证的和公开的。每个schema包含两类接口：query和mutation，分别用来查询和变更数据。
下面在Laravel中简单实现一个query接口。
先安装folklore/graphql库。
实现文章类型：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 namespace App\GraphQL\Type; use GraphQL\Type\Definition\Type; use Folklore\GraphQL\Support\Type as GraphQLType; class PostType extends GraphQLType { public function fields() { return [ &amp;#39;id&amp;#39; =&amp;gt; [ &amp;#39;type&amp;#39; =&amp;gt; Type::nonNull(Type::string()), &amp;#39;description&amp;#39; =&amp;gt; &amp;#39;The id of the post&amp;#39; ], &amp;#39;title&amp;#39; =&amp;gt; [ &amp;#39;type&amp;#39; =&amp;gt; Type::string(), &amp;#39;description&amp;#39; =&amp;gt; &amp;#39;Post title&amp;#39; ] ]; } protected function resolveTitleField($root, $args) { return $root-&amp;gt;post_title; } } 实现文章的查询逻辑：</description></item><item><title>用vim-plug换掉了vim-addon-manager</title><link>http://0x3f.org/posts/replaced-vam-with-vim-plug/</link><pubDate>Mon, 31 Jul 2017 22:44:16 +0000</pubDate><guid>http://0x3f.org/posts/replaced-vam-with-vim-plug/</guid><description>四年零两个月前，我在Vim的邮件组中征询pathogen和vundle的优劣。一个人建议我试试VAM，语气幽怨——他是它的作者。
试过之后就从pathogen迁移到了VAM，因为它兼有前者和vundle的优点，在当时，这是最好的插件管理器。就这样用了很久，期间还写了点脚本简化插件的管理，VAM工作得很好。
最近发现越来越多的插件的文档里提到vim-plug，亮点是支持并行安装和更新，这真是解决了VAM最大的痛点：我叠代了十年的vimrc里用了很多插件，串行的VAM每次更新都让我很痛苦。
另外，vim-plug较VAM的另一个优势是简单。这倒不是说后者很难用，只是作者过于追求灵活性，导致有些工作实现起来相对更复杂。例如，有的插件安装之后需要做一些额外的操作，VAM需要自己实现回调函数，然后挂到post-install钩子上。而对于vim-plug，只需要在注册插件的地方增加一个选项。对于插件的懒加载，也是同样。
VAM也有自己的优势。其中之一是可以自动处理依赖关系：当一个要被安装的插件依赖别的插件时，相应的依赖也会被自动安装。还有就是对多源的支持：既可以拉取github上的插件，也可以从vim.org或其它源安装。而vim-plug就只支持github。
所以，vim-plug并没有全面超过VAM，只是没有明显的短板、功能又刚刚够用。</description></item><item><title>用choosewin.vim切换窗口</title><link>http://0x3f.org/posts/choosewin-vim/</link><pubDate>Sun, 30 Jul 2017 20:48:46 +0000</pubDate><guid>http://0x3f.org/posts/choosewin-vim/</guid><description>输入-显示每个窗口的hint，输入hint跳转，简单而高效：</description></item><item><title>Python 2还是3是个纠结的问题</title><link>http://0x3f.org/posts/bothered-by-python-2-vs-3/</link><pubDate>Sun, 30 Jul 2017 08:40:11 +0000</pubDate><guid>http://0x3f.org/posts/bothered-by-python-2-vs-3/</guid><description>前些天用denite取代unite，用--with-python3重装了vim，结果发现vdebug只支持python 2。
vim同时只能在py2和py3中选一个，据说可以通过重新编译python实现共存，但是我在编译py3的时候失败。
neovim同时支持两个版本，但是尝试deoplete失败，报「Invalid Channel」的错误，似乎是python-neovim的锅。而且由于neovim内建lua、不支持has('lua')，所以不能fall back到neocomplete。
万般无奈，只好换回unite。</description></item><item><title>给Thinkpad X220装了黑苹果</title><link>http://0x3f.org/posts/installed-hackintosh-in-thinkpad-x220/</link><pubDate>Sat, 29 Jul 2017 17:44:16 +0000</pubDate><guid>http://0x3f.org/posts/installed-hackintosh-in-thinkpad-x220/</guid><description>闲鱼上突然收到询价消息，于是突发奇想，在闲置很久的X220上装个黑苹果玩玩。
过程很简单，参考这两个链接：link1和link2。
内置的无线网卡不能驱动，用了个闲置的USB卡。蓝牙能用耳机，但不能airdrop。关机会变重启。此外没别的问题了。
现在计算机性能真是过剩的，n年前的机器，除了机械硬盘慢了点，其它毫无压力。
我在twitter上说：“似可再战三年。”</description></item><item><title>利用goyo.vim专注写作</title><link>http://0x3f.org/posts/distraction-free-writing-in-vim/</link><pubDate>Sat, 29 Jul 2017 16:48:45 +0000</pubDate><guid>http://0x3f.org/posts/distraction-free-writing-in-vim/</guid><description>goyo.vim是给vim提供专注写作模式的插件，配合markdown效果不错：
最好在单独的vim实例中使用，已发现和vim-workspace配合不好的情况。
对markdown文件自动开启goyo的配置如下：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 function! s:auto_goyo() if &amp;amp;ft == &amp;#39;markdown&amp;#39; Goyo 80 else let bufnr = bufnr(&amp;#39;%&amp;#39;) Goyo! execute &amp;#39;b &amp;#39;.bufnr endif endfunction augroup goyo_markdown autocmd! autocmd BufNewFile,BufRead * call s:auto_goyo() augroup END</description></item><item><title>用vim-workspace换掉了session.vim</title><link>http://0x3f.org/posts/replace-session-vim-with-vim-workspace/</link><pubDate>Wed, 19 Jul 2017 17:47:30 +0000</pubDate><guid>http://0x3f.org/posts/replace-session-vim-with-vim-workspace/</guid><description>用session.vim一直有几个痛点。一是保存会话后，退出时仍然会提示保存。二是会话会记录vimrc，恢复会话后用的仍然是旧的配置。
vim-workspace没有这些问题，而且实现了更多功能。</description></item><item><title>用neocomplete换掉了YouCompleteMe</title><link>http://0x3f.org/posts/replace-youcompleteme-with-neocomplete/</link><pubDate>Sat, 15 Jul 2017 10:29:48 +0000</pubDate><guid>http://0x3f.org/posts/replace-youcompleteme-with-neocomplete/</guid><description>在尝试了多种方案后，我又一次换掉了自动补全插件。
工具应该是能提高生产力的，而不是相反，很长一段时间以来，YouCompleteMe带给我的却是个疑惑，真不知道这个东东到底是提高了我的生产力，还是反之。自动补全在提高输入速度和准确度上都有助益，但是有时候补全选项弹出的又很慢。
测试了nvim-complete-manager+LanguageClient-neovim+LanguageServer-php-neovim、deoplete+phpcd、deoplete+padawan、neocomplete+phpcomplete-extended，效果都非常不理想。最后选择了neocomplete+phpcomplete，速度可以接受，表现比YCM稳定，功能该有的都有。
相关阅读： How to Make YouCompleteMe Compatible with UltiSnips Vim的终极自动补全插件：NeoComplCache</description></item><item><title>LeaderF，也许是Vim最好的模糊查询插件</title><link>http://0x3f.org/posts/leaderf-currently-the-best-fuzzy-finder-of-vim/</link><pubDate>Thu, 13 Jul 2017 16:45:15 +0000</pubDate><guid>http://0x3f.org/posts/leaderf-currently-the-best-fuzzy-finder-of-vim/</guid><description>之前对比过几个模糊查询插件（Fuzzy Finder），最后选定了ctrlp。
用了下LeaderF，在速度和匹配的准确度上都明显超过了ctrlp，所以用它换掉了后者。
只是在交互方式上，我更喜欢ctrlp，文件列表高度是动态变化的，最匹配的行和输入焦点都在窗口的最下方。LeaderF是定高的，最匹配的行在最上方，个人认为不如前者自然。
能解决痛点的才是好东西，什么时候能换掉YouCompleteMe就好了。</description></item><item><title>怎样测试PHP的Private或Protected方法</title><link>http://0x3f.org/posts/how-to-test-private-or-protected-methods-in-php/</link><pubDate>Mon, 03 Jul 2017 13:17:30 +0000</pubDate><guid>http://0x3f.org/posts/how-to-test-private-or-protected-methods-in-php/</guid><description>利用闭包绑定：
1 2 3 4 5 6 7 $ctrlr = new UserController; $tester = function () use ($uid) { $this-&amp;gt;getUser($uid); }; $runner = $tester-&amp;gt;bindTo($ctrlr, $ctrlr); $runner();</description></item><item><title>白鹿原、外乡人和窗外</title><link>http://0x3f.org/posts/routine-talk-170629/</link><pubDate>Thu, 29 Jun 2017 22:51:52 +0000</pubDate><guid>http://0x3f.org/posts/routine-talk-170629/</guid><description>今年端午恰好是开公众号一周年，成绩就不晒了，因为没有成绩，当初的目标好像一个都没实现，想著端午写几句话，结果又拖了一个月……
这一年跌宕起伏，却是不足与人道，倒是最近看了两部剧，感觉还不错。
《白鹿原》前段时间很火，我没看过原著，好像我骨子里不是个喜欢小说的，十几年前听说这本书的时候也没什么去读的冲动。这次看拍得还不错，就买了乐视的会员，每天追到凌晨一点。整体来说质量不错，阵容不算豪华，主演的几位演技都挺好，适合我这种没看过原著又很龟毛的。看过的就不用追了，影视剧永远赶不上原著。
《外乡人》的知名度就差远了，我也是从豆瓣上翻高分剧翻出来的。几年前的一部冷门剧，题材就很冷，讲沪漂的。剧情贴近现实，演员的表演也很真实，分数就高在这儿了，能做到这两点的太少了。
题图是我的窗外，前段时间天气好的时候拍的，Snapseed真是个好东西，嗯。</description></item><item><title>为每个GTK3应用指定单独的主题</title><link>http://0x3f.org/posts/specify-a-theme-for-each-gtk-3-app/</link><pubDate>Tue, 27 Jun 2017 15:37:43 +0000</pubDate><guid>http://0x3f.org/posts/specify-a-theme-for-each-gtk-3-app/</guid><description>指定GVim 8使用Numix主题并最小程度影响既有的脚本、快捷键。
我这里gvim安装在/usr/bin/gvim，$PATH中/usr/local/bin在/usr/bin前面，所以在/usr/local/bin下创建gvim：
1 2 3 #!/bin/sh GTK_THEME=Numix /usr/bin/gvim &amp;#34;$@&amp;#34; 同理，对gvimdiff也做同样处理。</description></item><item><title>调校mycli</title><link>http://0x3f.org/posts/fine-tune-mycli/</link><pubDate>Mon, 26 Jun 2017 18:05:31 +0000</pubDate><guid>http://0x3f.org/posts/fine-tune-mycli/</guid><description>做以下配置，使mycli按需使用pager，并在数据过多时不破坏表格格式：
1 2 3 4 # ~/.my.cnf [client] pager = less -FSXR</description></item><item><title>用MySQL的全文检索实现相关性排序</title><link>http://0x3f.org/posts/fulltext-searching-in-mysql/</link><pubDate>Mon, 19 Jun 2017 23:10:41 +0000</pubDate><guid>http://0x3f.org/posts/fulltext-searching-in-mysql/</guid><description>实现根据文章的关键词搜索出相关的文章，并按相关性排序。
数据库版本是5.6.x，还不能像5.7那样支持中文的全文检索，所以另外创建一列保存关键词的编码。方法为base64转码并去掉「%」符号：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 &amp;lt;?php /** * 转换关键词到全文检索的格式 * * @param mixed $keywords 关键词数组或英文逗号分隔的字符串 * @return string */ function encode_keywords($keywords) { $encoder = function ($keyword) { return str_replace(&amp;#39;%&amp;#39;, &amp;#39;&amp;#39;, urlencode(trim($keyword))); }; if (!is_array($keywords)) { $keywords = explode(&amp;#39;,&amp;#39;, $keywords); } return implode(&amp;#39; &amp;#39;, array_map($encoder, $keywords)); } 对该列创建全文检索的索引：
1 CREATE FULLTEXT INDEX idx_post_keywords ON posts (keywords_ft); 查询语句：</description></item><item><title>CopyQ，也许是Linux最好的剪贴板管理工具</title><link>http://0x3f.org/posts/copyq/</link><pubDate>Mon, 19 Jun 2017 21:49:14 +0000</pubDate><guid>http://0x3f.org/posts/copyq/</guid><description>我对剪贴板管理工具的核心需求有四个：
记录文本 记录图片 快速搜索 独立软件包 CopyQ是Linux上唯一满足这些需求的实现，虽然体验上跟Mac下的竞品还有差距。
用法：
copyq：运行 copyq menu：显示剪贴板历史管理菜单 copyq show：显示剪贴板历史管理窗口</description></item><item><title>手机锁屏后自动断开WiFi的解决办法</title><link>http://0x3f.org/posts/solve-the-auto-breaking-problem-of-huawei-e5573s/</link><pubDate>Sat, 17 Jun 2017 23:13:33 +0000</pubDate><guid>http://0x3f.org/posts/solve-the-auto-breaking-problem-of-huawei-e5573s/</guid><description>我的iPhone 6总是在锁屏后不久就从华为E5573S断开，但是连接家里的WiFi不会有这个问题，iOS同版本的iPad mini 4连接E5573S也正常。
两台机器里E5573S的连接属性界面有差异，iPhone 6里有「自动加入」等两个选项，这在同机其它WiFi连接里是没有的，iPad里也没有。所以猜测应该是iPhone里连接本身的问题，忽略掉该连接，再重新连，就好了。</description></item><item><title>用Tmux的控制模式提高生产力</title><link>http://0x3f.org/posts/improve-productivity-with-tmux-control-mode/</link><pubDate>Sun, 11 Jun 2017 10:40:06 +0000</pubDate><guid>http://0x3f.org/posts/improve-productivity-with-tmux-control-mode/</guid><description>Tmux的控制模式（Control Mode）可以把tmux的窗口映射为本地虚拟终端的窗口，也就是说，用户可以像操作本地虚拟终端一样操作tmux。这对备受tmux的emacs风格的热键绑定折磨或需要嵌套tmux的人来说非常有用。
在支持这个特性的虚拟终端（例如「iTerm」）里，执行tmux -CC即可。当然也可以tmux -CC a恢复会话。</description></item><item><title>用SwitchHosts!切换主机映射方案</title><link>http://0x3f.org/posts/switch-hosts-with-switchhosts/</link><pubDate>Sun, 11 Jun 2017 09:57:54 +0000</pubDate><guid>http://0x3f.org/posts/switch-hosts-with-switchhosts/</guid><description>最近在Archlinux上开始用SwitchHosts!管理主机映射方案，它可能是Linux下做这件事的最好的工具了。
在Mac下也用它替换掉了Gas Mask，因为支持Alfred Workflow。相对的缺点是不支持在状态栏图标上显示当前方案名称，不过Alfred里可以，一定程度上缓解了这个问题。</description></item><item><title>自定义GVIM 8标签栏样式的方法</title><link>http://0x3f.org/posts/how-to-customize-gvim8-tab-style/</link><pubDate>Sun, 04 Jun 2017 12:42:12 +0000</pubDate><guid>http://0x3f.org/posts/how-to-customize-gvim8-tab-style/</guid><description>GVim 8用的是GTK 3，原来在~/.gtkrc-2.0里加样式的方法不能用了。
GTK 3的样式在~/.config/gtk-3.0/gtk.css里：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /** * Adapt to the nova colorscheme */ @define-color VIM_BG_FIX #3C4C55; window#vim-main-window { background-color: @VIM_BG_FIX; } window#vim-main-window notebook header { background-color: #1E272C; border-bottom-width: 0; } window#vim-main-window notebook tab { border-bottom-width: 0; } window#vim-main-window notebook tab label { padding-left:5px; padding-right:5px; padding-top:1px; padding-bottom:2px; color: #7CBDC6; } window#vim-main-window notebook tab:checked label { background-color: #7CBDC6; color: #1E272C; } 查看GTK 3程序的样式结构的方法是用GTK Inspector：</description></item><item><title>网站签到的最佳实践</title><link>http://0x3f.org/posts/the-best-practice-of-checking-in/</link><pubDate>Wed, 24 May 2017 11:42:52 +0000</pubDate><guid>http://0x3f.org/posts/the-best-practice-of-checking-in/</guid><description>v2ex、优酷、什么值得买用qiandao.today实现。优点是依赖少，速度快，支持的范围广，可扩展。缺点是对京东和京东金融无效。
京东和京东金融使用daily-signin。缺点是依赖docker，速度慢。
淘宝签到没有有效的脚本，用淘金币一键领取。
飞猪也没有有效脚本，手工签：
http://trip.taobao.com/mytrip/?tvm=tvip http://trip.taobao.com/mytrip/ http://h5.m.taobao.com/trip/member/index.html</description></item><item><title>通过比较截图检查网页变化</title><link>http://0x3f.org/posts/check-changes-of-webpage-by-comparing-screenshots/</link><pubDate>Sun, 30 Apr 2017 17:21:52 +0000</pubDate><guid>http://0x3f.org/posts/check-changes-of-webpage-by-comparing-screenshots/</guid><description>有时候我们希望检查代码或数据的更新对网页产生的影响，如果能把这个过程集成到git等版本控制系统中，在提交成果的同时自动批量执行，将会极大地提高生产力。
首先网页的截图可以用PhantomJS、Headless Chrome实现：
1 2 3 4 5 var page = require(&amp;#39;webpage&amp;#39;).create(); page.open(&amp;#39;http://github.com/&amp;#39;, function() { page.render(&amp;#39;github.png&amp;#39;); phantom.exit(); }); 图片的差异比较用GraphicsMagick实现：
1 gm compare old.png new.png -file diff.png -highlight-style assign 为方便查看，还可以把截图做成gif动图：
1 gm convert -delay 20 old.png diff.png new.png diff.gif</description></item><item><title>PHPUnit代码覆盖率的统计方法</title><link>http://0x3f.org/posts/how-to-count-code-coverage-of-phpunit/</link><pubDate>Sun, 30 Apr 2017 14:20:41 +0000</pubDate><guid>http://0x3f.org/posts/how-to-count-code-coverage-of-phpunit/</guid><description>关于PHPUnit代码覆盖率的很多概念，官方文档中讲的十分清楚，本文仅就部分语焉不详的细节做些补充。
虽然phpunit.xml不是必需，但每次都输入完整的命令很不方便，所以一般都要生成这个配置文件。用phpunit --generate-configuration生成的phpunit.xml默认包含forceCoversAnnotation=&amp;quot;true&amp;quot;，它表示必须在测试方法头部的注释里显式使用@covers标签声明统计范围，例如：
1 2 3 4 5 6 7 8 9 10 /** * @covers Ox3f\LaravelUtils\Log\Log::&amp;lt;public&amp;gt; * @covers Ox3f\LaravelUtils\Log\Log::parseCallStack * @covers Ox3f\LaravelUtils\Log\Log::__construct * @covers Ox3f\LaravelUtils\Log\Log::__callStatic */ public function testAll() { // ... } 否则在执行统计代码覆盖率的命令时，会报risk：
There was 1 risky test:
Ox3f\LaravelUtils\Log\LogTest::testAll This test does not have a @covers annotation but is expected to have one 如果希望单元测试覆盖全部代码、且不用一一显式声明，可以将此选项的值改成 false。
之后即可使用明令phpunit —coverage-html ./report统计代码覆盖率，统计结果保存在report目录中。
参考 官方文档：第11章-代码覆盖率分析</description></item><item><title>利用依赖注入Mock PHP的内建函数</title><link>http://0x3f.org/posts/mock-php-built-in-functions-using-dependency-injection/</link><pubDate>Sun, 30 Apr 2017 09:57:50 +0000</pubDate><guid>http://0x3f.org/posts/mock-php-built-in-functions-using-dependency-injection/</guid><description>简述 上篇文章讨论了如何利用命名空间实现对PHP内建函数的mocking，本文介绍另一种实现方法——依赖注入。
出于编写可测试代码的需要，依赖注入是经常使用的一种技术。通过把代码中依赖的其它数据获取服务提取出来、和原有逻辑解耦，提高代码的可测试性。只需mock这些依赖并注入到测试对象中即可。
实现 对原有代码的重构 先把原有代码用依赖注入的方式重构（为突出重点，省略了和上篇文章中重复的部分）：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 // ... use Ox3f\LaravelUtils\Services\Builtins; /** * Class Log * @author donie */ class Log { // ... private $builtins; // Builtin functions private function __construct() { $this-&amp;gt;builtins = new Builtins(); // .</description></item><item><title>利用命名空间Mock PHP的内建函数</title><link>http://0x3f.org/posts/mock-php-built-in-functions-using-namespace/</link><pubDate>Sun, 30 Apr 2017 09:06:17 +0000</pubDate><guid>http://0x3f.org/posts/mock-php-built-in-functions-using-namespace/</guid><description>简述 Mock PHP的内建函数一般有两种方法：命名空间法和依赖注入法。
命名空间法是利用PHP优先使用同命名空间内函数的特性，在测试对象的命名空间内重载内建函数来实现。前提是内建函数在被调用时没有使用命名空间，例如：\debug_backtrace()是不能使用本方法的。
上篇文章《接口编程中记录日志的最佳实践》中实现的日志类中，核心部分调用了debug_backtrace()函数获取方法调用堆栈。下面讨论下如何利用命名空间法实现对此函数的mock。
实现 先看代码：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 &amp;lt;?</description></item><item><title>接口编程中记录日志的最佳实践</title><link>http://0x3f.org/posts/the-best-practice-of-logging-in-api-programming/</link><pubDate>Tue, 25 Apr 2017 15:50:41 +0000</pubDate><guid>http://0x3f.org/posts/the-best-practice-of-logging-in-api-programming/</guid><description>解决什么问题 快速定位日志 降低记录成本 提高代码可读性 日志框架是项目开始阶段应该最先搭建好的内容之一，有助于极大地节约以后解决问题的时间和成本。但这也是最让我头疼的问题之一，因为记日志不光包括用什么记、怎么记，也包括记什么内容，这恰恰是最容易被忽略的问题。
一条好的日志需要做到能让问题的跟踪者快速定位它在程序中的位置且包含关键数据。工作中不乏这样的团队成员，在移交接口问题的时候没有主动提供关键信息的意识，所谓关键信息，是指像问题发生的环境、接口名、传递的实参和返回结果这样的内容，使得面向契约编程本来是很好的开发模式，却得不到最好的应用。这时我们可以从自己接口的日志中得到一些弥补。
但是日志的记录不应该占用很大的代码量，一来降低了代码的可读性，二来会耗费太多的时间精力。
本文目的在于讨论一种日志记录的最佳实践方式，使得可以兼顾以上这些问题。
实践 这里针对Laravel实现一个日志工具类，实现以下功能：
兼容Laravel自己的日志系统 自动记录关键的业务数据 自动记录日志所属的接口名 自动记录接口的实参 记录接口的返回值 生成简洁规范的日志内容 代码：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 &amp;lt;?</description></item><item><title>Google BBR和锐速在Vultr上的对比</title><link>http://0x3f.org/posts/google-bbr-is-awesome/</link><pubDate>Sun, 23 Apr 2017 23:48:21 +0000</pubDate><guid>http://0x3f.org/posts/google-bbr-is-awesome/</guid><description>BBR比锐速略快，看YouTube的1080p效果差别不大，SSH操作反应改善明显。
两个都不用的情况：
$ speedtest Retrieving speedtest.net configuration... Testing from Choopa (xx.xx.xx.xx)... Retrieving speedtest.net server list... Selecting best server based on ping... Hosted by Allied Telesis Capital Corporation (Fussa-shi) [41.04 km]: 88.085 ms Testing download speed................................................................................ Download: 1.81 Mbit/s Testing upload speed.................................................................................................... Upload: 7.48 Mbit/s 使用锐速的情况：
$ speedtest Retrieving speedtest.net configuration... Testing from Choopa (xx.xx.xx.xx)... Retrieving speedtest.net server list... Selecting best server based on ping... Hosted by Allied Telesis Capital Corporation (Fussa-shi) [41.</description></item><item><title>Cross-site Request Forgery简介</title><link>http://0x3f.org/posts/introduction-of-cross-site-request-forgery/</link><pubDate>Sun, 23 Apr 2017 20:55:58 +0000</pubDate><guid>http://0x3f.org/posts/introduction-of-cross-site-request-forgery/</guid><description>什么是CSRF Cross-site Request Forgery（简称CSRF），意思是跨站请求伪造。原理是利用网站服务器对浏览器的信任，通过一些技术手段欺骗用户的浏览器访问自己曾经认证过的网站，并执行一些危害用户利益的操作。
例如，假设网站的会话信息保存在cookie中，提现的请求是GET http://www.sample.com/withdraw?toCard=123456&amp;amp;amount=10000，攻击者在自己的网页中通过img标签、iframe或者AJAX访问这个链接，并诱使用户访问这个网页，如果用户刚刚登录过sample.com，余额就会被转走。
防止CSRF的方法 CSRF的关键在于用户的鉴权信息保存在cookie中，或攻击者可以拿到它。目前防止CSRF攻击的方法主要有两种：JWT和表单校验token。
JWT的token通过HTTP请求的header传递，且由于浏览器的跨站限制，钓鱼网页中的JS无法拿到token，从而达到防止CSRF的目的。关于JWT更详细的介绍在「JSON Web Token简介」。
表单校验token通常是存储在表单的隐藏字段中的一个随机字符串，服务器端通过比对表单提交的token判断请求是否伪造，此时需要注意服务器端的CORS配置，即便在有需要的情况下开放了，也应该严格限制允许的HTTP方法和域，否则，钓鱼网页的JS就可以拿到这个token，从而实现CSRF。</description></item><item><title>JSON Web Token简介</title><link>http://0x3f.org/posts/introduction-of-json-web-token/</link><pubDate>Sun, 23 Apr 2017 18:29:06 +0000</pubDate><guid>http://0x3f.org/posts/introduction-of-json-web-token/</guid><description>什么是JWT？ JSON Web Token（简称JWT）是一种token格式，通常用来解决身份认证的问题，和会话（session）作用相同，常用在RESTful API或者OAuth认证上。
和session相比，JWT有以下优势：
服务器端的开销低 服务器端扩展方便 不用专门处理CSRF 由于session的实现方式需要在服务器端存储会话数据，所以当存在大量会话时，服务器端的存储压力会很大，并由此带来扩展上的复杂度（共享session）。而JWT可以把这些数据存储在token里，不需要服务器端存储，优势自然很明显。
对于CSRF，由于session一般使用cookie实现，所以需要专门处理这个安全隐患。JWT借助HTTP请求的header传递，所以伪造成本更高。
JWT和Bearer Token的关系 JWT在使用的时候要在token前面加上字符串「bearer」再填到HTTP请求的header里，这个值就是「Bearer Token」。为什么要这么做？它和JWT是什么关系？
简单地说，JWT是一种token格式，Bearer Token是一种鉴权方案。
HTTP的header项「Authorization」是在HTTP 1.0引入的，它的值的格式是类型+token，支持多种鉴权方案，bearer只是其中的一种。bearer方案中使用的token是JWT格式，这就是它们之间的关系。
JWT的格式 JWT是一个用英文点号连接起来的、分成三个部分的字符串：header、payload和signature。
header header是个base64字符串，解密后是个JSON对象，包含一些元数据。例如：
1 2 3 4 { &amp;#39;typ&amp;#39;: &amp;#39;JWT&amp;#39;, &amp;#39;alg&amp;#39;: &amp;#39;HS256&amp;#39; } 「typ」是格式，「alg」是加密方法。
payload payload也是个base64字符串，解密后也是个JSON对象，一般包含两种数据：JWT标准数据和自定义数据。
JWT标准数据常见的有：
iss：提供方。 sub：主题，一般是用户ID。 exp：过期时间。 iat：创建时间。 jti：token的唯一标识。 此外，和session一样，可以把一些自定义的数据存储在payload里。但由于token存储在客户端，所以不应该在这里存储敏感数据。
signature signature也是个base64字符串，解密后是个使用header里描述的加密方法针对header和payload加密的字符串。目的是防止这两部分的数据被篡改。
JWT的使用原则 不存放敏感信息 保护好私钥 结合https使用 都是出于安全角度考虑。token存储在客户端，而且base64可以被解密，所以不能存储敏感数据。如果私钥泄漏，意味著签名可以被随意伪造。使用https可以更好的保护数据，防止中间人攻击。
JWT相关开发资源 jwt.io有各种语言的JWT开发资源。</description></item><item><title>得草根者得天下</title><link>http://0x3f.org/posts/get-the-inferior-class-get-the-throne/</link><pubDate>Fri, 21 Apr 2017 11:05:50 +0000</pubDate><guid>http://0x3f.org/posts/get-the-inferior-class-get-the-throne/</guid><description>国内移动支付是劣质的繁荣，量很大，但是水平低。
我个人对移动支付偏爱的程度依次是：Apple Pay &amp;gt; 支付宝 &amp;gt; 微信。Apple Pay的体验最好，后两个都多出一个扫码的步骤，微信更是很奇葩地要多一步选卡的操作。
不过采访过一些人，结果是用微信的最多。
原因当然是微信的社交切入点带来的普及程度，还有红包的成功，让这个体验最差的东西后来居上。支付宝因为意识到这一点，才不断焦虑地效颦，自乱阵脚，越做越烂。
我自己平时使用的情况是，能用信用卡支付的一般用支付宝，只能转账的才用微信。而且线下支付还是微信居多。主要原因还是线下的收款方都是小商小贩，大多只会用微信。
中国正在形成阶层社会，但草根仍是主流，得草根者得天下。</description></item><item><title>设计RESTful API的几个原则</title><link>http://0x3f.org/posts/some-principles-on-designing-restful-api/</link><pubDate>Fri, 21 Apr 2017 10:07:29 +0000</pubDate><guid>http://0x3f.org/posts/some-principles-on-designing-restful-api/</guid><description>REST不是一项技术，而是一种设计风格。它的核心思想是实现一种清晰明确的语义，用来描述Web操作。包含两个主要因素：HTTP动词和资源地址。
HTTP动词的使用原则 参与Web操作的HTTP动词主要有GET、POST、DELETE、PUT、HEAD、PATCH。实际上，几乎所有的操作只需GET和POST就可以实现，为什么还要有其它几种呢？目的就是为了实现清晰明确的语义：DELETE /api/v1/post/18肯定比GET /api/v1/post?id=18&amp;amp;action=delete更清楚。
因此HTTP动词使用的重点在于明确语义。例如更新操作，很多文章会说创建资源用POST、修改用PUT，实际上是对REST风格理解不透彻。
总体上，HTTP动词分为两类：幂等和非幂等。幂等是个数学概念，对于一元操作，如果它作用于任一元素两次以上后所得的结果和第一次相同，就认为它是幂等的。简单地说，如果一个接口，传递同样的实参，多次请求的结果和一次没有不同，就认为它是安全的、幂等的，反之，就是不安全、非幂等的。
GET、DELETE、PUT、HEAD是幂等操作，POST和PATCH是非幂等操作。因此，修改操作用POST还是PUT，要看操作本身的幂等与否。举个例子，对于修改用户描述的接口，调用任意次得到的结果都是相同的，所以它是幂等的，应该用PUT。而对于修改用户登录积分的操作，假设每次登录加十分，重复调用会导致分数重复增加，这就是不安全、非幂等的，应该用POST。
资源地址的命名原则 资源地址是对被操作资源位置的描述，因此应该有以下几个原则：
全部使用名词 不使用驼峰风格 资源名称统一使用复数 对于前两个，因为对资源的操作已由HTTP动词表述，资源地址里不应该存在动词，否则会造成语义的混乱。此外，不存在动词也就不需要使用驼峰风格。例如，GET /api/v1/getUser/89，「get」在语义上就重复了。
关于资源名称用复数的原则，主要是为了API在风格上的统一，同一种资源用同一个单词表示，单、复数用资源的id表示，URI里有id的就是单数，否则是复数。
结论 REST是风格而不是技术，出bug的可能性不大，并不是能实现业务逻辑、没有bug就是好代码。风格错了，连REST都不算。</description></item><item><title>Postman的Pre-request Script和Tests</title><link>http://0x3f.org/posts/pre-request-script-and-tests-in-postman/</link><pubDate>Wed, 19 Apr 2017 17:05:55 +0000</pubDate><guid>http://0x3f.org/posts/pre-request-script-and-tests-in-postman/</guid><description>Pre-request Script和Tests都是Javascript代码块。前者在请求发起前执行，通常用来生成请求数据，例如对用户注册接口随机生成用户名。后者在请求结束后执行，通常用来测试和处理返回值。
以下是随机生成用户名的Pre-request Script：
1 postman.setEnvironmentVariable(&amp;#34;random_username&amp;#34;, &amp;#34;测试用户&amp;#34; + Math.floor(Math.random()*1000000)); 产生的值存储在环境变量里，表单里直接引用环境变量即可。
对于REST接口普遍使用的JWT，可以在登录接口的Tests里直接把返回的token更新到环境变量里，这样其它接口直接引用这个环境变量即可：
1 2 3 4 var data = JSON.parse(responseBody); tests[&amp;#34;token is returned&amp;#34;] = typeof(data.token) == &amp;#34;string&amp;#34; &amp;amp;&amp;amp; data.token.length &amp;gt; 0 postman.setEnvironmentVariable(&amp;#34;token&amp;#34;, data.token);</description></item><item><title>用Raspberry Pi实现音频Airplay</title><link>http://0x3f.org/posts/implement-airplay-with-raspberry-pi/</link><pubDate>Mon, 17 Apr 2017 10:19:51 +0000</pubDate><guid>http://0x3f.org/posts/implement-airplay-with-raspberry-pi/</guid><description>用树莓派做音频airplay效果不错，老书架音箱又可以用起来了。
实现方式是shairplay-sync，利用HDMI转VGA线上的3.5mm音频输出孔，因为我的树莓派2B的3.5mm音视频输出口没有合适的转接头。
我用的是Arch Linux ARM，需要手动开启HDMI输出。修改/boot/config.txt：
1 2 3 4 hdmi_force_hotplug=1 hdmi_drive=2 config_hdmi_boost=4 dtparam=audio=on 重启后，用alsamixer把树莓派音量调整到最大值。
AUR里没有针对ARM的shairplay-sync，需要手动编译：
1 git clone https://github.com/mikebrady/shairport-sync.git 1 2 # 生成configure autoreconf -i -f 1 2 3 4 5 6 # 针对systemd编译 ./configure --sysconfdir=/etc --with-alsa --with-avahi --with-ssl=openssl --with-metadata --with-soxr --with-systemd # END 1 2 3 4 5 6 7 8 # 如果shairport-sync用户不存在，新增用户和用户组 getent group shairport-sync &amp;amp;&amp;gt;/dev/null || sudo groupadd -r shairport-sync &amp;gt;/dev/null getent passwd shairport-sync &amp;amp;&amp;gt; /dev/null || sudo useradd -r -M -g shairport-sync -s /usr/bin/nologin -G audio shairport-sync &amp;gt;/dev/null # END airplay默认的服务名和树莓派的hostname一致，可以到/etc/shairport-sync.</description></item><item><title>编写接口文档的最佳实践</title><link>http://0x3f.org/posts/the-best-practice-of-writing-api-documents/</link><pubDate>Mon, 10 Apr 2017 16:36:27 +0000</pubDate><guid>http://0x3f.org/posts/the-best-practice-of-writing-api-documents/</guid><description>前言 传统的做法是用office写接口文档，这种方式的缺点很多：
格式混乱 事实上，所有的传统富文本文档都存在这个问题，富文本的跨平台兼容性很差，很容易造成格式错乱。
版本管理困难 依赖文件系统管理文档是很落后的做法，很难保证手头的文档是最新的版本。
兼容性差 不是所有人都用windows。
低效 对效率的负面影响很大程度上已经包含在前面几项里。此外，编辑工具的臃肿、编辑内容的同时还要调整样式、缺少全文检索等，也是导致效率下降的原因。
理想情况 理想的接口文档应该有以下特征：
方便创作 文档编辑最重要的是文档的内容，而不是编辑操作本身。所以编写文档的过程应该是简单快捷的，而且最好不需要额外的学习成本。
排版简洁规范 技术文档的排版，简洁规范是最重要的，花哨的排版会降低效率。
方便查阅 应该有目录或者大纲视图，并且可以方便地全文检索。
在线协作 传统的离线文档不方便协作。
多端兼容 允许在大多数常见平台编辑和使用文档。
版本管理 可以查看什么人在什么时间改了哪些内容。
交互式文档 所见即所得。可以修改参数、发送请求并查看接口返回值。
可订阅 可以给接口打标签。用户可以订阅任意标签下的接口变更，也可以针对接口订阅。
自动生成 如果代码的可读性足够好，何必浪费时间写文档？或者至少可以自动生成。
当前实践 理想很丰满，但是目前还没有能满足以上所有需求的解决方案。权衡之下，markdown和wiki是目前比较合适的方案。
markdown 用markdown写文档有以下特点：
适合单文档形式 主流git托管平台都支持 适合个人创作 适合小型项目、需要移交开发成果的项目 下面是用markdown写的接口文档的例子： 主流markdown编辑器在转换过程中会为标题添加锚点，利用这个特性可以实现从接口列表跳转到接口详情。
最佳工具 Cmd Markdown
美观 跨平台 编辑操作支持Vim模式 wiki 用wiki写文档有这些特点：
方便多层级文档 需要自己搭建平台 适合团队创作 适合长期、大型项目 最佳工具 dokuwiki
刚刚好 结论 综上，小型的、托管在主流git平台的项目适合用markdown，公司级项目用wiki更好。但这还达不到理想的标准，需要继续探索更好的解决方案。</description></item><item><title>一次对Workflow不完全成功的抓包过程</title><link>http://0x3f.org/posts/a-failed-attempt-to-capture-workflow-requests/</link><pubDate>Tue, 04 Apr 2017 20:19:52 +0000</pubDate><guid>http://0x3f.org/posts/a-failed-attempt-to-capture-workflow-requests/</guid><description>一个workflow对https链接的请求总是失败，而同样的接口在postman里是成功的。所以想对比一下两个请求的差异。
尝试了两种抓包方式，都不成功。一种是用中间人攻击的原理，用的是mitmproxy，类似的还有charles、fiddler等。另一种是从网卡直接抓取，用的是wireshark。
第一种情况，虽然在iOS里安装并信任了mitmproxy的伪证书、safari里也是可以正常访问https链接的，但在workflow里仍然不认。
第二种情况，wireshark支持两种解密TLS包的方式：一是使用https服务的私钥，二是用浏览器输出的「SSLKEYLOGFILE」。这里需要用第二种。但是这种方式只对本机发送的请求有效，而且在实际操作中还发现有时候本机也解密不了。
最后只能采用临时方案，把https链接改成http，然后用mitmproxy抓取，虽然请求是失败的，但是可以拿到请求本身的数据。</description></item><item><title>玉渊潭的樱花</title><link>http://0x3f.org/posts/sakura-in-yuyuantan-park/</link><pubDate>Tue, 04 Apr 2017 10:23:43 +0000</pubDate><guid>http://0x3f.org/posts/sakura-in-yuyuantan-park/</guid><description>有一小片樱花集中的地方还是不错的，风来，落英缤纷。</description></item><item><title>迄今最好的发送网页到 Kindle 的快捷指令</title><link>http://0x3f.org/posts/send-to-kindle-with-shortcut/</link><pubDate>Thu, 30 Mar 2017 11:12:02 +0000</pubDate><guid>http://0x3f.org/posts/send-to-kindle-with-shortcut/</guid><description>转换成 PDF 和 FiveFilters 都不完美， send.reabble.cn 是迄今最好的解决方案，所以写了这个快捷指令：
Send to Kindle
注意：
参照 Reabble 的说明做相关配置。 用 Kindle 接收邮箱创建一个联系人，并在快捷指令里选择他。 2023-04-20
优化了提示信息。
2021-10-05
使用新的 send.reabble.cn 替换原 com 域名，修复发送失败的问题。</description></item><item><title>Shadowrocket下优酷无法播放的解决办法</title><link>http://0x3f.org/posts/how-to-play-youku-under-shadowrocket/</link><pubDate>Sun, 26 Mar 2017 00:03:10 +0000</pubDate><guid>http://0x3f.org/posts/how-to-play-youku-under-shadowrocket/</guid><description>导入这里提供的配置文件。</description></item><item><title>自动探测RSS地址的workflow</title><link>http://0x3f.org/posts/find-rss-with-workflow/</link><pubDate>Fri, 24 Mar 2017 21:09:13 +0000</pubDate><guid>http://0x3f.org/posts/find-rss-with-workflow/</guid><description>RSS真是没落了，很多网站都没有明确输出Feed地址，每次想订阅都要浪费不少时间，所以写了这个Workflow。
列出页面中所有的Feed地址，点击后复制到剪贴板 如果页面中的Feed地址是相对地址，自动转换为绝对地址 如果页面中没有Feed地址，列出常见的几种地址，并侦测被点选的地址，侦测成功后自动复制到剪贴板</description></item><item><title>用 Keyboard Maestro 自动登录 Mac App Store</title><link>http://0x3f.org/posts/auto-login-mas-with-keyboard-maestro/</link><pubDate>Tue, 21 Mar 2017 22:51:32 +0000</pubDate><guid>http://0x3f.org/posts/auto-login-mas-with-keyboard-maestro/</guid><description>按以下步骤配置：
在 Keychain 里创建一个密码项，填上 Apple ID 和密码。 下载 login_mas.kmmacros 并导入。 将 YOUR@EMAIL.COM 改成自己的 Apple ID 。 将 YOUR KEYCHAIN PASSWORD NAME 改成 Keychain 里密码项的名称。</description></item><item><title>MacOS中切换输入法的最佳实践</title><link>http://0x3f.org/posts/the-best-practice-of-switching-input-methods-in-macos/</link><pubDate>Mon, 20 Mar 2017 14:25:00 +0000</pubDate><guid>http://0x3f.org/posts/the-best-practice-of-switching-input-methods-in-macos/</guid><description>原则：
一键切换 可以对特定应用设定初始输入状态 可以方便地确认当前输入状态 兼容外接键盘 思路：
用Karabiner Elements把右Shift修改成F19，在系统里设置用F19切换输入法 用isHUD显示输入法状态 用Keyboard Maestro自动切换键盘布局 Karabiner Elements会使系统的键盘布局失效，且不能对不同的键盘使用不同的布局，所以只有用Keyboard Maestro自动切换。
isHUD只在切换输入法时有效，理想情况是用Caps Lock键灯表示输入状态，不过目前没找到可用的解决办法。
鼠须管可以对不同的应用设置初始输入状态，但只是在切换输入法后，例如对于Alfred，如果上次鼠须管处于中文输入状态，再次打开输入框的时候不会变成英文状态，因此需要在Alfred中设置初始输入法为英文。</description></item><item><title>MacOS下自动切换Karabiner Elements配置</title><link>http://0x3f.org/posts/auto-switch-keyboard-layouts-in-macos/</link><pubDate>Mon, 20 Mar 2017 13:14:18 +0000</pubDate><guid>http://0x3f.org/posts/auto-switch-keyboard-layouts-in-macos/</guid><description>Karabiner Elements不支持对不同的键盘自动使用不同的配置，所以本文通过监听USB键盘插拔事件实现自动切换。
依赖： Keyboard Maestro php 脚本 Karabiner Elements会监听配置文件~/.config/karabiner/karabiner.json，如果有变动，会自动重新加载。
切换配置的脚本在这里。
Keyboard Maestro 键盘插入事件：
键盘拔出事件：</description></item><item><title>尝新，明前碧螺春</title><link>http://0x3f.org/posts/try-biluochun-2017/</link><pubDate>Sun, 19 Mar 2017 18:19:40 +0000</pubDate><guid>http://0x3f.org/posts/try-biluochun-2017/</guid><description>近年明前都要试一种新茶，今年是碧螺春。
不觉得有什么特别的地方，就是不耐泡。</description></item><item><title>一碗酸汤面</title><link>http://0x3f.org/posts/noodles-in-acid-soup/</link><pubDate>Sun, 19 Mar 2017 18:12:36 +0000</pubDate><guid>http://0x3f.org/posts/noodles-in-acid-soup/</guid><description>
继续清淡。
依赖：
挂面 小葱 香油、盐、陈醋、生抽 实现：
小葱切丁，碗里放醋、生抽、盐 水烧开，下面，点一次水 捞面，浇汤</description></item><item><title>沙发椅，让阅读更有趣</title><link>http://0x3f.org/posts/my-new-sofa-chair/</link><pubDate>Sat, 18 Mar 2017 22:48:35 +0000</pubDate><guid>http://0x3f.org/posts/my-new-sofa-chair/</guid><description>心水沙发椅很久了，终于拔草。
因为喜欢极简，之前一直用著一张双人小沙发，但是不够舒适，也不便移动。后来坐过一间餐厅的沙发椅感觉包覆感很好，就想著换一下，于是出掉了沙发，准备入一把伊姆斯椅，偶然看到现在这把，瞬间庆幸没有草率地买前者。
在阳台上阅读变得更有趣了，这椅子和小抱枕很搭（不是照片中这个）。</description></item><item><title>一碗阳春面</title><link>http://0x3f.org/posts/noodles-in-a-simple-sauce/</link><pubDate>Sat, 18 Mar 2017 20:49:07 +0000</pubDate><guid>http://0x3f.org/posts/noodles-in-a-simple-sauce/</guid><description>
想吃点清淡的。
依赖：
挂面 小葱 香油、盐 实现：
小葱切丁 水烧开，下面，点一次水 捞面沥水，撒葱花、盐，浇开水</description></item><item><title>干锅土豆片</title><link>http://0x3f.org/posts/new-dish-dry-pot-potato/</link><pubDate>Thu, 16 Mar 2017 11:11:59 +0000</pubDate><guid>http://0x3f.org/posts/new-dish-dry-pot-potato/</guid><description>
没有平底锅和夹子是硬伤啊。
依赖：
土豆 黄豆酱、干辣椒、花椒、姜、蒜、油 实现：
土豆切片，干辣椒掰两半，姜切丝，蒜切块 土豆片放沸水30秒，煎黄取出 放油、黄豆酱、干辣椒、花椒、姜、蒜，炒香 放土豆片，翻炒，太干的话放一点水</description></item><item><title>鼠须管实现简繁转换的方法</title><link>http://0x3f.org/posts/switch-cn-tw-in-rime/</link><pubDate>Sat, 11 Mar 2017 23:42:11 +0000</pubDate><guid>http://0x3f.org/posts/switch-cn-tw-in-rime/</guid><description>鼠须管默认输出繁体，可以通过自带的过滤器转换成简体。这样做是科学的，因为繁体的异体字较多，从简转繁容易转错。
对于只有简体的码表，可以转换成繁体，再通过过滤器转简体，但是会导致在简体状态下无法自造词。所以最好的办法是给繁体单独配一个码表。
步骤为：
复制简体码表的schema.yaml和dict.yaml文件 修改两个yaml文件的名称 文件内容中和文件名对应的内容也都改为和新文件名一致 修改schema.yaml中输入法的名称，使之和简体码表区分开 转换dict.yaml中的内容到繁体 重新部署 如果需要给繁体码表增加临时输出简体的功能，方法如下：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 # 在码表的schema.yaml中 # switches下增加 - name: simplification states: [ 汉字, 汉字 ] # engine下增加 filters: - simplifier - uniquifier #key_binder下增加 - { when: always, accept: Control+Shift+4, toggle: simplification } - { when: always, accept: Control+Shift+dollar, toggle: simplification }</description></item><item><title>干锅菜花</title><link>http://0x3f.org/posts/dry-pot-cauliflower/</link><pubDate>Wed, 08 Mar 2017 20:55:54 +0000</pubDate><guid>http://0x3f.org/posts/dry-pot-cauliflower/</guid><description>
去年学的。
依赖：
菜花 姜、干辣椒、花椒 黄豆酱、生抽、料酒、油 实现：
菜花泡盐水 放油、姜、花椒、干辣椒、豆瓣酱，炒香 放菜花，翻炒入味 放生抽、料酒</description></item><item><title>胡萝卜炒杏鲍菇</title><link>http://0x3f.org/posts/new-dish-mushroom-carrot-pepper/</link><pubDate>Tue, 07 Mar 2017 21:10:05 +0000</pubDate><guid>http://0x3f.org/posts/new-dish-mushroom-carrot-pepper/</guid><description>
去年学的，今天忘买蒜了，也挺好吃的。
依赖：
杏鲍菇 胡萝卜 青椒 姜、蒜、黑胡椒粉、淀粉、生抽、盐、油 实现：
杏鲍菇、胡萝卜、蒜切片，青椒、姜切丝，淀粉勾芡 放油、蒜、姜，油热后放胡萝卜，炒至半熟 放杏鲍菇，炒软 芡汁入锅，放黑胡椒粉、生抽、盐 放青椒 炒至色泽出现、汤汁量合适出锅</description></item><item><title>加速Homebrew</title><link>http://0x3f.org/posts/speed-up-homebew/</link><pubDate>Mon, 06 Mar 2017 23:14:02 +0000</pubDate><guid>http://0x3f.org/posts/speed-up-homebew/</guid><description>两个方法：走代理和使用国内镜像。镜像有同步时间差，而且遇到国外资源还是慢。
homebrew用curl下载，用proxychains和环境变量http_proxy都没用，需要在~/.curlrc里配置：
socks5 = &amp;#34;127.0.0.1:1080&amp;#34;</description></item><item><title>CORS：另一种前端跨域请求方式</title><link>http://0x3f.org/posts/cors/</link><pubDate>Mon, 27 Feb 2017 17:07:17 +0000</pubDate><guid>http://0x3f.org/posts/cors/</guid><description>CORS的全称是「Cross-Origin Resource Sharing」，即跨域资源共享。
CORS是比JSONP更强大的前端跨域请求的实现方式。JSONP只支持GET请求，而CORS支持更多种类。JSONP的优势是支持老版本的浏览器。
实现CORS需要浏览器和服务器同时支持，主流框架有实现CORS的中间件，如：laravel-cors。
具体参考：http://www.ruanyifeng.com/blog/2016/04/cors.html</description></item><item><title>怎样在Vim中删除引号文本对象</title><link>http://0x3f.org/posts/how-to-delete-quoted-text-object-in-vim/</link><pubDate>Sat, 25 Feb 2017 19:33:18 +0000</pubDate><guid>http://0x3f.org/posts/how-to-delete-quoted-text-object-in-vim/</guid><description>假设有这样一段代码（光标在「|」位置）：
$title = &amp;ldquo;Article:|&amp;rdquo; . $realTitle;
要删除引号及其内容，并进入插入模式准备输入其它内容。
如果执行ca&amp;quot;，会得到如下的结果：
$title = |. $realTitle;
连引号旁边的空格也删除了。
如果不想删除空格，可以用c2i&amp;quot;。
参考：Is it possible to exclude surrounding whitespace from the word-object a&amp;quot;?</description></item><item><title>技术团队的两个最佳实践</title><link>http://0x3f.org/posts/the-best-practices-of-developing/</link><pubDate>Fri, 24 Feb 2017 13:27:57 +0000</pubDate><guid>http://0x3f.org/posts/the-best-practices-of-developing/</guid><description>在以往的开发和管理中遇到很多问题，以至于我对理想中的技术团队有了一些想法。其中有两点经过实践证明有很强的可操作性，值得拿出来讨论一下：
能用规则解决的问题就不要靠人解决 能用机器完成的任务就不要用人处理 这两点都反映了我的一个妄念，就是相信规则和机器，不相信人。人是最不靠谱的生产者，你永远无法保证团队中的每个人都处于很好的状态、拥有相近的技术水平和情商，这也是为什么我不觉得结对编程有什么可操作性。但如果有简单可行的规则，用来规范开发过程中的行为，那么解决开发过程中的冲突就不需要人为地和稀泥，生产效率也会得到提升。此外，机器最适合用来做重复性的任务，很多花大量的人力、物力、时间都没做得很好的事，交给机器来做恰恰是最好的解决办法。
这些以往都只是我自己的想法，虽然在团队里有过很好的实践效果，但是并不指望和别人有所共鸣。国内的技术团队大多靠堆人、堆时间，很少有团队会把健康的世界观和可操作的方法论放在重要的位置，技术和技术从业者都是刍狗。当然这也无可厚非，毕竟先要解决生存问题，在模式创新为主的国内互联网行业，更新换代如此之快，产品早一天上线就多一分生存的可能。但是有没有可能既解决生存问题，又做出一个有荣誉感的团队呢？世间安得双全法，这是个值得持续讨论的问题。
最近和别人聊天，竟然听到相同的想法，在具体的方法论上还得到很多补充。
对于第一点。一个项目按业务线划分开发组、按功能模块划分开发任务本来是个很好的模式，但是接口的对接往往会有很多问题，例如术语使用的不严谨导致高昂的沟通成本、问题处理方法的不规范导致扯皮、冲突和低效。
在我的团队里，用wiki维护著一套术语词典，开发过程中所有的文档、沟通都必须使用既定的用语，例如「退单」包括「退款单」和「退货单」，这三个术语分别表示不同而精确的概念，如果因为自己造词产生歧义或错用术语导致开发事故，责任是清楚的，问责对象也没有怨言。让有责任的人承担责任，比和稀泥对解决问题更有利。
再比如，问题在流转过程中很容易出现接口人之间的扯皮甚至冲突，问题的根源并不是别人说你的代码有问题导致你不爽，而是别人做得不够专业让你觉得对方不负责任。在我的团队里，大家约定处理问题的规则是：
谁接手，谁处理 转交问题时必须提供四项信息：复现问题的环境、完整的接口名、传递的实参和返回结果 首先当一个问题被反馈过来的时候，分配人会有一个初步的判断，指派给谁，谁处理，不能踢皮球。处理人如果界定问题发生在别人的接口里，应该把上述四项信息连同问题移交给相关责任人。这样做的好处是，一来可以避免误判给别人造成不必要的麻烦，二来让下游接口人可以马上复现并解决问题，而无须考虑上游的业务逻辑。这个规则的效果很好，团队里从来没有因为接口问题出现不愉快。
对于第二点。代码质量是日常开发中最让人头疼的问题之一，出现频率高而且代价昂贵。不管是靠开发人员的经验，还是测试人员的工作，都对人的依赖很大，既不稳定又低效。以下这些方法能很好地解决这样的问题：
使用Git，先进的生产关系需要更好的生产资料才能带来更高的生产力 提交代码时自动检查语法错误和代码规范 高覆盖率、自动化的单元测试 用模拟工具给单元测试供给测试数据 用脚本测试网页交互 用脚本给网页截图，用图片diff工具比较某次修改给网页带来的变化</description></item><item><title>Git的衍合</title><link>http://0x3f.org/posts/git-rebase/</link><pubDate>Wed, 22 Feb 2017 18:44:37 +0000</pubDate><guid>http://0x3f.org/posts/git-rebase/</guid><description>合并分支有两种方式，merge和rebase。merge是根据三方合并的差异，创建一个新的提交。rebase是将上游分支的各个提交在比较差异后在下游分支上重演一遍。
rebase适合对没有推送到远程的提交对象做合并，这样可以保持一个整洁的提交历史。若对已推送的提交对象使用rebase，可能导致其它已经拉取并创建了新的提交的人不得不重新合并，进而导致提交历史变得很混乱。
基本的rebase：
1 2 3 git rebase master unstable git checkout master git merge unstable 复杂的情况：存在三个分支，unstable基于master的某个提交创建，feature基于unstable的某个提交创建，要把feature合并到master而不合并unstable。更多分支时方法也一样。
1 2 3 git rebase --onto master unstable feature git checkout master git merge feature rebase过程中如果存在冲突，合并后用git add标记已解决，再用git rebase --continue继续。如果解决冲突后仍然不能继续，可能是当前补丁的内容在下游分支已存在，可以用git rebase --skip跳过。</description></item><item><title>在Vim中格式化Javascript、HTML和CSS</title><link>http://0x3f.org/posts/vim-js-beautify/</link><pubDate>Tue, 21 Feb 2017 14:58:08 +0000</pubDate><guid>http://0x3f.org/posts/vim-js-beautify/</guid><description>依赖 vim-jsbeautify js-beautify js-beautify的安装：
1 2 3 npm -g install js-beautify # 或 pip install jsbeautifier 配置快捷键 1 2 3 4 vmap &amp;lt;leader&amp;gt;jsb :&amp;#39;&amp;lt;,&amp;#39;&amp;gt;!js-beautify -i&amp;lt;CR&amp;gt; autocmd FileType javascript noremap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;jsb :call JsBeautify()&amp;lt;CR&amp;gt; autocmd FileType html noremap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;htmlb :call HtmlBeautify()&amp;lt;CR&amp;gt; autocmd FileType css noremap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;cssb :call CSSBeautify()&amp;lt;CR&amp;gt;</description></item><item><title>Vim 查找与替换的最佳实践</title><link>http://0x3f.org/posts/the-best-practice-of-searching-in-vim/</link><pubDate>Sun, 19 Feb 2017 20:37:18 +0000</pubDate><guid>http://0x3f.org/posts/the-best-practice-of-searching-in-vim/</guid><description>更新 日期 更新内容 2022-03-16 更新 80% 的内容。包含这几年所有的配置上的更新，并且把 ag 换成了 rg 。 2017-02-19 第一版。 目标 多文件搜索和替换
使用 PCRE 正则表达式在工作目录下递归搜索 将选定文本自动转换成正则表达式 有较高的搜索速度 对搜索结果做替换 当前 buffer 内的搜索和替换
一键将选定文本自动转换成正则表达式并执行搜索或替换 依赖 Ferret：实现对搜索和替换操作的封装。 ripgrep：搜索工具，速度快。 工具和方法 Ferret Ferret 是我用过的 vim 搜索扩展里最接近理想的一个，最大的优点是不用引号包裹搜索内容，且较大程度地支持 PCRE 正则表达式。
EasyGrep 的缺点是正则表达式必须是 shellescape() 过的，手写不方便，也不直观。Ferret 在底层做了 shellescape() ，所以比 EasyGrep 简单一些。不过 Ferret 对反斜杠的处理仍然不直观，例如搜索App\Link，正则表达式是App\\Link，而Ferret里只能用App\\\\Link。原因是从输入到执行，存在著三层转义：Vim命令行、Shell、grep/ag。所以对于EasyGrep，要搜索一个\，必须输入\\\\\\\\。对于Ferret，由于底层做了shellescape()，只需要两层转义，即\\\\。当然这样也不方便，所以我用自定义函数XEscapeRegex()对选择的内容做这个事，不过最完美的方法当然是Ferret自己支持，或者自己再封装一下Ferret的命令，这样输入的正则表达式可读性就正常了。
Ferret 的另一个优点是可以对搜索结果做筛选，删除不需要做替换的行，再对剩下的行执行批量替换。当执行替换命令 :Acks 时，会自动把上一个 :Ack 命令中的正则表达式或关键词补全到命令的参数中。
Ferret 最大的问题在于，搜索使用 rg 、 ag 这样的命令行工具，而替换使用 Vim 内置的 :substitute 命令。前者使用 PCRE 正则表达式，而后者使用 Vim 自己的正则表达式。两者在格式上的不兼容导致对一些复杂的 pattern 做搜索和替换时，往往需要对 pattern 做修改才能正常对之前的搜索结果做替换。关于这个问题，后面细说。</description></item><item><title>Bose QC35，这安静有毒</title><link>http://0x3f.org/posts/the-experience-of-bose-qc35/</link><pubDate>Sat, 18 Feb 2017 20:23:28 +0000</pubDate><guid>http://0x3f.org/posts/the-experience-of-bose-qc35/</guid><description>我很容易受环境影响，即便在家里比较安静的时候，也经常集中不了注意力。小时候总是可以连续几个小时读一本书，现在已经很久没有长时间专心做一件事了。戴了一段时间QC35，又重新找回了这种感觉，干什么事都很专心，感觉很安静，心态平和很多。
之前先入手了森海大馒头，不过没有降噪的功能，所以必须一直配合白噪声使用，时间长了还是有点累的。另外，有线耳机实在不方便，所有的数码设备都应该无线化，对生活品质的提升会很大。虽然大馒头作为出街向的东西，手机也推得动，但是要发挥音质，还是得上耳放，我不是发烧友，这木耳就算了。
所以对QC35长草很久了，后来大法又出了MDR 1000X，作为对标QC35的东西，有这些优点：
独立的降噪开关 手势操作 快速反应模式 音质 QC35的优势：
穿戴更舒适 同时连接两个设备 关于耳机，我的核心需求是：
降噪效果好 无线 舒适 在满足核心需求的基础上，选择有价格优势的东西。1000X肯定更方便，不过没有这些功能好像问题也不大。而且有些噱头的实际体验究竟有多好，我是有疑问的，比如手势的误操作问题。在我看来，为这些噱头买单不值，所以最后选了QC35。
使用一段时间下来体验确实很好，已经对这久违的安静上瘾了，长时间戴也没有不适感，同时连接电脑和手机也很方便。</description></item><item><title>Postman: Could Not Get Any Response</title><link>http://0x3f.org/posts/postman-could-not-get-any-response/</link><pubDate>Tue, 14 Feb 2017 14:37:54 +0000</pubDate><guid>http://0x3f.org/posts/postman-could-not-get-any-response/</guid><description>Postman如果不显示API返回结果，而是报错：
Could not get any response
有一种原因是响应的header存在错误：
图中以双引号开头的第一行是有问题的。
PS：httpie是个好东西。</description></item><item><title>用NGINX实现WSS</title><link>http://0x3f.org/posts/implement-wss-with-nginx/</link><pubDate>Tue, 14 Feb 2017 13:35:41 +0000</pubDate><guid>http://0x3f.org/posts/implement-wss-with-nginx/</guid><description>实现基于SSL的安全的WebSocket。
NGINX配置 server { listen 4431; server_name ws.sample.com; ssl on; ssl_certificate ssl/server.crt; ssl_certificate_key ssl/server.key; ssl_session_timeout 5m; ssl_session_cache shared:SSL:50m; ssl_protocols SSLv3 SSLv2 TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP; location / { proxy_pass http://127.0.0.1:4759; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection &amp;#34;Upgrade&amp;#34;; proxy_set_header X-Real-IP $remote_addr; proxy_read_timeout 60s; } } 常见问题 连不上或连接时报错 WebSocket network error: OSStatus Error -9807: Invalid certificate chain
如果使用的是自签证书或者证书针对的域名和连接所指定的不符，会出这种问题。
wss一分钟自动断开 NGINX里设置proxy_read_timeout或者程序实现心跳。</description></item><item><title>WebSocket: Connection Header Value Must Contain Upgrade</title><link>http://0x3f.org/posts/websocket-connection-header-value-must-contain-upgrade/</link><pubDate>Sat, 11 Feb 2017 21:52:30 +0000</pubDate><guid>http://0x3f.org/posts/websocket-connection-header-value-must-contain-upgrade/</guid><description>用NGINX反向代理实现WSS后，创建连接时报错：
Error during WebSocket handshake: &amp;lsquo;Connection&amp;rsquo; header value must contain &amp;lsquo;Upgrade&amp;rsquo;
根据官方文档，NGINX从1.3.13开始才支持这个特性，所以解决方法是升级到最新版。</description></item><item><title>Git Reset、Revert和Checkout的区别</title><link>http://0x3f.org/posts/differences-among-reset-checkout-revert-of-git/</link><pubDate>Thu, 09 Feb 2017 19:27:47 +0000</pubDate><guid>http://0x3f.org/posts/differences-among-reset-checkout-revert-of-git/</guid><description>reset在提交层面，是将HEAD设定到指定的提交，通常用来舍弃最新的几个提交。在文件层面，是将指定的提交中的该文件保存到暂存区，工作区中的文件不变。
reset有三个常用的参数：--mixed、--soft和--hard。
在提交层面，--mixed是默认值，影响暂存区，不影响工作区；--soft将HEAD版本保存到暂存区，并将HEAD设定到指定的提交，用来合并提交历史；--hard既影响暂存区，也影响工作区。
在文件层面，--soft和--hard均会报错，不支持这两个选项。
在提交层面，执行过reset后如果需要撤销，使用reflog命令查看之前HEAD的hash，通过reset --hard恢复到该版本。
checkout在提交层面，用来切换分支或检出到指定的提交。对于后者，如果增加了新的提交，在切换到其它分支后，再切换回来时，这些提交将会丢失，如果希望保存这些提交，在切换到其它分支前，创建一个新的分支。
revert用来通过创建一个新的提交来回滚一个提交，因此，和reset不同，并不会改变提交的历史。
对于回滚一次提交的场景，revert比reset安全，所以revert适用于公共分支，reset适用于私有分支。</description></item><item><title>从 Octopress 迁移到 Hexo</title><link>http://0x3f.org/posts/migrate-octopress-to-hexo/</link><pubDate>Wed, 08 Feb 2017 20:24:16 +0000</pubDate><guid>http://0x3f.org/posts/migrate-octopress-to-hexo/</guid><description>因为原来的主题没有针对中文优化，显示效果不太好，在搜索新主题的时候顺便了解了一下其它几个静态博客生成工具，发现Hexo比Octopress有很大的优势，就迁移了过来。
Hexo的优势：
速度快：几百篇文章只需要几秒，而Octopress需要几十秒 易用：配置、部署简单，文章被修改后会立即更新浏览器中的预览页面 轻量：基于node.js，目录结构简明 迁移的过程不算顺利，先是遇到「MODULE_NOT_FOUND」的问题，搜到的方法都不起作用，原因大概是因为墙的问题导致dtrace模块安装出错，理论上用代理安装是可以解决的，结果在反复安装的过程中莫名其妙地就好了。
再一个问题是选主题，喜欢极简的风格，但是极简又大气的主题很少，相对最喜欢的是kael，不过生成速度非常慢，而且生成的页面有大量乱码。于是退而求其次，选择了crisp。然而还是有不满意的地方，比如过于简单、没有搜索、不区分首页和归档等，还有待自己修改。</description></item><item><title>Calibre排版的最佳实践</title><link>http://0x3f.org/posts/best-practices-of-calibre-on-formatting/</link><pubDate>Fri, 27 Jan 2017 18:15:00 +0000</pubDate><guid>http://0x3f.org/posts/best-practices-of-calibre-on-formatting/</guid><description>虽然如今左Kindle、右iPad，但是再也没有在课堂上用文曲星看《此间的少年》的感觉。
忘了前段时间看池建强还是和菜头的文章，说很讨厌中文排版中段落首行缩进的风格，深有同感。我一般在读前会先用Calibre修改一下书的格式，段落首行不缩进、用空白行分割段落、嵌入好看的字体，否则强迫症表示根本看不下去。
本文分享几则平时积累的Calibre排版的最佳实践，顺带吐槽一下亚马逊电子书的排版质量，早已经被微信读书、多看这些APP吊打了。
一、最佳排版 最小行高：140%。
使用空白行分段，段落首行不缩进。
要嵌入字体，必须转换成KF8格式的类型，例如azw3或者both类型的mobi：
注意：KF8格式在点选文字时，默认选中一句，而不是单字，不方便查字典。要默认选中单字，须转换成old类型的mobi。
二、最佳字体 索尼楷书
方正北魏楷书
方正宋三
在微信读书iOS上显示效果很好，但是在Kindle里比较一般。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>两条分组的SQL语句</title><link>http://0x3f.org/posts/two-grouping-sql-statements/</link><pubDate>Fri, 27 Jan 2017 17:51:00 +0000</pubDate><guid>http://0x3f.org/posts/two-grouping-sql-statements/</guid><description>最近做访问统计解决的两个问题：
根据日期分组 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 select ( case when visit_at &amp;gt;= 1485014400 then from_unixtime(visit_at, &amp;#39;%Y-%m-%d&amp;#39;) when visit_at &amp;gt;= 1484928000 and visit_at &amp;lt; 1485014400 then from_unixtime(visit_at, &amp;#39;%Y-%m-%d&amp;#39;) else 0 end ) col, count(*) as pv, count(distinct session_id) as uv from `statistics` where `visit_at` &amp;gt;= 1484496000 group by ( case when visit_at &amp;gt;= 1485014400 then from_unixtime(visit_at, &amp;#39;%Y-%m-%d&amp;#39;) when visit_at &amp;gt;= 1484928000 and visit_at &amp;lt; 1485014400 then from_unixtime(visit_at, &amp;#39;%Y-%m-%d&amp;#39;) else 0 end ) 选择每组数据的第一条 1 2 3 4 5 6 7 8 9 10 11 12 13 select a.</description></item><item><title>用OpenResty自动转换silk到MP3</title><link>http://0x3f.org/posts/convert-silk-to-mp3-with-openresty/</link><pubDate>Wed, 25 Jan 2017 18:59:00 +0000</pubDate><guid>http://0x3f.org/posts/convert-silk-to-mp3-with-openresty/</guid><description>PHP没有原生的转换silk格式音频到mp3的方案，所以考虑用NGINX+Lua调用命令行工具实现。
思路 当访问以「.silk.mp3」为后缀的文件时，查找对应的mp3文件，存在则返回，否则，如果对应的silk文件存在，调用命令行工具转换文件格式，然后内部重定向到新生成的mp3。
安装 OpenResty silk-v3-decoder ffmpeg NGINX配置 1 2 3 location ~* /.*\.silk\.mp3$ { content_by_lua_file &amp;#34;/opt/script/silk2mp3.lua&amp;#34;; } Lua脚本 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 function file_exists(name) local f=io.open(name,&amp;#34;r&amp;#34;) if f~=nil then io.close(f) return true else return false end end local resource = ngx.var.request_filename; local realResource = resource:sub(1, #resource - 9).</description></item><item><title>微软识花和形色</title><link>http://0x3f.org/posts/two-plant-identification-apps/</link><pubDate>Wed, 28 Dec 2016 12:12:00 +0000</pubDate><guid>http://0x3f.org/posts/two-plant-identification-apps/</guid><description>由于微软的名气，「微软识花」刚推出的时候就众所周知。很好用的App，我成功地用它识别出了母上的长春花：
不过我养的主要是观叶植物，只能识别花对我来说意义不大。直到最近发现了「形色」。识别率还不错，对特征不明显的植物容易误报，比如我的空凤就被识别成了吊兰……
这就是「微软识花」狡猾的地方。</description></item><item><title>小确幸，用Vim编辑当前命令行</title><link>http://0x3f.org/posts/edit-command-with-vim/</link><pubDate>Mon, 26 Dec 2016 11:58:00 +0000</pubDate><guid>http://0x3f.org/posts/edit-command-with-vim/</guid><description>修改很长的命令是件痛苦的事，在Linux下，可以通过快捷键Ctrl+X Ctrl+E调用$EDITOR快速编辑当前命令行的内容，保存退出后，结果会呈现在光标下。
不过在Mac OS的iTerm2下，似乎是因为Ctrl+X被占用而不能生效。误打误撞地发现了另外一个方法，使用oh-my-zsh并且开启了vi mode的话，先进入vi mode，然后输入v，同样可以实现这样的功能。</description></item><item><title>用锐速加速Shadowsocks</title><link>http://0x3f.org/posts/accelerate-shadowsocks-with-serverspeeder/</link><pubDate>Sun, 25 Dec 2016 15:39:00 +0000</pubDate><guid>http://0x3f.org/posts/accelerate-shadowsocks-with-serverspeeder/</guid><description>各种VPS加速方案一般都是重复发包的原理，也就是用流量换速度。
先尝试了kcptun，因为据说资源占用很低，不过部署后打不开网页。然后试了一下锐速，用一键脚本安装，很方便，而且不像kcptun，不需要客户端。部署前在Youtube只能看最低清晰度，现在在网络条件好的情况下，720p也不卡，效果很明显。
不过锐速不支持OpenVZ，所以搬瓦工用不了，我用的 Vultr 东京机房的基础配置。
参考 锐速破解版linux一键自动安装包</description></item><item><title>Vultr基配可以部署Gitlab</title><link>http://0x3f.org/posts/setup-gitlab-on-vultr-basic-vps/</link><pubDate>Sat, 24 Dec 2016 17:18:00 +0000</pubDate><guid>http://0x3f.org/posts/setup-gitlab-on-vultr-basic-vps/</guid><description>想在Vultr上部署Gitlab，但是官方文档上说最低要求1GB RAM + 3GB swap，而我的VPS是基础配置：768MB RAM。
忐忑地试了一下，居然可以用，只是重启防火墙的时候CPU一直100%，最后reboot了事。
环境 CentOS 7 x64 Gitlab CE 8.15 参考 Setup Swap File on Linux - Vultr.com Installation Guide of GitLab Community Edition | GitLab</description></item><item><title>关于李陵的更多细节</title><link>http://0x3f.org/posts/more-about-li-ling/</link><pubDate>Thu, 22 Dec 2016 19:41:00 +0000</pubDate><guid>http://0x3f.org/posts/more-about-li-ling/</guid><description>上次聊了李陵败降的细节。在此之后，还发生了几件有意思的事。
第一个细节，是武帝并没有马上杀掉李陵全家，甚至在第二年，还派一支军队营救他。
毕竟累世将门，李陵的军事才能武帝是很欣赏的，况且对于李广的死，武帝不能没有一点愧疚。五千步兵深入匈奴，仗打成这个样子已经是虽败尤胜了，这一点，武帝自己是知道的，之所以迁怒司马迁，主要是因为李陵没有死，而是降了。
在这次战役中，武帝本来给李陵安排的任务是给李广利作后勤保障，是李陵自己不干，非要率五千步兵涉单于庭。按武帝的想法，李陵真要打赢也行，毕竟事关生死存亡，再不济也得战死沙场。领导给安排的活你不干，你自己吹那么大的牛又没做到，最后还投降了，这是武帝生气的主要原因。
不过武帝还是惜才的，所以第二年就派了一支军队去救李陵。不过这支军队转了一圈没捞著匈奴人的影子，只带回来一个传闻——李陵在教匈奴人对付汉军的方法。武帝随即大怒，并处决了李陵一家。
后来，汉朝有人出使匈奴，李陵趁机问汉使：「我自问战功不负朝廷，为什么杀我全家？」汉使就说出了这个传闻。李陵大恨，说这事是一个叫李绪的干的。李绪也是一个汉朝的降将，因为这件事，李陵痛恨李绪，就派人把他刺杀了。可能李绪是大阏氏的人，所以大阏氏就要杀李陵。因为匈奴有浓重的母系氏族的风俗残留，所以大阏氏的势力很大，连单于也要让三分。于是单于只能把李陵藏到很远的地方，直到后来大阏氏死了，才敢接回来。
第二个细节，是霍光曾经试图策反李陵。
李陵在汉朝的时候跟霍光私交不错，所以武帝死后，霍光辅政，就想著把李陵接回来，于是以出使的名义派人到匈奴和李陵接头。李陵沈吟良久，说了一句话：「大丈夫不能再次受辱。」最终拒绝了。
李陵的决定是正确的，作为一个有污点的人，回到汉朝纵然有权臣罩著，一旦靠山倒了，覆巢之下也无完卵。何况至亲已死，在汉朝已无牵挂，哪比得上在那天高原阔的地方做一个部落王。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>哪个时代都看脸</title><link>http://0x3f.org/posts/judge-by-face/</link><pubDate>Fri, 09 Dec 2016 21:39:00 +0000</pubDate><guid>http://0x3f.org/posts/judge-by-face/</guid><description>汉书卷四十二：
苍当斩，解衣伏质，身长大，肥白如瓠，时王陵见而怪其美士，乃言沛公，赦勿斩。
高晓松特喜欢说一句话——这是个看脸的时代。其实哪个时代都看脸，所以张苍因为高胖白，捡了一条命。
昨天读汉书司马相如传，讲到撩妹那段（以琴心挑之），后面紧接著就是：
相如时从车骑，雍容闲雅，甚都。
翻译成人话就是：相如经常开著跑车，逼格满满，很帅。所以你以为光琴弹得好就行了么，想想贝多芬的《献给爱丽丝》。
看脸本无可厚非，有意思的是看脸的规律：因时而异，因境而异。
先说后者。家世好的喜瘦，苦出身的喜肥。所以楚王好细腰，宫人多饿死。所以赵飞燕能作掌中舞，于是汉成帝死在赵合德的床上。所以屌丝出身的刘邦和王陵饶了张胖子一命。
因时而异。乱世尚刚，治世尚柔。季世丧乱，生存是第一命题，社会的整体审美一定是趋于阳刚的，最好脸上再有道疤，活活美死。而由乱入治，公共审美一定趋于女性化。最典型的就是魏晋南北朝，这时期的男人，要剃须、薰香、涂胭脂，甚至头上还插花。
有个南北互飚花美男的故事。大致的情节是这样的：南方派了一个花美男出使北方，结果都城万人空巷，北方朝廷一看，心说不能让人给比下去啊，就也挑了一个小鲜肉出使南方，于是南方都城里也万头攒动。
这个故事我不记得出处了，不过《世说新语》的《容止》篇里随便挑一条，都不忍直视：
王丞相见卫洗马曰：「居然有羸形，虽复终日调畅，若不堪罗绮。」
不堪罗绮，羡杀韩国欧巴和国产小鲜肉们。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>李陵是作死的</title><link>http://0x3f.org/posts/no-zuo-no-die/</link><pubDate>Thu, 01 Dec 2016 20:47:00 +0000</pubDate><guid>http://0x3f.org/posts/no-zuo-no-die/</guid><description>汉书卷五十四：
陵对：「无所事骑，臣愿以少击众，步兵五千人涉单于庭。」上壮而许之……
关于李陵的遭遇，多数人从司马迁身上多少都是知道的：祖上是追杀燕太子丹的秦将李信，祖父是飞将军李广，出身将门世家的李陵自然骁武凭陵，以五千步兵力战十万匈奴精骑，最后矢尽援绝，不得已才投降。即便对于信仰「文死谏，武死战」的中国人，多数也是同情的。
然而这个故事主要来自于史记，这就尴尬了。从某种意义上说，李陵是给史记定下基调的人。这就决定了它展示给读者的不会是故事的全貌。比如很多年前，我第一次看到这个故事的时候就想不明白一个问题：用五千步兵孤军远征游牧的匈奴，傻子都知道胜算很小，刘彻和李陵的智商同时下线了？
最近读到汉书的李陵传，发现了更多有趣的细节。
天汉二年，武帝命二师将军李广利出兵三万攻打在天山的匈奴右贤王，想让李陵监押辎重。**如果把武帝的军事史浓缩成一句话，那就是刘彻和他的小舅子们。**李广利就是因为裙带关系上位的，所以将门世家的李陵耻于为其搞后勤，就跟武帝说：「我本部的军队都是精锐，希望能单独出兵一路，这样可以迫使匈奴人分兵，二师将军那边的压力也会轻一些。」武帝多精啊，一眼就识破李陵的小九九，说：「这次我出兵很多，没有富余的骑兵给你。」
于是李陵就开始作了，就有了本文开头的那句话。以少击众、步兵打骑兵、孤军深入，哪一条都是兵家大忌，估计李陵说这句话时头皮都是硬的。
当然李陵也不是完全没有资本，**汉军的战斗力是超过匈奴人的。**硬碰硬的正规战争，匈奴人败多胜少。因为战争打的是综合实力，无论是经济实力、人口、技术，汉朝都远超匈奴，即使三岁骑马五岁弯弓的匈奴人的单兵素质超过汉朝的民兵。
后来的战事就证明了这一点。首战浚稽山，匈奴人就损失数千人，汉军步兵还追著骑兵打。主要原因就是经济和技术水平的落差太大。匈奴人主要装备的是弓箭，箭头是用兽骨和石头磨成的片状，汉军装备的是连弩，箭头是金属质三棱状，无论在射速、穿透力还是精准度上，前者都远远落后于后者。所以转战上千里，坚持很多天，直到最后汉军的箭用完了，匈奴人才在距离边境五十公里的地方吃掉这支孤军。换句话说，如果箭量充足，十万匈奴骑兵都打不过五千汉军步兵，这个战力的对比，很明显吧。
最后不服从领导安排的李陵还是败了，败在距离边境只有五十公里的地方。据说最后的日子里，他还单独出营一次，理由是想刺杀单于，搞个斩首行动，回来后就彻底丧失了战斗意志。我觉得这又是个疑点，是不是想溜啊。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>改用Bear记笔记</title><link>http://0x3f.org/posts/switch-to-bear/</link><pubDate>Mon, 14 Nov 2016 23:32:00 +0000</pubDate><guid>http://0x3f.org/posts/switch-to-bear/</guid><description>再次证明我是后知后觉的。
曾经对印象笔记不屑一顾，因为对所见即所得的偏见和印象笔记对技术人员的不友好。所以这些年一直用DokuWiki。
DW的编辑模式不是传统的所见即所得，自己的wiki标记简洁好用。能针对段落进行修改。可以列出大纲。插件和主题较多。使用文件存储数据，方便同步。平台无关，对Linux友好。
不过DW自身也存在一些问题：
需要搭建服务 自行处理同步 移动端访问不便 编辑和查看操作有割裂感 最近开始琢磨记笔记的最佳实践。考虑到用DW的痛点，感觉对于记笔记最重要的是是否方便记录和查看。在这点上，所见即所得的确有优势。所以我尝试转换到这类工具上。
选择Bear而不是印象笔记的原因主要是：
支持代码语法高亮 支持导出Markdown格式 极简风和多种主题 代码语法高亮是刚需，没什么可说的。导出Markdown格式可以方便写博客，这样就不需要Cmd Markdown了。极简的风格和包括Solarized在内的多种主题很毒我。
不过Bear也有不少问题：
没有大纲视图，不适合长笔记 标签只支持两级，大量标签不好管理 不支持扫描 对Linux不友好 用标签替代分类的方式我很喜欢，不过两级的限制让笔记分类很伤脑筋，而且容易造成标签太多、难以管理。扫描也是刚需，印象笔记的扫描就很好用，Bear目前没有这个功能，只能用扫描全能王暂补，割裂感很强，而且还增加了APP。
希望Bear尽快变得更好用。</description></item><item><title>JSON是对象还是字符串？</title><link>http://0x3f.org/posts/what-is-json/</link><pubDate>Tue, 08 Nov 2016 10:46:00 +0000</pubDate><guid>http://0x3f.org/posts/what-is-json/</guid><description>前两天，一个前端跟我争论说JSON是对象。我在接口文档里的数据格式写的是JSON，结果对方真就传了个对象过来。
要搞清楚JSON是什么，先得知道JSON是为了解决什么问题的。维基百科里的定义是：
JSON（JavaScript Object Notation）是一种由道格拉斯·克罗克福特构想设计、轻量级的数据交换语言，以文字为基础，且易于让人阅读。尽管JSON是Javascript的一个子集，但JSON是独立于语言的文本格式，并且采用了类似于C语言家族的一些习惯。
所以说，JSON是为了解决语言之间数据交换的一种文本格式，体现在数据上，JSON就是字符串类型。那么为什么需要为数据交换制订一种通用的文本格式呢？可以做一个简单的试验：
用JavaScript建立一个到PHP的WebSocket并发送一个对象：
1 2 var ws = new WebSocket(&amp;#39;ws://127.0.0.1:4759&amp;#39;); ws.send({name:&amp;#34;hello&amp;#34;}); PHP接收并打印对象：
1 2 3 4 5 6 use Workerman\Worker; $worker = new Worker(&amp;#39;websocket://0.0.0.0:4759&amp;#39;); $worker-&amp;gt;onMessage = function($connection, $data) { var_dump($data); } Worker::runAll(); 得到的结果是：
[object Object]
所以，一种语言的对象的实例以二进制形式直接传递给另一种语言是无法识别的，因此需要把对象数据用文本描述之后再行传递。
此外，相对于XML等其它格式，JSON有可读性上的优势，如果是对象，二进制的数据哪来的可读性？</description></item><item><title>在Vim窗口标题中显示会话名</title><link>http://0x3f.org/posts/show-session-name-in-vim-window-title/</link><pubDate>Sun, 23 Oct 2016 11:52:00 +0000</pubDate><guid>http://0x3f.org/posts/show-session-name-in-vim-window-title/</guid><description>同时处理多个项目时，在窗口标题中显示会话名，方便区分，需用session管理会话。
1 2 3 4 5 6 7 8 9 10 11 &amp;#34; custom the window title fun! MyTitleString() let sessionName = xolox#session#find_current_session() let sessionStr = &amp;#39;&amp;#39; if len(sessionName)&amp;gt;0 let sessionStr = &amp;#39; [&amp;#39;.sessionName.&amp;#39;] &amp;#39; endif return &amp;#39;VIM&amp;#39;.sessionStr.&amp;#39;: %-25.55F %a%r%m&amp;#39; endfun au BufEnter * let &amp;amp;titlestring=MyTitleString() set titlelen=70</description></item><item><title>时人食狗亦与羊豕同</title><link>http://0x3f.org/posts/thinkings-about-eating-dogs/</link><pubDate>Fri, 21 Oct 2016 13:21:00 +0000</pubDate><guid>http://0x3f.org/posts/thinkings-about-eating-dogs/</guid><description>汉书卷四十一：「樊哙，沛人也，以屠狗为事。」
颜师古注：「时人食狗亦与羊豕同。」
狗对于中国古人的意义和西方人不同。西方人，确切的说是美国人，对狗的感情完全是因为发展的时间太晚。美国开国也就二百来年，从印地安人手里夺来的大量耕地和牧场保证了充足的食物来源，而狗为地广人稀的美国在开拓过程中提供了重要的陪伴和保护，所以美国人不吃狗。
中国发展的时间远早于美国，而且没有大片的牧场提供稳定的肉食来源，大型牲畜作为农业主要替代劳力一般也不会用于食用，甚至历朝长期立法禁止宰杀大型牲畜。所以狗长期是作为一种重要的肉食来源。
「失我祈连山，使我六畜不藩息」，「六畜」分别是猪、牛、羊、马、鸡、狗，这是最早被中国人驯化并作为肉食来源的牲畜，而且长期作为祭祀天地祖宗的高档祭品。《道德经》里说：「天地不仁，以万物为刍狗」。「刍狗」就是草扎的狗，是祭祀时当祭品用的，祭祀的时候高高在上、被人们顶礼膜拜，祭祀之后被弃之如敝履，所以说天地不仁。之所以用草狗做祭品，是生产力进步的表现，最初一定是用真狗的，只是后来更高档的肉食逐渐普及，狗肉上不了台面了，才逐渐被抽象成草偶。
所以中国人是有吃狗的传统的，美国人不吃狗肉也并不表示更文明，至于「狗是人类的朋友」，更是道德绑架，谁也不能随便替别人认朋友，最多只能说你的狗是你的朋友，如果别人吃的不是你的朋友，即便自以为站在道德的高度，你也没有任何权力干涉别人的自由，有句话说的好：自由，就是我有不和你一样高尚的权利。
我个人也不吃狗肉，但我不觉得别人吃来源合法的狗肉有什么问题。事实上，吃狗肉的问题并不在于吃不吃本身，而是在这个问题上表现出来的人性的恶，人总是自以为站在道德的高度就可以践踏别人的权利，每个暴政无不是利用人性的这个弱点。
切记，儒以文乱法。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>Archlinux安装过程中的几个坑</title><link>http://0x3f.org/posts/pits-of-archlinux/</link><pubDate>Mon, 17 Oct 2016 13:14:00 +0000</pubDate><guid>http://0x3f.org/posts/pits-of-archlinux/</guid><description>安装方案 Archboot是比官方镜像更友好的安装媒介，此外还有AUI和Arch Anywhere，没有试过。
分区 Archboot使用parted处理分区任务。
第一个分区不能从sector 0开始，否则安装完成后系统玩法启动，报如下错误：
no operating system found
正确的姿势：
(parted) mkpart primary 2048s 512
以上假设第一个分区用来挂载/boot，分配512M。
还需要设置/boot所在的分区可启动：
(parted) set 1 boot on
启动引导器 GRUB的兼容性比较好。
如果是syslinux，对于没有单独对/boot分区并且根分区使用ext4的情况，会无法启动，报如下错误：
failed to load ldlinux.c32
此时，应对/boot单独分区并使用fat格式。
图形界面 安装X不会连带安装显卡驱动，要单独安装，否则启动图形界面会黑屏。
在VirtualBox中安装时，驱动在「virtualbox-guest-utils」。</description></item><item><title>小确幸，用shift切换输入法</title><link>http://0x3f.org/posts/little-happiness-from-replacing-ctrl-space-with-shift/</link><pubDate>Sat, 17 Sep 2016 15:36:00 +0000</pubDate><guid>http://0x3f.org/posts/little-happiness-from-replacing-ctrl-space-with-shift/</guid><description>把Alfred升级到3，就想著把切换中英输入状态的问题一块解决掉。
Alfred可以设置默认使用英文输入状态，然后用Karabiner把Shift_L映射成Ctrl+Space。现在切换输入状态和用Alfred的效率都高多了。
1 2 3 4 5 6 7 &amp;lt;item&amp;gt; &amp;lt;name&amp;gt;Shift_L to Shift_L&amp;lt;/name&amp;gt; &amp;lt;appendix&amp;gt; + When you type Shift_L only,change to previous system input method&amp;lt;/appendix&amp;gt; &amp;lt;appendix&amp;gt;Shift_L == (Ctrl-Space)&amp;lt;/appendix&amp;gt; &amp;lt;identifier&amp;gt;private.change_input_source_to_squirrel.Rime&amp;lt;/identifier&amp;gt; &amp;lt;autogen&amp;gt;__KeyOverlaidModifier__ KeyCode::SHIFT_L, ModifierFlag::SHIFT_L | ModifierFlag::NONE, KeyCode::SHIFT_L, KeyCode::SPACE,ModifierFlag::CONTROL_L&amp;lt;/autogen&amp;gt; &amp;lt;/item&amp;gt;</description></item><item><title>读完《走出帝制》</title><link>http://0x3f.org/posts/after-reading-walking-out-of-the-imperial/</link><pubDate>Thu, 30 Jun 2016 16:19:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-walking-out-of-the-imperial/</guid><description>用了四天时间，读完了这本书。之所以叫「这本书」，是因为这是本在豆瓣里都找不到记录的书，去年上市不久即被下架，通常意义上，叫禁书。
一般走狗君读的书，作者不是死了两千年，至少也有八百年，连渣渣都不剩的那种。所以如果不是禁书，我还真不一定知道它，更不会读。不过既然是禁书，又是历史方面的，那就好玩儿了，他们不想让我知道的，一定是我应该了解的，他越恐惧，我越好奇。
读完的感觉嘛，确实是本好书，每个人都应该读一下，如果你能找到的话。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>Kindle Paperwhite 1代与3代白色版对比</title><link>http://0x3f.org/posts/compare-kindle-paperwhite-v1-and-v3-white/</link><pubDate>Mon, 13 Jun 2016 16:01:00 +0000</pubDate><guid>http://0x3f.org/posts/compare-kindle-paperwhite-v1-and-v3-white/</guid><description>如果说2代相对于1代的改进微乎其微，3代在屏幕和配置上的升级是效果显著的。
从原来的212 PPI升级到300PPI，屏幕像素增加了一倍，加上对比度的提升，显示效果相对1代的变化还是相当明显的，文字更加犀利。内存从256M增加到512M，操作流畅度也有较大的提升，尤其是在用输入法的时候，已经可以基本流畅的输入了。
然而3代刚推出的时候我还是没有换。一方面以上所说的提升和价格的增量并不匹配。另一面，前代在外观和材质上有很大的问题。
首先是颜色，黑色稍微粘上点灰就很明显，对于像我这样的强迫症患者，擦灰的时间几乎和阅读一样多。另外，前代的背面采用的是磨砂处理，在干净的前提下手感是不错，不过很容易粘灰，而且粘灰后手感很差，最要命的是，磨砂加上黑色就是指纹收集器！
所以白色版的出现简直就是一次救赎。白色粘灰后并不明显，背板采用颗粒较大、质感较硬的做工，手感比前代好很多。加上前面所说的在阅读体验上的提升，可以升级了。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>读完《史记》</title><link>http://0x3f.org/posts/after-reading-records-of-the-grand-historian/</link><pubDate>Mon, 13 Jun 2016 15:52:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-records-of-the-grand-historian/</guid><description>之前读通鉴，用了四年，这次用了七个月。终于是名正言顺的两司马门下走狗了，哦耶。
史记这本书，说到底还是个人修史，主观性是很大的。因为坐李陵案，司马迁是有悲愤的情结的，所以他特别喜欢悲剧英雄，很多名篇都是写这种人的抒情散文，比如《屈原贾谊列传》、《项羽本纪》。主观的爱憎过多，一定会失之客观。所以项羽以一暴君成垓下悲歌，刘邦以一英主成千古屌丝。褒贬无需作假，有所取舍足矣。
另外，史料的真实性是值得商榷的。因为秦始皇的焚书坑儒，六国史书尽毁，司马迁的史料来源驳杂，有些事情甚至不同章节互相矛盾。比如黄池之会，左传就只说「遂长吴国」，史记也是照抄这句，究竟晋吴谁做了盟主，还是有争议的。
史记的成功，在于司马迁的文采和宏观的大体真实。鲁迅说它是无韵之离骚，因为司马迁用了大量小说家的笔法写文章。比如讲齐威王的一生，说此人继位后，好为淫乐长夜之饮，诸侯交侵，相声演员淳于髡看不下去了，跟威王说，我听说国中飞来一只大鸟，三年不飞，三年不鸣，你说这是肿么了？威王说，这只鸟啊，三年不飞，一飞冲天，三年不鸣，一鸣惊人。于是罢饮宴，召集大臣，杀一人，赏一人，全国肃然。然后发兵四境，夺回失地，齐国大振。了了几十字，摇人心旌。
然而史实肯定不是这么简单，戏剧之所以好看，就在于它将所有出场的人物脸谱化、剧情简单化。比如讲到冒顿单于，主要讲了两件事。
第一件是鸣镝弑父。依次射野兽、爱马、爱妾、单于坐骑，确保鸣镝已有足够的威信，然后完成致命一击。
第二件是击灭东胡。东胡利用冒顿刚继位的时机，来索要千里马。冒顿召集臣属商量，都说马是游牧民族的命，不能给。冒顿说，不能因为一匹马让大家冒生命的危险，妥协了。然后东胡又来要冒顿的媳妇儿，冒顿如法炮制。最后东胡说，有块废地也给我们吧。当大家都说反正是废地给就给了的时候，冒顿拍案而起，说土地是国家根本，虽废地寸土必争，然后发兵突袭东胡，一举成功。
把历史戏剧化，这就是史记好看的地方。马未都先生说，历史没有真相，只残存一个道理。对于大部分人来说，历史细节的真相并不重要，大框架对就可以了，宏观层面的东西足以让人受益匪浅，追本溯源的事留给专业做学问的就好。
本文最早发布在公众号：两司马门下走狗</description></item><item><title>「食其」是什么？</title><link>http://0x3f.org/posts/what-is-yi-ji/</link><pubDate>Mon, 06 Jun 2016 16:48:00 +0000</pubDate><guid>http://0x3f.org/posts/what-is-yi-ji/</guid><description>「食其」音「异基」，人名。
读汉初的历史，有三个人都叫这个名字：郦食其、审食其和赵食其。这似乎在当时是个很流行的名字，俨然就是汉代的丽丽、芳芳啊。
这两个字为什么念这个音？又是什么意思？
《康熙字典》里只是明确了两个字的读音，并没有解释和考证出处。
《史记索隐》说：「食音异。郦、审、赵三人同名，其音合并同，以六国时卫有司马食其，并慕其名。」意即出自战国时卫国司马食其，后人因为仰慕此人，就取他的名字来用。此外比如司马相如因为仰慕蔺相如而改名也是一例，宋人王楙在《野客丛书》里也持这个观点。
也有人说出自子路所说「食其食者不避其难」。子路做卫国贵族孔悝的家宰时，卫国发生政变，孔悝被劫持，子路听说后只身赴难，在打斗过程中帽子被打掉，说「君子死，冠不免」，在丢下兵器扶帽子的时候被杀。子路去救孔悝时说的这句话，简单说就是吃人嘴短。然而食字在发yi音时并没有吃的意思，所以这种说法当是附会。
比较来看，《史记索隐》的说法最靠谱，但是也没有从根本上解释清楚这个名字的意思。不过考虑到先秦人名普遍比较朴拙和文、言异路的因素，这个名字应该出自当时的口语或方言，只是写到书上时拿「食其」两个字做假借。
本期封面：我的贝克利要🌼了
本文最早发布在公众号：两司马门下走狗</description></item><item><title>两司马门下走狗创刊号</title><link>http://0x3f.org/posts/the-first-post-of-running-dog/</link><pubDate>Mon, 06 Jun 2016 16:22:00 +0000</pubDate><guid>http://0x3f.org/posts/the-first-post-of-running-dog/</guid><description>算是开始玩自媒体了么？
如果从写博客算起，十年前就算了。从一开始和大多数人一样，把博客当成公开日记写，到后来很快明白博客的定位，我的自媒体时代很快从0.1升级到1.0。
后来，因为博客托管网站的所见即所得编辑器生成的HTML代码格式太死板，自己定义了一套简单的标记，然后写了个转换程序，然而没过多久就发现，已经有了类似的东西&amp;ndash;轻量型标记语言。
很快，托管的服务已经不能满足个性化要求。自然而然地，就有了独立博客。这算是我的自媒体2.0时代吧。
就这样一直持续了很多年。内容基本上是日常的总结和笔记，总之是给自己看的成分居多。
公众号怎么定位呢？首先应该是写给别人看的，所以不能过于自由，想什么时候写什么时候写，有时候一月一次，有时候一月几次，有时候几个月不来一次（😱）。其次应该是个专栏，所以主题应该集中，不能想写什么写什么。
那么写点啥呢？在一个理工宅少得可怜的爱好里，翻翻故纸堆是唯一比较能算得上文艺的东西了。其实在接触电脑之前，我一直是想学考古的（💀），现在看来其实人还是最好不要忘了初心（😳）。
好了，都闪开，我要进（kai）入（shi）3.0时（zhuang）代（bi）了！
本文最早发布在公众号：两司马门下走狗</description></item><item><title>Kindle Lazybones: Control Kindle From Your Phone</title><link>http://0x3f.org/posts/kindle-lazybones/</link><pubDate>Mon, 06 Jun 2016 10:33:00 +0000</pubDate><guid>http://0x3f.org/posts/kindle-lazybones/</guid><description>Kindle Lazybones .-. _ ( `. .' ) `\ ` .' | | | | | 66|_ | ,__) |(,_| | | | \_, | | | | .' \ ( , ) '--' '-' Remote controlling utilities for Kindle.
Feature Flip over Kindle with your smartphone. Issues Currently only Kindle PaperWhite is supported, PW2/PW3 are not yet. Kindle still goes to sleep after 10 minutes, a temporary solution is running the searchbox command ~ds to disable screensaver, but only a restart can resume it.</description></item><item><title>奇怪的决战</title><link>http://0x3f.org/posts/a-strange-decisive-battle/</link><pubDate>Sun, 01 May 2016 10:59:00 +0000</pubDate><guid>http://0x3f.org/posts/a-strange-decisive-battle/</guid><description>前两天读史记王翦列传，觉得秦楚的决战很奇怪。
王翦果代李信击荆。荆闻王翦益军而来，乃悉国中兵以拒秦。王翦至，坚壁而守之，不肯战。荆兵数出挑战，终不出。王翦日休士洗沐，而善饮食抚循之，亲与士卒同食。久之，王翦使人问军中戏乎？对曰：「方投石超距。」于是王翦曰：「士卒可用矣。」荆数挑战而秦不出，乃引而东。翦因举兵追之，令壮士击，大破荆军。至蕲南，杀其将军项燕，荆兵遂败走。秦因乘胜略定荆地城邑。岁余，虏荆王负刍，竟平荆地为郡县。
稍微有点军事常识就知道，防守方最好的办法是坚守不战，在自己的地盘上，对方的后勤补给要比自己困难得多，一旦补给不继，军心必乱，势必撤兵，这时候再追上去打，胜算很大，也就是所谓以逸待劳。比如秦赵长平之战，一开始，廉颇先用小股部队跟秦军接触，一看打不赢，马上收缩防线，避免决战，搞得秦军进也不是、退也不是，军力损耗极大，不得以只好用反间换掉廉颇。
所以战争中的进攻方是处于劣势的，要扭转不利的态势，就要把主动权握在自己手里，所以一般会用反客为主的办法。虽然我是进攻方，但我不著急进攻你，让你自己沈不住气来打我，这时候攻守易形，我成了防守方，你成了进攻方，形势就对我有利了。
所以王翦反客为主是正常的，项燕急著打就很奇怪了。老项家累世将门，项燕沙场宿将，不可能连常识都不懂。
也许唯一合理的解释是楚国国力衰败，撑不下去了。
以前秦国伐楚很困难，因为楚国西有江汉之险，北有诸夏扞蔽。不过自白起破鄢郢，江汉天险尽失；自三晋覆灭，中原逐鹿之势已成。秦国伐楚，后勤补给已经不是问题。
另外，让秦国拥有支持百万级灭国战役能力的，还有伐蜀的决策。自商君变法，秦国势平地起飞，此后相当长的一段时间，秦国虽说是战国首强，但也不能占据压倒性的优势，直到秦灭六国前的三十年，还有信陵君收天下之兵扣关攻秦的事。战争不是战斗，决定成败的主要还是国力。李信的二十万大军覆灭后，秦国可以马上再把六十万人送上前线，这个国力，不赢没有天理。所以司马错论伐蜀，同时拥有关中、蜀中两块天府之国，是秦国国力质变的关键。
这个时候的楚国，已经是冢中枯骨。在秦国连年的攻势下，大片国土沦丧，鄢郢破而迁陈，三晋亡而迁寿春，几十年间，颠沛流离，没有喘息的机会，靠吃战略纵深的老本苟延残喘。所以在这次决战之前，可能国力已经难以为继了，但是楚国自己也知道八百年国运系于这一战，所以不得不起倾国之兵应战。空虚的国力和浩大的战争消耗最终迫使项燕选择速战速决，战还有一线生机，不战只能坐以待毙。</description></item><item><title>Alfred-pushbullet: Push a text to your phone</title><link>http://0x3f.org/posts/alfred-pushbullet/</link><pubDate>Wed, 13 Apr 2016 17:30:00 +0000</pubDate><guid>http://0x3f.org/posts/alfred-pushbullet/</guid><description>Pushbullet workflow for Alfred.
Features Push a text to another device. Installation Download the latest release and rename it to pushbullet.alfredworkflow. Double click it to import it into Alfred. Double click the &amp;ldquo;Run Script&amp;rdquo; button and replace &amp;ldquo;ACCESS_TOKEN&amp;rdquo; and &amp;ldquo;DEVICE_NAME&amp;rdquo; according to your pushbullet settings. Activate alfred and input &amp;ldquo;push blablabla&amp;rdquo;, then press enter. Author base64decode IkRvbmllIExlaWdoIiA8ZG9uaWUubGVpZ2hAZ21haWwuY29tPgo=
Download https://github.com/xbot/alfred-pushbullet/</description></item><item><title>Linux下做Mac OSX安装U盘的步骤</title><link>http://0x3f.org/posts/create-mac-bootable-usb-stick-on-linux/</link><pubDate>Tue, 08 Mar 2016 12:22:00 +0000</pubDate><guid>http://0x3f.org/posts/create-mac-bootable-usb-stick-on-linux/</guid><description>假设U盘对应/dev/sdb1、OSX安装包是osx.dmg。整个过程就是提取出一系列文件，然后复制到U盘里。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # 格式化U盘为hfs+文件系统 sudo mkfs.hfsplus -v EICaptianInstall /dev/sdb1 # 提取和挂载第一个光盘镜像 dmg2img -p 5 osx.dmg osx.img mkdir raw &amp;amp;&amp;amp; sudo mount -o loop osx.img raw # 提取和挂载第二个光盘镜像 dmg2img -p 5 raw/Install\ OS\ X\ El\ Capitan.app/Contents/SharedSupport/InstallESD.dmg InstallESD.img mkdir esd &amp;amp;&amp;amp; sudo mount -o loop InstallESD.img esd # 提取和挂载第三个光盘镜像 dmg2img -p 4 esd/BaseSystem.</description></item><item><title>FastFold：Vim折叠功能的救赎</title><link>http://0x3f.org/posts/fastfold-for-vim/</link><pubDate>Wed, 24 Feb 2016 11:06:00 +0000</pubDate><guid>http://0x3f.org/posts/fastfold-for-vim/</guid><description>设置Vim的折叠规则为syntax存在两个问题。一是如果源码中有大量折叠区域，在插入模式中输入会变得很卡。二是刚输入一个折叠区域的起始符号，后面所有的折叠都会被打开。
第一个问题是因为Vim的syntax折叠规则处理过于低效。而后一个问题对于所有自动折叠规则都会存在，原因是Vim对折叠的更新过早。
传统的解决办法是将折叠规则置为manual，并在合适的时机重置为syntax或其它相应规则。但是工作繁复而且往往问题很多。
FastFold是遵循上面所说的方法解决这些问题的插件，不过默认会在所有与折叠相关的时机更新折叠，会导致相关的操作变慢，例如zc和zo时都会有明显的卡顿。鉴于其它时机对折叠的更新已经足够及时，可以通过配置取消受在到明显影响的时机更新折叠：
1 2 &amp;#34; FastFold只在za/zA/zx/zX时更新折叠信息 let g:fastfold_fold_command_suffixes = [&amp;#39;x&amp;#39;,&amp;#39;X&amp;#39;,&amp;#39;a&amp;#39;,&amp;#39;A&amp;#39;]</description></item><item><title>FZF: 又一个文件模糊查询工具</title><link>http://0x3f.org/posts/fzf-yet-another-fuzzy-finder/</link><pubDate>Mon, 01 Feb 2016 11:42:00 +0000</pubDate><guid>http://0x3f.org/posts/fzf-yet-another-fuzzy-finder/</guid><description>fzf是个独立的命令行工具，索引速度很快，可以通过fzf-vim配合使用。
特性 功能支持还是比较全的：
Command List Files [PATH] Files (similar to :FZF ) GitFiles Git files Buffers Open buffers Colors Color schemes Ag [PATTERN] {ag}{5} search result (ALT-A to select all, ALT-D to deselect all) Lines Lines in loaded buffers BLines Lines in the current buffer Tags Tags in the project ( ctags -R ) BTags Tags in the current buffer Marks Marks Windows Windows Locate PATTERN locate command output History v:oldfiles and open buffers History: Command history History/ Search history Snippets Snippets ({UltiSnips}{6}) Commits Git commits (requires {fugitive.</description></item><item><title>ctags vs gtags vs phpctags</title><link>http://0x3f.org/posts/ctags-vs-gtags-vs-phpctags/</link><pubDate>Fri, 29 Jan 2016 17:55:00 +0000</pubDate><guid>http://0x3f.org/posts/ctags-vs-gtags-vs-phpctags/</guid><description>这两天把源码分析工具从ctags向gtags迁移，另外尝试了一下phpctags。
之前用ctags有两个问题，一个是如果同一tag有多个定义，按Ctrl+]只能跳转到第一处。另一个是用cscope查询tag的调用记录时，有些tag查不到结果。
几年前接触过gtags，因为当时还不支持宇宙最好语言，所以没用。这次测试了一下，前面两个ctags的问题都可以解决。
安装后需要手工拷贝gtags.vim和gtags-cscope.vim到vim的plugin目录，然后配置如下：
1 2 3 4 5 6 7 let Gtags_Close_When_Single = 1 let Gtags_Auto_Update = 0 let g:cscope_silent = 1 au FileType php,python,c,cpp,javascript,go map &amp;lt;C-]&amp;gt; :Gtags&amp;lt;CR&amp;gt;&amp;lt;CR&amp;gt; au FileType php,python,c,cpp,javascript,go map &amp;lt;C-[&amp;gt; :Gtags -r&amp;lt;CR&amp;gt;&amp;lt;CR&amp;gt; nnoremap &amp;lt;leader&amp;gt;&amp;lt;C-]&amp;gt; :execute &amp;#39;Unite gtags/def:&amp;#39;.expand(&amp;#39;&amp;lt;cword&amp;gt;&amp;#39;)&amp;lt;CR&amp;gt; nnoremap &amp;lt;leader&amp;gt;&amp;lt;C-[&amp;gt; :execute &amp;#39;Unite gtags/ref:&amp;#39;.expand(&amp;#39;&amp;lt;cword&amp;gt;&amp;#39;)&amp;lt;CR&amp;gt; 其它选项参见前面两个文件里的注释。
另外尝试了一下phpctags，据说和ctags兼容并对php做了优化。实际使用效果和ctags没发现有什么区别，不过tagbar-phpctags倒是比tagbar用ctags时效果更好。</description></item><item><title>CtrlP vs Unite vs Command-T vs FuzzyFinder</title><link>http://0x3f.org/posts/ctrlp-vs-unite-vs-command-t-vs-fuzzyfinder/</link><pubDate>Wed, 27 Jan 2016 16:16:00 +0000</pubDate><guid>http://0x3f.org/posts/ctrlp-vs-unite-vs-command-t-vs-fuzzyfinder/</guid><description>简述 Sublime在文件打开速度上的表现很惊艳，Vim有几个扩展可以实现类似功能，本文对这些扩展做个对比。
虽然每个扩展都或多或少地实现了一些功能，我个人用得最多的也就文件、Tag、Buffer Tag的模糊查找这三个，像MRU、buffer之类的查找不觉得有多大用处，所以提高工作效率的工具一定是在热度环节有很好表现，其余偏门功能可以交给插件实现，在这点上CtrlP和Unite做得很好。所以下面针对最常用的这三个功能做下对比，更多功能的对比见下表：
文件模糊查找 Command-T的文件索引速度最快，各方面在这几个扩展中的表现都是最好的。
CtrlP默认使用VIM自建的globpath()，需要手工配置使用ag以获取更快的速度，据说使用find命令效率更高，实际感觉和ag差别不大。
Unite也需要手工设置使用ag，而且可以实现异步索引，在这一点的体验上好于前两个，但是在模糊匹配的排序上表现不好，比如输入“php”，当然希望“/etc/php.ini”这样的结果排在“/home/peter/host/tmp.txt”前面，实际往往不是这样，Unite的几个sorter里，数rank的排序结果最接近于这个要求，但是表现仍然不如前两个。
Tag模糊查找 三个扩展都是通过ctags实现，虽然Unite的排序问题仍然存在，对于Tag这么简短的东西，问题不大。
Buffer Tag模糊查找 CtrlP的表现是最好的。
Unite需要通过unite-outline这个source实现，但是只能列出类和方法，无法定制列举类型。而且默认选中排在第一位的类名，查询方法时很不方便。
Command-T不支持此功能。
我的选择 FuzzyFinder是该类扩展里的老前辈，不过早已不维护，功能上不比其它几个出彩。Command-T虽然在文件索引速度上表现最好，但是优势并不很明显，而且支持功能最少。所以排除这两个。
在最常用的三个功能上，CtrlP的综合表现是最均衡的，所以留下它。Unite本身是一种统一的交互方式和界面，很多扩展（source）可以实现五花八门的功能，像unite-outline虽然在Buffer Tag上表现不佳，对于Markdown和Vim文档还是很有用的。
Update: 2016-02-01 FZF: 又一个文件模糊查询工具</description></item><item><title>简化Vim Addons Manager安装扩展的操作</title><link>http://0x3f.org/posts/simplify-vim-addon-installation-issues/</link><pubDate>Wed, 20 Jan 2016 18:05:00 +0000</pubDate><guid>http://0x3f.org/posts/simplify-vim-addon-installation-issues/</guid><description>相对Sublime的Package Control，VAM安装和卸载扩展的操作很烦琐。以下脚本在安装完扩展后自动注册，无须手工添加到vimrc，另外增加命令:UninstallAddons，从注册表中删除扩展。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 set runtimepath+=~/.vim/addons/vim-addon-manager let active_addons = [] let s:vamRegistryFile = expand(&amp;#39;~&amp;#39;).&amp;#39;/.vim/vam_registry&amp;#39; if filereadable(s:vamRegistryFile) let active_addons += readfile(s:vamRegistryFile) endif call vam#ActivateAddons(active_addons) &amp;#34; Addon post-install hook.</description></item><item><title>BiuBiu: A Chrome Extension Blocking AJAX Requests</title><link>http://0x3f.org/posts/chrome-extension-biubiu/</link><pubDate>Thu, 31 Dec 2015 14:19:00 +0000</pubDate><guid>http://0x3f.org/posts/chrome-extension-biubiu/</guid><description>BiuBiu BiuBiu is an extension for Google Chrome Browser which intends to make life easier for debugging and profiling.
For now, it only blocks AJAX requests made by JQuery, more features may be added in the future.
Features Toggle to enable or disable BiuBiu. Block requests made by JQuery by URL. Author Donie Leigh &amp;lt;donie.leigh at gmail.com&amp;gt; Links Project: https://github.com/xbot/chrome-biubiu FAQ &amp;ndash; &amp;ndash; Change Log version 1.0.1 (2015-12-31)
Fix the complaining when there is no jQuery or jQuery.</description></item><item><title>读完《春秋左传注》</title><link>http://0x3f.org/posts/after-reading-zuo-zhuan/</link><pubDate>Sun, 15 Nov 2015 18:24:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-zuo-zhuan/</guid><description>读这本书，用了一年时间。前面读《通鉴》，用了四年，平均一年五本书的节奏，读尽相斫书的伟大理想不知道这辈子能不能实现了。汉以后的书都好读，也不一定。
总结一下，主要有两个心得吧。一个是梳理了一下春秋的脉络，把以前知道的片断都连了起来，抓住“蛮夷与戎狄交，中国不绝若线”的大背景，整个春秋时代大家都忙啥呢就清楚了，然后分成三段看，齐桓始霸、晋楚争霸、吴越争霸，比从五巨头切入清晰。第二个是加深了对礼乐文化的认识，贵族时代干啥都跟闹著玩似的，反映出我们屌丝的世界太低俗，整本《诗经》就是贵族圈的黑话，搞得我老想叉开去读《诗经原始》，剁手剁手，不然更看不完了。
读《通鉴》算是用通史贯穿一下脉络，《左传》是第一本读完的断代史，本来想接著读《战国策》，看了一眼，文章写得太烂，又是纵横家的书，所以直接读《史记》，司马迁的小说写得还是不错的，迁儿哥，我来了！</description></item><item><title>寻找失落的匈奴（201409）</title><link>http://0x3f.org/posts/a-trip-to-tongwan-city/</link><pubDate>Thu, 20 Aug 2015 23:07:00 +0000</pubDate><guid>http://0x3f.org/posts/a-trip-to-tongwan-city/</guid><description>行程 D1.AM 失落的匈奴 匈奴是中国统一后的第一个大敌，极盛时号称控弦四十万，以至于汉武帝穷高、文、景三代积蓄，鏖战数十年，延及元帝，郅支授首，才终于换来一句“犯强汉者，虽远必诛”。
东汉招引外族入居内地，想同化并加以利用，至于魏晋，欺压各族，又不加防备。
西晋初年，由封建制的复兴导致的八王之乱，纷纭十六年，耗尽了皇族势力。被压制已久的民族矛盾于是爆发，匈奴、鲜卑、羯、氐、羌五族先后建立十六个国家，混战一百三十多年，史称五胡十六国。
其中，匈奴铁弗部赫连勃勃建立大夏国，横行秦晋，役民十万蒸土筑城，号统万城。蒸土就是在土中混入生石灰，然后浇水夯筑，所以城墙是白色的，当地人至今都叫白城子。筑城要求极为严格，工程验收人以铁锥刺墙，刺入一寸杀筑者，尸体填入城墙，所以城墙极为坚固，是夯土建筑的巅峰之作。后来北魏太武帝拓跋焘灭夏入城，说“统驭万邦，在德不在险”。
统万城遗址在陕西靖边。我喜欢去这种没有被过度商业化开发的地方，再过几年，也许就再也见不到这种荒草孤城的景象了。
早上四点火车到站，车站门口有很多黑车，会漫天要价，事先做好功课就不会被宰，议定一百五，要说明白包往返，到地方等两个小时。
路上停车吃洋芋擦擦，就是炒土豆丝……
火车站到统万城大概三十公里，所以不会用太长时间，五点多到的时候，天还没有亮，这个时候没人收费，可以直接开进去。
天色微亮，从停车场走向统万城还是条土路。
遗址正在进行小规模的修复。
城墩填充的外表被刻画成砖的样子，而夯土建筑的轮廓应该是一层一层的。
像这样：
走在质地坚硬的城墙上，可以想象当年它曾是怎样的坚不可摧。
凸出的城墩和城墙形成有纵深的防御体系，可以分割敌人的阵形，将攻城者置于被三面夹击的死地。残存的城墙尚且这么高，不知道当年是如何雄伟的一座城！
荒原晨露，日出统万。
沿着小路走向城中的高台，沙深露重，很不好走。
土墩离外城城门不远，可能是内城的一部分。高处的洞里，栖满了野鸽子。
城的中部，据说是宫殿遗址。
城北一处正在发掘的现场。
北角的城墩，淹没在一望无际的荒草中。
我在这里休息，读完了《晋书·赫连勃勃载记》。
东角的城墩已经破坏得快消失了。
回望城内。
东南城墙已经快消失在荒草中了。
南角墩曾被挖做窑洞。
只有西角残存的遗迹最完整。
因为去得早，而且遗址少有人去，所以整个早上只有我一个人，不紧不慢地走遍全城，用了三个小时，好在司机没有催我，如果能带着帐篷来这里扎营，重读通鉴永嘉南渡后三百年的烽火狼烟，一定很刺激，不过可能再也没有机会了。
D1.PM 龙洲丹霞（波浪谷） 从统万城出来，时间还很早，上车直奔龙洲丹霞，车上议价，往返加等待，100￥。
路上还有一段长城的遗迹，只剩下垄起的一条痕迹，可能是汉长城。
景区已经修了观景台和公路，不过还没有收费。
看这个就知道为什么叫波浪谷了。
下面是深沟，岩石表面是风化的沙土，走在上面很惊险。
靖边有石油，能看到远方油井喷出的火。
其它地方见到的丹霞都是在地上的，这里是在地下，要从公路边的野路下去，所以找个知道路口在哪的司机很重要。
有的小路不好走，只能手脚屁股并用。
下到谷底。
很美，真的很美。
中间有一段很窄，一只脚都插不下。
像什么，我当时自然地想到了大地的菊花……
下面这一段更难走，顺着沟再往前是悬崖，只能从左手边的崖壁上绕过去。
这段很危险，旁边就是悬崖，石头风化严重，我爬得很慢、很纠结。
过了这段就好了，前面谷底别有洞天。
谷里的水是从这个谷口里流出来的，水源是人工的，源头有只死猫，恶心死我了，因为溯源前用溪水洗了手，还挺凉。
前面这个山包就是传说中的土匪窝，山体已经被挖空了，在前朝是土匪的藏身之地。
谷底再多些草和野花就好了。
水流经过的地方倒是水草丰茂。
土匪窝下的人工湖可以坐船。
从土匪窝旁的土路上到公路路口就很容易了，在路口吃了碗荞麦凉粉，挺好吃的。
波浪谷不大，不过确实很漂亮，据说雨后初晴时来更好看，丹霞会呈现通红的颜色。由于野路不好走，而且我慢慢玩儿、拍照多，用了大概三个小时。
大概下午两三点的样子，时间还早，所以让司机把我拉到县城里的电影院，看了场《猩球崛起2》，小县城因为有石油，居然就可以看3D，而且是眼镜夹片，真是我大四眼党的福音，比3D眼镜舒服多了。只是小县城的影院不打折，于是看了自《阿凡达》以来最贵的电影。
看完电影，步行去之前司机推荐的“乔沟湾老婆风干羊肉剁荞面”馆吃剁荞面（23￥），离电影院不远。然后就酱紫了：
没想到吃面可以这么铺张，不知道从哪开始发动，恬着脸问了服务员，吃得好爽，也很撑。
出门边散步边打车，时间还早，慢慢讲价，这小县城的出租车死贵，到火车站没多远，要价20￥，后来终于找到一个15￥的。
D2.AM 晋祠 一夜火车，早上4点到太原，在车站门口等804路公交到晋祠，大概七点多到的。
相机没电了，只拍了这一张。
剩下的只能用手机拍了，效果很差。
李世民和其功臣塑像。李唐以国号始自周成王弟叔虞所封的唐国，所以大修晋祠。
难老泉，就是奔它来的。
从晋祠出来大概十一点，吃完饭坐公交到山西博物馆。
D2.PM 山西省博物馆 博物馆最能看出一个地方的底蕴。山西省博在国内算是一流的，不可不看。
山西省博东西很多，走马观花也没看完，到闭馆时还有一个展厅没看。</description></item><item><title>自驾鸡鸣驿、草沿天路（201507）</title><link>http://0x3f.org/posts/a-drive-to-jimingyi-and-caoyantianlu/</link><pubDate>Wed, 12 Aug 2015 21:05:00 +0000</pubDate><guid>http://0x3f.org/posts/a-drive-to-jimingyi-and-caoyantianlu/</guid><description>行程 D1：上午，北京到怀来，土木之变战场遗址和鸡鸣驿；下午，宣化，清远楼、镇朔楼、时恩寺、辽代古墓壁画群。
D2：草沿天路，张北野狐岭入，崇礼桦皮岭出。
D1.AM 土木堡、鸡鸣驿 虽然起得很早，上京藏线也七点多了，赶上草原音乐节，出城的车巨多，在居庸关前面一段堵了半小时。
到土木堡的时候已经十点多了，唯一的标志物就是这个路边的牌楼。
里面是一片荒地，可能是土木之变的战场遗址。当年一战，二十万大军覆没，大明精锐尽丧，英宗北狩，瓦剌围城。可惜于谦，打赢了北京保卫战，却输掉了夺门之变。所以老子说：“持而盈之，不若其已。揣而群之，不可长保也。金玉盈室，莫能守也。富贵而骄，自遗咎也。功遂身退，天之道也。”，实在是金玉良言，不过知进易，知退难，几千年来，有几个张良？
数百年的烽火狼烟，劫波度尽，谁能想到土木堡真正的被毁发生在本朝。路的另一边就是土木村，据说还有土木堡残存的遗迹，时间关系，没有去看。
事实证明，沿G110奔鸡鸣驿不是个好选择，路况不太好，大货车很多，应该走高速的。
城门被修成这样也是醉了，我头回见城门口横着一影壁墙的。
反而从城内看城门，才有点儿意思。
城门口的塑像，后面是驿城博物馆，主要介绍一下驿城的历史。
城门要远看才有意境。
城中主干道旁的戏台，其它地方还有两个，小小的驿城，修那么多戏台干嘛，规划有问题。
多久没见这种风格的房子了。
驿城署，现在是一家人的住处，可以进去参观，有人剪票，不过里面什么都没有。
文昌宫，当年是驿城的学校。
晴耕雨读，用的残体字……
龙神庙里也有个戏台，得是多喜欢看戏！
范家大院，庚子国变慈禧逃跑时曾在这住了一宿，现在也就剩这么一进。敢向全世界宣战的只有两个人，一个是天朝圣母皇太后，一个是巴格达迪。
伏瞰驿城，怀疑原来真有这么大么，似乎和西夏黑水城和统万城差不多。
坐在城头等日落。
我怀疑这城墙是做旧，明朝以后，大多数城墙已经换用砖石结构，应该不会用这种过时的夯土建筑了吧。
城外的鸡鸣山形态突兀，很显眼，如果是下雨的天气，真有“风雨如晦，鸡鸣不已”的感觉。
城外不知道为什么弄了几截绿皮火车，很不搭。
D1.PM 宣化古城、辽代古墓壁画 从鸡鸣驿出来奔宣化，三点多到，吃莜面窝窝，又叫栲姥姥，据说是当地特色，在电视上见过。蘸着羊肉臊子，味道很不错。
清远楼和镇朔楼是宣化古城的标志性建筑，始建于明朝，气势恢宏，不可不看。
清远楼是钟楼，在维修。
镇朔楼是鼓楼，门票5￥，我包场。
一层是个展厅，居然是介绍宣化当代发展的。
二楼很空，只有一面大鼓。
楼外就是时恩寺。
殿里正在做法事，很多人，顺时针转圈，口宣佛号，净土宗的路子。
就是奔这块匾来的。
从寺里出来，开始下雨，赶紧钻到车里，奔辽代古墓壁画群，路经大新门，这是一排新修的城墙，今天已经逛够城墙了，时间也不够，于是继续赶路。
穿过又窄又烂的土路，深入下八里村，就是辽代古墓壁画群，如果不是导航，谁能找到这鬼地方。时间已经是5点后，售票处没有人，墓道锁门了，只能看看园子，看售票处的标价，票价要50￥，比满城汉墓黑多了。不过这种地方游人很少，即便白天来，一个人逛古墓是一种什么样的体验？或者如何优雅的和古人神交？这是知乎看多了。
D2 草沿天路 第二天，早五点起床，奔天路东线，从张北野狐岭入，崇礼桦皮岭出。
现在这条路知名度越来越高，来的人很多，七点多到的时候，野狐岭入口的一段路，车就已经一辆接一辆了。路的两边越来越多地被开发旅游项目，中国旅游模式正在再次被复制，草原旅游就那么几项，烧烤、骑马、射箭、沙滩摩托，毫无新意，而且同质化严重。使天路出名的原生态自然风光，正在慢慢消退。
费用 北京到宣化过路费：65￥
鸡鸣驿门票：35￥
镇朔楼门票：5￥
宣化经天路回北京过路费：120￥
加油：416￥</description></item><item><title>变形金刚：电影4领袖级大黄蜂</title><link>http://0x3f.org/posts/tf-m4-leader-class-bumble-bee/</link><pubDate>Sat, 01 Aug 2015 18:30:00 +0000</pubDate><guid>http://0x3f.org/posts/tf-m4-leader-class-bumble-bee/</guid><description>当电影2那堆玩具已经成为神物，入个4的L级大黄蜂也未尝不是一种自我安慰。
电影4的L级BB是3的同模异涂，但是阉割了武器背包，也就是说，这货没有声光效果！虽然3的背包很鸡肋，但是本著先看有没有，再看好不好的原则，4的玩具再一次见证了大缩水时代，我不敢想下一代会做成什么样。多么怀念那个连D级玩具都远超现在L级的时代。
虽然电影2的U级和战刃是公认最经典的BB模具，退而求其次，3的模具也不错。人形很有层次感和曲线感。涂装较3有改进的地方，黑色部件的引入增强了色彩对比，比3的非灰即黄要好很多；最大的亮点是脸和触角的银柒涂装，3的灰脸看著像骷髅头，很恐怖。不过退步和进步一样明显，首先面具改成了V形描边，远不如之前的面部横描好看，现在一点都不想把面具拉下来了；此外，脚尖没有涂色也是个败笔。
头雕的细节刻画不错，还是BB一贯的嗪奶嘴的骷髅头，面具的涂装也很差，银柒涂装是唯一能挽回点儿颜面的地方。
手臂采用非对称设计，右手手炮，左手是个半假手，只有大拇指可动，什么都握不住，只是个摆设，看看当年电影2的D级的战刃，完全不能比啊。
脚的设计很漂亮，不过虽然看起来支撑面很大，但由于踝关节不可左右摆动，导致接地性不好。
所有BB模具都不能解决的大背包，现在似乎已经成为BB的特征了，好吧，即便接受这一点，这一整块棺材板好意思跟战刃的两级背板比么？
关节的松紧度没有问题，可动性也不错，不过腰部不能转，头部只能左右转，不能抬头、低头。
武器就是右手手炮，这货没有任何配件，如果说噱头的话，也就是手炮可以拉长和缩短，这点连D级玩具都不如啊。
载具形态也不错，滚动性良好，可以摆出3的武装爆甲的形态，但是武装呢？！
底部隐藏度一般，似乎电影系所有BB都有头无法隐藏的问题。
最后放一张3的武装爆甲照，缅怀BB入宫前的峥嵘岁月。</description></item><item><title>自驾白石山、满城汉墓（201507）</title><link>http://0x3f.org/posts/a-drive-to-baishi-mountain-and-a-kings-tomb-of-han/</link><pubDate>Wed, 29 Jul 2015 20:15:00 +0000</pubDate><guid>http://0x3f.org/posts/a-drive-to-baishi-mountain-and-a-kings-tomb-of-han/</guid><description>行程 D1：北京到白石山，爬山，到满城住宿。
D2：看满城汉墓，回京。
D1 白石山 原计划早上6点出发，该死的拖延症，收拾东西花了点时间，七点多才走。
途径南六环、京石高速、廊涿高速、张石高速。易县以后进入山区，隧道又多又长，本着不超速、不随意变道、做中国好司机的原则，走得比较慢，十点多才到涞源。涞源出口很窄，堵了二十分钟。出高速到景区已经不远了，在东门停车场停好车。
来前天气预报说有小雨，心说很好啊，我就喜欢下着小雨爬山，所以没带速干帽，结果是个闷热天儿，我去。
十点四十，出发。我的艺名叫不逃票不舒服斯基，因为走正门太low了。不过逃票要早上四五点走野路，时间紧，任务重，还是low吧。头一天同程订的门票，比现买便宜十块，据说发表评价再退十块。坐摆渡车到祥云门，也可以坐索道。然后顺时针走环线。
山里大部分路口都是局部路标，带张完整的路线图还是有必要的。
我对所有以“传说”开头介绍的东西不感冒，总之这个塑像是环线的起点和终点。
一开始就走下坡，沿着峡壁的栈道下到飞狐峡，这一线主要是峡谷半山的栈道，是全环线最好的一段，我喜欢峡谷。
飞狐峡走的人少，多数时间太阳不直晒，风吹着，凉快。
我喜欢峡谷。
每个山谷都应该有一条河，可惜。
逆风如解意，容易莫摧残。
仙人晒靴。不喜欢这种附会的东西。
太行之神。这货跟神有一毛钱关系么。
好吧，这才是重点，玻璃栈道。一点儿都不吓银，而且很短，而且收费，看我的斯卡帕美不美。
回望走过的栈道，敢问路在何方。
过了玻璃栈道就是双雄石，好内涵的名字，剩下的路已经不多了，而且都是平路。
猪八戒背媳妇儿。虽然附会，确实比较像，就是这媳妇儿砢碜了点儿。
走一圈环线用了4个小时。刚下山，到停车场，毫无征兆的一场暴雨，这酸爽，山里的天气真是孩子脸。
驱车奔满城，走高速要绕很远，于是奔S332，看地图只有一百多公里。结果又干了三个多小时，天落黑才到酒店。
刚开始的一段路还可以。小公路在太行山里蜿蜒，重山夹路，车少，路况也不错，偶尔掠过几个石筑的村落，甚至有牧人和羊群镶嵌在陡峭的青山上，恍如隔世。
中间一段路况很差，再往下走，人烟逐渐增多，更多的是成群结队的重卡，很耽误时间，有时候走着走着停了，还以为前面堵车了，哪知道这孙子站路中间嘘嘘呢，知道燕赵民风骠悍，没想到这么骠悍。省道真练技术。
D2 满城汉墓 我喜欢破破烂烂的地方，满城汉墓早在我的怨念单里。汉墓十墓九空，唯独这个是极少没被盗过的之一，光这个墓的陪葬，撑起了整个河北省博物馆。另外墓主人很有名，中山靖王，汉景帝庶子，汉武帝异母兄，刘备号称的祖宗。平生三大爱好，喝酒、吃肉、叮叮当当造小人儿。《史记》载其有子百二十人，按照正态分布，女儿也得有百二十人，刘营长辛苦。
景区大门，我喜欢人少的地方。头一天在同程上订好的园区门票、窦绾墓、刘胜墓的联票，比现买便宜十块，一个景点分段收费，旅游业非常黑。
石像生和翁仲应该不是汉墓的原物。
有索道，不过山不高，没必要。
夫人窦绾墓在靖王墓北一百多米处，容积比靖王墓大，大概是靖王死在先，窦绾墓多施工了几年。
墓门用砖砌墙，然后注入熔铁封死。倒这样的斗确实不容易。
窦绾墓平面图。仿宫殿式布局，两个耳室一存车马，一存饮食。中室是客厅。侧室是带浴室的主卧。
墓道里非常凉快，和外面完全两个世界。两千年前的人，先用火灼烧石壁，再用水激，最后用铁器凿掉碎石，这样的工艺也算是巧夺天工了。
南耳室是车库。
北耳室存放饮食。
中室灰常大。
渗水井和室内排水沟相连，组成很完善的排水系统。
金缕玉衣，仿品。
侧室，窦绾的金缕玉衣和传说中的长信宫灯原本停放在这里。
靖王墓的容积虽然比窦绾墓小，不过规制似乎更大。中室有木瓦结构的建筑，卧室在中室正后方，卧室后甚至有回廊。
中室内的木瓦建筑，象征宴会厅。
南耳室，车库。
北耳室，仓库。
中室，宴会厅。
后室回廊。
后室，刘胜的金缕玉衣和传说中的错金博山炉原本停放在这里。
费用 北京到白石山高速过路费：95￥
白石山门票：140￥
白石山停车费：20￥
白石山摆渡车票：20￥×2
满城汉墓门票：65￥
满城汉墓停车费：10￥
加油：233￥
保定到北京高速过路费：75￥</description></item><item><title>Swoole与PHP-FPM性能对比</title><link>http://0x3f.org/posts/swoole-vs-php-fpm/</link><pubDate>Tue, 14 Jul 2015 16:40:00 +0000</pubDate><guid>http://0x3f.org/posts/swoole-vs-php-fpm/</guid><description>测试环境：
CPU: Intel(R) Core(TM) i5-3470 CPU @ 3.20GHz MEM: 4G OS: Archlinux 64bit 测试命令：
1 ab -c 200 -n 200000 -k http://127.0.0.1/test NGINX + PHP-FPM Requests per second: 16240.50 [#/sec] (mean)
Time per request: 12.315 [ms] (mean)
NGINX + Swoole Requests per second: 31284.57 [#/sec] (mean)
Time per request: 6.393 [ms] (mean)
Swoole Requests per second: 99926.55 [#/sec] (mean)
Time per request: 2.001 [ms] (mean)
结论 对一个最简单的PHP脚本做测试，排除业务逻辑的消耗的影响。Swoole威武。</description></item><item><title>变形金刚：KO电镀嘴炮OP</title><link>http://0x3f.org/posts/transformers-optimus-prime-ko-edition/</link><pubDate>Mon, 22 Jun 2015 20:35:00 +0000</pubDate><guid>http://0x3f.org/posts/transformers-optimus-prime-ko-edition/</guid><description>嘴炮OP这个模具应该是电影系列十年来最好的模具，经典到一再复刻和改模，和原色双刀、DA28一起都属同模或改模版本。相比之下，这款模具在涂装上胜过同模其它版本，电镀件和银柒使人形、车形在色彩上对比鲜明，和银色飞翼搭配很自然。
人形正面比例协调，领袖级的大小更显霸气。腰部和小腿部的两对轮子太累赘，腰部的轮子完全可以设计成收纳到腰里。
涂装上，除红蓝主色调外，其它位置主要填充银色金属柒，对比鲜明，很有质感。
上下肢都采用齿轮关节，关节的松紧度方面表现很好。除了腰部不能转动，四肢和头部的转动辐度都很大。
作为一款经典的L级模具，手居然是假手，很不可理解。
踝关节可以左右摆动，所以脚的接地性没有问题，不过全身最大的两块电镀件居然踩在脚底板当鞋垫，真是无语了。
这款模具之所以叫嘴炮OP，就是因为有嘴有炮。一般OP的模具的头雕都是带口罩的，而这款是露嘴的。其实我更喜欢带口罩的形象，机器人要嘴没什么用，尤其像大黄蜂那种嗪奶头的嘴，见一次吐一次。
头雕很精细，细节的刻画和涂装都很到位，只是这长了鳃的OP是要配合天火马甲搞个海陆空三栖么。
背包不算大，不过还是过于突兀，尤其是这交叉的造型个人觉得很难看。
炮是由两个油箱组合变形而成，虽然炮形比较奇葩，但是构思确实很新颖。
受G1动画的影响，我觉得朴实无华的平头卡车更能显现OP的威严，电影版的狗头卡车多少有点浮夸。不过从还原电影的角度来说，这款模具的载具形态还是很不错的。尤其是两部分电镀件，遮光板和进气面板，非常闪亮。白色描边的火焰纹的刻画也很到位。
由于车轮没有卡扣固定，并且有的车轮不能著地，所以载具形态的滚动性不好。
L级模具的噱头一般是声光效果。这款模具有三个，一是人形状态下，扳下腹部机关，胸甲耸起的同时，胸部和眼睛会亮，OP喊：“I am Optimus Prime !”（其实不如喊那句最经典的：“Autobots, transform and roll out !”，向G1致敬会让很多人丧失抵抗力……）；第二个是人形变车形时，上半身和下半身分离时，发出叽叽咔叽的变形音效；第三个是在车形状态下，扳动车头背部的开关，发出机枪扫射的声音。平心而论，这款模具的声光效果设计得还是不错的，人形、变形、车形三种状态都有照顾，不像变3的L级大黄蜂，所有声光效果都在那个巨大无比的鸡肋背包上。
把玩性方面，由于体形较大，变形复杂度高，把玩起来流畅度并不高，不过这是L级模具的通病。
此外，KO版的普遍问题都有，像左遮光板卡不紧、胸甲滑动不流畅。
总之，这款KO双刀电镀嘴炮OP在模具、涂装、做工、用料等各方面的表现都不错，非神物而神物，压箱底还是可以胜任的。</description></item><item><title>PHP扩展框架的创建</title><link>http://0x3f.org/posts/create-php-extension-skeleton/</link><pubDate>Thu, 18 Jun 2015 14:15:00 +0000</pubDate><guid>http://0x3f.org/posts/create-php-extension-skeleton/</guid><description>创建项目 在PHP源码目录下的ext目录下执行：
1 ./ext_skel --extname=foobar 修改foobar/config.m4，移除以下三行前的dnl：
dnl PHP_ARG_WITH(foobar, for foobar support,
dnl Make sure that the comment is aligned:
dnl [ &amp;ndash;with-foobar Include foobar support])
编译与安装 在foobar目录下执行以下命令，生成configure脚本：
1 /usr/bin/phpize 执行configure：
1 ./configure --with-php-config=/usr/bin/php-config 编译安装：
1 sudo make install 修改php.ini，启用扩展：
1 extension=foobar.so</description></item><item><title>PHP流的上下文和过滤器的实现</title><link>http://0x3f.org/posts/contexts-and-filters-implementation-of-php/</link><pubDate>Mon, 15 Jun 2015 19:15:00 +0000</pubDate><guid>http://0x3f.org/posts/contexts-and-filters-implementation-of-php/</guid><description>上下文的实现和应用 上下文包含流的选项和流的参数两部分内容。
1 php_stream_context *php_stream_context_alloc(void); 流的选项是一系列键值对。
1 2 3 int php_stream_context_set_option(php_stream_context *context, const char *wrappername, const char *optionname, zval *optionvalue); int php_stream_context_get_option(php_stream_context *context, const char *wrappername, const char *optionname, zval ***optionvalue); 流的参数目前只实现对流的事件的回调，php_stream_context-&amp;gt;notifier存储如下结构：
1 2 3 4 5 6 7 typedef struct { php_stream_notification_func func; void (*dtor)(php_stream_notifier *notifier); void *ptr; int mask; size_t progress, progress_max; } php_stream_notifier; 回调函数的原型为：
1 2 3 4 5 typedef void (*php_stream_notification_func)(php_stream_context *context, int notifycode, int severity, char *xmsg, int xcode, size_t bytes_sofar, size_t bytes_max, void * ptr TSRMLS_DC); notifycode包含如下：</description></item><item><title>使用gn操作增强Vim的搜索</title><link>http://0x3f.org/posts/enhance-search-with-gn-in-vim/</link><pubDate>Sun, 14 Jun 2015 21:16:00 +0000</pubDate><guid>http://0x3f.org/posts/enhance-search-with-gn-in-vim/</guid><description>gn是Vim 7.4新增的一个操作（motion），作用是跳到并选中下一个搜索匹配项。
具体说，Vim里执行搜索后，执行n操作只会跳转到下一个匹配项，而不选中它。但是我们往往需要对匹配项执行一些修改操作，例如替换、删除或修改大小写等，如果先跳转再执行对应操作，会比较繁琐。gn可以和相应的操作结合，简化这些过程。
举个栗子。如果要把所有的win、linux替换成大写，可以先用正则搜索“\(win|linux\)\C”，然后执行“gUgn”，此时下一个匹配的结果就会被替换成大写，然后直接执行“.”重复上次操作即可。
此外，常用的组合有：
cgn: 删除下一个匹配项，并进入插入模式。 dgn: 删除下一个匹配项，并保持常规模式。 和操作“N”相同，执行“gN”是逆向操作。</description></item><item><title>在i3wm状态栏显示股票信息</title><link>http://0x3f.org/posts/show-stocks-in-i3status/</link><pubDate>Fri, 12 Jun 2015 17:39:00 +0000</pubDate><guid>http://0x3f.org/posts/show-stocks-in-i3status/</guid><description>效果如图：
创建脚本，并赋可执行权限：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #!/bin/sh # shell script to prepend i3status with more stuff STOCK_SCRIPT=`realpath &amp;#34;$0&amp;#34;|xargs dirname`/stock.php i3status | while : do stock_info=&amp;#34;&amp;#34; if [[ -x &amp;#34;$STOCK_SCRIPT&amp;#34; ]]; then stock_info=`$STOCK_SCRIPT` fi read line # if output_format = i3bar in i3status.conf stock_info=&amp;#34;[{ \&amp;#34;full_text\&amp;#34;: \&amp;#34;${stock_info}\&amp;#34; },&amp;#34; echo &amp;#34;${line/[/$stock_info}&amp;#34; || exit 1 # # if not output_format = i3bar in i3status.</description></item><item><title>PHP流的操作</title><link>http://0x3f.org/posts/stream-operations-of-php/</link><pubDate>Mon, 01 Jun 2015 15:33:00 +0000</pubDate><guid>http://0x3f.org/posts/stream-operations-of-php/</guid><description>实现 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 /* reimplement fopen using stream */ ZEND_FUNCTION(donie_stream_fopen) { php_stream *stream; char *path, *mode; int path_len, mode_len; int options = ENFORCE_SAFE_MODE|REPORT_ERRORS; if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, &amp;#34;ss&amp;#34;, &amp;amp;path, &amp;amp;path_len, &amp;amp;mode, &amp;amp;mode_len) == FAILURE) { return; } stream = php_stream_open_wrapper(path, mode, options, NULL); if (!stream) { RETURN_FALSE; } php_stream_to_zval(stream, return_value); } php_stream_open_wrapper()是对文件类型资源创建流的方法，此外还有基于socket的流、目录流和特殊流三种。php_stream_to_zval()用于把流实例转换成zval结构。</description></item><item><title>变形金刚：祖国合金放大版探长</title><link>http://0x3f.org/posts/hound-of-transformers-4/</link><pubDate>Sun, 31 May 2015 17:39:00 +0000</pubDate><guid>http://0x3f.org/posts/hound-of-transformers-4/</guid><description>探长可以和平头OP并列变四最好的模具，人形和车形俱佳。但是官版的V级神物实在鸡肋，所以祖国版准L级模具实在是拯救巨大控的好物。除了放大，探长的整个车头都是合金件，既有质感又有份量。涂装较官版也有改进，胸甲和轮轱上了银柒，枪管上了金柒，车形后部增加了火焰纹，不像官版那么素。最重要的是祖国版的做工很好，关节松紧适度，车形闭合得很好。
祖国版的探长目前有三个版本，普通版、叼烟版和蓝色版。普通版和官版是一致的。叼烟版的头雕是叼著烟的。蓝色版的外形和普通版一样，但是涂成了深蓝色，而且附送两个塑料小人。我最喜欢的叼烟版，不知道帝都禁烟后还能不能买到……
虽然祖国版整体而言是很好的东东，不过厂家的品控做得很不好，我玩儿过几个实体才挑到合适的，有的车头背部塑料板开盒就是烂的，有的轮轱个别没有涂银柒，比较普遍的现象是大枪插不进背部凹槽，还有个别关节比较松。所以买祖国版还是蛮拼人品的。
人形体格匀称，没有背包，除了门板手外，没有累赘部件，虽然门板可以卸掉，但并没有地方收纳。
头雕精细度一般，不过雪茄的加入是个大大的加分项。
涂装方面，用军绿色作为基色，银灰搭配，很不错。
虽然没有用到齿轮关节，不过松紧度都很好。腿部向前可以平抬，不能后踢。由于膝关节较高，做不了跪姿。腰部可以360度旋转。手臂大风车没有问题。头部可以左右转动很小的角度，不能抬头、低头。
前脚掌可以左右摆动，提供了一定的接地性。
一般比较用心的模具都会在可玩性上加一个噱头，比如平头OP的枪是可以发射子弹的。探长的噱头就是组合武器，拼装后的大枪还是很霸气的，只是一只手举不起来，必须双手托枪。武器的收纳方面做得很好，无论是人形还是载具形态，都可以完美收纳所有武器。
拆开挂满身，不愧是个武器库。
车形的原型是奥什科什防务军用战术装甲车，也非常帅。有两个轮子不能著地，不过整体滚动性不错。
武器的偷胶有点过头，胯部的两把枪和大枪都有很大程度的偷胶，这是个很大的扣分项。
玩具变形流畅，把玩性的表现非常好。</description></item><item><title>PHP流的实现</title><link>http://0x3f.org/posts/stream-implementation-in-php/</link><pubDate>Fri, 29 May 2015 17:33:00 +0000</pubDate><guid>http://0x3f.org/posts/stream-implementation-in-php/</guid><description>流的概念 流是一系列概念的集合，包括流包装器、流资源、流操作、上下文等内容。流是对不同资源进行操作的抽象，允许线性地从指定位置读取或写入数据，通过一套统一的API简化对资源操作的实现。
流由scheme://target指代，scheme是包装器（Wrapper）的名字，target是流的目标地址。
PHP的流的实现较Java简单，后者可以通过嵌套实现更灵活的应用。
流的实现 存储结构 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 struct _php_stream { php_stream_ops *ops; void *abstract; /* convenience pointer for abstraction */ php_stream_filter_chain readfilters, writefilters; php_stream_wrapper *wrapper; /* which wrapper was used to open the stream */ void *wrapperthis; /* convenience pointer for a instance of a wrapper */ zval *wrapperdata; /* fgetwrapperdata retrieves this */ int fgetss_state; /* for fgetss to handle multiline tags */ int is_persistent; char mode[16]; /* &amp;#34;rwb&amp;#34; etc.</description></item><item><title>在Archlinux ARM上使用DS18B20温度传感器</title><link>http://0x3f.org/posts/setup-ds18b20-on-archlinux/</link><pubDate>Mon, 25 May 2015 15:30:00 +0000</pubDate><guid>http://0x3f.org/posts/setup-ds18b20-on-archlinux/</guid><description>线路图：
修改/boot/config.txt，启用w1内核模块。配置文件中有两部分关于w1的内容，一个只使用一个GPIO引脚，需要自行添加上拉电阻，另一个使用一个额外的GPIO引脚作上拉。
使用Python模块w1thermsensor读数，用法见这里。</description></item><item><title>变形金刚：原大祖国合金版平头OP</title><link>http://0x3f.org/posts/transformers-optimus-prime/</link><pubDate>Sat, 09 May 2015 21:26:00 +0000</pubDate><guid>http://0x3f.org/posts/transformers-optimus-prime/</guid><description>一开始我不太喜欢电影版变形金刚，因为太像人就缺少科技感，我至今都认为G1是不可逾越的经典。不过变4的这款V级平头OP确实是个经典的模具，一个好的变形金刚玩具应有标准几乎都符合。
人形身材匀称、没有冗余部件，关键是无背包，很少有能做到这一点的模具，几乎所有大黄蜂最大的败笔都是有个巨大的背包。涂装鲜艳、视觉效果强烈，作为一个Prime，搞得满身火焰纹、花里胡哨的真的好么？
关节的松紧度方面，四肢主关节采用齿轮关节，表现不错，不过肘关节是圆形关节，转动次数多了不知道会不会松。
由于人形没有太多的累赘，所以可动性方面没有问题，腰部也是可以360度旋转的。
手脚方面，一个V级的玩具，用假手也就不说什么了。不过由于踝关节不能左右摆动，所以脚的接地性不好。
头雕不够精细，眼睛是可以透光的。
车形也是个亮点。我一直不喜欢电影版里那种狗头车，太张扬，反而G1里那种平头车更显内敛，才有大哥气质。
做工和用料很不错。我不是孩控，做工和价格都很重要，祖国版用料很扎实，而且有合金部件，做工也不弱于孩版，再加上这白菜价，孩版就呵呵哒了。
滚动性不好，有的车轮不能著地，而且部分车轮本身转动不畅。
枪是可以发射子弹的，可玩性有加分。另买的审判之剑真的很帅，否则堂堂Prime单持一把大手枪显得太素了。
变形的复杂度恰到好处，只是手臂收纳到车头时很紧，流畅度上有扣分。
这是款很经典的模具，很期待放大的祖国合金版。</description></item><item><title>PHP全局变量的实现和操作</title><link>http://0x3f.org/posts/globals-implementation-in-php/</link><pubDate>Fri, 08 May 2015 17:23:00 +0000</pubDate><guid>http://0x3f.org/posts/globals-implementation-in-php/</guid><description>扩展内部的全局变量 1 2 3 4 ZEND_BEGIN_MODULE_GLOBALS(donie) unsigned long global_long; char *global_string; ZEND_END_MODULE_GLOBALS(donie) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 ZEND_DECLARE_MODULE_GLOBALS(donie); static void php_donie_init_globals(zend_donie_globals *donie_globals) { donie_globals-&amp;gt;global_long = 2015; donie_globals-&amp;gt;global_string = &amp;#34;Long live Donie Leigh !&amp;#34;; } static void php_donie_globals_dtor(zend_donie_globals *donie_globals) { php_printf(&amp;#34;php_donie_globals_dtor triggered.&amp;#34;); } PHP_MINIT_FUNCTION(donie) { /* init extension globals */ ZEND_INIT_MODULE_GLOBALS(donie, php_donie_init_globals, php_donie_globals_dtor); return SUCCESS; } PHP_RSHUTDOWN_FUNCTION(donie) { #ifndef ZTS php_donie_globals_dtor(&amp;amp;donie_globals); #endif return SUCCESS; } ZEND_FUNCTION(donie_test_ext_globals) { php_printf(&amp;#34;%s&amp;#34;, DONIE_G(global_string)); } 声明 ZEND_BEGIN_MODULE_GLOBALS和ZEND_END_MODULE_GLOBALS及其间的内容实际上声明了一个结构体zend_donie_globals。</description></item><item><title>PHP常量的实现和操作</title><link>http://0x3f.org/posts/constant-implementation-in-php/</link><pubDate>Thu, 07 May 2015 16:29:00 +0000</pubDate><guid>http://0x3f.org/posts/constant-implementation-in-php/</guid><description>存储结构 常量存储在哈希表EG(zend_constants)中。
常量的结构定义为：
1 2 3 4 5 6 7 typedef struct _zend_constant { zval value; int flags; char *name; uint name_len; int module_number; } zend_constant; value是常量的值，是一个zval。name是常量名。module_number是模块被加载时，PHP内核在MINIT和RINIT方法的原型里默认传递的一个值，作为模块清理时的线索，在注册常量的接口里直接传递即可。
flags是常量的标识或标识组合：
CONST_CS CONST_PERSISTENT CONST_CT_SUBST CONST_CS表示常量名对大小写敏感，对应PHP函数define()的第三个参数，TRUE、FALSE、NULL这些常量名对大小写是不敏感的。CONST_PERSISTENT表示常量在请求结束后被保存，只在PHP进程结束时才销毁，一般在MINIT中定义的常量应该指定此参数，RINIT中定义的不指定。CONST_CT_SUBST表示在编译时可替换，TRUE、FALSE、NULL、ZEND_THREAD_SAFE、ZEND_DEBUG_BUILD属于此类。
常量的声明 常量的声明方法有两种，简单的使用宏函数族REGISTER_*_CONSTANT()：
REGISTER_NULL_CONSTANT(name, flags) REGISTER_BOOL_CONSTANT(name, bval, flags) REGISTER_LONG_CONSTANT(name, lval, flags) REGISTER_DOUBLE_CONSTANT(name, dval, flags) REGISTER_STRING_CONSTANT(name, str, flags) REGISTER_STRINGL_CONSTANT(name, str, len, flags)
由于不需指定常量名长度，所以name参数应直接使用字符串，而不是char*。
如需使用变量作为name参数，使用zend_register_*_constant()函数族，并指定变量名长度（sizeof(name)）。上面的宏函数其实是对这族函数的封装。
void zend_register_long_constant(char *name, uint name_len, long lval, int flags, int module_number TSRMLS_DC) void zend_register_double_constant(char *name, uint name_len, double dval, int flags, int module_number TSRMLS_DC) void zend_register_bool_constant(const char *name, uint name_len, zend_bool bval, int flags, int module_number TSRMLS_DC) void zend_register_string_constant(char *name, uint name_len, char *strval, int flags, int module_number TSRMLS_DC) void zend_register_stringl_constant(char *name, uint name_len, char *strval, uint strlen, int flags, int module_number TSRMLS_DC)</description></item><item><title>PHP资源的实现和操作</title><link>http://0x3f.org/posts/resource-implementation-in-php/</link><pubDate>Tue, 05 May 2015 18:53:00 +0000</pubDate><guid>http://0x3f.org/posts/resource-implementation-in-php/</guid><description>存储结构 资源变量也是一个zval结构，zval-&amp;gt;type == IS_RESOURCE，zval-&amp;gt;value-&amp;gt;lval存储一个整数，此整数为资源数据在存储资源的哈希表中的索引。
资源数据的结构为：
1 2 3 4 5 6 typedef struct _zend_rsrc_list_entry { void *ptr; int type; int refcount; }zend_rsrc_list_entry; 常规资源与持久资源 有两个存储资源数据的哈希表。EG(regular_list)存储常规资源，EG(persistent_list)存储持久资源。
常规资源对应的变量在作用域结束后会被内核回收，对应的资源数据也会被销毁。持久资源可以保持并被多次请求使用。持久资源的自动析构发生在PHP进程退出时。
实现 重新实现基本的文件句柄和相关操作。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 // 资源名称 #define PHP_DONIE_RES_NAME_FILE &amp;#34;Donie&amp;#39;s File Descriptor&amp;#34; // 资源类型 static int le_donie_file_descriptor; static int le_donie_file_descriptor_persist; // 资源析构函数 static void php_donie_file_descriptor_dtor(zend_rsrc_list_entry *rsrc TSRMLS_CC) { FILE *fp = (FILE*)rsrc-&amp;gt;ptr; fclose(fp); } // 在扩展的MINIT方法里创建资源类型 PHP_MINIT_FUNCTION(donie) { /* create a new resource type */ le_donie_file_descriptor = zend_register_list_destructors_ex( php_donie_file_descriptor_dtor, NULL, PHP_DONIE_RES_NAME_FILE, module_number ); /* create a persistent resource type */ le_donie_file_descriptor_persist = zend_register_list_destructors_ex( NULL, php_donie_file_descriptor_dtor, PHP_DONIE_RES_NAME_FILE, module_number ); return SUCCESS; } // 文件打开操作 PHP_FUNCTION(donie_fopen) { FILE *fp; char *filename, *mode; int filename_len, mode_len; zend_bool persist = 0; char *hash_key; int hash_key_len; list_entry *persist_file; if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, &amp;#34;ss|b&amp;#34;, &amp;amp;filename, &amp;amp;filename_len, &amp;amp;mode, &amp;amp;mode_len, &amp;amp;persist) == FAILURE) { RETURN_NULL(); } if (!</description></item><item><title>PHP对象的实现和操作</title><link>http://0x3f.org/posts/object-implementation-in-php/</link><pubDate>Wed, 29 Apr 2015 23:00:00 +0000</pubDate><guid>http://0x3f.org/posts/object-implementation-in-php/</guid><description>Object的存储结构 对象实例用zval存储。zval-&amp;gt;type == IS_OBJECT，zval-&amp;gt;value-&amp;gt;obj存储zend_object_value类型的结构体变量。
1 2 3 4 typedef struct _zend_object_value { zend_object_handle handle; const zend_object_handlers *handlers; } zend_object_value; zend_object_handle是一个unsigned int，是对象的ID。zend_object_handlers存储对象所有的行为。
Object的实例化过程 Object的初始化用以下几个宏函数：
object_init(zval *arg) object_init_ex(zval *arg, zend_class_entry *class_type) object_and_properties_init(zval *arg, zend_class_entry *class_type, HashTable *properties) 底层都是调用_object_and_properties_init(zval *arg, zend_class_entry *class_type, HashTable *properties)实现。这个函数做以下几件事：
检查类是否可实例化（例如接口、抽象类等不允许初始化） 处理类常量 检查类是否存在自定义实例化逻辑 若存在，调用自定义实例化逻辑 若不存在，调用缺省的函数zend_objects_new(zend_object **object, zend_class_entry *class_type) 把实例化的zend_object类型的数据存入zval中 zend_objects_new()做这些事：
分配一个zend_object类型的内存空间 初始化zend_object类型数据 把zend_object类型数据存入对象仓库（Objects Store） zend_objects_store_put(void *object, zend_objects_store_dtor_t dtor, zend_objects_free_object_storage_t free_storage, zend_objects_store_clone_t clone） zend_object的存储结构 1 2 3 4 5 6 typedef struct _zend_object { zend_class_entry *ce; HashTable *properties; zval **properties_table; HashTable *guards; /* protects from __get/__set .</description></item><item><title>PHP类和接口的实现</title><link>http://0x3f.org/posts/class-interface-implementation-in-php/</link><pubDate>Tue, 28 Apr 2015 18:38:00 +0000</pubDate><guid>http://0x3f.org/posts/class-interface-implementation-in-php/</guid><description>Class的实现 类的注册是在扩展的MINIT方法里。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 /* * this pointer should be put into the header file, * so other modules can access this class.</description></item><item><title>变形金刚：俺钢锁才是老大</title><link>http://0x3f.org/posts/transformers-grim-lock/</link><pubDate>Sun, 26 Apr 2015 20:55:00 +0000</pubDate><guid>http://0x3f.org/posts/transformers-grim-lock/</guid><description>变形金刚是工业艺术的巅峰之作。不仅仅是怀旧和补童年。理工宅两大图腾，恐龙和机器人。从没有一个东西像汽车人恐龙部队一样，把这两样完美地融为一体。
孩之宝的东西很多时候不尽如人意，价格又太贵。有一些第三方的仿品，不乏精品。像威将的这个钢锁，是孩之宝V级的放大版，几乎与L级等身，头部和大腿根部是合金部件，很有质感。有美版和黑暗两个涂装，结合放大后的形象，黑暗涂装更显霸气。
美版L级人形。整体精致，但是太瘦，两条腿细得跟小儿麻痺似的，盈盈一掬的小蛮腰，这是要走长腿欧巴路线啊。这个比例，如果放大一号效果会更好，不过钢锁老大比其它L级大一号不是理所当然的么。最讨厌的是电镀，又俗又易脱落。
美版L级龙形。非常失败。身体比例失调，趴耳朵，塌脊梁，短尾巴。不忍直视。
祖国版V级人形。V级钢锁是不以人形见长的，不过放大后观感尚可。
祖国版V级龙形。V级钢锁的龙形完爆L级，体形霸气，立耳，隆背，翘尾。孩版V级最大的遗憾就是体形太小，祖国版龙形堪称完美。
不知道是不是我中奖了，祖国版人形的大腿根部虽然是球齿关节，但是球齿无效，关节比较松，容易劈叉。不过这个做工、用料，只要几十软妹币，相对几倍价格的孩版来说，威将良心之作啊。</description></item><item><title>PHP数组的实现与操作</title><link>http://0x3f.org/posts/array-implementation-in-php/</link><pubDate>Fri, 24 Apr 2015 12:09:00 +0000</pubDate><guid>http://0x3f.org/posts/array-implementation-in-php/</guid><description>存储结构 和其它变量一样，PHP的数组也是一个zval。存储数据的哈希表存放在zval-&amp;gt;value-&amp;gt;ht中。
符号表操作 为实现可转换成整数的字符串键与整数键指向同一个元素，在哈希表操作的基础上封装了一层，对可转换成整数的字符串键转换成整数，然后调用zend_hash_index_*操作，否则调用zend_hash_*操作。这就是符号表操作。
用ZEND_HANDLE_NUMERIC处理整数字符串键：
1 2 3 4 5 6 static inline int zend_symtable_find( HashTable *ht, const char *arKey, uint nKeyLength, void **pData ) { ZEND_HANDLE_NUMERIC(arKey, nKeyLength, zend_hash_index_find(ht, idx, pData)); return zend_hash_find(ht, arKey, nKeyLength, pData); } 其它符号表操作函数：
1 2 3 4 5 6 7 8 static inline int zend_symtable_exists(HashTable *ht, const char *arKey, uint nKeyLength); static inline int zend_symtable_del(HashTable *ht, const char *arKey, uint nKeyLength); static inline int zend_symtable_update( HashTable *ht, const char *arKey, uint nKeyLength, void *pData, uint nDataSize, void **pDest ); static inline int zend_symtable_update_current_key_ex( HashTable *ht, const char *arKey, uint nKeyLength, int mode, HashPosition *pos ); 数组操作 初始化 1 2 3 4 5 6 7 8 9 // 初始化数组 zval *zv1; array_init(zv1); // 初始化数组并指定哈希表nTableSize的值 array_init_size(zv1, 100); // 在函数中返回数组：把返回值初始化为数组 array_init(return_value); 插入和更新 1 2 3 4 5 6 7 8 /* Insert at next index */ int add_next_index_*(zval *arg, .</description></item><item><title>PHP哈希表的实现与操作</title><link>http://0x3f.org/posts/hashtable-implementation-of-php/</link><pubDate>Thu, 23 Apr 2015 15:56:00 +0000</pubDate><guid>http://0x3f.org/posts/hashtable-implementation-of-php/</guid><description>结构 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 // 哈希表结构 typedef struct _hashtable { uint nTableSize; uint nTableMask; uint nNumOfElements; // 全部元素数 ulong nNextFreeElement; // 下一个可用的整数键 Bucket *pInternalPointer; // 枚举操作时使用，指向当前Bucket Bucket *pListHead; Bucket *pListTail; Bucket **arBuckets; dtor_func_t pDestructor; // 元素的析构函数 zend_bool persistent; // 是否在本次请求结束后保留哈希表 unsigned char nApplyCount; // 循环级别，防止循环引用导致遍历哈希表时死循环 zend_bool bApplyProtection; // 是否防止死循环 #if ZEND_DEBUG int inconsistent; #endif } HashTable; // Bucket结构 typedef struct bucket { ulong h; uint nKeyLength; void *pData; void *pDataPtr; struct bucket *pListNext; struct bucket *pListLast; struct bucket *pNext; struct bucket *pLast; char *arKey; } Bucket; 哈希冲突处理 哈希表通过计算键值的哈希值，将对应的数据映射到对应的槽上。理论上会存在不同的键的哈希值相同的情况。</description></item><item><title>自动重映射键盘</title><link>http://0x3f.org/posts/auto-remap-keyboard/</link><pubDate>Fri, 17 Apr 2015 18:02:00 +0000</pubDate><guid>http://0x3f.org/posts/auto-remap-keyboard/</guid><description>每次键盘拔出再插入时，键盘映射都会失效，要重新执行映射，而且要对不同的键盘应用不同的映射方案。试过直接添加udev规则，即使指定X Display和Xauthority也不成功。所以用pyudev写个脚本（最新版本）：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 #!</description></item><item><title>用树苺派做家庭监控</title><link>http://0x3f.org/posts/monitor-home-with-raspberry-pi/</link><pubDate>Tue, 07 Apr 2015 10:56:00 +0000</pubDate><guid>http://0x3f.org/posts/monitor-home-with-raspberry-pi/</guid><description>用树苺派做视频监控，当视野内有物体移动时，自动拍照、录视频、同步到远程主机，并提醒到远程电脑和手机。
用Motion做视频监控 安装Motion，修改几项必要的配置：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 # 照片和视频存储路径 target_dir = /media/sda1/cam # 允许局域网内其它主机访问视频 webcam_localhost off # 监测到移动物体时，创建作为标识的临时文件 on_event_start &amp;#34;echo 1 &amp;gt; /tmp/invasion_detected&amp;#34; # 移动物体消失时，移除临时文件 on_event_end &amp;#34;rm /tmp/invasion_detected&amp;#34; # 监测到移动物体并在保存第一张照片时，发送提醒到电脑和手机 on_picture_save [ -f /tmp/invasion_detected ] &amp;amp;&amp;amp; [ `cat /tmp/invasion_detected` -gt 0 ] &amp;amp;&amp;amp; echo 0 &amp;gt; /tmp/invasion_detected &amp;amp;&amp;amp; proxychains /root/SmartHome/script/alert.py -f %f 用Lsyncd同步到VPS 安装lsyncd并配置：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 settings{ pidfile = &amp;#34;/var/log/lsyncd/lsyncd.</description></item><item><title>用树苺派搭NAS</title><link>http://0x3f.org/posts/make-nas-with-raspberry-pi/</link><pubDate>Fri, 03 Apr 2015 15:13:00 +0000</pubDate><guid>http://0x3f.org/posts/make-nas-with-raspberry-pi/</guid><description>为了让盒子能直接播放远程下载的电影，继续在树苺派上搭NAS。
安装samba，然后配置：
1 2 3 4 5 6 7 [nas] path = /media/sda1 valid users = @users force group = users create mask = 0660 directory mask = 0771 read only = no 把Linux用户添加到samba并设置密码：
1 smbpasswd -a pi 盒子上的Kodi硬解有问题，用ES+MX Player替代。电脑上用Kodi。</description></item><item><title>再次调整磁盘分区</title><link>http://0x3f.org/posts/adjust-disk-partitions-again/</link><pubDate>Fri, 03 Apr 2015 14:44:00 +0000</pubDate><guid>http://0x3f.org/posts/adjust-disk-partitions-again/</guid><description>自从上次调整磁盘分区，一直把根目录和主目录分别挂在一个物理分区下，即使系统挂了或者换发行版也不影响主目录。最近根分区很紧张，干脆把两个分区合并了。
先用UNetBootin安装Puppy Linux到U盘，需要手工修改U盘里的syslinux.cfg，把“pmedia=cd”改成“pmedia=usbflash”，然后用U盘启动。
把主目录的内容完整复制到移动硬盘：
1 2 3 4 5 6 7 8 9 10 11 12 13 # 挂载主目录 mkdir /mnt/oldhome mount -t ext4 /dev/sda2 /mnt/oldhome # 挂载移动硬盘 mkdir /mnt/bakdisk mount -t ext4 /dev/sdc1 /mnt/bakdisk # 复制主目录 cp -a /mnt/oldhome /mnt/bakdisk/ # 取消挂载主目录 umount /mnt/oldhome 用gparted删除主目录分区，合并到根分区。然后恢复主目录：
1 2 3 4 5 6 7 8 9 10 11 12 13 # 挂载根分区 mkdir /mnt/newroot mount -t ext4 /dev/sda1 /mnt/newroot # 恢复主目录 cp -a /mnt/bakdisk/* /mnt/newroot/ # 修改fstab，取消主目录的挂载 vim /mnt/newroot/etc/fstab # 取消挂载 umount /mnt/bakdisk umount /mnt/newroot</description></item><item><title>这段时间读的几本书</title><link>http://0x3f.org/posts/books-i-read-these-days/</link><pubDate>Sun, 29 Mar 2015 16:00:00 +0000</pubDate><guid>http://0x3f.org/posts/books-i-read-these-days/</guid><description>每个危楼听雨的暮年都有过软红十丈的青春。文字凄艳，明清小品里的上乘之作。后两记文风模仿前文，意境远逊，应是伪作，可以不读。
上部是政治史，下部是文化史。文化史部分很好，涨知识，应该买本经常翻翻。
大部分是讲稿，内容不系统，不适合入门。畅销书不可信啊。
科普书，不知道豆瓣上那么高的评分哪儿来的。</description></item><item><title>用树苺派实现远程下载</title><link>http://0x3f.org/posts/remote-downloading-with-raspberry-pi/</link><pubDate>Sat, 28 Mar 2015 19:14:00 +0000</pubDate><guid>http://0x3f.org/posts/remote-downloading-with-raspberry-pi/</guid><description>远程用树苺派利用空闲时间下载大文件，需要百度云、aria2和VPS。因为网络运营商给的IP不是真的公网IP，而且免费的动态域名服务不稳定，所以用VPS把树苺派上的端口转发到外网。
树苺派 在树苺派上部署aria2下载服务，并发布到VPS。
安装aria2，创建以下配置文件，修改/media/sda1为实际下载目录：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 dir=/media/sda1 file-allocation=prealloc continue=true log-level=info #log-level=debug max-connection-per-server=10 summary-interval=120 daemon=true enable-rpc=true rpc-listen-port=6800 rpc-listen-all=true max-concurrent-downloads=3 save-session=/etc/aria2/save-session.list input-file=/etc/aria2/save-session.list log=/media/sda1/aria.log disable-ipv6=true disk-cache=25M timeout=600 retry-wait=30 max-tries=0 user-agent=netdisk;4.4.0.6;PC;PC-Windows;6.2.9200;WindowsBaiduYunGuanJia 我的树苺派用Archlinux，创建systemd的服务配置文件：
1 2 3 4 5 6 7 8 9 10 11 12 13 [Unit] Description=aria2c -- file download manager After=network.target [Service] Type=forking User=%i WorkingDirectory=%h Environment=VAR=/var/%i ExecStart=/usr/bin/aria2c --daemon --enable-rpc --rpc-listen-all --rpc-allow-origin-all -c -D --conf-path=/etc/aria2/aria2.</description></item><item><title>运行时可装卸的Mixin的PHP实现</title><link>http://0x3f.org/posts/php-implementation-of-runtime-mixin/</link><pubDate>Thu, 04 Dec 2014 11:52:00 +0000</pubDate><guid>http://0x3f.org/posts/php-implementation-of-runtime-mixin/</guid><description>PHP的Trait可以实现加载时（load time）的混入（mixin）。作为元编程的一部分，运行时（run time）的混入拥有更大的灵活性。下面利用PHP的魔术方法实现运行时的混入。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 &amp;lt;?</description></item><item><title>读完《湘行散记》</title><link>http://0x3f.org/posts/after-reading-sketches-of-the-travel-to-hunan/</link><pubDate>Sat, 29 Nov 2014 20:17:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-sketches-of-the-travel-to-hunan/</guid><description>能让我这个不喜欢读散文的人坚持读完的，是枕著一叶扁舟、听著潺潺流水、忖著多年后的自己——身在何方、心念何人、情系何物……</description></item><item><title>Phalcon项目中PHPUnit的初始化</title><link>http://0x3f.org/posts/testing-with-phpunit-in-phalcon/</link><pubDate>Sat, 29 Nov 2014 09:58:00 +0000</pubDate><guid>http://0x3f.org/posts/testing-with-phpunit-in-phalcon/</guid><description>参考官方文档，稍作修改。
在项目下创建目录 unittests ，进入目录执行：
1 composer require phpunit/phpunit 创建 tests 目录并在其中创建文件 Bootstrap.php ：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 &amp;lt;?php use Phalcon\DI, Phalcon\DI\FactoryDefault; ini_set(&amp;#39;display_errors&amp;#39;,1); error_reporting(E_ALL); define(&amp;#39;ROOT_PATH&amp;#39;, __DIR__); define(&amp;#39;PROJECT_DIR&amp;#39;, &amp;#39;/home/taoqi/workspace&amp;#39;); set_include_path( ROOT_PATH . PATH_SEPARATOR . get_include_path() ); // required for phalcon/incubator include __DIR__ . &amp;#34;/../vendor/autoload.php&amp;#34;; // 加载项目文件 $config = require_once PROJECT_DIR.</description></item><item><title>用好代码时光机</title><link>http://0x3f.org/posts/leverage-code-time-machine/</link><pubDate>Fri, 21 Nov 2014 23:19:00 +0000</pubDate><guid>http://0x3f.org/posts/leverage-code-time-machine/</guid><description>今天看了篇文章，讲几种常见的、糟糕的注释用法。其中之一是把废弃的代码注释起来，而不是直接删掉，原因是担心以后可能会用。
这个其实就是版本控制系统（VCS）要解决的问题之一。包括对于团队协作的项目，经常需要看某段代码是谁改的、什么时间、什么原因。都是可以用VCS很方便地解决的问题。
我以前是用二分法在提交列表里找的。其实有更好的解决方法，思路是列出源码在历次提交中修改的内容，然后在其中查找要找的东西就行了。
git的解决方法：
1 git log -p abc.php svn的解决方法：
1 svn log --diff --internal-diff abc.php vim的辅助函数：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 &amp;#34; Show commit history of the current file under the given VCS in a new window function! ShowCommitHistory(vcs) &amp;#34; Check parameter if a:vcs != &amp;#39;svn&amp;#39; &amp;amp;&amp;amp; a:vcs != &amp;#39;git&amp;#39; echoerr &amp;#39;Unknow VCS: &amp;#39;.</description></item><item><title>开始用在线Markdown编辑器记笔记</title><link>http://0x3f.org/posts/start-taking-note-in-online-markdown-editor/</link><pubDate>Thu, 20 Nov 2014 22:35:00 +0000</pubDate><guid>http://0x3f.org/posts/start-taking-note-in-online-markdown-editor/</guid><description>开始用支持VIM模式的在线Markdown编辑器记笔记。既非鼠辈（鼠标依赖症不治者），始终忍受不了其它WYSIWYG（所见即所得）的在线笔记。
大部分在线笔记最傻X的一点是，必须点一下编辑按钮才能开始写东西。支持VIM模式的笔记就不用说了，丝般顺滑，不是我大Vimer就不会懂个中骚柔。
组织上一向后知后觉。智能手机刚开始的时候，组织上很不感冒，理由是屏幕易碎、电池难支、冯唐易老、李广难封。而今现在眼目下，一日不搞机，如隔三秋。在线Markdown编辑器出现也有段时间了，一直觉得这货无非就是给Markdown加了个可笑的准WYSIWYG，现在看来，真是做笔记的不二神器，罪过罪过。
说说组织上跟Markdown的故事。很久很久以前，博客刚开始流行的时候，组织上开始写博客，和大部分人一样，注册个账号写公开日记，很快就忍受不了WYSIWYG编辑器失控的格式，于是开始手写HTML代码，很快就发现这货真TM反人类，从此恨乌及乌至今最讨厌的数据交换格式还是XML，于是自定几种格式或标记，用Java写了个解析工具，把文章源码翻译成HTML。突然有天发现这个星球上居然有种叫轻量型标记语言的东西，干的就是这么个事，只不过我的那些标记和解析工具又丑又烂而已。试了几种之后，最终选了Markdown，从此举案齐眉云云。</description></item><item><title>Vim强制在PHP中使用HTML注释的方法</title><link>http://0x3f.org/posts/force-commenting-html-in-php-files-in-vim/</link><pubDate>Thu, 13 Nov 2014 21:45:00 +0000</pubDate><guid>http://0x3f.org/posts/force-commenting-html-in-php-files-in-vim/</guid><description>对PHP页面模板中的HTML做注释，NERDCommenter是根据文件类型处理的，所以必须临时转换文件类型：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 &amp;#34; 强制使用HTML的注释 function! ForceHTMLComment(mode, type) range set ft=html if a:mode == &amp;#34;x&amp;#34; execute a:firstline.&amp;#34;,&amp;#34;.a:lastline.&amp;#34;call NERDComment(\&amp;#34;x\&amp;#34;, \&amp;#34;&amp;#34;.a:type.&amp;#34;\&amp;#34;)&amp;#34; else if a:type == &amp;#34;Sexy&amp;#34; normal ,cs else normal ,cc endif endif set ft=php endfunction au FileType php nmap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;fhcc :call ForceHTMLComment(&amp;#34;n&amp;#34;, &amp;#34;Comment&amp;#34;)&amp;lt;CR&amp;gt; au FileType php vmap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;fhcc :call ForceHTMLComment(&amp;#34;x&amp;#34;, &amp;#34;Comment&amp;#34;)&amp;lt;CR&amp;gt; au FileType php nmap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;fhcs :call ForceHTMLComment(&amp;#34;n&amp;#34;, &amp;#34;Sexy&amp;#34;)&amp;lt;CR&amp;gt; au FileType php vmap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;fhcs :call ForceHTMLComment(&amp;#34;x&amp;#34;, &amp;#34;Sexy&amp;#34;)&amp;lt;CR&amp;gt; au FileType php nmap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;fhcu :call ForceHTMLComment(&amp;#34;n&amp;#34;, &amp;#34;Uncomment&amp;#34;)&amp;lt;CR&amp;gt; au FileType php vmap &amp;lt;buffer&amp;gt; &amp;lt;leader&amp;gt;fhcu :call ForceHTMLComment(&amp;#34;x&amp;#34;, &amp;#34;Uncomment&amp;#34;)&amp;lt;CR&amp;gt; 有日子没写vimscript了，手都生了。</description></item><item><title>ZSH下新安装的程序无法自动补全的解决方法</title><link>http://0x3f.org/posts/how-to-auto-complete-newly-installed-command-in-zsh/</link><pubDate>Wed, 12 Nov 2014 22:15:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-auto-complete-newly-installed-command-in-zsh/</guid><description>Zsh默认开启了对PATH变量的缓存，这是导致新安装的程序无法立即使用自动补全的原因。
其实只要PATH变量不太复杂，安装的程序不太多，完全没必要开启缓存，实际上我把缓存关掉后完全没有感觉到补全的速度有什么变化。
方法如下，在.zshrc中增加一行：
1 zstyle &amp;#39;:completion:*&amp;#39; rehash true 也可以在必要的时间手工执行命令rehash，也是个临时解决方法。</description></item><item><title>接管PHP致命错误的方法</title><link>http://0x3f.org/posts/how-to-take-over-php-fatal-error-handling/</link><pubDate>Wed, 12 Nov 2014 00:47:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-take-over-php-fatal-error-handling/</guid><description>Yii 2.0引入了一项新特性，可以接管PHP的致命错误。在此之前，如果PHP源码有语法错误，框架本身是不会处理的。
实现的思路如下：
禁止显示错误 注册自定义的shutdown回调函数 在回调函数中获取最近的错误 若错误是致命错误，调用相应的处理逻辑 代码如下：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 &amp;lt;?php // ... ini_set(&amp;#39;display_errors&amp;#39;, false); register_shutdown_function(function(){ $error = error_get_last(); if (isset($error[&amp;#39;type&amp;#39;]) &amp;amp;&amp;amp; in_array($error[&amp;#39;type&amp;#39;], [E_ERROR, E_PARSE, E_CORE_ERROR, E_CORE_WARNING, E_COMPILE_ERROR, E_COMPILE_WARNING])) { ob_clean(); echo &amp;#39;&amp;lt;pre&amp;gt;&amp;#39;; var_dump($error); echo &amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;; exit(1); } }); // ... ?&amp;gt;</description></item><item><title>读完《黑客与画家》</title><link>http://0x3f.org/posts/after-reading-hackers-and-painters/</link><pubDate>Sun, 26 Oct 2014 10:06:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-hackers-and-painters/</guid><description>身兼技术牛人和创业成功者两个身份，自然有资格指点江山，有些观点很自负，有些观点对人有启发。作者很推崇Lisp，很不屑Java。</description></item><item><title>读完《MongoDB权威指南》第二版</title><link>http://0x3f.org/posts/after-reading-mongodb-the-definitive-guide/</link><pubDate>Sun, 26 Oct 2014 10:01:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-mongodb-the-definitive-guide/</guid><description>第二版比第一版补充了很多内容，介绍得很详细，是学习mongodb的好书。
但是翻译版有很多印刷错误，个别译句也有问题。</description></item><item><title>读完《冰与火之歌》卷一</title><link>http://0x3f.org/posts/after-reading-a-song-of-ice-and-fire-v1/</link><pubDate>Sun, 26 Oct 2014 09:56:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-a-song-of-ice-and-fire-v1/</guid><description>读了一部分，还是不怎么喜欢西方中世纪文化，最后改看电视剧，拍得也很一般。</description></item><item><title>读完《城南旧事》</title><link>http://0x3f.org/posts/after-reading-my-memories-of-old-beijing/</link><pubDate>Sun, 26 Oct 2014 09:40:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-my-memories-of-old-beijing/</guid><description>描写民国时北京南城市民生活很生动，但是以儿童的视角叙事显得揣着明白装糊涂。</description></item><item><title>读完《边城》</title><link>http://0x3f.org/posts/after-reading-border-town/</link><pubDate>Sun, 26 Oct 2014 09:32:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-border-town/</guid><description>文章写得很美，本打算十一去茶峒，看看顺顺吊脚楼，坐坐白塔下的拉拉渡，临时改了行程，只能以后有空再去了。</description></item><item><title>放弃《一座城池》和《天才在左疯子在右》</title><link>http://0x3f.org/posts/give-up-the-ideal-city-and-genius-and-madman/</link><pubDate>Sun, 26 Oct 2014 09:30:00 +0000</pubDate><guid>http://0x3f.org/posts/give-up-the-ideal-city-and-genius-and-madman/</guid><description>现在不喜欢这种书了。
内心不够强大，再看下去我就疯了。</description></item><item><title>读完《中国大历史》</title><link>http://0x3f.org/posts/after-reading-big-history-of-china/</link><pubDate>Fri, 12 Sep 2014 23:07:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-big-history-of-china/</guid><description>偏学术，比较抽象，不如《万历十五年》好看。</description></item><item><title>读完《中国历代政治得失》</title><link>http://0x3f.org/posts/after-reading-political-gain-and-loss-of-china/</link><pubDate>Sun, 31 Aug 2014 23:19:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-political-gain-and-loss-of-china/</guid><description>钱穆有文侠风，读这本书，能看到这样一个影子，上马击狂胡，下马草军书。他也是个民族主义者，提到元清，几乎没一句好话。所以要贯通国史，还得多读读别的书。总体来说，读这本书时常感醍醐灌顶，为习国史者必读。</description></item><item><title>读完《中国史纲》</title><link>http://0x3f.org/posts/after-reading-brief-history-of-china/</link><pubDate>Wed, 20 Aug 2014 22:30:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-brief-history-of-china/</guid><description>自序中对治史的方法论让我受益匪浅，本书语气平和、娓娓道来，像讲故事一样讲历史，但又严谨、广博、不肤浅，风格和其它史书大不一样，我一直理想中的史书就是这样，不要给历史背太重的包袱，不要带著一定要学点什么的目的读历史。
本书的缺点是详略失当。有些地方太简略，比如匈奴的衰落，五单于争立一笔带过。有些地方太详细，鸿门宴几乎是史记的译文。作为一部通史，应该有大历史观，能站在较高的层面上把历史的脉络梳理清楚。</description></item><item><title>读完《庄子今注今译》</title><link>http://0x3f.org/posts/after-reading-zhuangzi-jin-zhu-jin-yi/</link><pubDate>Sun, 17 Aug 2014 18:36:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-zhuangzi-jin-zhu-jin-yi/</guid><description>很好的注本，有些字句的翻译有点儿晦涩。庄子的思想超越了老子，想把庄子的思想理解透彻很难。</description></item><item><title>Project Euler Problem 25 Solved</title><link>http://0x3f.org/posts/project-euler-25-solved/</link><pubDate>Sat, 16 Aug 2014 17:32:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-25-solved/</guid><description>1000-digit Fibonacci number The Fibonacci sequence is defined by the recurrence relation:
Fn = Fn−1 + Fn−2, where F1 = 1 and F2 = 1.
Hence the first 12 terms will be:
F1 = 1
F2 = 1
F3 = 2
F4 = 3
F5 = 5
F6 = 8
F7 = 13
F8 = 21
F9 = 34
F10 = 55
F11 = 89
F12 = 144
The 12th term, F12, is the first term to contain three digits.</description></item><item><title>读完《国史大纲》</title><link>http://0x3f.org/posts/after-reading-outline-history/</link><pubDate>Wed, 16 Jul 2014 21:27:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-outline-history/</guid><description>钱穆先生主张以诚敬心审视国史和传统文化，一生为故国招魂。抗战流亡，笔耕不辍，虽然这本书只是一本历史教科书，但是高屋建瓴的大历史观让我受益匪浅，很多东西是读史料不能学到的。《国史大纲》所思所言，堪称国史良心。</description></item><item><title>使用lsyncd同步文件</title><link>http://0x3f.org/posts/live-syncing-daemon/</link><pubDate>Wed, 18 Jun 2014 14:03:00 +0000</pubDate><guid>http://0x3f.org/posts/live-syncing-daemon/</guid><description>lsyncd全称“Live Syncing Daemon”，是Linux下的文件自动同步工具，同时支持SSH、rsync的实现方式。相对于rsync+inotify，它速度更快，也更稳定。
对于SSH的方式，需要目标机器中已启动SSHD，并把源机器上的公钥加到目标机器root用户的authorized_keys中，私钥应放在源机器上运行lsyncd的用户的.ssh目录中，密钥放错了用户，会导致无法同步。
然后就是在源机器上创建配置文件，lsyncd的配置文件是个lua脚本：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 settings{ pidfile = &amp;#34;/var/log/lsyncd/lsyncd.pid&amp;#34;, logfile = &amp;#34;/var/log/lsyncd/lsyncd.log&amp;#34;, statusFile = &amp;#34;/var/log/lsyncd/lsyncd-status.log&amp;#34;, statusInterval = 1, maxDelays = 1, -- nodaemon = true, } sync{ default.rsyncssh, source = &amp;#34;/home/monk/workspace&amp;#34;, host = &amp;#34;192.168.1.3&amp;#34;, targetdir = &amp;#34;/var/www/workspace&amp;#34;, exclude={ &amp;#34;.*&amp;#34;, &amp;#34;*.tmp&amp;#34; }, rsync = { compress = false, _extra = {&amp;#34;--bwlimit=50000&amp;#34;}, } } 然后启动lsyncd：</description></item><item><title>Project Euler Problem 24 Solved</title><link>http://0x3f.org/posts/project-euler-24/</link><pubDate>Sun, 27 Apr 2014 21:17:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-24/</guid><description>Lexicographic permutations A permutation is an ordered arrangement of objects. For example, 3124 is one possible permutation of the digits 1, 2, 3 and 4. If all of the permutations are listed numerically or alphabetically, we call it lexicographic order. The lexicographic permutations of 0, 1 and 2 are:
012 021 102 120 201 210
What is the millionth lexicographic permutation of the digits 0, 1, 2, 3, 4, 5, 6, 7, 8 and 9?</description></item><item><title>Project Euler Problem 23 Solved</title><link>http://0x3f.org/posts/project-euler-23/</link><pubDate>Fri, 25 Apr 2014 23:56:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-23/</guid><description>Non-abundant sums A perfect number is a number for which the sum of its proper divisors is exactly equal to the number. For example, the sum of the proper divisors of 28 would be 1 + 2 + 4 + 7 + 14 = 28, which means that 28 is a perfect number.
A number n is called deficient if the sum of its proper divisors is less than n and it is called abundant if this sum exceeds n.</description></item><item><title>UltraBlog.vim v3.6.1: 文章分类自动补全</title><link>http://0x3f.org/posts/ultrablog-v361-released/</link><pubDate>Sun, 20 Apr 2014 22:50:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-v361-released/</guid><description>春节期间收到两个issue，一直拖到今天才有时间完成。
增加了一个功能，在文章编辑视图的元数据中分类那行，使用热键&amp;lt;C-X&amp;gt;&amp;lt;C-U&amp;gt;自动完成文章的分类。在配置数组ub_blog中增加键值对“categories”，默认使用这一项的值实现自动完成，如下：
1 2 3 4 5 6 7 let ub_blog = {&amp;#39;login_name&amp;#39;:&amp;#39;admin&amp;#39;, \&amp;#39;password&amp;#39;:&amp;#39;pass2011&amp;#39;, \&amp;#39;url&amp;#39;:&amp;#39;http://www.sample.com/&amp;#39;, \&amp;#39;xmlrpc_uri&amp;#39;:&amp;#39;xmlrpc.php&amp;#39;, \&amp;#39;db&amp;#39;:&amp;#39;$VIM/UltraBlog.db&amp;#39;, \&amp;#39;categories&amp;#39;: &amp;#39;News|Computer|Image&amp;#39; \} 如果这一项不存在，将从博客中拉取分类数据。
自从迁移到Octopress，有两年不用Wordpress了，没想到居然还有人在用UltraBlog.vim。</description></item><item><title>Project Euler Problem 22 Solved</title><link>http://0x3f.org/posts/project-euler-22/</link><pubDate>Sun, 20 Apr 2014 08:03:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-22/</guid><description>Names scores Using names.txt (right click and &amp;lsquo;Save Link/Target As&amp;hellip;&amp;rsquo;), a 46K text file containing over five-thousand first names, begin by sorting it into alphabetical order. Then working out the alphabetical value for each name, multiply this value by its alphabetical position in the list to obtain a name score.
For example, when the list is sorted into alphabetical order, COLIN, which is worth 3 + 15 + 12 + 9 + 14 = 53, is the 938th name in the list.</description></item><item><title>骑行的已知和未知</title><link>http://0x3f.org/posts/cycling-in-the-known-and-unknown/</link><pubDate>Sat, 19 Apr 2014 21:44:00 +0000</pubDate><guid>http://0x3f.org/posts/cycling-in-the-known-and-unknown/</guid><description>暂时没有好路线，所以今天是保持性练习。上周发现顺时针绕道G109从军庄路放坡下来会很轻松，所以依旧从香岩寺出发，经黑山扈路、香山路、香山南路、八大处路、模式口大街、G109、军庄路、北清路，最后回到出发点。
照例，先交作业：
走香山路是因为不想重复上周的老路，但是很快就体会到了不长记性的后果，这条路似乎从来没有不堵过，天气这么差都挡不住这么多人，植物园门口一坨一坨的，我一直觉得香山之难看、植物园之无聊可著北京城都是数一数二的，要不说文人可恶呢，忽悠了多少人！
传说中的模式口大街居然只是一条很窄的巷子，两边是很旧的居民区，时近中午，这么窄的路上居然挤满了一坨一坨的人。
军庄路似乎一般是上午会有很多拉土方的卡车，上周我中午过后经过时车就不多，不幸今天中奖了，要不是贪图放坡的快感，打死也不走这条路。
总之今天走的不是个好路线，不如上周卢沟桥那一圈，很大程度上是因为想到的路线都有坡，加上天气不好、准备不充分，有点儿怵。以往的经历，第一次走的路线，因为不知道前面会有什么，怀著对未知的好奇和无畏，不管多困难，总是可以坚持下来，但下次就不敢了，因为有痛苦的经历。所以骑行的乐趣在于对未知的好奇，或者是克服对已知的恐惧。前一种我还行，至于后者，无力吐槽，唯余呵呵。</description></item><item><title>Project Euler Problem 21 Solved</title><link>http://0x3f.org/posts/project-euler-21/</link><pubDate>Thu, 17 Apr 2014 22:18:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-21/</guid><description>Amicable numbers Let d(n) be defined as the sum of proper divisors of n (numbers less than n which divide evenly into n).
If d(a) = b and d(b) = a, where a ≠ b, then a and b are an amicable pair and each of a and b are called amicable numbers.
For example, the proper divisors of 220 are 1, 2, 4, 5, 10, 11, 20, 22, 44, 55 and 110; therefore d(220) = 284.</description></item><item><title>Project Euler Problem 20 Solved</title><link>http://0x3f.org/posts/project-euler-20/</link><pubDate>Mon, 14 Apr 2014 22:19:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-20/</guid><description>Factorial digit sum n! means n × (n − 1) × &amp;hellip; × 3 × 2 × 1
For example, 10! = 10 × 9 × &amp;hellip; × 3 × 2 × 1 = 3628800,
and the sum of the digits in the number 10! is 3 + 6 + 2 + 8 + 8 + 0 + 0 = 27.
Find the sum of the digits in the number 100!</description></item><item><title>骑行卢沟桥</title><link>http://0x3f.org/posts/a-ride-to-lugou-bridge/</link><pubDate>Sun, 13 Apr 2014 19:55:00 +0000</pubDate><guid>http://0x3f.org/posts/a-ride-to-lugou-bridge/</guid><description>更始元年三月癸丑，孤亲提铁骑南下卢沟，为甲午一百二十年祭。
以前一直以为很远，后来发现单程只有三十多公里，而且基本都是平地，自从去年推上妙峰山后，一般难度就不怕不怕啦。
先交作业：
不知道为什么，记录到了北安河就结束了，最后十公里木有了。
在网上见有人说从桥西进去不查门票，遂先过永定河，从西边进去，路上捡了个迷路的小盆友，说刚刚用手机导航直接上了高速！聊 后得知是北科大的学生，曾国藩的老乡，骑了辆不知道什么牌子的旧车，怯生生的，不禁遥想老夫当年，去矽谷吃顿七块钱的土豆牛肉饭都美得不行不行的。
骑到桥西入口，一个大妈模样的头从售票处小窗口里伸出来：“二十！”，要不说我没有大妈缘呢，走到哪都被拦，去年苦逼哈哈地推到七王坟，大妈说封山防火，片板不得入山。老老实实地买了票，才见著真神，爱个国容易么。桥是金章宗的时候建的，乾隆五十多年重修。桥下就是永定河，左宗棠任直隶总督时在此治水，旧称无定河，不过不是“可怜无定河边骨，犹是春闺梦里人”里的那条。
请小盆友拍了张孤王的戎装照：
果然每个狮子都不一样，小学课本不余欺也：
卢沟晓月，所谓的燕京八景之一，我一般不尿这种虚无缥缈、滥竽充数的东西，鲁迅在《再论雷峰塔的倒掉》里说：
我们中国的许多人，——我在此特别正重声明：并不包括四万万同胞全部！——大抵患有一种“十景病”，至少是“八景病”，沉重起来的时候大概在清朝。凡看一部县志，这一县往往有十景或八景，如“远村明月”、“萧寺清钟”、“古池好水”之类。
我虽然不喜欢鲁迅，因为此人文风过于惼狭和左倾，虽然老先生一再声明不针对所有国人，但还是随处可见断章取义、不懂装懂的人扯大旗作虎皮，动辄就中国人的劣根性怎么怎么样。但在这一点上我跟老先生意见一致，就某些小县城都有所谓“七台八景”，台好歹还有个土堆，景就开始胡扯了。
摆一堆仿明清的大炮干什么，跟七七世变不搭调，更容易联想到两甲子前的那场战争，此日漫挥天下泪，有公足庄海军威。
小盆友的高中历史是体育老师教的，居然不知道宛平城。这座长宽只有几百米的小城是崇祯为抵御闯贼建的桥头堡。不要门票。
这么小的一座城居然还有瓮城：
城里有个抗日纪念馆，免费参观，因为没处存车，没有进去，不过受党国栽培多年，用脚趾头也能想到里面都是什么，不去也罢。城里没啥可吃的，小盆友说要回校再吃饭，我心说您是直接奔学院路了，我还有几十公里路要绕，不补充热量怎么行，请小盆友吃了顿热干面。这兄弟明显没有方向感，好容易才让他找著北，在手机上找好回学院路的路线，最后送出东门，然后告诉他怎么走之后，老夫才起驾回宫。
之后的路基本比较轻松，大体沿永定河一直走，河边的永定楼气势恢宏，懒得拍照了，再上G109，从军庄路一路放坡下来，很爽。</description></item><item><title>Project Euler Problem 19 Solved</title><link>http://0x3f.org/posts/project-euler-19/</link><pubDate>Sat, 12 Apr 2014 21:21:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-19/</guid><description>Counting Sundays You are given the following information, but you may prefer to do some research for yourself.
1 Jan 1900 was a Monday. Thirty days has September, April, June and November.
All the rest have thirty-one,
Saving February alone,
Which has twenty-eight, rain or shine.
And on leap years, twenty-nine. A leap year occurs on any year evenly divisible by 4, but not on a century unless it is divisible by 400.</description></item><item><title>Project Euler Problem 18&amp;67 Solved</title><link>http://0x3f.org/posts/project-euler-18-and-67/</link><pubDate>Thu, 10 Apr 2014 21:28:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-18-and-67/</guid><description>Maximum path sum I By starting at the top of the triangle below and moving to adjacent numbers on the row below, the maximum total from top to bottom is 23.
3
7 4
2 4 6
8 5 9 3
That is, 3 + 7 + 4 + 9 = 23.
Find the maximum total from top to bottom of the triangle below:
75
95 64
17 47 82</description></item><item><title>Project Euler Problem 17 Solved</title><link>http://0x3f.org/posts/project-euler-17/</link><pubDate>Wed, 09 Apr 2014 22:29:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-17/</guid><description>Number letter counts If the numbers 1 to 5 are written out in words: one, two, three, four, five, then there are 3 + 3 + 5 + 4 + 4 = 19 letters used in total.
If all the numbers from 1 to 1000 (one thousand) inclusive were written out in words, how many letters would be used?
NOTE: Do not count spaces or hyphens. For example, 342 (three hundred and forty-two) contains 23 letters and 115 (one hundred and fifteen) contains 20 letters.</description></item><item><title>Project Euler Problem 16 Solved</title><link>http://0x3f.org/posts/project-euler-16/</link><pubDate>Tue, 08 Apr 2014 21:57:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-16/</guid><description>Power digit sum 2^15 = 32768 and the sum of its digits is 3 + 2 + 7 + 6 + 8 = 26.
What is the sum of the digits of the number 2^1000?
Solution 1 2 3 4 5 6 7 8 9 10 11 #!/usr/bin/python # -*- coding: utf-8 -*- import math if __name__ == &amp;#39;__main__&amp;#39;: str = format(math.pow(2, 1000), &amp;#39;f&amp;#39;) sum = 0 for c in str[:str.</description></item><item><title>Project Euler Problem 15 Solved</title><link>http://0x3f.org/posts/project-euler-15/</link><pubDate>Wed, 02 Apr 2014 21:44:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-15/</guid><description>Lattice paths Starting in the top left corner of a 2×2 grid, and only being able to move to the right and down, there are exactly 6 routes to the bottom right corner.
How many such routes are there through a 20×20 grid?
Solution 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/usr/bin/python # -*- coding: utf-8 -*- if __name__ == &amp;#39;__main__&amp;#39;: (steps, a, b) = (20, 1, 1) i = steps * 2 while i &amp;gt; steps: a *= i i -= 1 while steps &amp;gt; 1: b *= steps steps -= 1 print a / b I&amp;rsquo;m the 86747th person to have solved this problem.</description></item><item><title>Project Euler Problem 14 Solved</title><link>http://0x3f.org/posts/project-euler-14/</link><pubDate>Tue, 01 Apr 2014 22:17:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-14/</guid><description>Longest Collatz sequence The following iterative sequence is defined for the set of positive integers:
n → n/2 (n is even)
n → 3n + 1 (n is odd)
Using the rule above and starting with 13, we generate the following sequence:
13 → 40 → 20 → 10 → 5 → 16 → 8 → 4 → 2 → 1
It can be seen that this sequence (starting at 13 and finishing at 1) contains 10 terms.</description></item><item><title>PHP框架实战（六）：依赖注入</title><link>http://0x3f.org/posts/flamework-dependency-injection/</link><pubDate>Sun, 30 Mar 2014 10:00:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-dependency-injection/</guid><description>简述 依赖注入是个很好的解耦方法，也可以优雅的实现懒加载。
以数据库连接为例，当一个组件用到数据库时，最简单粗暴的办法是在使用前创建连接：
1 2 3 4 5 6 7 8 9 10 11 &amp;lt;?php class Component { public function doSth() { // ... $db = new DatabaseConnection($schema, $host, $port, $login, $password); // ... } } ?&amp;gt; 这样做的缺点是代码一旦执行，Component行为将不可更改，有时我们需要在程序执行的过程中决定其行为。很直接地，可以想到给Component添加一个Setter方法：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 &amp;lt;?php class Component { private $__db; public function doSth() { // ... if ($this-&amp;gt;__db !</description></item><item><title>Project Euler Problem 13 Solved</title><link>http://0x3f.org/posts/project-euler-13/</link><pubDate>Sun, 30 Mar 2014 09:50:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-13/</guid><description>Large sum Work out the first ten digits of the sum of the following one-hundred 50-digit numbers.
37107287533902102798797998220837590246510135740250 46376937677490009712648124896970078050417018260538 74324986199524741059474233309513058123726617309629 91942213363574161572522430563301811072406154908250 23067588207539346171171980310421047513778063246676 89261670696623633820136378418383684178734361726757 28112879812849979408065481931592621691275889832738 44274228917432520321923589422876796487670272189318 47451445736001306439091167216856844588711603153276 70386486105843025439939619828917593665686757934951 62176457141856560629502157223196586755079324193331 64906352462741904929101432445813822663347944758178 92575867718337217661963751590579239728245598838407 58203565325359399008402633568948830189458628227828 80181199384826282014278194139940567587151170094390 35398664372827112653829987240784473053190104293586 86515506006295864861532075273371959191420517255829 71693888707715466499115593487603532921714970056938 54370070576826684624621495650076471787294438377604 53282654108756828443191190634694037855217779295145 36123272525000296071075082563815656710885258350721 45876576172410976447339110607218265236877223636045 17423706905851860660448207621209813287860733969412 81142660418086830619328460811191061556940512689692 51934325451728388641918047049293215058642563049483 62467221648435076201727918039944693004732956340691 15732444386908125794514089057706229429197107928209 55037687525678773091862540744969844508330393682126 18336384825330154686196124348767681297534375946515 80386287592878490201521685554828717201219257766954 78182833757993103614740356856449095527097864797581 16726320100436897842553539920931837441497806860984 48403098129077791799088218795327364475675590848030 87086987551392711854517078544161852424320693150332 59959406895756536782107074926966537676326235447210 69793950679652694742597709739166693763042633987085 41052684708299085211399427365734116182760315001271 65378607361501080857009149939512557028198746004375 35829035317434717326932123578154982629742552737307 94953759765105305946966067683156574377167401875275 88902802571733229619176668713819931811048770190271 25267680276078003013678680992525463401061632866526 36270218540497705585629946580636237993140746255962 24074486908231174977792365466257246923322810917141 91430288197103288597806669760892938638285025333403 34413065578016127815921815005561868836468420090470 23053081172816430487623791969842487255036638784583 11487696932154902810424020138335124462181441773470 63783299490636259666498587618221225225512486764533 67720186971698544312419572409913959008952310058822 95548255300263520781532296796249481641953868218774 76085327132285723110424803456124867697064507995236 37774242535411291684276865538926205024910326572967 23701913275725675285653248258265463092207058596522 29798860272258331913126375147341994889534765745501 18495701454879288984856827726077713721403798879715 38298203783031473527721580348144513491373226651381 34829543829199918180278916522431027392251122869539 40957953066405232632538044100059654939159879593635 29746152185502371307642255121183693803580388584903 41698116222072977186158236678424689157993532961922 62467957194401269043877107275048102390895523597457 23189706772547915061505504953922979530901129967519 86188088225875314529584099251203829009407770775672 11306739708304724483816533873502340845647058077308 82959174767140363198008187129011875491310547126581 97623331044818386269515456334926366572897563400500 42846280183517070527831839425882145521227251250327 55121603546981200581762165212827652751691296897789 32238195734329339946437501907836945765883352399886 75506164965184775180738168837861091527357929701337 62177842752192623401942399639168044983993173312731 32924185707147349566916674687634660915035914677504 99518671430235219628894890102423325116913619626622 73267460800591547471830798392868535206946944540724 76841822524674417161514036427982273348055556214818 97142617910342598647204516893989422179826088076852 87783646182799346313767754307809363333018982642090 10848802521674670883215120185883543223812876952786 71329612474782464538636993009049310363619763878039 62184073572399794223406235393808339651327408011116 66627891981488087797941876876144230030984490851411 60661826293682836764744779239180335110989069790714 85786944089552990653640447425576083659976645795096 66024396409905389607120198219976047599490197230297 64913982680032973156037120041377903785566085089252 16730939319872750275468906903707539413042652315011 94809377245048795150954100921645863754710598436791 78639167021187492431995700641917969777599028300699 15368713711936614952811305876380278410754449733078 40789923115535562561142322423255033685442488917353 44889911501440648020369068063960672322193204149535 41503128880339536053299340368006977710650566631954 81234880673210146739058568557934581403627822703280 82616570773948327592232845941706525094512325230608 22918802058777319719839450180888072429661980811197 77158542502016545090413245809786882778948721859617 72107838435069186155435662884062257473692284509516 20849603980134001723930671666823555245252804609722 53503534226472524250874054075591789781264330331690</description></item><item><title>二骑白羊沟</title><link>http://0x3f.org/posts/2nd-ride-to-white-goat-valley/</link><pubDate>Sat, 29 Mar 2014 20:16:00 +0000</pubDate><guid>http://0x3f.org/posts/2nd-ride-to-white-goat-valley/</guid><description>桃花、迎春花开得很好，但没有秋天长满路边的花有气氛。早上去得晚了，阳坊镇的小笼包收摊了……
交作业：
这次一口气上了魔鬼六连弯，弯口溪水别样清啊：
小蓝月湖，命名权是我的：</description></item><item><title>Project Euler Problem 12 Solved</title><link>http://0x3f.org/posts/project-euler-12/</link><pubDate>Fri, 28 Mar 2014 22:51:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-12/</guid><description>Highly divisible triangular number The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten terms would be:
1, 3, 6, 10, 15, 21, 28, 36, 45, 55, &amp;hellip;
Let us list the factors of the first seven triangle numbers:
1: 1
3: 1,3</description></item><item><title>使用存取控制表在Linux用户间共享文件</title><link>http://0x3f.org/posts/share-file-using-access-control-lists/</link><pubDate>Wed, 19 Mar 2014 22:38:00 +0000</pubDate><guid>http://0x3f.org/posts/share-file-using-access-control-lists/</guid><description>我用Dropbox在两台电脑间同步个人维基数据，将数据目录从Web Server下软连接到Dropbox里，而对Dropbox目录的备份实际上只包含那个软连接，没有内容，结果当把备份拷贝到另一台电脑上并打开Dropbox后，维基数据被清空了！我积累多年的笔记差一点儿完蛋，幸亏单独备份过维基。然后改将维基数据放到Dropbox里，然后软连接到Web Server下，新问题出现了，Web Server是以http身份运行的，对用户主目录没有权限，当然也不能访问主目录下的Dropbox目录。
最简单的办法是将主目录、Dropbox、维基目录的权限全部设成777，显然，这样做太不安全。另一种方法是把Dropbox用NFS输出，然后挂载到Web Server下，这么做太蛋疼。最合适的解决方案是Access Control List（存取控制表），它可以为文件和目录设置具体到单个用户或用户组的存取权限，实现像Windows下的文件（目录）共享权限设置那样的效果，而且比后者更强大、灵活。
使用ACL首先需要目录的挂载选项中包含acl，不过一般缺省都包含这一项。
ACL包含两个命令：getfacl和setfacl，前者用来查看目录或文件的存取控制表，后者用来操作它。
首先，把维基目录的所有者改成http，并设置目录权限为770：
1 2 chown -R http:http ~/Dropbox/wiki chmod -R 770 ~/Dropbox/wiki 这时Web Server还是不能访问维基目录，使用getfacl查看用户主目录的ACL：
1 getfacl ~ 显示结果如下：
getfacl: Removing leading &amp;lsquo;/&amp;rsquo; from absolute path names
# file: home/taoqi
# owner: taoqi
# group: users
user::rwx
user:root:&amp;ndash;x
group::&amp;mdash;
mask::&amp;ndash;x
other::&amp;mdash;
显然，要给http用户访问该目录的权限：
1 setfacl -m u:http:x ~ 再查看ACL，发现增加了一条：
user:http:&amp;ndash;x
同理，给Dropbox目录也加上这一条规则之后，Web Server就可以访问维基数据目录了。</description></item><item><title>西山徒步——大觉寺至凤凰岭南线</title><link>http://0x3f.org/posts/a-walk-through-the-west-mountain/</link><pubDate>Sat, 15 Mar 2014 19:56:00 +0000</pubDate><guid>http://0x3f.org/posts/a-walk-through-the-west-mountain/</guid><description>从大觉寺上，至凤凰岭南线下，全程十六公里，最高海拔一千多米，上升一千米，用时七个多小时，难度适中。全程用行者骑行软件记录，挺好用，GPS定位准，耗电不大，魅族MX3大概用了60%的电。
记录数据：
山上的公路很好，在这里骑行挺好的，只是不知道从哪上来：
在山上接了壶泉水，陆羽《茶经·煮》里说：“其水，用山水上，江水中，井水下”，上水烹茶，不言其中：</description></item><item><title>读完《The C Programming Language》</title><link>http://0x3f.org/posts/after-reading-the-c-programming-language/</link><pubDate>Sun, 09 Mar 2014 22:47:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-the-c-programming-language/</guid><description>谭书可能因为面向学生而显得啰嗦，这本书比谭书精炼。</description></item><item><title>探访纳兰家庙</title><link>http://0x3f.org/posts/a-visit-to-the-family-temple-of-nalans/</link><pubDate>Fri, 07 Mar 2014 18:25:00 +0000</pubDate><guid>http://0x3f.org/posts/a-visit-to-the-family-temple-of-nalans/</guid><description>客居多年，不久前才知道附近有如此底蕴的一个去处，于是赶在开始一段新行程前探访了这里。
永泰庄东岳庙，始建于明代，经清代纳兰明珠遗言修缮，供奉明珠牌位，所以又叫纳兰家庙，据说纳兰性德也葬在附近，不过已经难觅词踪。
前殿已经残破不堪，横生凄凉：
钟鼓楼已经只剩下西面一座：
虽然没有重簷，正殿仍然显得很有气势：
宋以后中国知识界思想僵化，明清两代能拿得出手的只有小品和小说，纳兰词是一个异数，有清一代的诗词里，一定少不了那句“人生若只如初见”。</description></item><item><title>读完《你一定爱读的极简欧洲史》</title><link>http://0x3f.org/posts/after-reading-the-shortest-history-of-europe/</link><pubDate>Sun, 23 Feb 2014 20:57:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-the-shortest-history-of-europe/</guid><description>中国的历史教育培养了一群读了二十年书还分不清五胡十六国和五代十国的人，看看人家是怎么教历史的，提纲挈领比死记签了哪些条约有用多了。</description></item><item><title>读完《大数据时代》</title><link>http://0x3f.org/posts/after-reading-big-data-era/</link><pubDate>Sat, 08 Feb 2014 10:11:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-big-data-era/</guid><description>读完，我首先感到的不是大数据有多可爱，而是有多可怕。</description></item><item><title>读完《万历十五年》</title><link>http://0x3f.org/posts/after-reading-a-year-of-no-significance/</link><pubDate>Mon, 03 Feb 2014 13:17:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-a-year-of-no-significance/</guid><description>国史奇书，一本书读懂三百年大明。</description></item><item><title>读完《Go Web编程》</title><link>http://0x3f.org/posts/after-reading-build-web-application-with-golang/</link><pubDate>Sun, 02 Feb 2014 15:52:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-build-web-application-with-golang/</guid><description>用较少的篇幅介绍了golang的语法，然后从实现的角度讲了一些Web应用的概念，最后介绍了beego框架。程序员思维，很实用，讲Web应用基础概念的实现的部分很有用，这方面的书不多。语言表达和示例代码有提升的空间。是Go语言很好的入门教材。</description></item><item><title>读完《明朝那些事儿》</title><link>http://0x3f.org/posts/after-reading-ming-chao-na-xie-shi/</link><pubDate>Wed, 29 Jan 2014 12:14:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-ming-chao-na-xie-shi/</guid><description>还旧账，多年前读的时候这本书还没有写完，趁读完《通鉴》把最后两本解决了。下面计划读的是《万历十五年》，今年是我的明矾年么？</description></item><item><title>读完《资治通鉴》</title><link>http://0x3f.org/posts/after-reading-tong-jian/</link><pubDate>Tue, 28 Jan 2014 20:53:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-tong-jian/</guid><description>一部书，二百九十四卷，三百万字，一千三百六十二年，从中华书局20册胡三省注本，到Kindle DXG，再到Kindle Paperwhite，读了四年。
读史应该先读通史，再读断代史，然后是野史。因为读懂历史必须站在大时代背景上，比如不了解两周封建拓殖史，就不懂什么是“南夷与北狄交，中国不绝若线。”，更不会明白“尊王攘夷”区区四个字有多大的份量。所以十年前我《世说新语》刚读了个开头就读不下去了。
《通鉴》关注的是兴衰更替，所以很多有意思的历史故事没有记录，尤其是先秦时期，我最喜欢的传奇时代，结果看得索然无味。汉纪部分又包含了太多的上书和诏书。我一度觉得选择读《通鉴》是个错误。
所幸坚持了下来，鉴于自小说作家司马迁开始，我国历代史家保持著添油加醋的优良传统，越生动的历史往往越不可信，去叶存枝方见国史之骨。如果说两司马有什么区别，前者是用故事讲历史，后者是用历史讲历史，单就史学而言，谁更牛X，一目了然。</description></item><item><title>PHP框架实战（∝）：烈焰之终章</title><link>http://0x3f.org/posts/flamework-summary/</link><pubDate>Thu, 02 Jan 2014 15:15:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-summary/</guid><description>写“烈焰”（Flame）用了一周的业余时间，主要是对平时一些想法的总结和验证。实现了比较完整的控制器层和视图层，对模型层的ActiveRecord实现思路做了一下梳理。
当然，一个可实用的框架需要包含的东西远不止这些。比如框架中用到代码动态调用的地方，一定要做好语言安全子集的过滤，否则就是很大的安全漏洞。再比如需要支持依赖反转的缓存机制，实现对多种缓存方式的平滑支持。此外，像URI路由、可扩展、多模板方案支持也都是现代框架的标配。这些留待以后有时间再讨论。然而在这次练习的过程中，我突然想到一个问题——PHP是不是适合实现一个完备的框架。
曾见过一句话，说PHP本身就是一个框架，后来明白，这才是微言大义。PHP有很多高级选项、高级函数和扩展，用得好事半功倍，用不好就是魔鬼。
PHP本身有很多问题，协议不统一、函数命名混乱、命名空间语法怪异而且鸡肋等等都是老生常谈。在运行模式上，无论是Apache+PHP模块，还是NGINX+FastCGI，都只能实现在纵向层面上对一次请求的处理，由于缺乏在内存中持续运行程序的机制，凡是对程序全局共享并持续占有的东西都不能实现，比如数据库连接池等，以至于很多初始化的工作对于每次请求都要重新执行一次，这意味著面向对象越彻底、封装越多，系统资源的重复消耗越厉害，所以PHP的程序在性能和内存占用上与Java相比有一定缺陷。因此PHP更适合短平快的应用场景，不适合实现复杂的业务逻辑。
基于这个观点，我认同混合编程。没有哪种语言是完美的，用对的工具做对的事是最理想的。用PHP实现一个完备的框架也许不是个明智的选择，从短平快的角度出发，它更适合用来实现微框架。
现在微框架是个比较热门的话题，我最早接触的是Python的Bottle和Flask，短小精悍，非常容易上手。微框架主要实现控制器层和视图层，一般不包括模型层。为了以最快的速度将请求路由到处理逻辑，一般以最直接的方式建立URI模板和回调物件之间的映射，控制器层可以以极简的方式实现，例如只做一个像本文后面例子中那样简单的约定。微框架应该尽可能少地包含配置，大部分时候并不需要像Java的S.S.H那样滥用配置，CoC原则就持这样的观点，约定可以解决的问题就不要用配置去做。
下面只使用两个函数和五条约定实现一个微框架：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 &amp;lt;?php /** * 路由定义与应用 * @param string $route 用作定义路由规则时，此参数为模板字符串， * 使用冒号加参数名作为参数占位符，例如： * on(&amp;#39;/post/edit/:id&amp;#39;, function($id){}); * 用做应用路由规则时，此参数为URI，例如： * on($_SERVER[&amp;#39;REQUEST_URI&amp;#39;]); * @param callable $callback 路由规则的回调逻辑，如果路由规则中 * 含有参数占位符，回调中需存在同名的参数；当函数作为应用路 * 由规则使用时，此参数不指定 * @return void * @since 1.</description></item><item><title>PHP框架实战（五）：ORM与ActiveRecord</title><link>http://0x3f.org/posts/flamework-active-record/</link><pubDate>Wed, 01 Jan 2014 20:45:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-active-record/</guid><description>简述 Model是MVC框架中最复杂的部分，它要提供与业务逻辑相关的数据及数据处理方法的封装，一般要提供数据对象、数据库连接、事务管理、SQL语句构造、数据CRUD、高级通用业务逻辑等一系列功能。由于Model与Controller和View是解耦的，并且本身具备很高的通用性和复杂性，所以有很多独立的实现。本文希望能通过开发一个简单的ActiveRecord，验证这种Model实现方案的原理和过程。
ORM：对象关系映射 ORM的全称是Object Relational Mapping，即对象关系映射。它是为了解决关系数据库的数学模型和编程语言的对象模型之间的阻抗不匹配问题而提出的解决方案。
阻抗不匹配是个逼格很高的词。
阻抗是指电路中的电容、电感、电阻对交流电的障碍作用，就像电阻对直流电的障碍作用。两个系统传递信号可以形象地看成电压的传递，公式为：
U(out) * Z(in)
U(in) = &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;
Z(in) + Z(out)
即输入电压等于输出电压与输入阻抗的积除以输入阻抗与输出阻抗的和。
理想情况肯定是输入电压等于输出电压，这时信号是没有失真的，也就是要求Z(in)与Z(in)+Z(out)之商无限逼近1，这个过程就叫阻抗匹配。关系型数据库是建立在数学模型的基础上，而编程语言中的对象是建立在人对客观世界认知的具象模型上。说白了，阻抗不匹配问题就是说因这两种模型不一致而导致的问题。
ORM通过建立表与对象、列与属性（这只是一般情况）之间的映射关系而解决问题，这可以实现像操作对象一样对数据库中的数据进行增删改查，简化了开发过程。不过ORM的缺点是不能很好地处理复杂数据关系，会出现效率低下的问题，因此必要时仍然需要直接使用SQL。
ActiveRecord ActiveRecord是Ruby on Rails提出的一个概念，其实就是ORM的一种实现，它是对象类型、数据、CRUD方法的合体，使对数据的操作以更具象化的方式实现。下面介绍在Flamework中实现一个简单的ActiveRecord的过程。
首先实现数据库的接口，提供数据库连接、查询、执行SQL语句、事务管理等基本功能。这里使用PDO实现：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 &amp;lt;?</description></item><item><title>PHP框架实战（四）：View的模板与渲染</title><link>http://0x3f.org/posts/flamework-view-rendering/</link><pubDate>Mon, 30 Dec 2013 21:05:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-view-rendering/</guid><description>目标 实现MVC模型的View层，Controller的Action中应可以将从Model层获取的数据填充到View模板中，并将渲染结果返回给访问者。本文并不志在实现一个完备的模板框架，相应的需求可借助Smarty这样现有的实现。
获取代码 1 git checkout v0.4 设计与实现 View的模板是最好实现的，因为PHP本身就是一个模板语言，所以这里实现的模板主要是指几条约定：
模板文件本身是一个普通PHP文件，文件名后缀是“.php”； 模板文件应存储在项目指定的模板基础目录中； 模板名称指模板文件相对于项目的模板基础目录的路径，并且去掉文件后缀； 模板本身的实际效果等同于在Controller的Action中执行的代码，故可以调用Controller的所有方法以及Flame对象的方法等内容； 所有要填充到模板中的数据以键值对的形式存储在一个关联数组中，并传递给渲染模板的方法，在模板中使用与键名相同的变量调用数据； View的渲染方法
添加Controller::render()方法：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 &amp;lt;?php // ... /** * Render the view template with data * @param string $view View template relative path to base path of the templates * For example, &amp;#39;post/list&amp;#39; point to file /srv/http/mysite/protected/view/post/list.</description></item><item><title>PHP框架实战（三）：实现Controller和Filter</title><link>http://0x3f.org/posts/flamework-controller-and-filter/</link><pubDate>Sun, 29 Dec 2013 20:40:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-controller-and-filter/</guid><description>目标 实现Controller和Filter，程序可以从HTTP请求中解析Controller和Action，并在这两个切面级别实现Filter链。此外，在Controller中，可以使用Action的参数直接访问HTTP请求中的同名参数。
获取代码 项目目录结构做了调整，framework目录存放Flamework框架源码，demo目录存放示例项目。
1 git checkout v0.3 设计与实现 Controller的实现
要求请求URL的格式如下：
http://www.mydomain.com/index.php?r=post/save
r表示Route，斜杠前面的post表示Controller的名称，后面的save表示Action的名称。对HTTP请求的各种处理逻辑封装在新对象HttpRequest中：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 &amp;lt;?</description></item><item><title>PHP框架实战（二）：错误和异常的自动处理</title><link>http://0x3f.org/posts/flamework-error-auto-handling/</link><pubDate>Sat, 28 Dec 2013 13:40:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-error-auto-handling/</guid><description>目标 实现错误和异常的自动捕获和处理。
获取代码 1 git checkout v0.2 设计与实现 使用set_error_handler()和set_exception_handler()两个函数注册错误和异常的处理方法，并在两个处理方法中先调用用户自定义的错误和异常处理逻辑，如果自定义逻辑不存在或者返回false，继续调用框架缺省的处理逻辑，输出错误信息到页面。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 &amp;lt;?</description></item><item><title>PHP框架实战（一）：框架入口与类的自动加载</title><link>http://0x3f.org/posts/flamework-entry/</link><pubDate>Sat, 28 Dec 2013 01:56:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-entry/</guid><description>目标 实现框架入口和类的自动加载。
获取代码 1 git checkout v0.1 设计与实现 通过两个类实现本次目标。
静态类Flame作为整个框架的入口，实现一系列框架级公用静态方法（例如创建应用实例和自动加载类）。
WebApplication是应用的抽象层，实现应用的入口和其它应用级（即运行时）公用方法（例如读取配置文件）。
程序入口
1 2 3 4 &amp;lt;?php // ... Flame::createApplication($config)-&amp;gt;run(); ?&amp;gt; 此处传入的$config是应用配置文件的路径，该配置文件内容格式如下：
1 2 3 4 5 6 &amp;lt;?php return array( &amp;#39;opt1&amp;#39; =&amp;gt; &amp;#39;val1&amp;#39;, // ... ); ?&amp;gt; 在文件中直接return一个关联数组的好处是，加载该文件时，include()函数的返回值就是该数组，代码更简洁，效率比解析其它格式配置文件高。
类的自动加载
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 &amp;lt;?php // ... class Flame { // .</description></item><item><title>PHP框架实战（零）：代码规范</title><link>http://0x3f.org/posts/flamework-code-spec/</link><pubDate>Thu, 26 Dec 2013 22:07:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework-code-spec/</guid><description>类C语言语法风格最大的问题就是用花括号区分代码块，这导致源码排版容易混乱，对于我这种有代码洁癖的人来说非常痛苦，所以我最喜欢的语法风格是Python的，用缩进区分代码块，排版不规范直接判处语法错误。
命名规范 所有命名使用驼峰风格。
源码开头定义命名空间，Flamework框架入口类的命名空间为“org\x3f\flamework”，其余类的命名空间应在此基础上追加与所在目录路径匹配的内容。例如，框架源码目录下一级子目录“base”中的类文件的命名空间均为“org\x3f\flamework\base”。
类名必须是名词，不允许添加任何无意义的前缀或后缀，只允许使用大小写英文字母且首字母大写。
方法名必须是“动词+名词”的形式（如果动词意义明确且不需要宾语，可省略后者），只允许使用大小写英文字母及阿拉伯数字和下划线，首字母小写。
属性名分两种情况，对于存储普通数据的属性，名称必须是名词；对于布尔型属性，名称必须是“动词+名词”的形式。只允许使用大小写英文字母及阿拉伯数字和下划线，首字母小写。
源码文件名必须与类名相同，后缀统一使用“.php”。
注释规范 统一使用phpDocumenter的注释规范。
类注释必须注明@author、@since。
属性和方法的作者如果和类的创建者不同，必须注明@author，此外必须注明@since。
文件格式 所有文本文件统一使用UNIX格式和UTF-8编码。
严禁使用制表符缩进代码，必须使用4个空格替代制表符。
类、属性、方法、方法内部代码块都必须严格按照层级缩进。</description></item><item><title>PHP框架实战：Flamework</title><link>http://0x3f.org/posts/flamework/</link><pubDate>Thu, 26 Dec 2013 20:24:00 +0000</pubDate><guid>http://0x3f.org/posts/flamework/</guid><description>从今天开始，逐步实现一个PHP的MVC框架，以践行平时对这方面的一些想法。
项目信息 名称：Flamework (Flame Framework) 源码：https://github.com/xbot/flamework 框架特性 激进
用PHP高版本引入的新特性，不考虑向前兼容问题，没有历史包袱。
命名空间
PHP 5.3引入的命名空间可以有效避免类命名冲突，这样可以使类名看起来更自然，不用再在类名前面加难看的前缀了。
类的自动加载
手动include会增加维护的难度，因为经常会出现一个类被从源码中移除而它的include行还在的问题，这会拖慢程序执行速度、增加内存占用。
实现类的自动加载可以在类被引用时自动include相应的源码。
异常的自动处理
在设计程序时，一般应该把用户级的错误返回给页面显示，或者对一些HTTP错误显示个性化的页面（例如人民群众喜闻乐见的404页面），所以在业务逻辑、数据操作这些层一般应该逐级向上抛异常，然后在Controller里捕获并加工成页面可识别的格式（例如JSON）。这样做的缺点是Controller里每个Action都包含重复的try&amp;hellip;catch块。
异常的自动处理允许开发者指定自定义的异常处理逻辑，将异常处理与普通逻辑解耦，这样每个Action只需实现它所关注的功能即可。
过滤器
过滤器允许面向切面编程，是将横向逻辑与纵向逻辑解耦的重要工具。Flamework要实现针对Controller和Action两个级别的过滤器链，过滤器可在该级别逻辑前后执行，并能停止该级别逻辑及后续过滤器的执行。
懒加载
对尽可能多的资源实现懒加载，例如数据库连接、类、组件等，目的是提高效率、节约资源。
参数绑定
自动将请求中的参数与Action方法的参数绑定，从而避免在Action里出现通过$_POST、$_GET这些数组取参数的脏代码，也可以自动实现参数的校验和错误处理。
ActiveRecord
ORM是对关系模型和对象模型的阻抗不匹配问题的解决方案，ActiveRecord是目前最流行的一种ORM的实现方式。通过AR，可以以更对象化的方式操作关系数据库的数据。
依赖注入
依赖注入是个很好的解耦方法，也可以很优雅地实现懒加载。
目录 零：代码规范 一：框架入口与类的自动加载 二：错误和异常的自动处理 三：实现Controller和Filter 四：视图的模板与渲染 五：ORM与ActiveRecord 六：依赖注入 ∝：烈焰之终章</description></item><item><title>这半年读过的几本书</title><link>http://0x3f.org/posts/books-read-in-the-second-half-of-2013/</link><pubDate>Wed, 25 Dec 2013 23:10:00 +0000</pubDate><guid>http://0x3f.org/posts/books-read-in-the-second-half-of-2013/</guid><description>微博一度使我更新博客的频率一降再降，现在我决定回归。已经写了七年，依然乐此不疲。
这半年去过一些地方，读过一些书，顿悟了一些东西，我是个有一身毛病的动物，但我享受debug的过程。
现在读书的动力很大程度上来自于使用PaperWhite的愉悦感，虽然最初买电子书阅读器的目的是读盗版，不过现在宁愿为了更好的排版而买正版，而且觉得更过瘾。现在我在买一本书前都要先看有没有电子版，没有的话就去找盗版，连盗版都没有才去买印刷版。
小通鉴 虽然《通鉴》读了三年还没有读完，这本小书却很快就过了一遍。它从通鉴里抽出了几个故事，展开评论了一下。读了原史再看别人的解读，经常会会心一笑，或心有戚戚，或醍醐灌顶。读史最大的好处有两个，一是学做事，一是学做人，我注六经，六经注我。
诛仙 纯粹是为了了结旧账，这书在我还在学校的时候还没写完，隔了多年，画一个圈圈，终结它。书本身的故事不错，本来可以再深挖一些，可惜被文笔糟蹋了，整本书缩写为原来的一百分之一波形不会有失真。
我所认识的蒋介石 这本书只读了开头就读不下去了，对于历史和历史人物，全面肯定和全面否定都是不可信的。
大漠苍狼：绝密飞行 悬疑设定得不错。不过现在越来越不喜欢有恐怖色彩的东西，所以这可能是我最后看的一本这种题材的书。
Javascript权威指南 传说中的犀牛书，Javascript最权威的资料之一。第一部分“语言核心”是要细读的，第二部分“客户端的JS”对有几年经验的人，从13到18章浏览一遍，之后的用康圣人读书法。读完这本书就知道什么叫生命不息挖坑不止。
精通CSS 本想查漏补缺，所以没选《CSS禅意花园》，结果这书还是偏设计。难道这个星球上就没有一本给非前端开发看的CSS书么？
Spring in Action 重新寻找丢掉的青春，撂下五年再拾起来容易么。这书是本不错的Spring初级教材。
板桥杂记 明末清初大才子余怀的招嫖回忆录，从对江南名妓的记述中映射物是人非之慨，文笔绝佳。秋风团扇，一觉扬州，于字字雕琢中见山河离碎、愁绪盈怀。每个危楼听雨的暮年都有著软红十丈的青春。
NoSQL精粹 NoSQL绝佳的一本入门教材，对NoSQL的概念、应用场景、各类实现的优缺点等等都有适度的介绍。对于一直使用传统技术的人而言，这本书有醍醐灌顶使人捶胸顿足怒相见恨晚叹青春易逝之副作用。</description></item><item><title>用 Dojo 实现拖放操作的最佳实践</title><link>http://0x3f.org/posts/practical-drag-and-drop-implementation-with-dojo/</link><pubDate>Tue, 05 Nov 2013 16:58:00 +0000</pubDate><guid>http://0x3f.org/posts/practical-drag-and-drop-implementation-with-dojo/</guid><description>在研究 Dojo 实现拖放操作时，我花了很多时间处理一些细节问题，比如创建自定义样式的拖拽物件以及将光标放置在拖拽开始位置等。这些细节在实现个性化的拖放操作时非常重要，但是我几乎没有找到直接相关的资料可供参考。
创建自定义样式的拖拽物件 Dojo 缺省的拖拽物件样式很丑，通过覆盖官方文档里列出的几个 CSS 的 class 可以有限地调整部分样式，如果需要更多个性化，就需要使用自定义的物件模板。
通过重载 Source 对象的 creator 方法可以实现这一点。这个方法会在创建拖拽物件的时候被调用，如果 hint 参数的值为“avatar”就表示将被创建的是被拖拽物件，此时可以使用预先定义好的模板 avatarTmpl 创建物件的 node 。
1 2 3 4 5 6 7 8 9 10 11 this.dndSrc = new Source(this.itemList.domNode, { copyOnly:true, selfAccept:true, creator: function(item, hint) { var n; if (hint == &amp;#39;avatar&amp;#39;) { n = domConstruct.toDom(lang.replace(avatarTmpl, item)); } return {node:n, data:item, type:[&amp;#39;text&amp;#39;]}; } }); 置光标位置于拖拽起始处 在拖拽开始后，Dojo 默认将光标置于被拖拽物件的左上角，而一般把光标置于拖拽开始时相对于物件的位置处显得比较自然。
实现方式是先记录拖拽开始时光标的位置，然后设置 dojo.dnd.Manager 的两个位移属性。
1 2 3 4 5 6 7 8 9 10 on(this.</description></item><item><title>IE中使用IFrame上传文件报错——TypeError:拒绝访问</title><link>http://0x3f.org/posts/typeerror-access-denied/</link><pubDate>Sat, 03 Aug 2013 01:03:00 +0000</pubDate><guid>http://0x3f.org/posts/typeerror-access-denied/</guid><description>场景为：
点击一个图标，打开文件选择对话框，选择好文件后即时上传。
之前的实现方式是在一个隐藏表单中放一个file类型的input元素，通过调用input.click()打开对话框，同时监听input.onchange，最后通过dojo/request/iframe上传文件。
这个实现方式在Chrome和Firefox里都没问题，但是在IE里报错：“TypeError:拒绝访问”。原因是IE要求必须通过点击file类型的input的按钮打开选择对话框，否则就报这个错误。
解决办法是修改input元素的样式，或者直接用dojox.form.Uploader替代。
因为这个破问题又血战到半夜，只支持IE9+的世界你们好吗，还支持IE7+的屌丝伤不起……不起……起……啊。IE不死，吾难未已！！！</description></item><item><title>Dojo DnD: Cannot read property 'type' of undefined</title><link>http://0x3f.org/posts/dojo-dnd-cannot-read-property-type-of-undefined/</link><pubDate>Thu, 11 Jul 2013 22:44:00 +0000</pubDate><guid>http://0x3f.org/posts/dojo-dnd-cannot-read-property-type-of-undefined/</guid><description>场景如下：
假设有两个Widget：ItemListWidget和ItemWidget，后者要被创建多份并追加到前者内部，同时ItemListWidget要作为dojo/dnd/Source，每个ItemWidget作为一个单元可被拖拽到另外一个dojo/dnd/Target容器中。
问题是，当Source被创建后，再添加到ItemListWidget的ItemWidget实例在被拖拽时会报如下错误：
Uncaught TypeError: Cannot read property &amp;rsquo;type&amp;rsquo; of undefined
在Chrome开发工具中点开这个错误，显示以下内容：
从方法的注释或API中可以看到，checkAcceptance()是用来判断当前拖拽对象是否在这个target接受的范围之内，接受规则用Source和Target的构造参数中的“accept”定义。在这个方法里通过Source.getItem()方法拿到的对象是null，上述错误就是从这儿报出来的。
接合API和Reference Guide发现，每个Source中的可拖拽项目在Source中都要有一个对应的对象，这个对象至少包括两个属性：“data”和“type”。在Reference Guide中，对这两个属性有详细说明，简言之，data是向Target传递的数据，type是被Target用来判断拖拽个体是否属于接受范围的依据。
当Source实例被创建时，已经存在于ItemListWidget中的ItemWidget实例会被自动创建对应的上述对象，但之后加入的不会。解决的办法是调用Source.setItem()方法为每一个新加入的ItemWidget关联相应的对象，或在ItemWidget中添加一个构造参数，用于指定Source，并在postCreate()方法中为当前ItemWidget实例关联相应的对象:
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 define([ &amp;#34;dojo/_base/declare&amp;#34;, &amp;#34;dijit/_WidgetBase&amp;#34;, ], function(declare, _WidgetBase){ return declare(&amp;#34;ItemWidget&amp;#34;, [_WidgetBase], { // 本Widget实例所属的Source实例 dndSrc: null, postCreate: function() { this.inherited(arguments); // 不需要传递数据时，可忽略data参数 if (this.dndSrc !== null) this.dndSrc.setItem(this.id, {type:[&amp;#34;text&amp;#34;]}); } }); });</description></item><item><title>Take Sakura as My Primary Terminal</title><link>http://0x3f.org/posts/take-sakura-as-my-primary-terminal/</link><pubDate>Sun, 07 Jul 2013 12:07:00 +0000</pubDate><guid>http://0x3f.org/posts/take-sakura-as-my-primary-terminal/</guid><description>It&amp;rsquo;s a long time since I came across rxvt-unicode.
About seven years ago, when I switched from Windows XP to Ubuntu mainly for performance issues, I never be bored with searching for everything with a higher speed. To me, gnome-terminal is too much slow as a terminal being frequently opened and closed. Then, rxvt-unicode came through.
At first glance, rxvt-unicode was so ugly that I put it behind without the slightest bit of hesitation.</description></item><item><title>读完《悟空传》</title><link>http://0x3f.org/posts/after-reading-wukongs-biography/</link><pubDate>Fri, 05 Jul 2013 23:12:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-wukongs-biography/</guid><description>我要这天，再遮不住我眼；要这地，再埋不了我心；要这众生，都明白我意；要那诸佛，都烟消云散！
这是本适合少年读、青年悟、中年回味的书，很遗憾没有在我最好的几年里读过它。到了没有激情和理想的年龄，已经不能耐著性子读这种需要花时间和动脑子的书，这次在Kindle PaperWhite上匆匆翻完，我知道可能需要很多年去慢慢的品。</description></item><item><title>PySide: How to Get the Position of a Widget-Value-Changed Cell in QTableWidget</title><link>http://0x3f.org/posts/get-position-in-qtablewidget-for-changed-cellwidgets/</link><pubDate>Mon, 01 Jul 2013 00:57:00 +0000</pubDate><guid>http://0x3f.org/posts/get-position-in-qtablewidget-for-changed-cellwidgets/</guid><description>Assume we have created an instance of QTableWidget, in which cells are filled with widgets like QComboBox, QCheckBox, etc. When values are changed, we need to get the row and column indexes of the cells. But the QTableWidget.cellChanged() and QTableWidget.itemChanged() signals are only effective for cells containing QTableWidgetItem instances, for those in which widgets are filled in with QTableWidget.setCellWidget(), this doesn&amp;rsquo;t work.
This problem nearly made me crazy last weekend. So how can I make it ?</description></item><item><title>那些年我用过的鼠标</title><link>http://0x3f.org/posts/my-mouses-of-all-those-years/</link><pubDate>Sat, 29 Jun 2013 19:53:00 +0000</pubDate><guid>http://0x3f.org/posts/my-mouses-of-all-those-years/</guid><description>第四款，罗技M185，卖相不错，无光，一节五号电池驱动，据说很省电，握感不错，正在用。
第三款，惠普百灵，卖相不错，大小适中，左侧两个快捷按键在浏览网页时前进后退很方便。两节七号电池驱动，不太省电。先后买过两个，都是滚轮失灵，似乎这款的滚轮有问题，伤心了。
第二款，雷柏7100，形状较大，握感还可以，用一节五号电池，省电。最后按键失灵，壮烈牺牲。
第一款，Thinkpad 31P7410，先后买过两三个，比较小巧，按键易坏，不推荐。</description></item><item><title>读完《背包十年》</title><link>http://0x3f.org/posts/after-reading-ten-years-of-traveling/</link><pubDate>Thu, 06 Jun 2013 22:12:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-ten-years-of-traveling/</guid><description>年龄越大，越有种对失去自由的恐惧。“老牛自知夕阳晚，不用扬鞭自奋蹄”，于是越来越想走得远点儿，然后就看到了这本书。这是我第一次正经买电子书，花了3￥，用了五天的时间。
这是本游记，主要讲的是作者十年旅行的见闻和心路历程，从自然平实的词句中可以看出作者心态很平和，能体会这种心态，已经很好。
PS: 有点淡淡的忧桑，今天，我高考十年……</description></item><item><title>How to Make YouCompleteMe Compatible with UltiSnips</title><link>http://0x3f.org/posts/make-youcompleteme-ultisnips-compatible/</link><pubDate>Thu, 23 May 2013 11:26:00 +0000</pubDate><guid>http://0x3f.org/posts/make-youcompleteme-ultisnips-compatible/</guid><description>I replaced NeoComplCache with YouCompleteMe today. The main reason is for the auto-complete feature and the fast speed. Besides, it seems that YCM provides more features than NCC.
Although NCC can also do auto-completions, it was so slow that I had to turn it off. For a long time, I have been doing completions by triggering the TAB key manually. YCM is much faster in most conditions, but I found it is also slow for C source files.</description></item><item><title>Vundle vs Pathogen</title><link>http://0x3f.org/posts/vundle-vs-pathogen/</link><pubDate>Wed, 22 May 2013 21:33:00 +0000</pubDate><guid>http://0x3f.org/posts/vundle-vs-pathogen/</guid><description>I have been using Pathogen for a long time and I am happy with it. But it seems that more and more Vim scripts are recommending to use Vundle in their install references. So I made a study today, the conclusion is, although almost all the articles I found from Google have a positive attitude on Vundle, I still prefer Pathogen.
Most supporters of Vundle praise it for one reason, that is, it can install and update scripts automatically, which is lacked by Pathogen.</description></item><item><title>骑行京西古道</title><link>http://0x3f.org/posts/riding-to-ancient-west-peking-path/</link><pubDate>Sat, 18 May 2013 22:09:00 +0000</pubDate><guid>http://0x3f.org/posts/riding-to-ancient-west-peking-path/</guid><description>13年5月，骑行京西古道。
从水峪嘴下去，进京西古道风景区，通过牛角岭关城，到落坡马志远故居，然后经韭园桥沿永定河谷至担礼大桥进入G109。
京西古道风景区收20￥，里面有博物馆、军事酒吧、古道和牛角岭关城。博物馆其实就是个村史展馆，很小，没什么内容，就一间屋子，一览无余。古道是乱石砌成的，非常不平，推车上去很累，好在只有一千米长：
牛角岭关城，看著像个砖窑，地上的石头沟沟坎坎：
马志远故居，看著像重建的，刻意营造成“小桥流水人家”的样子，里面就一四合院，收费10￥，没进去。附近有一山泉，想老马也算过了一把农妇山泉有点儿田的瘾，夫复何求。
永定河谷一线的景色非常好，可惜没有拍照。</description></item><item><title>解决ROX-Filer文件类型识别问题</title><link>http://0x3f.org/posts/fix-ms-office-mime-types-in-rox-filer/</link><pubDate>Fri, 17 May 2013 12:52:00 +0000</pubDate><guid>http://0x3f.org/posts/fix-ms-office-mime-types-in-rox-filer/</guid><description>默认情况下，ROX-Filer会将“*.docx”、“*.xlsx”、“*.pptx”文档识别为zip压缩包。由于ROX中与文件关联的行为实际上都是和文档类型挂钩的，所以对这些文档的操作会遇到很大麻烦，而且没有变通方法。
实际上，Linux对文件类型的识别比Windows灵活。Windows只能通过文件名的后缀判断文件类型，随便创建一个文本文件，然后将后缀“.txt”改成“.exe”，Win就会傻乎乎地认为这是个二进制的可执行程序。这种做法很傻，而且很不安全，试想，如果将一个病毒程序的后缀改成“.jpg”，就可以骗过大多数用户，然后通过某种手段执行它，后果会怎样？更傻的是，XP以上版本默认是隐藏后缀的，那攻击者连改后缀都可以省了。颤抖吧，神一样的Win！
Linux不但可以通过后缀识别文件类型，更重要的，还可以通过文件开头的几个字节实现这一点，这就比前一种方式精确、安全很多。当然，Linux还支持更多的文件类型识别方法。
前面说过，在ROX-Filer下，所有行为都绑定到文件类型上，也就是MIME Types，ROX通过这种方式实现了将可灵活自由定制的文件操作与自身解耦，从而在确保自身稳定的同时实现对高度灵活的自由定制的支持，这是一个很值得学习的实现方式。因此，既然文件的后缀没有问题，ROX仍将它们识别为ZIP格式，原因是什么？显然，最大的嫌疑集中在第二种识别方式上。
一个公开的秘密是，Office文档本身其实就是一个ZIP压缩包，里面包含了描述文档的XML、多媒体文件等成分，只不过MS贱贱地把压缩包的后缀改成了docx之类的东东，加上Windows只能通过后缀识别文件类型，所以很多人不知道这一点。了解了这个，问题的原因就跃然纸上了，既然都是ZIP压缩包，那第二种文件类型识别方式也就区分不出Office文件类型与ZIP压缩包了。
能号出病因，就有方子治病。
既然ROX使用多种文件类型识别方式，那必然有一个优先级的关系，否则就会乱套。打开ROX的MIME Editor：
找到MIME类型“application/zip”：
打开zip的属性对话框：
可以看到“Contents matching”这一块里，通过检查文件头部的几个字节是否为“PK\003\004”来判断，并且此项判断标准的优先级是40。下面所要做的，就是找到相应文件类型，添加一项条件相同的“Contents matching”，并把优先级设得大于40。</description></item><item><title>乐山大佛与十面普贤</title><link>http://0x3f.org/posts/tour-to-leshan-and-emei/</link><pubDate>Thu, 16 May 2013 22:04:00 +0000</pubDate><guid>http://0x3f.org/posts/tour-to-leshan-and-emei/</guid><description>12年8月，去乐山、峨嵋玩儿了两天。
乐山大佛真的很大：
据说佛爷头上的便便越多，表示智慧越大、级别越高：
峨嵋金顶的十面普贤菩萨，美轮美奂，从没有见过这样一尊佛像，能让人在看第一眼的时候就感受到震撼：
云开日出时的十面普贤，那一瞬间，场面无以言表，极为震撼人心：
刚到乐山时看到路边的条幅，才恍然想起这是祖师爷的老家，没时间拜谒，罪过罪过。这次旅行最大的收获就是看到了云开日出时的十面普贤，是我迄今见过的最摄人心魄的景观。</description></item><item><title>夜爬百望山</title><link>http://0x3f.org/posts/nightly-climbing-baiwang-mountain/</link><pubDate>Wed, 15 May 2013 22:51:00 +0000</pubDate><guid>http://0x3f.org/posts/nightly-climbing-baiwang-mountain/</guid><description>今晚参加了绿野夜爬百望山的活动。主要为了认一下路，以前逃票都是从公路旁栅栏的缺口钻进去的，后来封了就没再去。
站在望京楼上俯瞰夜色中的帝都：
活动强度很低，适合下班后锻炼一下。百望山很矮，但是叉路很多，有的爬了。</description></item><item><title>五一徒步恒山、云冈石窟</title><link>http://0x3f.org/posts/tour-to-hengshan-and-yungang/</link><pubDate>Mon, 13 May 2013 22:48:00 +0000</pubDate><guid>http://0x3f.org/posts/tour-to-hengshan-and-yungang/</guid><description>绿野的活动。
头天晚上的汽车，第二天早上三四点到恒山后山，五点出发。很冷，除了T恤，就穿了一件冲锋衣，冻得直哆嗦，不过一开始爬就好多了。上山的地方不知名，不是传说中的后山山门附近。爬上第一个山顶，转过去就是修好的登山道，放眼可见莽原与群山：
底下就是我们当晚要宿营的恒山湖：
朕与江山：
再往上没多远就是山顶，恒山海拔虽高，实际爬起来难度很低。
都说前山景色一般、精华在后山，没感觉，也许跟我们走的路线有关，倒觉得前山附崖而建的寺庙耐看：
逢山必看摩崖石刻：
前山处处隐没在山林中的寺庙，很有意境：
边下边逛，中午就下了山，不明白这么一座平平无奇的山怎么称得上北岳恒宗：
然后坐车去悬空寺，寺小、人多、票贵，没上去，远远地拍上几张交作业：
不宿营的人坐车去浑源县城住宿，我们徒步走回恒山湖扎营。湖并不好看，水也不怎么干净，有人钓鱼，空手而归，好在湖边有小饭馆，好吃就别想了，聊胜于无。扎营地是山脚一个凹口，是片干了的湖底，没草，所以帐蓬容易进灰而且硌得慌，远不像想像中青山绿水草地上伴著明月篝火清风入睡那样享受。
虽然没有鱼，篝火还是要有的：
除了被冻醒一次，一夜无话。第二天早上坐车去浑源县城吃传说中的小媳妇凉粉，这个地方的凉粉配料有特色，主要有三样东西：不辣的辣椒油、豆干和炸蚕豆，而作为主料的凉粉本身却并不比其它地方的特别，我想像中好的凉粉应该是入口即化的。不管怎样，有这样的经历也是好的：
然后坐车去云冈石窟，首先进去是灵严寺：
灵严寺的塔和佛像都很有特色，不著重彩，呈乳白色或米黄色，观感素雅：
双层建筑在我到过的寺庙里是第一次见到：
大雄宝殿门口的黄金树很耀眼：
寺后就是云冈石窟，风化的石壁很有沧桑感，与前面金碧辉煌的灵严寺对比鲜明。最近越来越不喜欢破败的事物，所以在前面寺庙的兴致至此稍挫：
大窟中的巨佛，依稀可见鲜卑帝国时代的盛况：
石窟的外部原本都是有附崖建筑的：
下午四点，坐车返京，晚上九点左右抵西直门散伙。
活动贴在这里：http://bbs.lvye.cn/thread-780144-1-1.html
最后是恒顶合影：</description></item><item><title>读过Hello Android</title><link>http://0x3f.org/posts/after-reading-hello-android/</link><pubDate>Thu, 21 Feb 2013 21:01:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-hello-android/</guid><description>春节前花了一周时间读完了这本书。
是本不错的Android入门教材，能让人快速地搭出开发环境，了解Android应用的运作机制，对于移动应用开发的初学者尤其有用。当然，这种书一般不会讲得很全面，更深的东西还是要看官方文档，只是Android的官方指南写得比较散，并且过于简单，不适合初学者。</description></item><item><title>DualHead Watchdog v1.0 Released</title><link>http://0x3f.org/posts/dualhead-watchdog-v1-released/</link><pubDate>Sat, 16 Feb 2013 08:56:00 +0000</pubDate><guid>http://0x3f.org/posts/dualhead-watchdog-v1-released/</guid><description>DualHead Watchdog is a Linux desktop app which runs commands or scripts after display settings are changed.
It is especially usefull for users who prefer window managers to those huge desktop environments. For these people, wallpapers often cannot be ajusted automatically when the screen size is changed or dual-head display is started. With this app, people can run custom commands to reset the background image when the display settings are changed.</description></item><item><title>迁移到 Octopress</title><link>http://0x3f.org/posts/migrate-blog-to-octopress/</link><pubDate>Sat, 23 Jun 2012 23:13:00 +0000</pubDate><guid>http://0x3f.org/posts/migrate-blog-to-octopress/</guid><description>关于迁移 前段时间，用了五年的虚拟主机突然限制了PHP内存上限，导致Wordpress只能启用有限的几个插件，根本不能满足需要。
所以毅然决定迁移到JeckyII+GitHub，在摸索的过程中发现octopress比JeckyII易用，于是导出所有文章，开始迁移。因为我这几年博客写得比较乱，无论是内容上，还是发表方式上，结果用了几个导出脚本，效果都不甚理想，还是有很多地方需要手工修改。六百篇文章，正好趁这个机会挑拣一下，较早的文章质量低的比较多。断断续续地迁移了一些，剩下的工作量还是很大的，留著以后慢慢来吧。另外这次把URL也改成永久格式了，这一来真的伤筋动骨了，连永久重定向都没的做。
至于Feed输出，以前订阅Feedburner烧录的两个地址的读者不受影响，直接订阅Wordpress输出的地址的就丢了，这里再公布一下：
本博客聚合输出：http://feeds.feedburner.com/sinolog 我的全部资讯聚合：http://feeds.feedburner.com/leninlee 迁移那点事 Python 版本的问题 Archlinux很激进，早已把Python的缺省版本进化到了3.x，octopress会用到2.x，结果在生成全站的时候，会报如下错误：
File &amp;#34;&amp;lt;string&amp;gt;&amp;#34;, line 1 import sys; print sys.executable ^ SyntaxError: invalid syntax 在这里找到解决方法。在octopress的plugins目录里创建文件：
1 2 3 4 5 require &amp;#39;pygments&amp;#39; if !!RUBY_PLATFORM[&amp;#39;linux&amp;#39;] RubyPython.configure :python_exe =&amp;gt; &amp;#39;/usr/bin/python2&amp;#39; end 不足 用了这段时间octopress，感觉缺点也不小，每次修改后都要重新生成全站，占用系统资源不小，而且理论上以后会越来越慢。</description></item><item><title>读过"ZK: AJAX without the JavaScript Framework"</title><link>http://0x3f.org/posts/after-reading-zk-ajax-without-the-javascript-framework/</link><pubDate>Tue, 19 Jun 2012 21:47:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-zk-ajax-without-the-javascript-framework/</guid><description>前段时间，某天凌晨无故醒来，读完了这本书。
虽然是ZK框架的开发者写的书，不过实在不敢恭维。开发环境搭建的一章已经过时，其余内容也显得蜻蜓点水，加上全书结构显得不是很合理，总之看完对ZK的感觉仍是朦朦胧胧的，更别说上手做东西了。</description></item><item><title>怎样为红帽系Linux发行版写系统服务脚本</title><link>http://0x3f.org/posts/how-to-write-service-scripts-for-redhat-distros/</link><pubDate>Tue, 19 Jun 2012 00:14:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-write-service-scripts-for-redhat-distros/</guid><description>##阅读说明
阅读本文要求有基本的Linux系统使用经验和Bash脚本编程能力。
本文所述的内容适用于RHEL、CentOS等红帽系Linux发行版。
##系统服务简介
###常用命令
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # 启动MySQL service mysqld start # 关闭MySQL service mysqld stop # 重启MySQL service mysqld restart # 查看MySQL服务运行状态 service mysqld status # 查看MySQL服务是否开机自动运行 chkconfig --list mysqld # 设置MySQL服务开机自动运行 chkconfig --level 345 mysqld on # 取消MySQL服务开机自动运行 chkconfig --level 345 mysqld off ###运行级别
泛UNIX派系操作系统使用运行级别标识使用何种模式初始化。理论上，不同的发行版各级别代表的意义不同。红帽系发行版使用以下七个运行级别：
0：关机 1：单用户模式 2：多用户模式，无网络服务 3：多用户模式，有网络服务 4：未使用/用户自定义 5：带图形界面的多用户模式 6：重启 最常用的是0、3、5、6四种模式。其中，0和6表示关闭和重启操作系统，所以，执行命令init 0和shutdown是一个效果，同样，执行命令init 6和reboot是一个效果。模式3即普通的命令行用户界面，模式5即普通的图形界面用户界面。</description></item><item><title>读完《三体——死神永生》</title><link>http://0x3f.org/posts/after-reading-three-body-long-live-the-king-of-terrors/</link><pubDate>Thu, 14 Jun 2012 22:20:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-three-body-long-live-the-king-of-terrors/</guid><description>前天夜里读完了《三体》的第三部。
这三部一部比一部成熟。第一部只能算是整个故事的开端；第二部的亮点在最后揭示黑暗森林，前面的部分废话太多；第三部开始出现情节的跌宕，是三部中最像小说的一部。
诚如所闻，刘慈欣真的把地球写毁灭了。但是站在宇宙众生的角度冷眼旁观要好过以人类自我为中心的意淫，边泡妞边救地球的好莱坞套路也就是过过眼瘾而已。</description></item><item><title>读完《三体——黑暗森林》</title><link>http://0x3f.org/posts/after-reading-three-body-the-dark-forests/</link><pubDate>Tue, 01 May 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-three-body-the-dark-forests/</guid><description>凌晨三点，读完了《三体》的第二部。
咒语，这个东西的确很有意思。第二部比第一部好看，故事情节上完全展开，成功地制造了悬念。如果一部小说，删掉很多文字仍不影响故事情节，那这部分就是多余的，可惜在这部书里这是个很大的问题，所以直到最后三分之一才真正出彩。
Posted via UltraBlog.vim.</description></item><item><title>UltraBlog.vim v3.5.0: 内建浏览器</title><link>http://0x3f.org/posts/ultrablog-v350-released/</link><pubDate>Mon, 30 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-v350-released/</guid><description>此前预览文章是通过调用系统默认的网络浏览器实现的，缺点是这些功能完备的浏览器启动速度不甚理想，尤其是火狐，谁用谁知道。
前两天看了TuxRadar的一个Podcast，几分钟内就可以用pywebkitgtk拼装出一个五脏俱全的网络浏览器，pywebkitgtk这个东西实在是非常的好用。不过我实测后发现这东西加载页面的速度比较慢，而且貌似是单线程的，因为图片都是放在最后才加载，不知道是这个绑定本身的问题，还是有API可以实现的。于是突然想到拿这个东西实现一个简单的浏览器，很适合在UB里预览文章。
增加了一个选项“ub_use_ubviewer”，默认值是1，即默认使用这个内建的浏览器预览文章。当这个选项的值被设为0时，仍然使用系统的默认浏览器，并且在Vim启动时不会加载内建的浏览器。这样做一是为了多一种选择，再一个也可以避开烦人的GTK警告：
** (gvim:13629): WARNING **: Trying to register gtype 'GMountMountFlags' as enum when in fact it is of type 'GFlags'
** (gvim:13629): WARNING **: Trying to register gtype 'GDriveStartFlags' as enum when in fact it is of type 'GFlags'
** (gvim:13629): WARNING **: Trying to register gtype 'GSocketMsgFlags' as enum when in fact it is of type 'GFlags'
这些警告是GTK或其它一些程序库的Bug造成的，虽然只在虚拟终端中启动Vim时会显示并且不影响使用，但总会有警告恐惧症患者会觉得这种东西很闹心。如果这样，就把这个选项的值设成0，用回巨型浏览器好了。
本次更新的全部内容如下：
Feature: Add a tiny web browser to do previewing, which starts much faster than full-functional browsers like firefox and chromium.</description></item><item><title>UltraBlog.vim v3.4.0: 正则表达式、批量替换和调试模式</title><link>http://0x3f.org/posts/ultrablog-v340-released/</link><pubDate>Sun, 29 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-v340-released/</guid><description>这次的更新主要引入了支持正则表达式的全文检索、批量替换和调试模式。
正则表达式 我一直觉得原来的全文检索有一个遗憾，虽然可以通过多个关键词实现较为精确的查询，但还是不如正则表达式灵活和精确。
这是个蓄谋已久的需求，但直到真正做起来，才发现很多有意思的东西。虽然SQLite3提供支持正则表达式查询的“REGEX”关键词，但并没有实际实现这个功能，而是需要写程序实现并在数据库接口中注册这个函数：
```python import sqlite3 conn = sqlite3.connect('/tmp/your-database-file.db') # 使用正则表达式匹配给定内容的函数，返回布尔类型 def regexp_search(expr, item): """Check if the item has a sub-string which matches the expr""" reg = re.compile(expr) return reg.search(item) is not None # 在数据库中注册这个函数 conn.create_function('REGEXP', 2, regexp_search) cur = conn.execute('select id,title from post where content REGEXP ?', '\babc\b') row = cur.fetchone() print row conn.close() ``` 在SQLAlchemy中具体的实现方式是：
```python # 注册函数 dbe = sqlalchemy.create_engine("sqlite:///tmp/your-database-file.db") conn = dbe.connect() conn.connection.create_function('REGEXP', 2, regexp_search) # 在SQL Expression Language中创建查询条件 tbl = Post.</description></item><item><title>PHP大量常量应集中使用APC定义</title><link>http://0x3f.org/posts/define-massive-constants-using-apc/</link><pubDate>Tue, 24 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/define-massive-constants-using-apc/</guid><description>用xdebug跟踪程序性能时，发现一个定义了约七百个常量的文件，include_once()时消耗约六十毫秒的时间。事实上define()的效率比较低，如果需要定义大量常量，使用APC扩展提供的apc_define_constants()效果会好得多。
下面是对这个文件改造前后效率跟踪结果的对比：
define()方案（ms） apc_define_constants()方案（ms） 启动Web服务和PHP，第一次运行 58 4 不重启Web服务和PHP，第二次运行 65 1 不重启Web服务和PHP，第三次运行 66 1 由此可见，apc_define_constants()不但在初次调用时效能就超过define()，而且由于APC自身的缓存功能，在后续调用时效率会有进一步的提高，而define()基本没有变化。
以下是apc_define_constants()的代码示例：
```php &lt;?php if(!apc_load_constants('my_constants')) { $constants = array( 'ONE' => 1, 'TWO' => 2, 'THREE' => 3, ); apc_define_constants('my_constants', $constants); } ?> ``` Posted via UltraBlog.vim.</description></item><item><title>慎用PHP的fsockopen()连接localhost</title><link>http://0x3f.org/posts/fsockopen-fails-connecting-localhost/</link><pubDate>Tue, 24 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/fsockopen-fails-connecting-localhost/</guid><description>使用xdebug跟踪程序性能时发现fsockopen()函数耗时一秒，单步调试发现实际在这里超时了，而超时时间设置的就是一秒。
如果把目标地址由原来的“localhost”换成“127.0.0.1”，马上就可以连上。在PHP的Bug跟踪系统中找到这个问题：
https://bugs.php.net/bug.php?id=50953
看起来像是在5.2.12以后已修改，但我发现在5.2.17中仍存在这个问题。另有说法在5.3中不存在这个问题，我没有测试。
Posted via UltraBlog.vim.</description></item><item><title>UltraBlog.vim v3.3.0：I18N、超时时间和其它</title><link>http://0x3f.org/posts/ultrablog-v330-released/</link><pubDate>Sun, 15 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-v330-released/</guid><description>UB一岁了，这算是个周年纪念版吧。
在这一年里，因为各种原因，博客写得没有以前多了，但每篇都是用这个插件写的，我觉得很好用。断断续续地做了一些修改，因为一切都是一个人在做，所以大的变化不多。这次这个版本里有些改动还是要感谢荒野无灯童鞋，他的建议很大程度上催生了这个新版本：比如加入保存命令的热键映射选项，这样可以使用保存普通文件的热键保存UB中的内容，我自己以前也经常习惯性地用错热键；还有socket超时时间的选项，最近我这里也经常性地在UB操作博客时报超时的异常，荒童鞋关于自定义socket超时时间的建议一语惊醒了梦中人。
此外，似乎与近期Vim的一次升级有关，在Vim中调用Python接口打印任何内容到标准IO都会导致Vim崩溃，所以这次把所有的输出都改成了调用Vim的输出命令来做。
本次修改的内容中，还有一项比较重要的内容就是实现了国际化，目前只提供英文和简体中文两种语言，由于Vimball不能处理二进制文件，所以从此以后UB改用zip格式压缩包打包。
以下是本次更新的详细内容：
Feature: Add i18n support ! Feature: Add a new option ub_hotkey_save_current_item, users can define their own hotkey for :UBSave. Feature: Add a new option ub_socket_timeout, users can customize the timeout period in seconds, useful for slow networks. Bugfix: Exception raised when one event is processed by more than one event handlers. Change: Echoing messages now uses the command :echoerr instead of python's sys.stderr, because Vim crashes on this due to an upgrade recently.</description></item><item><title>在Archlinux下使用thinkfan控制Thinkpad x220的风扇转速</title><link>http://0x3f.org/posts/how-to-control-fan-speed-with-thinkfan/</link><pubDate>Sat, 14 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-control-fan-speed-with-thinkfan/</guid><description>Archlinux目前对Thinkpad风扇的自动控制效果并不好，气温上升后很容易出现一直在三千多转一直跑的问题。thinkfan是目前用的比较多的自动控制风扇转速的程序，但Google到的配置thinkfan的文章大多语焉不详，可能是跟具体的发行版有关，因为貌似有些发行版中安装了thinkfan后会自动生成缺省的配置文件，但在目前的AUR中的包被安装后却没有生成任何配置文件。
下面是我在Archlinux下配置的步骤，实际效果很好，现在只要不看视频、不编译程序、不启动Chromium，一般是两千九百转的速度，安静多了。
lm_sensors 安装lm_sensors并执行命令初始化：
```bash # 一路回车 sudo sensors-detect ``` 将sensors加入rc.conf中DAEMONS中，开机启动。
启动sensors服务：
```bash sudo rc.d start sensors ``` thinkpad_acpi 修改文件“/etc/modprobe.d/thinkpad_acpi.conf”：
``` options thinkpad_acpi fan_control=1 ``` 我这里虽没有把thinkpad_acpi加到rc.conf的MODULES中，但lsmod也是可以看到它的，说明还是自动启用了。要使上面这项配置生效，必须重启电脑，我这里重启thinkpad_acpi模块时报错说该模块正在被使用。
thinkfan 安装thinkfan并修改文件“/etc/default/thinkfan”：
``` START=yes ``` 修改文件“/etc/thinkfan.conf”：
``` sensor /sys/class/hwmon/hwmon0/temp1_input (0, 0, 55) (1, 48, 60) (2, 50, 61) (3, 52, 63) (4, 56, 65) (5, 59, 66) (7, 63, 32767) ``` 将thinkfan加入rc.conf的DAEMONS中，开机自动启动。
启动thinkfan：
```bash sudo thinkfan ``` 查看状态 ```bash # 看CPU温度和风扇转速 sensors # 看风扇详细信息 cat /proc/acpi/ibm/fan ``` Posted via UltraBlog.</description></item><item><title>TurboCRM Cluster Express v1.0 释出</title><link>http://0x3f.org/posts/turbocrm-cluster-express-v1-released/</link><pubDate>Sun, 08 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/turbocrm-cluster-express-v1-released/</guid><description>TurboCRM Cluster Express是TurboCRM的集群实施工具。
去年我曾经写过一个配置集群的Bash脚本“cluster.sh”，TCE是对这个脚本的图形界面封装，通过可视化的操作简化集群的实施工作。
TCE的最新版本和使用说明可以在这里找到。
Posted via UltraBlog.vim.</description></item><item><title>禁止屏幕在播放视频时自动关闭</title><link>http://0x3f.org/posts/how-to-keep-monitor-active-while-watching-flv/</link><pubDate>Wed, 04 Apr 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-keep-monitor-active-while-watching-flv/</guid><description>貌似Lose系统下看在线视频的时候不会超时自动关闭屏幕，但是我在Arch下就一直晃鼠标、按键盘来著，这严重违反了DRY原则。于是昨天终于写了这个脚本，当全屏播放视频的时候，关闭屏保和显示器的节能特性，否则则激活它们。由于是在X的级别实现，理论上应当适合所有桌面环境。
```bash #!/bin/bash # Baby-sitter of the monitor's DPMS idle_period=60 ss_switch_off=0 ss_is_off=0 while true; do # Read DPMS state xset -q|grep "DPMS is Disabled" > /dev/null &amp;&amp; ss_is_off=1 || ss_is_off=0 # Get pid of the current window active_window_id=`xprop -root | grep "_NET_ACTIVE_WINDOW(WINDOW)" | cut -d" " -f5` decimal_id=`xprop -id $active_window_id | grep PID | cut -d" " -f3` # Traverse all libflashplayer.so for pid in `ps -ef|grep -v grep|grep libflashplayer.so|awk '{print $2}'`; do # If the current window is libflashplayer.</description></item><item><title>关于PyGTK.CellRenderer的回调方法中聚焦异常的问题</title><link>http://0x3f.org/posts/the-focus-issue-of-pygtk-cellrenderer/</link><pubDate>Sun, 25 Mar 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/the-focus-issue-of-pygtk-cellrenderer/</guid><description>遇到这样一个问题：
在pygtk.TreeView中，需要在一个Cell的值被修改后做一个校验，如果不合法，则重新聚焦该Cell并选中其中的内容。
示意代码如下：
```python # pygtk.CellRenderer的edited事件的回调方法 def onCellEdited(self, cell, path, newText, userData): store,colNum = userData # 使用事件驱动的设计理念，创建一个自定义的事件 evt = ServerTypeChangedEvent(self, cell, usrData) # 事件入队列 EventQueue.fireEvent(evt) # 处理事件队列，如果截获异常，提示并重新聚焦Cell try: EventQueue.processEvents() except Exception,e: self.alert(e.message) col = self.treeView.get_column(colNum-1) # 聚焦Cell，并选中Cell中的内容 self.treeView.set_cursor_on_cell(path, col, cell, True) ``` 关键的代码在最后一行，通过调用TreeView的set_cursor_on_cell方法聚焦Cell并选中其内容。但就是这一步出了问题，报如下警告：
GtkWarning: _gtk_tree_view_column_start_editing: assertion `tree_column->editable_widget == NULL' failed
此后整个TreeView的行为表现不正常，表现为可直接修改其它Cell的内容，且原Cell一直处于聚焦状态。
此问题的原因是：edited事件在Cell的输入控件被销毁前就发出了，这时在事件的回调方法中重新聚焦该Cell就导致了这个问题（详见这里）。
解决方法是借助glib.idle_add函数，在PyGTK空闲的时候再调用set_cursor_on_cell方法，由于此时原控件已被销毁，所以不会有问题。
修改后的代码如下：
```python def onCellEdited(self, cell, path, newText, userData): store,colNum = userData evt = ServerTypeChangedEvent(self, cell, usrData) EventQueue.fireEvent(evt) try: EventQueue.</description></item><item><title>Mac，江湖再见！</title><link>http://0x3f.org/posts/bye-mac/</link><pubDate>Mon, 12 Mar 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/bye-mac/</guid><description>零八年底，我用半年的差补收了当时Thinkpad X200顶配的FN3。三年的时间，几乎每天都要用很久，竟然从没掉过链子。虽说是这样，但毕竟用的强度大、时间长，屏幕已经远不如当初清晰，亮度也差了，即使调到最高亮度都觉著暗。
于是打算趁著还能发挥余热，趁早处理掉，省得将来砸手里。
既然要换，不如玩儿得折腾一点儿，于是小手一抖，Mac到手。
我对Mac的OS只是有点小好奇，主要是奔著Mac的外观和做工去的，还是打算回头装Arch。玩儿了四个月，平心而论，Mac OS X确实是个不错的OS，美观程度无与伦比，结合Mac硬件的外观和做工，真是天作之合；易用性之高，确实让我有点小惊讶，多点触摸得心应手，软件安装一拖而就，相比之下，Windows显得拙劣不堪。
如果只是作为办公和娱乐的工具，Mac可挑剔的地方确实不多。但是易用性往往和灵活性成反比，灵活性高意味著你可以随心所欲地制定自己的游戏规则，而易用性高则往往意味著你只能接受它的方式、认可它的价值观，易用并不代表顺手。
除此之外就是软件资源的问题，Mac的免费软件相对很少，而且和Windows一样，需要先下载，再安装。虽然也有MacPorts、Homebrew，和Linux的软件仓库比起来还是差得太远。
做惯了Archer，是可忍，孰不可忍。
还是要装Arch。但是在制作安装介质这一步就遇著麻烦了，USB启动安装盘死活都不认，试了几种方法，无果。此外还有不少未知的问题，比如驱动等等。
如果在几年前，在学校，有大把的时间可以糟蹋，我就跟丫死掐了。现在不行了，伤不起了。果断入手Thinkpad X220 A45，上周六把Mac出手了。
小黑和Arch不愧是天作之合，比起当初在X200上装的时候还容易。只是小黑的多点触摸板啊，东施效颦，我想不到更贴切的词形容了，太TMD坑爹了！
鉴于X200上4G内存被Chromium吃光光的苦逼经历，这次果断入手两根4G的三星金条，都是党的政策好啊，最近内存白菜价，两根金条才300粮票。
从宣和八年秋十月到宣和九年春王三月，我的短暂的小白史告一段落，MacBook Pro MC700CH/A，江湖再见！
Posted via UltraBlog.vim.</description></item><item><title>NGINX: 405 Not Allowed</title><link>http://0x3f.org/posts/nginx-405-not-allowed/</link><pubDate>Sun, 19 Feb 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/nginx-405-not-allowed/</guid><description>NGINX不允许向静态文件提交POST方式的请求，否则报405错误。测试方法为，使用curl向服务器上的静态文件提交POST请求：
```bash curl -d 1=1 http://localhost/version.txt ``` 得到以下结果： ```html 405 Not Allowed 405 Not Allowed nginx/1.0.11 ``` 网上传抄的添加以下配置的解决办法不可用：
```nginx error_page 405 =200 @405; location @405 { root /srv/http; } ``` 一种不完美但可用的方法为：
```nginx upstream static_backend { server localhost:80; } server { listen 80; # ... error_page 405 =200 @405; location @405 { root /srv/http; proxy_method GET; proxy_pass http://static_backend; } } ``` 即转换静态文件接收的POST请求到GET方式。
Posted via UltraBlog.vim.</description></item><item><title>登入XFCE后自动关闭蓝牙的方法</title><link>http://0x3f.org/posts/how-to-disable-bluetooth-after-login-to-xfce/</link><pubDate>Sat, 18 Feb 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-disable-bluetooth-after-login-to-xfce/</guid><description>Blueman不能记忆蓝牙的关闭状态，每次登入桌面都会自动打开蓝牙，既费电又不安全。
一种方法是禁止bluetooth服务自动启动，缺点是使用蓝牙时不方便，还要手工启动bluetooth服务。
另一种方法是登入桌面后自动关闭蓝牙，即使用如下命令：
```bash sudo rfkill block bluetooth ``` 但XFCE不能定制自动启动程序的顺序，所以可以写下面这么个脚本，然后添加到自动启动程序列表中：
```bash #!/bin/bash blueman-applet &amp; sleep 5 sudo rfkill block bluetooth ``` 当然，还要取消自动启动程序列表中原来的Blueman。
Posted via UltraBlog.vim.</description></item><item><title>启用新域名0x3f.org</title><link>http://0x3f.org/posts/enable-the-new-domain-name-0x3f-org/</link><pubDate>Mon, 09 Jan 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/enable-the-new-domain-name-0x3f-org/</guid><description>元旦假期第三天，还是把域名给换了。
原因主要是.it太贵，年费十几刀，而.org只有它的一半。另外，原来的sinolog.it有点儿长，也显老气，想换个更个性、更短的。
可惜中意的0xff有主了，只好退而求0x3f。0x3f在ASCII里面代表问号，象征“保持好奇心”。
按照上次的经验，对著数据库一通改，加上这两年四处沾花惹草，很多网站上的相关信息都得跟著改，长此以往，以后连域名都换不起了。
好在RSS订阅早已经换成了FeedBurner烧录，只是对于直接用原域名订阅的需要改一下订阅地址了。
用了几年国家域名，现在也用上国际域名了……
Posted via UltraBlog.vim.</description></item><item><title>读完《三体》</title><link>http://0x3f.org/posts/after-reading-three-body/</link><pubDate>Sun, 18 Dec 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-three-body/</guid><description>几年没读过小说了，上次读刘慈欣的《球状闪电》还是在学校的时候，多年后再次读小说的感觉怪怪的，有点陌生，也没有激情。虽然早就知道这部书，一直没看，现在终于利用零散时间在Kindle上读完了它。
我不是个科幻迷，但也觉得这部书写得挺好。有悬念，立意新颖，尤其是据说在后两部里干脆把地球给写毁灭了！我要接著往下看。
Posted via UltraBlog.vim.</description></item><item><title>读完《Hacking Vim7.2》</title><link>http://0x3f.org/posts/after-reading-hacking-vim72/</link><pubDate>Mon, 28 Nov 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-hacking-vim72/</guid><description>作者对Vim很有心得，分享了很多好的经验。这本书于新手可以用来入门，于老手也多有可取之处，是本学习Vim很不错的参考书。
Posted via UltraBlog.vim.</description></item><item><title>MatchTag.vim: 高亮配对的HTML标签</title><link>http://0x3f.org/posts/highlighting-paired-html-tags-using-matchtag-vim/</link><pubDate>Wed, 23 Nov 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/highlighting-paired-html-tags-using-matchtag-vim/</guid><description>两年前我曾在Vim邮件列表里问怎样高亮配对的HTML标签，但没能解决。今天意外收到一封邮件，Linqq童鞋在StackOverflow上问了同样的问题，有人就写了这个插件。
Posted via UltraBlog.vim.</description></item><item><title>YYeTs.py：人人影视BT种子下载辅助脚本</title><link>http://0x3f.org/posts/yyets-torrents-download-script/</link><pubDate>Mon, 14 Nov 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/yyets-torrents-download-script/</guid><description>这是最好的时代，这是最坏的时代。现在还有像人人影视的BT种子FTP这样的站点，实在不容易。但是所有种子列在一块，想看看最近几天都更新了甚么都很困难，于是早想写个脚本省时省力。这周末终于实现了这个想法。
主要功能 按关键词查询种子 限制查询范围为最近几天新增的 下载符合查询条件的种子，允许下载前编辑任务列表 使用说明 环境 Python 2.7，不支持Python3 Mac OS X Lion，Archlinux测试通过，理论上支持Windows 配置 如果需要编辑下载任务列表（即使用-s选项），应事先配置环境变量YYETS_EDITOR，将值设定为一个文本编辑器的路径，或者修改脚本的私有属性__editor__也一样。如果这两个位置都没有设置，则使用环境变量EDITOR。否则，将报“Command not found”的错误。
有一点提示，如果使用GVim或MacVim，需要加上选项-f，以阻塞的方式启动它，否则会导致下载结果不能达到预期。例如对于MacVim，可配置YYETS_EDITOR为：
mvim -f
使用举例 ```bash # 列出所有种子 ./yyets.py # 搜索关键词 ./yyets.py 猩球崛起 1080p # 搜索最近三天新增的种子 ./yyets.py --past=3 # 搜索最近七天内新增的、满足关键词条件的种子 ./yyets.py --past=7 蓝精灵 # 下载满足查询条件的种子 ./yyets.py -d --past=30 1080p # 下载满足查询条件的种子，下载前编辑任务列表 ./yyets.py -d -p --past=30 1080p # 更多详细信息，参阅帮助 ./yyets.py -h ./yyets.py --help ``` 下载 移步GitHub获取最新版本：
https://github.com/xbot/shell
Posted via UltraBlog.vim.</description></item><item><title>读完《Pro Git》</title><link>http://0x3f.org/posts/after-reading-pro-git/</link><pubDate>Mon, 14 Nov 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-pro-git/</guid><description>花了大约一周的时间，周日晚上读完《Pro Git》的最后几页。
高效、安全的分布式和强大的分枝合并是Git的杀手级特性，这本书在语言上浅显易懂、简明扼要，在章节安排上循序渐进，在内容讲解上有较深入的挖掘，当属眼下Git方面最好的教材。此外，这本书的中译水平也很高，必要的地方还有译注，能看出译者不是外行。
Posted via UltraBlog.vim.</description></item><item><title>UltraBlog.vim v3.1释出：代码重构与MacVim支持</title><link>http://0x3f.org/posts/ultrablog-v310-released/</link><pubDate>Sat, 05 Nov 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-v310-released/</guid><description>距离上一个版本的释出已经有三个月了，这次新版并没有增加多少功能性的内容，主要是代码的重构和对在MacVim下稳定性的改进。
对依赖关系检查的不细致导致了一些麻烦，抛出的错误信息有时与实际原因相距甚远。由于开始时是以实现功能为主，所以都是直接用函数实现的，之后修修补补，代码冗余而且维护麻烦。于是著手重构主要功能的源码，面向对象，把所有检查逻辑放到父类中去实现，子类只关注自身逻辑，最后新版减少了二百多行的代码量。
在重构的过程中偶然发现，在MacVim中，程序抛出任何异常，即便是有捕获逻辑，也会导致编辑器崩溃。在这里简略地提到：
the failure was actual a crash, through some strange combination of threading, matplotlib pyplot backend, and ssh X11 forwarding, sys.stderr had somehow been assigned to something which python complained wasn't a file-like object
于是将所有标准输出与标准错误输出语句换成另一种形式：
```python # 原形式 sys.stdout.write('xxx') sys.stderr.write('xxx') # 新形式 print >> sys.stdout, 'xxx' print >> sys.stderr, 'xxx' ``` 以上是新版主要变更的内容，此外，也顺便解决了开发过程中发现的个别Bug和做了其它一些改动：
Change: The key "xmlrpc" of the settings list is dropped, a new one with the name "</description></item><item><title>Double Commander: 免费、跨平台的Total Commander</title><link>http://0x3f.org/posts/double-commander/</link><pubDate>Wed, 31 Aug 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/double-commander/</guid><description>由于Total Commander很贵，在Windows下又是必不可少的，我一直希望能找到一个TC的免费替代品。试用过很多免费的文件管理器，但都不理想。偶然看到Double Commander，才发现这几乎完全就是我想要的。
特性 几乎完全模仿TC，甚至连插件的API都一致 界面布局、样式高度可定制 热键高度可定制 开源、免费、跨平台 局限 功能相对TC少很多 稳定性不是非常高 运行速度稍嫌慢 开发进度慢 小技巧 热键设置 每个内置命令可以设置多个热键，每个热键可以指定参数，参数中可以使用环境变量，如下图所示：
针对命令cm_ChangeDir设置了两个热键，其中，给Ctrl+Home指定的参数是$HOME，给Ctrl+Shift+Home指定的参数是$HOME/Desktop，即分别切换到当前用户的主目录和桌面目录。
自定义文件类型命令 可以为每种文件类型定义多个命令，这些自定义命令将显示为上下文菜单的“动作”菜单的子菜单项。如下图所示：
定义了名称为“Archive”的文件类型，关联了一系列的文件后缀名。然后添加了一个名为“解压缩到当前目录”的动作，并指定所执行的命令为urxvt -e aunpack %f。其中，%f是一个占位符，代表当前文件的全名。DC预置了几个占位符，可以点击命令输入框右侧图标是加号的按钮选择。
最终的效果如下：
解决日期时间乱码的问题 截至版本0.5.0 beta，如果设置了使用日期时间字符串的格式为“yyyy-mm-dd hh:mm:ss”，在zh_CN.UTF-8的区域设置下，字符串中将出现乱码：
临时解决办法是以英文区域设置启动doublecmd：
```bash #!/bin/bash export LC_ALL=en_US.UTF-8 doublecmd &amp; ``` Posted via UltraBlog.vim.</description></item><item><title>Enable Code Snippet Highlighting For UltraBlog.vim Templates</title><link>http://0x3f.org/posts/enable-code-snippet-highlighting-for-ultrablog-vim-templates/</link><pubDate>Sat, 27 Aug 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/enable-code-snippet-highlighting-for-ultrablog-vim-templates/</guid><description>Templates make it possible for users previewing posts in custom formats in UltraBlog.vim. However, there is more you can do with our highly customizable templates. This article discusses how to highlight code snippets in posts by the use of some third-party open-source tools.
Before setting out to work, let me introduce the tools we are about to use:
highlight.js: A javascript library which highlights code blocks in web pages automatically. jquery: The famous RIA development javascript library.</description></item><item><title>Linux下双屏显示的设置</title><link>http://0x3f.org/posts/dualhead-display-on-linux/</link><pubDate>Thu, 04 Aug 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/dualhead-display-on-linux/</guid><description>RandR是对X11的一个扩展协议，允许在不重启X的情况下修改输出的一些参数并使之生效，xrandr是该协议的命令行界面，它的功能之一就是用来设置双屏显示。
缺省情况下，外接显示器后启用的是屏幕复制模式，即两个屏幕显示完全相同的内容。使用命令xrandr -q查看当前的输出状态：
Screen 0: minimum 320 x 200, current 1920 x 1080, maximum 8192 x 8192 LVDS1 connected 1280x800+0+0 (normal left inverted right x axis y axis) 261mm x 163mm 1280x800 60.0+ 60.0 50.0 1024x768 75.1 70.1 60.0 800x600 72.2 75.0 60.3 56.2 768x576 75.0 72.0 60.0 640x480 72.8 75.0 60.0 59.9 VGA1 connected 1920x1080+0+0 (normal left inverted right x axis y axis) 509mm x 286mm 1920x1080 60.0+ 1680x1050 60.</description></item><item><title>UltraBlog.vim v3.0释出：全文检索与事件驱动</title><link>http://0x3f.org/posts/ultrablog-v300-released/</link><pubDate>Mon, 25 Jul 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-v300-released/</guid><description>用了一周的业余时间，昨天我释出了UltraBlog.vim的3.0版。新版本主要加入了全文检索的功能，并引入事件驱动的模式。
全文检索是我蓄谋已久的功能，一个不能搜索的博客客户端的管理功能是大打折扣的。得益于SQLite数据库和SQLAlchemy框架，全文检索的实现是很简单的，新增加的:UBFind命令将在所有文章和页面的标题与内容中查询，并将搜索结果显示在一个可分页的列表中。这个命令支持任意多个关键词，各关键词之间遵循与的关系。此外，检索结果中，所有的关键词将被自动标记为高亮。
事件驱动模式的引入是我悍然将版本号跳跃到3.x的主要原因。
在前几个版本中，我实现了对多窗口的支持，它使得用户可以在新窗口中打开列表中的文章。但UltraBlog.vim最初开发的时候并没有考虑到多窗口的问题，所有命令都只针对当前窗口进行操作。这就有了缓冲区内容同步的问题，假如在一个新的缓冲区中打开了和另一个缓冲区相同的文章，则一个缓冲区内容的改变不会同步到另外一个中，这多少是有些隐患的。
最直接的做法是在所有可能改变缓冲区内容的功能中加入对其它缓冲区的处理，但这样做有不少问题：
代码耦合度太高，违反K.I.S.S原则，不利于今后的开发和维护 函数体过长，我讨厌难看的代码 代码冗余，重复劳动 事件驱动模式可以很好的解决以上问题，一个函数只干一件事，做完后一个事件抛出去，至于连带著要做什么，谁监听这个事件谁去处理，代码的耦合度很低，复用度很高，易于维护和阅读。
UltraBlog.vim引入事件驱动模式处理缓冲区同步的问题。不同的操作抛出不同的事件，所有的事件继承自父类UBEvent：
```python class UBEvent: def __init__(self, srcObj): self.srcObj = srcObj class UBDebugEvent(UBEvent): pass class UBTmplDelEvent(UBEvent): pass class UBTmplSaveEvent(UBEvent): pass class UBLocalPostDelEvent(UBEvent): pass class UBRemotePostDelEvent(UBEvent): pass class UBPostSendEvent(UBEvent): pass class UBPostSaveEvent(UBEvent): pass ``` 一个可能改变缓冲区内容的操作执行完后，创建一个特定的事件并将其加入到事件队列中。事件队列类中存放两个列表，一是事件队列，二是事件监听器列表；提供三个方法，分别用来注册事件监听器、对事件执行入队列操作和处理队列中所有事件：
```python class UBEventQueue: queue = [] listeners = [] @classmethod def fireEvent(cls, evt): cls.queue.append(evt) @classmethod def processEvents(cls): for evt in cls.queue: for listener in cls.listeners: if listener.isTarget(evt): cls.queue.remove(evt) listener.</description></item><item><title>收入AOC E2343F</title><link>http://0x3f.org/posts/got-aoc-e2343f/</link><pubDate>Sun, 24 Jul 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/got-aoc-e2343f/</guid><description>当初在深圳被公司的Dell Inspiron 1300吓怕了，所以不惜重金收入了高配的Thinkpad X200 FN3。最近越来越觉得12寸的屏幕看代码实在是太局促了。
今天中午收到AOC E2343F，979￥，23寸屏里算是价位很低的了，不算是很好的屏，不过看看代码、电影足够了。外接到X200上，人品不错，完美屏，没坏点，桌面环境下可以使用最大1920x1080x32分辨率，但是不知道为什么，hwinfo --framebuffer列出的结果中没有这个最佳分辨率，KMS自动选用了1280x1024x32，可惜不能在fbterm下撒野了。
下午复习了一下AVATAR，720P，有点儿冲动，Intel GMA X4500还是很坚挺的。打开Vim，分割窗口，豁然开朗，对于这个根本目的，结果相当冲动。
Posted via UltraBlog.vim.</description></item><item><title>使用PAC Manager管理SSH连接</title><link>http://0x3f.org/posts/manage-ssh-connections-using-pac-manager/</link><pubDate>Thu, 14 Jul 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/manage-ssh-connections-using-pac-manager/</guid><description>本文发表在今年一月份的『Linuxpilot』上，已经过了半年，可以放到博客上了。本文基于PAC 2.x版，最近PAC发布了3.0版，界面和功能都有一定的变化。
简介 PAC Manager（以下简称PAC）是一个使用Perl编程语言和GTK图形界面开发套件实现的SSH/Telnet/Serial连接管理工具，是同类的PuTTY、SecureCRT、SSHMenu的一个开源、免费的替代品。
具备哪些特性 可创建本地端口转发、远程端口转发和动态端口转发，并支持X图形界面转发 对连接分组，方便管理较多连接 将指定的、已打开的连接加入集群，同一集群的所有终端共享键盘输入 虚拟终端窗口支持多标签 虚拟终端窗口的样式可定制，支持半透明 支持通过代理服务器建立连接 支持通过Expect表达式进行自动交互 支持使用本地和远程宏管理数量众多且复杂的常用指令 支持定制连接前和断开后自动执行的指令 为每个连接保存截图 针对重要特性的细解 创建SSH隧道 假如当我们在进行诸如收发电邮、使用即时通讯工具聊天或者使用网络银行等网络通讯行为时，也许有些重要的数据我们不希望被明文传递；亦或某些资源受限于网络结构和防火墙等因素而不能被我们直接访问，这时我们往往就可以通过SSH的端口转发功能来实现。
所谓端口转发，即是指将原本使用其它TCP端口访问的数据经由SSH连接占用的端口发送，加之这一过程也伴随有数据的加密和解密，因此也往往被称作“隧道”。根据连接方向的不同，SSH的隧道一般分为三种，即正向隧道、反向隧道和动态隧道；同时，根据端口转发方式的不同，这三种隧道又分别被称为本地端口转发、远程端口转发与动态端口转发。
那么这三种端口转发方式彼此之间有什么异同，分别又都有什么用途呢？这里举个例子来说明一下。
假设我的公司有一个较大的内部网络，而只有一台服务器作为网关对公网提供服务。如果我需要在家里的个人电脑上访问公司的办公系统，而这套系统又部署在内部网络中的一台服务器上、不能被公网访问，该怎么办呢？
第一种情况，假设网关服务器对外提供了SSH服务，那么我就可以在家庭电脑上使用如下指令建立一个隧道：
ssh -L 9999:192.168.1.128:80 111.111.111.111
这条指令中，192.168.1.128是公司办公系统服务器在内网中的IP地址，111.111.111.111是公司网关服务器的公网IP地址。整条指令的意思是：我在家庭电脑中访问本机的9999端口，就如同我在IP地址为111.111.111.111的公司网关服务器上访问IP地址为192.168.1.128的主机的80端口一样。因此，当这条指令执行成功后，我就可以在家庭电脑中通过访问9999端口来打开公司内部办公系统了。
第二种情况，假设网关服务器不对外提供SSH服务但安装了SSH客户端，而我的家庭电脑却安装了SSH服务，那么我就可以在公司网关服务器上执行如下指令建立一个隧道：
ssh -R 9999:192.168.1.128:80 222.222.222.222
这条指令中，222.222.222.222是家庭电脑的公网IP地址。整条指令的意思是：我在公网IP地址为222.222.222.222的电脑上访问9999端口，就如同在本机（公司网关服务器）上访问IP地址为192.168.1.128的主机的80端口一样。当我回到家中，就可以和前面一样通过访问9999端口来打开办公系统了。
事实上，第一种情况是将本地端口映射为远程主机所能访问的资源，故称为本地端口转发；而第二种情况是将远程主机的端口映射为本机所能访问的资源，故称为远程端口转发。
但无论是本地端口转发还是远程端口转发，都只能将一个资源转发到一个端口上，假若我要访问很多资源，岂非要建立很多SSH隧道，不但操作麻烦，而且浪费本机资源。这时，我们就可以使用第三种端口转发方式--动态端口转发：
ssh -D 9999 111.111.111.111
这条指令的意思是：我在本机访问9999端口，就像在IP地址为111.111.111.111的主机上访问它所能访问的某些资源一样。这个所谓的“某些资源”，需要由我在发起访问请求时通过SSH隧道告诉远程主机，事实上，SSH的动态端口转发就是创建了一个SOCKS代理服务器。
在PAC Manager中，我们可以在每个SSH连接的配置界面创建隧道。对于上面的例子，创建本地端口转发时，应点击“Local Port Forwarding”区域的“Add”按钮，并将本地端口、远程资源IP地址和端口分别填写到“Local Port”、“Remote Address”和“Remote Port”中：
截至当前最新的版本（2.4.1.3），PAC Manager尚未为远程端口转发提供像本地端口转发功能一样单独的配置界面，但可以使用高级选项功能实现。在“Advanced Options”输入框中填写如下内容：
如果需要建立多个远程端口转发，可以在“Advanced Options”中填写多个类似上面内容的选项，彼此之间使用空格分隔即可。
创建动态端口转发时，应选中“Dynamic Port Forwarding”区域前面的复选框，然后填写“Forwarded SOCKS Port”即可：
连接前及断开后的自动指令 通过在PAC Manager中定义连接前和断开后的自动指令，我们可以指定一些在相应的SSH连接建立之前及断开之后通常要在本机执行的指令。
例如假设我使用的是计时收费的网络服务，为了节省资费，我希望只在每次建立SSH连接时才激活网络服务，并且在完成工作后断开SSH连接时自动断开网络服务。那么就可以在“Pre Exec”中定义激活网络服务的指令，如下图所示：
在“Post Exec”中定义断开网络服务的指令，如下图所示：
PAC Manager会在每次建立SSH连接前和断开SSH连接后弹出对话框请求用户选择要在本机执行的指令。
Expect正则表达式 Expect是一个用以实现终端中自动交互功能的软件套件，它允许用户通过编写脚本实现自动响应终端中的指令对用户输入的请求，从而将用户从日常重复的劳动中解脱出来。利用Expect，我们可以实现自动输入日常使用的指令中密码的输入；可以在安装程式要求确认时自动确认；甚至实现一个IRC聊天机器人，在你不在时自动回复你的朋友！</description></item><item><title>APC、文件和Memcached效率对比</title><link>http://0x3f.org/posts/comparison-of-efficiency-for-apc-file-memcached/</link><pubDate>Wed, 13 Jul 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/comparison-of-efficiency-for-apc-file-memcached/</guid><description>对一个保存了100个对象实例的数组进行300次读写，该数组序列化后大小为232KB。
测试环境 网络服务器 PHP版本 操作系统 硬件配置 NGINX v1.0.4 PHP-FPM v5.3.6
APC启用 Archlinux 32bit Intel(R) Core(TM)2 Duo CPU T9400 @ 2.53GHz
Mem: 3G DDR3
Disk: 5400r/s 测试脚本 测试数据：
```php &lt;?php /* * @file data.php */ class XTest { var $x0; var $x1; var $x2; var $x3; var $x4; var $x5; var $x6; var $x7; var $x8; var $x9; var $x10; var $x11; var $x12; var $x13; var $x14; var $x15; var $x16; var $x17; var $x18; var $x19; var $x20; var $x21; var $x22; var $x23; var $x24; var $x25; var $x26; var $x27; var $x28; var $x29; var $x30; var $x31; var $x32; var $x33; var $x34; var $x35; var $x36; var $x37; var $x38; var $x39; var $x40; var $x41; var $x42; var $x43; var $x44; var $x45; var $x46; var $x47; var $x48; var $x49; var $x50; var $x51; var $x52; var $x53; var $x54; var $x55; var $x56; var $x57; var $x58; var $x59; var $x60; var $x61; var $x62; var $x63; var $x64; var $x65; var $x66; var $x67; var $x68; var $x69; var $x70; var $x71; var $x72; var $x73; var $x74; var $x75; var $x76; var $x77; var $x78; var $x79; var $x80; var $x81; var $x82; var $x83; var $x84; var $x85; var $x86; var $x87; var $x88; var $x89; var $x90; var $x91; var $x92; var $x93; var $x94; var $x95; var $x96; var $x97; var $x98; var $x99; function __construct() { $this->x0 = 1234567890; $this->x1 = 1234567890; $this->x2 = 1234567890; $this->x3 = 1234567890; $this->x4 = 1234567890; $this->x5 = 1234567890; $this->x6 = 1234567890; $this->x7 = 1234567890; $this->x8 = 1234567890; $this->x9 = 1234567890; $this->x10 = 1234567890; $this->x11 = 1234567890; $this->x12 = 1234567890; $this->x13 = 1234567890; $this->x14 = 1234567890; $this->x15 = 1234567890; $this->x16 = 1234567890; $this->x17 = 1234567890; $this->x18 = 1234567890; $this->x19 = 1234567890; $this->x20 = 1234567890; $this->x21 = 1234567890; $this->x22 = 1234567890; $this->x23 = 1234567890; $this->x24 = 1234567890; $this->x25 = 1234567890; $this->x26 = 1234567890; $this->x27 = 1234567890; $this->x28 = 1234567890; $this->x29 = 1234567890; $this->x30 = 1234567890; $this->x31 = 1234567890; $this->x32 = 1234567890; $this->x33 = 1234567890; $this->x34 = 1234567890; $this->x35 = 1234567890; $this->x36 = 1234567890; $this->x37 = 1234567890; $this->x38 = 1234567890; $this->x39 = 1234567890; $this->x40 = 1234567890; $this->x41 = 1234567890; $this->x42 = 1234567890; $this->x43 = 1234567890; $this->x44 = 1234567890; $this->x45 = 1234567890; $this->x46 = 1234567890; $this->x47 = 1234567890; $this->x48 = 1234567890; $this->x49 = 1234567890; $this->x50 = 1234567890; $this->x51 = 1234567890; $this->x52 = 1234567890; $this->x53 = 1234567890; $this->x54 = 1234567890; $this->x55 = 1234567890; $this->x56 = 1234567890; $this->x57 = 1234567890; $this->x58 = 1234567890; $this->x59 = 1234567890; $this->x60 = 1234567890; $this->x61 = 1234567890; $this->x62 = 1234567890; $this->x63 = 1234567890; $this->x64 = 1234567890; $this->x65 = 1234567890; $this->x66 = 1234567890; $this->x67 = 1234567890; $this->x68 = 1234567890; $this->x69 = 1234567890; $this->x70 = 1234567890; $this->x71 = 1234567890; $this->x72 = 1234567890; $this->x73 = 1234567890; $this->x74 = 1234567890; $this->x75 = 1234567890; $this->x76 = 1234567890; $this->x77 = 1234567890; $this->x78 = 1234567890; $this->x79 = 1234567890; $this->x80 = 1234567890; $this->x81 = 1234567890; $this->x82 = 1234567890; $this->x83 = 1234567890; $this->x84 = 1234567890; $this->x85 = 1234567890; $this->x86 = 1234567890; $this->x87 = 1234567890; $this->x88 = 1234567890; $this->x89 = 1234567890; $this->x90 = 1234567890; $this->x91 = 1234567890; $this->x92 = 1234567890; $this->x93 = 1234567890; $this->x94 = 1234567890; $this->x95 = 1234567890; $this->x96 = 1234567890; $this->x97 = 1234567890; $this->x98 = 1234567890; $this->x99 = 1234567890; } } $repeat = 300; $arr = array(); for ($i = 0; $i &lt; 100; $i++) { $arr[] = new XTest; } ?</description></item><item><title>隐藏InstallShield对话框控件的方法</title><link>http://0x3f.org/posts/how-to-hide-dialog-in-installshield/</link><pubDate>Wed, 22 Jun 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-hide-dialog-in-installshield/</guid><description>SQLServerSelectLogin对话框中如果选择Windows身份验证，在附加数据库时会因权限不够而失败，所以应该隐藏这个选项，从而要求用户只执行SQL身份验证。
但是如果在定制对话框布局时直接删除两个单选框，会导致用户输入的用户名和密码不能被安装程序获取，并且InstallShield也没有提供隐藏这些控件的属性。解决方法是修改控件的定位属性，将其定位到对话框的大小范围之外：
要达到的目标：
修改Top属性，将指定的控件定位在对话框之外：
最终效果：
Posted via UltraBlog.vim.</description></item><item><title>读完『Ext JS IN Action』</title><link>http://0x3f.org/posts/after-reading-extjs-in-action/</link><pubDate>Tue, 21 Jun 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-extjs-in-action/</guid><description>这是本需要仔细读的书，对ExtJS的主要控件有比较详细的解说，有一定的原理性解释，并且对扩展ExtJS和ExtJS项目开发的模式有一些介绍。但不涉及底层特性，例如DOM、AJAX等。
Posted via UltraBlog.vim.</description></item><item><title>UltraBlog.vim v2.3.0 Released With Templates</title><link>http://0x3f.org/posts/ultrablog-v230-released/</link><pubDate>Mon, 13 Jun 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-v230-released/</guid><description>I released the new version 2.3.0 of UltraBlog.vim last week. The main improvement in this version is that templates are introduced in.
Templates are simply HTML strings, they are used to preview posts/pages in the browser locally. This feature is a reparation for the remote previewing, due to the limit of the API, users cannot send a post to Wordpress as draft and preview it without affecting the post status if the post has been published.</description></item><item><title>Vim自定义命令的参数自动补全</title><link>http://0x3f.org/posts/how-to-define-auto-completion-for-vim-commands/</link><pubDate>Sat, 11 Jun 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/how-to-define-auto-completion-for-vim-commands/</guid><description>UltraBlog.vim起初的几个版本采用增加命令个数的方式减少每个命令的参数个数，目的是降低命令格式记忆的难度。从2.3.0版本起，开始采用Vim自定义命令的一些高级特性，精简命令个数，虽然参数个数增加了，但由于实现了参数补全，反而更加直观。
Vim对自定义命令提供了多种补全参数的方式，详见:h command-complete。其中，最常用的当属custom：
```vim command! -nargs=? -complete=custom,StatusCmpl UBSend exec('py ub_send_item()') ``` 以上代码定义了一个自定义命令UBSend，它可以获得一个或零个参数（-nargs=?），如果指定参数，则补全方式采用custom，该方式调用一个名为StatusCmpl的函数并以其返回值作为补全的值域：
```vim function! StatusCmpl(ArgLead, CmdLine, CursorPos) return "draft\npublish\nprivate\npending\n" endfunction ``` 从以上代码可以看出，该函数需要接受三个参数，返回值应该是一个用换行符“\n”分割的字符串，在执行补全时，Vim自动使用正则表达式匹配备选项。对于只有一个参数的情况，这种实现方式简单高效。
对于参数较多的情况，customlist补全方式最为适用：
```vim command! -nargs=* -complete=customlist,UBNewCmpl UBNew exec('py ub_new_item()') ``` 以上代码定义了命令UBNew，customlist补全方式调用函数UBNewCmpl获取补全的值域：
```vim function! UBNewCmpl(ArgLead, CmdLine, CursorPos) let lst = split(a:CmdLine) if len(a:ArgLead)>0 let lst = lst[0:-2] endif let results = [] " For the first argument, complete the object type if len(lst)==1 let objects = ['post','page','tmpl'] for obj in objects if stridx(obj,a:ArgLead)==0 call add(results,obj) endif endfor "</description></item><item><title>聚合个人资讯</title><link>http://0x3f.org/posts/burn-personal-info-into-one-feed-using-yahoo-pipes/</link><pubDate>Wed, 08 Jun 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/burn-personal-info-into-one-feed-using-yahoo-pipes/</guid><description>前段时间我把Twitter整合进博客之后，忽然觉得，既然微博已经很重要了，就应该加强它的地位，使其与博客分庭抗礼。于是开始用blueprint做CSS框架，对两三年没变过的iterse做一些调整。
我对前端不太熟悉，这时候CSS框架的优越性就充分体现出来了，它让页面的布局变得相当容易，尤其是对前端设计最烦人的对多浏览器的兼容问题。现在的主题采用流行的950px宽度，比以前800px要宽裕了不少。其中，三分之一的宽度分给侧边栏，剩余部分留给博客文章列表，仍然采用两栏结构。
我在页面顶部加了顶栏，将原来侧边栏中的分类、归档、页面、搜索框、RSS订阅全部扔到里面。同时提升Twitter和最新评论列表的位置，增加它们显示条目的数量，以加强这两个时效性和互动性比较强的栏目。
然后我觉得资讯订阅中的内容也不应该再仅仅局限于博客文章了，应该把我在用的Twitter、豆瓣、Google Reader分享、PicasaWeb等服务中我的资讯也聚合进来。开始的时候打算用Yahoo! Pipes，后来突然发现FriendFeed就可以做这个事，而且更好用，于是将原来烧录的http://feeds.feedburner.com/leninlee指向FriendFeed。
所以对于订阅原来的FeedBurner烧录的feed的读者，如果希望仍然只订阅博客文章，可以订阅http://feeds.feedburner.com/sinolog。这两个feed都放到了顶栏中，请以各种姿态翻墙订阅。
2011-06-08 更新
时隔一天，我认识到一个错误，FriendFeed毕竟还是一个微博，用它聚合个人资讯是不合适的，比如不能全文输出博客文章。最终还是使用Yahoo! Pipes，这货很强大、很好用。
另外，twitter2rss是支持OAuth的Twitter烧录服务，非常好用。
Posted via UltraBlog.vim.</description></item><item><title>人性化Vim的预览窗口</title><link>http://0x3f.org/posts/humanize-preview-window-in-vim/</link><pubDate>Sun, 29 May 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/humanize-preview-window-in-vim/</guid><description>Vim的预览窗口由 :ptag 等命令触发，可用于预览函数定义。但在缺省情况下，预览窗口的高度是固定的，对于注释信息较多的函数，往往不能完全显示注释，而对于注释较少的函数，又会有多余的行浪费屏幕空间。
下面的函数用于解决这个问题：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 &amp;#34; 调用:ptag命令预览光标所在&amp;lt;word&amp;gt;的定义 &amp;#34; 对类C语言风格的函数/方法定义和注释有效，对其余情况仍沿用:ptag的原有效果 function! PTagIt() exec &amp;#34;ptag &amp;#34;.expand(&amp;#34;&amp;lt;cword&amp;gt;&amp;#34;) let cwin = winnr() silent! wincmd P let lnr = line(&amp;#39;.&amp;#39;) if lnr &amp;lt; 3 return endif if foldlevel(&amp;#39;.</description></item><item><title>ack: grep的同类替代品</title><link>http://0x3f.org/posts/use-ack-as-an-alternative-to-grep/</link><pubDate>Mon, 09 May 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/use-ack-as-an-alternative-to-grep/</guid><description>ack是一个perl脚本，是grep的一个可选替换。
有以下优势：
为程序员设计，使用方便，输入较少 默认递归搜索 缺省提供多种文件类型供选，文件类型对应的后缀名可修改 使用perl的正则表达式，而grep只支持其一个子集 搜索结果高亮输出 很多人以讹传讹，使人容易对ack的搜索速度产生误解。ack的官方宣传中说比grep快，其前提是ack可方便地针对部分后缀的文件进行搜索，而grep默认对所有文件搜索。ack的官方文档中明确指出，在对大量文件进行搜索时，grep的速度还是最快的。
~/.ackrc 使用此配置文件存储ack的常用选项。
-i --type-add php=.lib
如上所示，该文件中每一行应该是ack命令行参数中用空格分隔的一个部分。
例子 如果搜索的关键词是正则表达式，在Linux下必须将其用双引号包围起来。
如：
```bash ack "gbldb\s*=" ``` Windows下的安装 安装strawberryperl 保存ack.pl到C:\bin ```dos @echo off perl.exe c:/bin/ack.pl %* ``` 将C:\bin加入环境变量%PATH% 资源 ack.vim: Vim使用ack的辅助扩展 Posted via UltraBlog.vim.</description></item><item><title>读完《Nginx HTTP Server》</title><link>http://0x3f.org/posts/after-reading-nginx-http-server/</link><pubDate>Fri, 29 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-nginx-http-server/</guid><description>昨天晚上在杭州飞北京的飞机上读完了这本书，用Kindle DXG。
作者是江苏科技大学的一位外籍老师，所以这本书也很有教科书的风格，先用一章的篇幅介绍Linux的相关概念和日常操作，而后通过和Apache的对比讲述了Nginx的主要特性，并使用Wordpress、MediaWiki等作了实例讲解。面面俱到，简单易懂，但并不深入。
目前介绍Nginx的书还不多，这本算得上是其中很好的一本。但是前六十页都是介绍Linux的基本概念，和后面的内容关系不大，显得很突兀，且很不KISS，对于一本只有三百多页的小书来说，这个篇幅很令人遐想。抛开这一点，这本书当属眼下入门Nginx的优秀指南。
Posted via UltraBlog.vim.</description></item><item><title>PHP序列化方案效率比较</title><link>http://0x3f.org/posts/comparison-of-serialization-methods-of-php/</link><pubDate>Sun, 17 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/comparison-of-serialization-methods-of-php/</guid><description>同时对以下几种PHP的序列化方案进行了测试：
serialize() and unserialize() json_encode() and json_decode() msgpack_serialize() and msgpack_unserialize() igbinary_serialize() and igbinary_unserialize() 测试环境：
OS: Archlinux 32-bit CPU: CORE 2 DUO T9400, 2.53GHz Mem: DDR3, 3G Server: nginx v1.0.0 PHP: php v5.3.6 + php-fpm Profiler: xhprof v0.9.2 测试代码块：
```php &lt;?php class Test{ function __construct(){ $this->value = str_repeat('a', 1000); } } function produce($num) { $arr = array(); for ($i = 0; $i &lt; $num; $i++) { $arr[] = new Test(); } $data = serialize($arr); $arr = unserialize($data); $data = json_encode($arr); $arr = json_decode($data); $data = msgpack_serialize($arr); $arr = msgpack_unserialize($data); $data = igbinary_serialize($arr); $arr = igbinary_unserialize($data); } produce(10000); ?</description></item><item><title>UltraBlog.vim开发手记</title><link>http://0x3f.org/posts/ultrablog-development-note/</link><pubDate>Mon, 11 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-development-note/</guid><description>对于博客已死的说法，我一点都不感到奇怪。早在几年前博客还比较火的时候我就表达过对博客泡沫的看法。
经历了短暂的tumblog的风头，微博成为现在最火的媒介。说博客已死，无非就是说微博将成为个人信息传播的主流。好吧，现在我知道那时候我所说的不懂什么是博客的人都去干什么了。
但是博客还是会继续发展，微博的兴起只会减少滥竽充数。因为微博突出的是时效性，最缺乏的是系统性和可重复更新的能力。微博的短处，正是博客的长处。这让我对博客有了一个新的、迟到了很久的认识──一个好的博客，它的文章不应该是写掉就忘的，而应该是不断地更新著的。
UltraBlog.vim就是出于这个需要而写的。
我对博客客户端的使用大概可以追溯到四五年前，那时候博客正火，在比较了几个BSP后选择了中国博客网，就是因为他们提供桌面客户端。后来独博之后也试用过几个通用的客户端，但都没坚持多久，最根本的原因是它们几乎无一例外地都是WYSIWYG。而WYSIWYG的编辑器生成的HTML源码几乎都使用inline的样式，这就导致文章的排版布局很难控制，我对WYSIWYG其实是很抵触的，至今都不怎么用Office这类东西。
后来我意识到，我所需要的是样式与内容分离，于是准备自己写一个客户端，后来由于工作的原因不了了之。与此同时，我自定义了一套文章格式并用Java写了一个转换文章到HTML的工具，直到后来发现Markdown，我才知道我其实是需要一个轻量标记语言。
使用Markdown之后，写博客开始变得轻松愉快。我一度用过一段时间SciTE，还用Lua写了个辅助脚本。但是我需要一个完整的客户端来管理文章，而这是一个编辑器所不能胜任的，所以就著手实现一个支持Markdown的客户端。这一次走得比较远，ForeverFantasy最终达到了可用的程度，我一度用它写过一段时间的博客。但是作为一个Vim重症患者，wxPython的编辑器部件是远远达不到我需要的水平的。虽然后来还实现了调用外部程序处理文章内容（当然也可以调用Vim），但总归觉得不舒服，至今已经一年没更新了。
直到前段时间试用了一下VimRepress，在修改这个插件的时候突然受到启发，我这几年的需求原来是可以这么简单地解决的。
其实在几年前vimpress刚刚发布的时候我就了解过这个东西，包括此后接连发布的几个Vim写博客的插件，它们和我原来写的SciTE的那个辅助脚本没有本质的区别，都是博客编辑器。与完整的客户端相比，编辑器缺少对本地文章源码的管理，而且它们不记录文章源码和发布的文章的关联关系，简单地说是无状态的。这不符合博客文章持续更新的观点。
UltraBlog.vim使用SQLAlchemy做数据库抽象层，将所有文章的源码及其状态保存在本地的一个SQLite数据库中，并且以此为基础，通过XMLRPC接口实现对博客文章、页面的CRUD操作。同时利用Vim分模式的特点实现了可分页的文章列表和文章编辑视图。
UltraBlog.vim目前支持Markdown和HTML两种格式的文章，它最大的特点是在Markdown格式的源码和发布到博客中的文章之间建立联系，你可以随时修改本地数据库中的Markdown源码并更新博客中对应的文章。
新的功能还会不断地加入。
Posted via UltraBlog.vim.</description></item><item><title>GNOME 3 Launch Party</title><link>http://0x3f.org/posts/gnome3-launch-party/</link><pubDate>Sat, 09 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/gnome3-launch-party/</guid><description>在保福寺桥南下了车我就迷失了，作为一个G7er，问路太跌份，于是自信满满地祭出G7，结果Google导航很淡定地告诉我──您所在的区域不支持导航！有木有搞错，有木有，有木有，有木有啊！最后在3G、GPS、电子指南针全开的情况下，跟著Google地图上的小箭头在中关村南街、中关村三街流窜了半个小时，后来我才知道，我规则地绕中科院研究生院做了一次顺时针圆周运动。
好吧，我最后还是人肉到目的地的，感谢给我指路的朋友，他让我终于找到了那条隐藏地很深的小路，你敢隐藏得再深一点吗？！
有时侯这个世界真的很给力，当我比原定时间晚半个多钟头到达会场的时候，他们居然还没有开始！
爱美丽宣布开会：
程大龙介绍GNOME 3：
这小哥儿原来是北航的，后生可畏啊，当初我开始玩儿Linux的时候他刚脱离李雷和韩梅梅吧。
来一张火爆的：
今天最意外的亮点就是这个什么××××协会的西班牙舞了，开始、中间和结束的时候各来了一段，俺们红小兵也看不懂，就是感觉很劲爆，反正只要是不规则的事物我都喜欢。
其它的，两岸三地的视频会议很失败，搞个高速VPN不行吗？瞻仰了传说中的Vincent，小哥儿比我还胖，我很欣慰。在Twitter上看到了林健桑拍的热舞照片，感觉他坐得离我不远，把坐我前面的都遍历了一遍却没找到，谁知道居然在我后面。
Posted via UltraBlog.vim.</description></item><item><title>Navicat: 轻量的多数据库客户端</title><link>http://0x3f.org/posts/navicat-a-light-weight-database-client/</link><pubDate>Wed, 06 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/navicat-a-light-weight-database-client/</guid><description>Navicat是一套商业软件，但是它的免费版Navicat Lite已足够好用。作为一套数据库客户端，它具有以下特性：
支持Microsoft SQL Server、Oracle、MySQL、PostgreSQL、SQLite五个最常见的关系数据库。 占用系统资源少，轻便快捷 功能较为全面，使用方便 跨平台 我使用Navicat完成一般的数据库操作，这样可以无须在多种数据库的官方客户端之间来回切换，而且对于速度不快的机器来说，Navicat轻量的优势是很明显的。
Navicat另外一个为人所忽略的优点是对SQLite的支持，我曾花不少时间找一个好的SQLite的客户端，大部分搜索结果都介绍的是另外一个Sqliteman，但是我始终不能习惯它，感觉这个东西功能少而且不好用。直到发现Navicat，才算找到一个完善的SQLite客户端。
对于跨平台的特性，Navicat对Linux平台的支持其实是通过wine实现的，好在其安装包对wine已做过定制，运行状况良好。
Posted via UltraBlog.vim.</description></item><item><title>从iG:Syntax Hiliter转换到WP-Syntax</title><link>http://0x3f.org/posts/migrate-from-igsyntax-hiliter-to-wp-syntax/</link><pubDate>Wed, 06 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/migrate-from-igsyntax-hiliter-to-wp-syntax/</guid><description>终于决定放弃使用了三年多的iG:Syntax Hiliter，将代码语法高亮插件换成WP-Syntax。
原因是Vim的Markdown语法高亮插件有问题，会把iG的标签[LANG]当作Markdown的超链接处理，结果导致插入代码后，后面的内容被错误地著色，很难看。而Syntax使用&amp;lt;pre lang="LANG"&amp;gt;格式的标签，不会有这个问题。
其实很早就想过要换了，只是受累于使用iG进行高亮的文章太多，替换起来不方便。加上后来解决了由于iG停止更新导致的不支持更多的语法的问题，所以就一致拖到现在。今天晚上花了一个小时就完成了替换，比想象中的要容易地多。
根据我使用过的语法的情况，使用以下语句在数据库中替换iG的标签到Syntax的标签：
```sql update wp_posts set post_content=replace(post_content,'[bash]','&amp;lt;pre lang="bash" line="1"&amp;gt;'); update wp_posts set post_content=replace(post_content,'[/bash]','&amp;lt;/pre&amp;gt;'); update wp_posts set post_content=replace(post_content,'[python]','&amp;lt;pre lang="python" line="1"&amp;gt;'); update wp_posts set post_content=replace(post_content,'[/python]','&amp;lt;/pre&amp;gt;'); update wp_posts set post_content=replace(post_content,'[vim]','&amp;lt;pre lang="vim" line="1"&amp;gt;'); update wp_posts set post_content=replace(post_content,'[/vim]','&amp;lt;/pre&amp;gt;'); update wp_posts set post_content=replace(post_content,'[java]','&amp;lt;pre lang="java" line="1"&amp;gt;'); update wp_posts set post_content=replace(post_content,'[/java]','&amp;lt;/pre&amp;gt;'); update wp_posts set post_content=replace(post_content,'[lua]','&amp;lt;pre lang="lua" line="1"&amp;gt;'); update wp_posts set post_content=replace(post_content,'[/lua]','&amp;lt;/pre&amp;gt;'); update wp_posts set post_content=replace(post_content,'[sql]','&amp;lt;pre lang="sql" line="1"&amp;gt;'); update wp_posts set post_content=replace(post_content,'[/sql]','&amp;lt;/pre&amp;gt;'); update wp_posts set post_content=replace(post_content,'[plsql]','&amp;lt;pre lang="</description></item><item><title>Orta: 凸凹有致的GTK主题</title><link>http://0x3f.org/posts/orta-a-pretty-gtk-theme/</link><pubDate>Tue, 05 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/orta-a-pretty-gtk-theme/</guid><description>如果说Orta最大的特点，就是凸凹有致。它的主要组件都突出了这个特点，加上对细节的表现很细致，整个主题给人以很舒服的感觉。
Posted via UltraBlog.vim.</description></item><item><title>在非GNOME环境中使用TweetDeck</title><link>http://0x3f.org/posts/howto-use-tweetdeck-out-of-gnome/</link><pubDate>Tue, 05 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-use-tweetdeck-out-of-gnome/</guid><description>在非GNOME桌面环境中，运行TweetDeck会报如下错误：
Ooops, TweetDeck can't find your data TweetDeck is having trouble using some of your passwords that are stored securely on your machine. Clicking submit will clear this data so that you continue to use TweetDeck.
原因是Adobe Air将密码保存在GNOME的Keyring里，而此时Air找不到GNOME的相关守护进程gnome-keyring-daemon。
使用如下脚本启动之：
```bash #!/bin/bash GNOME_KEYRING=`pidof gnome-keyring-daemon` GNOME_DESKTOP_SESSION_ID=$GNOME_KEYRING /usr/bin/tweetdeck &amp; ``` Posted via UltraBlog.vim.</description></item><item><title>Soothe: 柔和细致的GTK主题</title><link>http://0x3f.org/posts/gtk-theme-soothe/</link><pubDate>Sat, 02 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/gtk-theme-soothe/</guid><description>Soothe给人的感觉是细致而且柔和，不易于产生视觉疲劳，这正对我的胃口。更完美的是，它支持虚线焦点框，对于喜欢使用键盘的Rox-filer重症患者来说很重要。
Posted via UltraBlog.vim.</description></item><item><title>UltraBlog.vim: Ultimate Vim Blogging Plugin</title><link>http://0x3f.org/posts/ultrablog-as-an-ultimate-vim-blogging-plugin/</link><pubDate>Sat, 02 Apr 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ultrablog-as-an-ultimate-vim-blogging-plugin/</guid><description>UltraBlog.vim is yet another Vim blogging script for Wordpress.
The biggest difference between UB and other similar scripts is that UB is an ultimate client, which stores posts locally in an SQLite database, while others just operate remotely. In this way, many things can be done easily by the advantage of local storage and many other utilities, for example, you can search for posts stored in the database with a few keywords by typing a simple command, also you can preview drafts with any of your favorite templates as soon as you want to.</description></item><item><title>解决gVim白边问题的伪方法</title><link>http://0x3f.org/posts/the-fake-way-to-fix-white-gap-of-gvim/</link><pubDate>Mon, 21 Mar 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/the-fake-way-to-fix-white-gap-of-gvim/</guid><description>gVim的窗口大小与行数、列数、字体宽度等都有关系，并不像一般的图形界面一样可以完全地最大化或全屏，如果几个因素组合后与屏幕分辨率不符合，就会在屏幕的左边和底部出现灰色的白边。
这是gVim非常著名的一个问题，它使最大化的gVim窗口显得非常难看。目前仅有一种变通的解决方法，就是把白边部分的颜色设置成和gVim主题背景色一致的颜色：
```bash # 修改~/.gtkrc-2.0，加入如下内容： style "vimfix" { bg[NORMAL] = "#DBDBD2" # this matches my gvim theme 'Normal' bg color. } widget "vim-main-window.*GtkForm" style "vimfix" ``` 由于并非真正地去掉白边，所以只能算是个伪方法。
Windows下的方法见这里。</description></item><item><title>Batch Cat v0.3 Released</title><link>http://0x3f.org/posts/batchcat-v03-released/</link><pubDate>Sun, 20 Mar 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/batchcat-v03-released/</guid><description>Check the plugin&amp;rsquo;s page for more information.</description></item><item><title>使用Vim写博客</title><link>http://0x3f.org/posts/blogging-with-vim/</link><pubDate>Sat, 19 Mar 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/blogging-with-vim/</guid><description>VimRepress是Vim写博客的插件中较新的一个，是久未更新的Vimpress的一个衍生版。
虽然不是所有此类插件中功能最多的一个，但VimRepress非常实用，除包含最常用的几个功能外，还支持Markdown。但是当前版本的VimRepress在转换Markdown格式的字符串到HTML时，是通过直接调用外部命令markdown来实现的，这显然只是针对Linux（及其它类UNIX）系统设计的。
为了使VimRepress支持在Windows下使用Markdown写文章，可以对它做一些改进。
修改VimRepress的源文件blog.vim，在if __name__ == "__main__":这一行的上方加入如下两个函数：
```python def markdown_preview2(): import sys reload(sys) sys.setdefaultencoding('utf-8') import markdown2 as mkd global vimpress_temp_dir if vimpress_temp_dir == '': vimpress_temp_dir = tempfile.mkdtemp(suffix="vimpress") temp_htm = os.path.join(vimpress_temp_dir, "vimpress_temp.htm") html_heads = \ """&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> """ tmp_file = open(temp_htm, 'w') tmp_file.write(html_heads) txt = "\n".join(vim.current.buffer[:]) #txt = unicode(txt,'cp936') tmp_file.write(mkd.markdown(txt)) #tmp_file.write(mkd.markdown("\n".join(vim.current.buffer[:]))) tmp_file.close() webbrowser.open("file://%s" % temp_htm) def markdown_newpost2(): import sys reload(sys) sys.setdefaultencoding('utf-8') import markdown2 as mkd global vimpress_temp_dir if vimpress_temp_dir == '': vimpress_temp_dir = tempfile.</description></item><item><title>修改Vimball默认安装路径</title><link>http://0x3f.org/posts/howto-set-the-default-vimball-install-path/</link><pubDate>Sat, 19 Mar 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-set-the-default-vimball-install-path/</guid><description>在Windows下，我希望把vba文件安装到$VIM/vimfiles目录下，而不是用户主目录中。
Vim在安装vba文件时默认从$VIMRUNTIME中取出第一个路径作为安装路径，使用如下命令查看当前设置：
```vim :echo &amp;rtp ``` 在Windows下，Vim默认将用户主目录放在了$VIMRUNTIME的第一个，因此才会将vba安装到用户主目录。
修改方法为在vimrc中加入如下设置：
```vim set rtp-=$HOME/vimfiles ```</description></item><item><title>Dumperor v1.0.0 Released</title><link>http://0x3f.org/posts/dumperor-v100-released/</link><pubDate>Tue, 15 Mar 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/dumperor-v100-released/</guid><description>Check the main page for more information.</description></item><item><title>刷了Oxygen v2.0.1</title><link>http://0x3f.org/posts/flashed-oxygen-v201/</link><pubDate>Sun, 06 Mar 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/flashed-oxygen-v201/</guid><description>上周 Oxygen v2.0 发布之后，感觉还不稳定，忍住了。前两天终于刷上了刚发布的 Oxygen v2.0.1 。
事先直接做了一次完整的擦除，刷完后没发现 XDA 上乱七八糟的问题。用了两天，除了 UI 的变化，没看出来跟以前版本有什么不同，只是仍未实现轨迹球唤醒这点很遗憾。</description></item><item><title>好贵的套啊</title><link>http://0x3f.org/posts/expensive-kindle-cover/</link><pubDate>Mon, 28 Feb 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/expensive-kindle-cover/</guid><description>把淘宝上价格比较靠谱的几家问了个遍，都没有货，估计都是因为价格高，只代购，不存货。最后还是在买Kindle的店等了好几天才搞到了原装黑色皮套，虽然相对已经算是低价，还是十分地肉疼。
无图无真相：</description></item><item><title>Anti Artificial Spam v0.2 Released</title><link>http://0x3f.org/posts/anti-artificial-spam-v02-released/</link><pubDate>Thu, 24 Feb 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/anti-artificial-spam-v02-released/</guid><description>Check the plugin&amp;rsquo;s page for more information.</description></item><item><title>初入Kindle DX Graphite</title><link>http://0x3f.org/posts/got-kindle-dxg/</link><pubDate>Sun, 20 Feb 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/got-kindle-dxg/</guid><description>垂涎已久，昨天终于出手，今天上午就收到了。
把玩了一下自带的系统，用免费的3G网络看Wikipedia，体验不错。中文文件名不能显示，嵌入了中文字体的PDF可以正常显示。买DXG的目的就是为了看计算机类的英文PDF和繁体竖排的扫描版的古籍PDF，所以不折腾，直接装多看系统。
多看果然给力，全中文界面，中文输入法，中文TTS语音朗读，而且支持MP3播放、图片浏览和包括chm、epub在内的多种电子书格式。因为暂时用不上，所以先不深究。连到Arch传PDF，直接自动挂载并弹出Nautilus，没想到对Linux如此友好！
贴了膜，所以有反光，但是只要没有灯光直射，大角度效果依然良好：
来个微距：
以上图片出自G7+Camera360，光线不好，马马虎虎。
缺点。一是不支持触摸操控，加上官方系统古板、笨拙，做一些高级操作是很费力的，好在多看系统在这一点上做得很好。二是PDF翻页的时候速度确实比较慢，还要闪一下屏，不过还可以接受。多看系统也不完美，最要命的是不支持3G网络，要使用3G网络还得切换到官方系统中；另外就是不支持重力感应，文档方向需要手工设置。
齐活了，从此不用再担心长时间在电脑上看OReilly累眼了，也不用发愁中华书局的扫描版史书没法看了。</description></item><item><title>精美的图标主题：Faenza</title><link>http://0x3f.org/posts/icon-theme-faenza/</link><pubDate>Sat, 19 Feb 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/icon-theme-faenza/</guid><description>Faenza Icons Theme是适用于GTK+环境的一套图标主题，风格很漂亮，而且齐全。</description></item><item><title>MySQL升级后执行mysql_upgrade</title><link>http://0x3f.org/posts/execute-mysql-upgrade-after-upgrading/</link><pubDate>Fri, 11 Feb 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/execute-mysql-upgrade-after-upgrading/</guid><description>最近把MySQL从5.1升级到5.5，之后创建存储过程时报如下错误：
ERROR 1548 (HY000) at line 5: Cannot load from mysql.proc. The table is probably corrupted
解决办法是执行如下命令： ```bash mysql_upgrade -p ``` mysql_upgrade是MySQL提供的一个指令，作用是检查MySQL中的各个表与当前版本的数据库是否匹配并尝试修复所有发现的问题。MySQL官方文档中推荐在每次升级后执行一下这个指令。</description></item><item><title>部分无线路由导致Wordpress无法登录</title><link>http://0x3f.org/posts/wordpress-fails-logging-in-with-some-wifi-routers/</link><pubDate>Mon, 31 Jan 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/wordpress-fails-logging-in-with-some-wifi-routers/</guid><description>问题表现为在登录页面输入用户名和密码并点击登录按钮后，Wordpress跳转到登录页面。
解决方法是修改wp-includes/plugable.php中的wp_set_auth_cookie()函数，将下面这行：
1 setcookie($auth_cookie_name, $auth_cookie, $expire, ADMIN_COOKIE_PATH, COOKIE_DOMAIN, $secure, true); 改成：
1 setcookie($auth_cookie_name, $auth_cookie, $expire, SITECOOKIEPATH, COOKIE_DOMAIN, $secure, true); 这一行在这个函数中有两处，是根据php的版本决定执行哪一块，所以应该根据自己的情况修改，或者干脆两处都修改。
在我的tp-link tl-wr841n中发现这个问题，而中兴无线猫中没有这个问题。</description></item><item><title>读完Agile Web Application Development with Yii1.1 and PHP5</title><link>http://0x3f.org/posts/after-reading-agile-web-application-development-with-yii11-and-php5/</link><pubDate>Mon, 24 Jan 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-agile-web-application-development-with-yii11-and-php5/</guid><description>花了两个周末，读完了Agile Web Application Development with Yii1.1 and PHP5，边读边做，受益匪浅。
这本书从零开始细致地讲解了用Yii开发一个项目管理系统TrackStar的全过程，涉及到Yii的大部分主要特性。全书风格简洁凝练，没有过多的占用篇幅的截图，但讲解浅显易懂，可操作性很强，是我看过的Tutorial类的书里面最好的一本。
从这段时间学习Yii的体会中，我觉得在目前的条件下，对于有PHP程序开发基础的人，学习路线应该是：
Yii权威指南→The Yii Blog Tutorial→Agile Web Application Development with Yii1.1 and PHP5</description></item><item><title>Console2：取代cmd.exe的Windows虚拟终端</title><link>http://0x3f.org/posts/console2-as-an-alternative-of-cmd-exe/</link><pubDate>Sat, 22 Jan 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/console2-as-an-alternative-of-cmd-exe/</guid><description>相对于鸡肋cmd.exe，Console2有以下优点：
窗口大小可调整 字体样式可选择 支持多标签 有很方便的选择、复制、粘贴等基本编辑功能 支持自定义快捷键 对经常不得不使用Windows虚拟终端的人来说，以上几个特性足以使人忘掉cmd.exe。其实，Console2本身只是Shell的图形前端，只是在默认情况下它会调用cmd.exe处理用户输入，因此，也可以通过设置使Console2成为Cygwin的前端，只是从这一点上讲，Console2和Mintty相比完全没有优势。</description></item><item><title>Dokan SSHFS：Windows下通过SSH挂载Linux主机为本地分区</title><link>http://0x3f.org/posts/mount-linux-dirs-as-windows-local-partitions/</link><pubDate>Thu, 20 Jan 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/mount-linux-dirs-as-windows-local-partitions/</guid><description>Linux一般使用Samba向Windows共享资源。另一个办法就是使用SSH。
Dokan是一个为Windows提供实现新文件系统的开发库，而Dokan SSHFS是在此基础上实现的挂载SSH通道为本地分区的文件系统。必须先安装Dokan，然后再安装Dokan SSHFS。
如果从安装SSH服务做起，步骤是：
在Linux主机上安装openssh 修改Linux主机的/etc/hosts.allow，加入sshd: ALL，以允许外部访问 启动sshd守护进程 在Windows主机上安装Dokan和Dokan SSHFS 通过SSHFS的图形配置工具挂载SSH通道 这种方式的好处是简单，但是存在安全隐患，不管怎样，公布SSH连接绝非好事，这意味著接入用户可以远程控制Linux主机，尤其是当SSH账户的权限较高时。因此，这种方式只适用于虚拟机或家庭网络，例如对Host-Guests共享支持不佳的KVM虚拟机来说就是个好的选择。即便如此，也要注意相应的Windows主机的安全防范，否则，入侵者可以通过Windows主机做跳板来进入Linux主机。</description></item><item><title>读完《程序员修炼之道》</title><link>http://0x3f.org/posts/after-reading-pragmatic-programmers/</link><pubDate>Tue, 11 Jan 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-pragmatic-programmers/</guid><description>上周日读完了这本The Pragmatic Programmer的中译本，都是经验之谈，有些东西读后受益匪浅，更多的需要时间去体会。
很纠结读的是中译本，但实在买不到原版，非常好奇他们是怎样地殚精竭虑才能想出如此烂俗的译名。</description></item><item><title>Oracle中对LOB字段的操作方法</title><link>http://0x3f.org/posts/oracle-lob-operations/</link><pubDate>Fri, 07 Jan 2011 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/oracle-lob-operations/</guid><description>在Oracle中插入或更新LOB字段时，可以将字符串以如下方式写入SQL语句：
1 insert tbl_lob (fld_lob) values (utl_raw.cast_to_raw(&amp;#39;hello world&amp;#39;)); 这样做的限制是：
因此如果要插入或更新的字符串过长，会导致执行失败。此时应该使用dbms_lob处理LOB相关字段。下面是利用dbms_lob更新一个BLOB字段的存储过程，对CLOB的操作同理：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 create or replace procedure updateblob( ctbl in varchar2, cfld in varchar2, cstr in varchar2, ccond in varchar2 ) is vqry varchar2(1000); vblob blob; vbatch varchar2(2000); vstrlen number; voffset number :=1; vamt number :=2000; begin vstrlen := length(cstr); vqry := &amp;#39;update &amp;#39;||ctbl||&amp;#39; set &amp;#39;||cfld||&amp;#39;=empty_blob() where &amp;#39;||ccond; execute immediate vqry; vqry := &amp;#39;select &amp;#39;||cfld||&amp;#39; from &amp;#39;||ctbl||&amp;#39; where &amp;#39;||ccond||&amp;#39; for update&amp;#39;; execute immediate vqry into vblob; if vstrlen&amp;gt;vamt then while vstrlen&amp;gt;voffset loop vbatch := substr(cstr, voffset, vamt); voffset := voffset+vamt; dbms_lob.</description></item><item><title>darkstat: 网络流量监测工具</title><link>http://0x3f.org/posts/darkstat-as-a-network-discharge-meter/</link><pubDate>Sun, 26 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/darkstat-as-a-network-discharge-meter/</guid><description>darkstat是一个跨平台的网络流量监测工具，可显示最大一个月内操作系统的各项网络流量指标。
具有以下特性：
具有以下不足：
darkstat启动时需要手工指定监视的网络接口，因此需要用根权限启动：
1 sudo darkstat -i eth0 darkstat默认使用667端口提供Web访问，可以用-p参数指定端口：
1 sudo darkstat -i eth0 -p 8080 darkstat的Web用户界面分为Graph、Hosts和Host三部分。Graph是缺省主页，用于显示最近一分钟、一小时、一天和一个月的流量统计直方图，将光标置于任何一个直方条上可查看对应时刻的流量指标：
Hosts界面按主机显示各自的流量统计指标的值：
单击Hosts界面上的IP进入对应主机的Host界面，此界面按TCP/UDP类型显示对应的主机的各端口的网络流量指标的值：
可通过如下命令查看占用指定端口的进程：
darkstat区别于其它流量监测工具的最大的优点就是简单易用，非常适合对流量监测应用不复杂的场景。前段时间公司的一台RHEL服务器因为流量过大多次被网管拔线，后来用darkstat监测到大部分流量被几个UDP端口占去，进而发现原来是服务器被入侵并被安装了一个扫描器SIPVicious。</description></item><item><title>Linux的内存使用机制</title><link>http://0x3f.org/posts/linux-memory-usage/</link><pubDate>Fri, 24 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/linux-memory-usage/</guid><description>在top中，内存使用情况显示为如下格式：
根据内存的使用情况，将内存空间划分为四种类型：已使用（used），未使用（free），缓冲区（buffers）和已缓存（cached）。
“已使用”是指目前正被使用的活跃的内存区域。“未使用”是指当前空闲的内存区域。“缓冲区”是用于存放即将写入存储介质的数据的区域。“已缓存”是指曾因需要而被读入内存、但目前已不被使用的数据。Linux通常会在资源使用完毕后保留一部分数据在内存中而不全部释放，这就是“已缓存”区域，这样当这些数据再次被使用时，系统就可以直接从内存中读取。而“缓冲区”用于将对存储介质的写操作集中进行。因此，“缓冲区”和“已缓存”特性对减少存储介质IO和加速系统运行都具有非常重要的作用。
所以，Linux运行一段时间后，通常看起来空闲内存都很小，其实是因为很大一部分被用作“已缓存”区域，这部分内存会在内存资源紧张时被自动释放，也可以通过如下命令手工释放：
1 echo 1 &amp;gt; /proc/sys/vm/drop_caches</description></item><item><title>Vim中设置关键词识别规则的方法</title><link>http://0x3f.org/posts/howto-set-keyword-identification-in-vim/</link><pubDate>Wed, 22 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-set-keyword-identification-in-vim/</guid><description>在Vim中，关键词是一个至关重要的概念。合理地利用关键词，可以快速地对光标下有特殊含义的字符串进行一系列的操作，例如通过快捷键复制关键词、查询函数定义或文档、在项目中查询所有引用当前函数的地方等等。这对工作效率的提升有极大的帮助。
但我的Vim对PHP文件的关键词识别有问题，在选择函数名的时候总是将函数名后的小括弧一起选入。
Vim使用选项iskeyword设定关键词的匹配规则，使用如下命令查看当前文件类型的关键词规则：
1 set iskeyword 我这里查看PHP文件的规则结果如下：
不明白为什么缺省设置中会有左括弧，在vimrc中加入如下配置取消之：
1 au FileType php set iskeyword-=(</description></item><item><title>Root了Desire并刷了Oxygen</title><link>http://0x3f.org/posts/rooted-desire-and-flashed-oxygen/</link><pubDate>Sun, 19 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/rooted-desire-and-flashed-oxygen/</guid><description>五月末入手 Desire 后一直没有折腾，一是因为时间和精力不够，二也没有迫切的需要。
这次 Google Map 的更新给了我足够的理由，加上 Froyo 原生的“移动到SD”功能已被榨干最后一点油水，于是用 unrEVOked3 很傻瓜地 root 了 Desire ，用 Move2SD Enabler 开启了完全的 App2SD ，用 Market Enabler 化妆潜入米国菜市场安装了 Google Map 5.0 ，最后还启用了 SetCPU 。
后来还是没有把持住，一不做二不休，对原装的 Sense 做了一个 nandroid 备份，刷上了 Oxygen 。 Oxygen 的主题十分的简洁美观，我觉得比 Sense 漂亮：
Oxygen 基于 AOSP ，是改动较少、较接近于官方Android的一个ROM，最大的优点是速度快和稳定性高。这两天使用的感受证明了这两点，尤其是速度，一骑绝尘啊，比 Sense 之流好多了。当然，因为精简，理论上在耗电量上较 Sense 要小，不过我实际感觉如果持续使用的话也好不到哪去，但是待机的话效果还是比较明显，可能跟启用了 SetCPU 也有一定的关系。
开始差点刷了 MIUI ，但是很多人反映有耗电和稳定性的问题。</description></item><item><title>Batch Cat v0.2 Released</title><link>http://0x3f.org/posts/batchcat-v02-released/</link><pubDate>Sun, 12 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/batchcat-v02-released/</guid><description>Check the plugin&amp;rsquo;s page for more information.</description></item><item><title>Vim保存文件时移除尾行换行符的方法</title><link>http://0x3f.org/posts/howto-remove-eof-in-vim/</link><pubDate>Sun, 05 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-remove-eof-in-vim/</guid><description>Vim认为一个文本文件的每一行都应该由一换行符结束，即使文件的最后一行也不例外。这就使得Vim保存过的文本文件在其它文本编辑器中查看时可能会在文件末尾多出一个空行。一般来说，这不是个问题，但对于程序员来说，有时候一些不规范的运行环境或其它组件就要求文件的最后一行不能有换行符，否则就会出莫名其妙的问题，尤其是在Windows环境下最常见。
要在保存文件时不在最后一行添加换行符，最常见、最简单的方法就是：
1 2 :set binary :set noendofline 但是这样做有一个问题，就是会把DOS格式的文件自动转换成UNIX格式，WinSlave们肯定不希望这么做。
因此，可在vimrc中加入如下内容：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 &amp;#34; Save the current buffer as a file with no EOF sign. function! SaveAsNOEOF(filename) let a=getline(1,line(&amp;#39;$&amp;#39;)-1) let b=map(a, &amp;#39;iconv(v:val,&amp;#34;&amp;#39;.&amp;amp;enc.&amp;#39;&amp;#34;,&amp;#34;&amp;#39;.&amp;amp;fenc.&amp;#39;&amp;#34;) . nr2char(13)&amp;#39;) call extend(b, getline(&amp;#39;$&amp;#39;, &amp;#39;$&amp;#39;)) call writefile(b,a:filename, &amp;#39;b&amp;#39;) if a:filename == bufname(&amp;#39;%&amp;#39;) set nomodified endif endfunction &amp;#34; Save the current buffer and get rid of the EOF sign.</description></item><item><title>黄粱一梦</title><link>http://0x3f.org/posts/a-fools-paradise/</link><pubDate>Sat, 04 Dec 2010 17:51:00 +0000</pubDate><guid>http://0x3f.org/posts/a-fools-paradise/</guid><description>昨天晚上放弃了年终聚餐，去看了《黄粱梦》。
一个很老套的故事，耳熟能详，但是经过精心的演绎，加上声、光、电的完美运用，真就给人以耳目一新的感觉。我一直不怎么观注地方戏曲，以往觉得能凑合听听的也就是河南的越调、安徽的黄梅戏等，河北的地方戏也就听说过一个河北梆子，像邯郸的平调落子这样的闻所未闻。《黄粱梦》彻底改变了我对地方戏曲的看法，京剧、昆曲固然高雅，但假如也加入魔术、杂技、俚语甚至RAP，肯定会让人觉得不伦不类，地方戏曲的长处就在于灵活多变，不拘泥形式，能够很快地针对时代变化作出改进，如果分寸拿捏得好，就能不断推陈出新。
整场戏用两个小时的时间表现了卢生一梦中的一生，故事情节十分紧凑，每折都用不同的场景、不同的唱腔、不同的表现形式，让人眼花缭乱，一改传统戏剧连篇累牍的大段说词，整场看下来从未觉得枯燥乏味，很适应时下流行的快餐文化。在故事情节上，《黄粱梦》并没有跳出惩恶扬善、因果报应的老套，当然，一味地追求突破未见得是好事。
虽然时间不长，但是整场戏有很多地方让人印象深刻，比如有句意味深长的戏词“邯郸道长，人生路短”，还有那句雷倒了无数人的“现在哪里还有什么纯真美女啊”。当然，最让人意犹未尽的还是这段高潮的“贪官舞”：</description></item><item><title>Hope GTK：平静、柔和、细腻的主题</title><link>http://0x3f.org/posts/gtk-theme-hope/</link><pubDate>Sat, 04 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/gtk-theme-hope/</guid><description>Hope GTK是套漂亮的冷色调的GTK主题，色调过渡柔和，细节表现得也很好，整体给人以平静的感觉。</description></item><item><title>virtio可能导致windows蓝屏</title><link>http://0x3f.org/posts/virto-may-breakdown-windows/</link><pubDate>Sat, 04 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/virto-may-breakdown-windows/</guid><description>前段时间突然发现kvm中的windows在启动时蓝屏，开始以为是kvm新版本的bug，后来发现如果不启用虚拟机硬盘的virtio就不会出现蓝屏。
于是下载了最新版的virtio，然而更新后，蓝屏的问题并没有解决，所以目前只能暂时不使用virtio。不过网卡的virtio是没有问题的。</description></item><item><title>开启自定义GTK程序菜单快捷键的方法</title><link>http://0x3f.org/posts/howto-enable-hotkey-for-gtk-menus/</link><pubDate>Sat, 04 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-enable-hotkey-for-gtk-menus/</guid><description>基于GTK的程序菜单本身支持通过在焦点所在的菜单项上按下组合键来定义该菜单项的快捷键，但默认并不开启。
一般来说，对于支持X的会话管理的桌面环境，可以通过修改相应的设置来开启这个功能：
对于不支持会话管理的桌面环境，可在~/.gtkrc-2.0中添加如下配置内容：</description></item><item><title>screen曰：$TERM too long - sorry.</title><link>http://0x3f.org/posts/screen-is-sorry-for-term-being-too-long/</link><pubDate>Wed, 01 Dec 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/screen-is-sorry-for-term-being-too-long/</guid><description>最近rxvt-unicode-256color的一次更新触发了screen的一个缺陷。新的版本将默认的环境变量$TERM由rxvt-256color改成了rxvt-unicode-256color，这导致在rxvt中启动screen时报这样的错误：
虽然可以在.Xdefaults中指定$TERM的值，但是据说这样会导致rxvt加载错误的terminfo，并导致终端的颜色由256色降低到88色。另外虽然按照同样的说法，可以在screenrc中设置$TERM的值，但是不知道是我写的格式不对还是什么原因，无效。
最终还是设了个别名：
1 2 3 # vi ~/.bashrc alias screenx=&amp;#39;export TERM=screen-256color &amp;amp;&amp;amp; screen&amp;#39;</description></item><item><title>Oxygen Refit：适用于xfce的Oxygen图标集</title><link>http://0x3f.org/posts/oxygen-iconset-fit-for-xfce/</link><pubDate>Mon, 29 Nov 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/oxygen-iconset-fit-for-xfce/</guid><description>Oxygen是KDE桌面环境中的一套著名的图标集，但是据说基于GTK的桌面环境如GNOME、XFCE等对其支持得不好，我这里在GNOME下倒没发现问题，不过在XFCE下文件夹的图标显示的是缺省的图标，不好看。
Oxygen Refit是针对GTK的桌面环境修改的Oxygen图标集，在XFCE下可以正常显示，但是缺点是最大分辨率只有48×48，不能显示较大的高清图标。Archlinux下可以安装AUR中的oxygenrefit2-icon-theme。</description></item><item><title>WinMerge：开源的差异比较工具</title><link>http://0x3f.org/posts/winmerge-as-a-free-diff-tool/</link><pubDate>Mon, 29 Nov 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/winmerge-as-a-free-diff-tool/</guid><description>WinMerge是开源的差异比较工具，只运行于Windows平台。
具有以下实用特性：
具有以下不足：
使用时的注意事项：
相较于商业的Beyong Compare等工具，WinMerge在操作的直观度和功能细节上存在不足，但是在差异比较的主要功能上，WinMerge完全可以胜任日常工作。同时，由于免费，WinMerge可以作为这些商业软件很好的替代工具。
后记：这些天越来越对使用未授权的商业软件感到不安，于是开始寻找这些工具的开源、免费替代品。</description></item><item><title>升级fcitx到4.0</title><link>http://0x3f.org/posts/upgraded-to-fcitx4/</link><pubDate>Sat, 20 Nov 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/upgraded-to-fcitx4/</guid><description>虽然是个大版本，但4.0在实际功能上并没有太大的进步。新版本相对于3.x增加的主要特性是：
最主要的特性只有前两个，可见fcitx 4.0只是这个项目涅槃后的一个新的起点，象征意义大于实际意义，尤其对于码表输入法用户来说是这样。三年前我就说过，fcitx在用户造词上有个致命缺陷，就是对于多音字它总是使用字母表中声母靠前的编码，对于音码或者音形码输入法来说，这样造出来的词的编码经常会是错的，更糟糕的是用户还不容易自行修改词组编码。三年后的今天，新版本并没有解决这个问题。
此外，需要注意的是，新版本对界面和易用性的改进也带来一些负面的影响，fcitx不再是当年以轻巧著称的那只小企鹅了，在我这里，它的内存占用达到了26M，所幸反应速度仍然很快。
三年前，由于众所周知的原因，fcitx的路线图显得非常混乱，几个新版本都非常不稳定，所以我不再使用源中的版本，转而编译安装了新版本中相对稳定的黑色星期五版，不知不觉中三年过去了，想到一直用著这个版本就这么过来了，很感慨。要卸载编译安装的程序就得用源码重新configure一下再make uninstall，所幸还能在这里找到这个版本。
Archlinux下安装AUR中的fcitx-config时报如下错误：
需要修改/etc/makepkg.conf，使wget在下载源码时不做安全验证：
新版本的稳定性不如黑色星期五版，如果把简繁转换热键修改为ALT+J，使用时会导致fcitx崩溃。加之实际功能的改进不大，所以是否升级就无可无不可了。</description></item><item><title>调整Arch的磁盘分区</title><link>http://0x3f.org/posts/adjust-disk-partitions-in-archlinux/</link><pubDate>Sat, 13 Nov 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/adjust-disk-partitions-in-archlinux/</guid><description>简述
目标：移除Windows 7，整块硬盘完全分配给Archlinux。
原分区结构：
分区类型挂载文件系统容量 /dev/sda1主分区，启动分区Windows 7的安装分区ntfs30G /dev/sda2扩展分区--- /dev/sda5逻辑分区Windows的D盘ntfs40G /dev/sda3主分区/ext378G /dev/sda4交换分区swap-2G 调整后分区结构：
分区类型挂载文件系统容量 /dev/sda1主分区，启动分区/ext330G /dev/sda2主分区/homeext3120G /dev/sda3交换分区swap-2G 步骤
```bash sudo grub-install /dev/sda ``` ```bash sudo vi /boot/grub/menu.lst ``` # (2) Arch Linux title Arch Linux root (hd0,0) kernel /boot/vmlinuz26 root=/dev/sda1 resume=/dev/sda4 ro acpi_osi="Linux" initrd /boot/kernel26.img 安装U盘启动的Puppy Linux ```bash mkfs.ext3 /dev/sda1 ``` ```bash # 先点击桌面上sda1和sda3的盘符，使之被挂载到/mnt下 cd /mnt/sda3 cp -a * /mnt/sda1 ``` ```bash vi /mnt/sda1/etc/fstab ``` # 修改必要的挂载点，如将根目录的挂载点由sda3改为sda1： /dev/sda1 / ext3 defaults,noatime 0 1 重启系统，并引导到新分区上的系统中 ```bash sudo grub-install /dev/sda ``` 重启并进入Puppy，使用gparted删除除sda1以外的所有分区，然后在空闲的空间上创建ext3格式的主分区sda2和交换分区sda3 ```bash cp -a /mnt/sda1/home/* /mnt/sda2 rm -rf /mnt/sda1/home/* ``` ```bash vi /mnt/sda1/etc/fstab ``` # 将fstab中磁盘分区的挂载点配置为如下内容 /dev/sda1 / ext3 defaults,noatime 0 1 /dev/sda2 /home ext3 defaults,noatime 1 2 /dev/sda3 swap swap defaults 0 0 ```bash vi /mnt/boot/grub/menu.</description></item><item><title>制作Puppy Linux的启动U盘</title><link>http://0x3f.org/posts/howto-create-bootable-udisk-for-puppylinux/</link><pubDate>Thu, 11 Nov 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-create-bootable-udisk-for-puppylinux/</guid><description>Puppy Linux的体积只有一百多兆字节，但图形界面实现得很完备，也包含了很多短小精悍的工具，安装和使用都很方便，非常适合用来做日常维护工具盘。
Puppy自带了傻瓜式的启动U盘制作工具，但官方只提供整个发行版的ISO镜像下载，通常需要刻录成光盘并引导系统启动后才可以继续将Puppy安装到U盘。其实也可以不刻录光盘，而是把Puppy安装到硬盘上。
Puppy本身封装得很好，对软硬件环境的要求不高，完全可以安装到一个独立的目录中而不影响其它操作系统。本文基于Linux环境下通过GRUB引导的前提，Windows下应该可以通过GRUB4DOS引导。
挂载Puppy的ISO镜像到一个目录： 1 sudo mount -o loop puppy.iso /media/puppy 复制镜像中的所有文件到根目录下的puppy目录： 1 2 sudo mkdir /puppy sudo cp -a /media/puppy/* /puppy 修改GRUB的引导文件，加入Puppy的引导项： 1 sudo vi /boot/grub/menu.lst 重启系统并启动到Puppy
使用桌面上的Setup中的Puppy Universal Installer制作启动U盘。不过虽然这是官方推荐的制作工具，但我的杂牌U盘无论如何也不能引导系统，最后使用另一个备选的工具“BootFlash USB Installer”的USB-HDD模式制作成功。</description></item><item><title>搭建自己的Twitter API</title><link>http://0x3f.org/posts/howto-setup-twitter-api-of-your-own/</link><pubDate>Fri, 01 Oct 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-setup-twitter-api-of-your-own/</guid><description>从2010年9月起，twitter只支持第三方应用程序使用oauth方式登录。要使用第三方API程序，就必须先在twitter中创建应用程序。
申请地址如下：
https://twitter.com/apps/
填写信息时，Application Type应该选Browser，Default Access type应选Read &amp;amp; Write，User Twitter for login不选，其它随便。
创建成功后，该应用程序的Consumer key和Consumer secret在部署API时一般都要用到。
gtap使用python开发，可部署在appspot上。
部署前，先修改app.yaml，填写在appspot上创建的应用程序的ID，并使用符号#注释掉secure: always，因为GFW屏蔽了appspot的https。
然后修改main.py，填写Consumer key和Consumer secret。
最后安装App Engine SDK，使用其中的appcfg.py上传gtap文件夹：
1 appcfg.py update gtap 在浏览器中（此时应使用可以翻墙的代理）访问在appspot上创建的应用程序的URL地址（如：http://xxx.appspot.com ），在打开的页面中点击Sign in with Twitter，然后在跳转到的页面中点击Allow按钮。在跳转到的页面上修改API的密码（据说有些客户端要求API的密码与Twitter的密码一致）。
在客户端中使用API的地址如下：
其中，xxx是appspot应用程序的ID，末尾的斜杠必不可少。
twip使用php开发，应部署在支持PHP的服务器上。
首先将config-example.php改名为config.php，然后修改其中的OAUTH_KEY/OAUTH_SECRET/BASE_URL三项内容，前两项分别是Consumer key和Consumer secret，base_url应该是twip部署到服务器上后的URL地址（如http://myblog.com/twip/ ，最后的斜杠必不可少）。
然后在浏览器中访问上面的base_url，选择使用o模式，API地址会在最后的页面中输出。</description></item><item><title>目录与文件的存储空间占用分析工具</title><link>http://0x3f.org/posts/storage-space-analysing-tools/</link><pubDate>Fri, 01 Oct 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/storage-space-analysing-tools/</guid><description>du是命令行中用于查看目录和文件的空间占用情况的指令。
常用示例：
1 du -h /tmp/logs ncdu为du提供了一个基于NCurses的命令行用户界面，并能够按照多种条件对分析结果进行排序，它大大简化了du指令的使用。
baobab使用基于GTK的图形用户界面，突出特点是可以分析远程目录。</description></item><item><title>中秋后记</title><link>http://0x3f.org/posts/note-after-the-mid-autumn-day/</link><pubDate>Sun, 26 Sep 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/note-after-the-mid-autumn-day/</guid><description>可以让回忆放肆一些。
中秋的晚上公司餐厅放电影，《邻家特工》和《越光宝盒》，本来打算看完《越光》就走，结果先放的是《特工》。也好，复习一下，好在这片子不错，再看也挺有意思。《越光》纯属烂片，但是如今看看这种不费脑子的东西也变得无可无不可。免费的零食很烘托气氛，唯一的惊喜是居然还有罐装啤酒。
回到住处的当夜就发布了Dumperor。其实这个东西很早就开始做了，起初的目的是为了判断数据库脚本从SQL Server迁移到Oracle和MySQL是否成功。单纯的迁移只能保证修改后的脚本在这两个数据库中执行不会报错，但究竟是不是该执行的东西都成功执行了，一般很难判断，尤其是那帮家伙总是在发版前一两天才告诉我要迁移脚本，那么多不规范的语句，能保证不报错就已经不错了，遑论没有遗漏。所以就著手做一个数据库表结构和数据的导出工具，这样只需用diff工具比较标准数据库和测试数据库导出的脚本就可以了。
从一开始我就决定不使用公司产品的一行代码。其实做这个东西最大的麻烦不是来自来自于如何查询不同的数据库的表结构，而是数据库抽象层。如果要白手起家搞个抽象层的话，我想可能代码量比Dumperor本身都大，于是选择了Yii框架。后来在Dumperor基本成型时又觉得为了仅仅使用最基本的数据库查询功能就捆绑这么大一个框架，有点搞笑，谢天谢地，我终于花时间学了PDO。
中秋节放假的第二天，开始读Google Code上关于Chrome扩展开发的官方文档。这事源于本尊被另一个Chrome扩展作者无视了。
一直强迫自己喜欢上Firefox，但都败了。本来对Opera充满希望，但是从10.0起它带给我的除了失望就是更多的失望，这个东西的发展就像它的国家的位置一样怪异，你永远不能以常人的思维去臆测Opera的开发者，他们就像一群母系氏族社会的娘们儿一样整天跟著感觉走。
于是不知道什么时候我就开始经常用Chrome了，前段时间开始用一个扩展辅助MLDonkey下载。这个东西会在工具栏里添加一个图标，唯一的作用就是打开选项设置页面设置那个也许这辈子都只需要设置一次的MLDonkey的URL地址。于是我给那个扩展的作者写了封邮件，那家伙居然到现在都没有回复。
所以本尊决定无视他了。太祖武皇帝的那句丰衣足食的圣谕真是至理名言，读完文档我就发现这个扩展完全应该用Chrome的Page Action取代Browser Action，简单地说就是当且仅当本页面中包含有可下载的资源时才在地址栏中显示一个图标，而不应该总是在工具栏占用一个图标的位置。
随后要做的就是用AJAX请求取代弹出新窗口的方式添加下载任务，我嫌每次添加一个下载任务后都要关闭一个弹出窗口太麻烦。我的目标是用AJAX请求将要下载的任务在后台传递给MLDonkey，并用Chrome的Desktop Notification功能弹出桌面提示对话框显示结果状态。这样很优雅。
但是实际去做的时候问题来了，虽然Chrome本身允许扩展使用跨域的AJAX，但是至少在和MLDonkey进行通讯时，无论成功与否，得到的返回信息都是空的，状态码也都是0。这个问题浪费了我几乎一整天的时间，最终我决定用AJAX的请求响应时间来判断失败或成功，因为一次AJAX请求响应过程在MLDonkey没启动的时候耗费的时间一般会比正在运行时要长。这就要求每个用户都要根据自己的情况设定合适的超时时间。为了避免麻烦，最后还是实现了通过弹窗添加下载任务的模式，毕竟这个东西总是可靠的。
要发布的时候发现如今在Chrome Extension Gallery中发布扩展居然要收费了，虽然只是一次性的。最后花了八两银子注册了Google Checkout账户，又付了五刀美帝币，才把DonkeyBuddy传上去。发布个免费扩展还得倒贴，本尊也太背了吧。
节后收到了Dell sk8115键盘、HP百灵无线鼠标和Nokia BH-105蓝牙耳机，sk8115是用来让我的纤纤玉手撒野的，百灵鼠是用来接替即将退役的雷柏7100的，而BH-105和我的小七搭配得天衣无缝。
很久没有安静地整理一下头绪了，感谢我那价值四十两银子的Dell sk8115，它让我显得如此的语无伦次。</description></item><item><title>DonkeyBuddy: A Chrome Extension for MLDonkey</title><link>http://0x3f.org/posts/donkeybuddy-a-chrome-extension-for-mldonkey/</link><pubDate>Fri, 24 Sep 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/donkeybuddy-a-chrome-extension-for-mldonkey/</guid><description>DonkeyBuddy is an extension for Google Chrome Browser. It's intended to make life easier when you add downloading tasks to MLDonkey.
Features Users can choose how to interact with MLDonkey, either by AJAX or popup windows. The AJAX mode interacts with MLDonkey by AJAX requests and uses desktop notifications to show the results, so it won't bother you by popping up windows and forcing you to close them. The popup-window mode interacts with MLDonkey by popping up a window and displays results in it, this is always a reliable way to add downloads but annoying.</description></item><item><title>Dumperor: Multi-Database Dumping Toolkit</title><link>http://0x3f.org/posts/dumperor-as-a-multidb-dumping-tool/</link><pubDate>Thu, 23 Sep 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/dumperor-as-a-multidb-dumping-tool/</guid><description>Dumperor is a multi-database dumping toolkit. It dumps table structures and data from databases, and generates CREATE-TABLE SQL statements for table structures or INSERT SQL statements for data.
Part of the original intention for developing Dumperor is to check whether a migration of SQL scripts from one database to another is successful, you know, by comparing the differences between two files, one dumped before executing scripts and the other after.</description></item><item><title>Arch不完全降温笔记</title><link>http://0x3f.org/posts/howto-cool-archlinux-down/</link><pubDate>Sat, 18 Sep 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-cool-archlinux-down/</guid><description>主要目标是解决我的X200在Archlinux（本文内容均基于此发行版）下CPU温度长期居高不下的问题，基本原理是使用cpufrequtils根据CPU负载状况自动变频，和使用laptop-mode-tools实现其它硬件设备的自动节能。最直接的效果是省电，从而延长电池的使用时间，产生的附加影响就是CPU及笔记本整体的温度下降。我几乎不用电池，所以节能不是我的关注点，但降温却是我所欲也。
首先安装cpufrequtils，并将acpi-cpufreq、cpufreq_ondemand、cpufreq_powersave加入rc.conf的MODULES中，使系统在启动时加载这些模块。
默认情况下，内核采用cpufreq的performance模式，以获得最高性能，现在用ondemand模式使CPU根据负载状况自动变频。修改/etc/conf.d/cpufreq文件，将governor项设为ondemand。
将cpufreq加入rc.conf的DAEMONS中，此守护进程会在系统启动时读取配置文件/etc/conf.d/cpufreq中的设置项，故上面设置的ondemand模式会在系统启动时得以自动生效。
然后安装laptop-mode-tools，并修改/etc/laptop-mode/laptop-mode.conf，打开所有的三个以ENABLE开头的选项，和所有以CONTROL开头的选项。
将laptop-mode加入rc.conf的DAEMONS中，使其随系统自动启动。
修改/etc/laptop-mode/conf.d/usb-autosuspend.conf，此配置文件用来配置laptop-mode如何管理USB设备的电源使用。我希望在任何时候都启用USB设备自动节能，但需要把我的无线鼠标排除在外，故作如下配置：
```bash # 启用USB设备自动挂起 CONTROL_USB_AUTOSUSPEND="auto" # 将不使用自动挂起的USB设备的ID填在下面，使用lsusb命令查看ID AUTOSUSPEND_USBID_BLACKLIST="04fc:05dc" # 总是启用USB自动挂起 BATT_SUSPEND_USB=1 LM_AC_SUSPEND_USB=1 NOLM_AC_SUSPEND_USB=1 ``` 类似地，修改intel-hda-powersave.conf，此配置文件用于配置laptop-mode如何管理Intel HDA音频芯片的电源使用。我希望一直启用声卡自动节能，并适当地将自动进入节电模式的空闲时间增加到30秒，故配置如下：
```bash # 启用Intel音频芯片电源管理 CONTROL_INTEL_HDA_POWER="auto" # 总是启用 BATT_INTEL_HDA_POWERSAVE=1 LM_AC_INTEL_HDA_POWERSAVE=1 NOLM_AC_INTEL_HDA_POWERSAVE=1 # 适当地设置声卡进入节电模式的超时时间 INTEL_HDA_DEVICE_TIMEOUT=30 ``` 类似地，修改intel-sata-powermgmt.conf，启用sata硬盘接口的电源管理。由于我用Blueman控制蓝牙设备，一般不用时都将其关闭，同时经常使用wifi，故蓝牙和无线网卡均未作配置。
最后，关闭conky,Firefox和Chromium，powertop显示conky是个很吵闹的东西，关掉它可以使Wakeups-from-idle per second的值下降很多，另外Chromium和Firefox也是耗电大户。
在此之前，系统空闲时CPU温度一般是50多度，普通使用时一般在60多度，如果开了kvm虚拟机会达到60至90度间。经过以上设置，系统空闲时CPU温度一度下降到39度，即使开了虚拟机，一般也可维持在50到80度间。
另外，对于以上内容，我还有些没搞明白的地方和要补充说明的东西：
虽然将laptop-mode加入rc.conf且已随系统启动，但使用命令“cat /proc/sys/vm/laptop_mode”查询得到的结果仍然是0，也就是说没有自动启用laptop-mode，必须使用命令“sudo /etc/rc.d/laptop-mode restart”手动重启才行。目前没有找到解决办法。 虽然启用laptop-mode接管声卡电源管理，但没找到查看是否生效的方法，于是在/etc/rc.local中加入命令“echo 1 &amp;gt; /sys/module/sndhdaintel/parameters/power_save”以强制声卡节电。 Intel的powertop是个好东西，用它可以查看哪些进程最影响CPU节能。我们优化的标准之一就是使powertop中显示的“Wakeups-from-idle per second”尽可能地减少。powertop的另一个特点就是通过自动检查当前系统中电源使用的配置情况给出优化的建议，这是个很贴心的功能。 鉴于目前存疑较多并将继续尝试，所以在标题中特别注明“不完全”三个字……
参考 http://itgen.blogspot.com/2009/03/energy-management-in-linux.html http://www.ibm.com/developerworks/cn/linux/l-cpufreq-1/index.html http://www.lesswatts.org/</description></item><item><title>使用热键切换Vim的QuickFix窗口打开状态</title><link>http://0x3f.org/posts/howto-toggle-quickfix-in-vim-using-hotkeys/</link><pubDate>Fri, 10 Sep 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-toggle-quickfix-in-vim-using-hotkeys/</guid><description>QuickFix窗口只有打开和关闭的命令，而使用一个热键来切换打开状态可以减少热键资源的浪费，使用也更方便。
从这里找到使用自定义函数完成此功能的方法：使用一个全局变量记录QuickFix窗口的打开状态，从而判断是应该关闭还是打开。但其提供的函数存在状态同步的问题，假如在QuickFix窗口中使用“:q”退出窗口，此方法将不能正常工作。评论中给出了很好的解决方法，但其提供的代码有些小问题，修改之后如下：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 nmap &amp;lt;leader&amp;gt;co :QFix&amp;lt;CR&amp;gt; nmap &amp;lt;leader&amp;gt;ct :call QFixToggle(1)&amp;lt;CR&amp;gt; command! -bang -nargs=? QFix call QFixToggle(&amp;lt;bang&amp;gt;0) function! QFixToggle(forced) if exists(&amp;#34;g:qfix_win&amp;#34;) &amp;amp;&amp;amp; a:forced != 0 cclose else if exists(&amp;#34;g:my_quickfix_win_height&amp;#34;) execute &amp;#34;copen &amp;#34;.g:my_quickfix_win_height else copen endif endif endfunction augroup QFixToggle autocmd! autocmd BufWinEnter quickfix let g:qfix_win = bufnr(&amp;#34;$&amp;#34;) autocmd BufWinLeave * if exists(&amp;#34;g:qfix_win&amp;#34;) &amp;amp;&amp;amp; expand(&amp;#34;&amp;lt;abuf&amp;gt;&amp;#34;) == g:qfix_win | unlet!</description></item><item><title>WordPress Plugin: Batch Cat</title><link>http://0x3f.org/posts/wp-batchcat/</link><pubDate>Sat, 04 Sep 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/wp-batchcat/</guid><description>Batch Cat is intended to help users change categories of posts in bulk.
The main features are:
As usual, upload the folder of Batch Cat to the wordpress plugin directory, activate it then.
You can perform operations in the page which lies in Tools-&amp;gt;Batch Cat in the admin panel.
To alter settings of this plugin, go to Settings-&amp;gt;Batch Cat Settings.
Batch Cat is now hosted in the wordpress plugin repository:</description></item><item><title>读完《WordPress Plug-in Development》</title><link>http://0x3f.org/posts/after-reading-wordpress-plug-in-development/</link><pubDate>Sun, 29 Aug 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-reading-wordpress-plug-in-development/</guid><description>花了两天时间读完了《WordPress Plug-in Development》，通过实例讲解，很细致，适合用来入门，当然，深度和广度都有限。</description></item><item><title>批量下载视频的BASH脚本</title><link>http://0x3f.org/posts/a-bash-script-downloading-videos-in-batch/</link><pubDate>Sat, 28 Aug 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/a-bash-script-downloading-videos-in-batch/</guid><description>两周前为了批量下载某视频网站中的电视剧，写了个BASH脚本。将电视剧列表页面的URL地址作为唯一参数传给脚本，然后就会把所有视频下载到当前目录下，并自动重命名，同时生成一个M3U格式的播放列表。
由于在线视频不支持断点续传，所以对于单个视频来说无法实现。但对于整个批量下载任务来说，实现了宏观上的断点续传，已经下载的视频不会被重复下载。由于有些视频网站会在午夜更改视频地址，所以这一点很有用。
主流视频网站应该是都支持的，我只测试了我下载电视剧的网站，不支持的都是非主流的！
唯一可能需要注意的依赖是PHP，必须安装后才能使用。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 #!</description></item><item><title>启动GVim时自动最大化窗口的方法</title><link>http://0x3f.org/posts/howto-auto-maximize-gvim-at-startup/</link><pubDate>Wed, 25 Aug 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-auto-maximize-gvim-at-startup/</guid><description>根据帮助文档，gvim在windows下的最大化是通过模拟打开窗口菜单并点击最大化菜单项实现的，而在Linux下的方法较为灵活。
下面的方法是在vim中通过调用wmctrl实现最大化的方法：
1 2 3 4 5 6 7 8 9 if has(&amp;#39;win32&amp;#39;) au GUIEnter * simalt ~x else au GUIEnter * call MaximizeWindow() endif function! MaximizeWindow() silent !wmctrl -r :ACTIVE: -b add,maximized_vert,maximized_horz endfunction 当然也可以通过配置窗口管理器规则实现自动最大化，但上面的方法更灵活。</description></item><item><title>InstallShield在MySQL和Oracle中执行SQL脚本的方法</title><link>http://0x3f.org/posts/howto-run-sql-scripts-in-mysql-oracle-within-installshield/</link><pubDate>Tue, 24 Aug 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-run-sql-scripts-in-mysql-oracle-within-installshield/</guid><description>InstallShield已经内建了对MySQL和Oracle的支持。但是这个功能是通过ODBC实现的，它对SQL脚本的格式要求非常严格，因此已经通过官方客户端测试的脚本在IS中执行时往往就会报错。
一般来说，数据库脚本只保证通过官方客户端测试即可，同时维护一份供IS执行的脚本费时费力。因此，考虑安装程序对两数据库的支持通过官方客户端实现。
function InstallMySQLComponent(szComponent) NUMBER nResult; STRING szServer,szDB,szUser,szPassword,sCMD,sOPT,sResult1,sResult2,svLine,sMsg,sPath; NUMBER nvFileHandle,nvCount; LIST listStatus; begin sMsg = &amp;#39;安装&amp;#39;+szComponent+&amp;#39; ...&amp;#39;; SdShowMsg(sMsg, TRUE); // source命令不认识windows路径中的反斜杠，故将SRCDIR中的反斜杠替换成斜杠 sPath = SRCDIR; StrReplace(sPath, &amp;#39;\\&amp;#39;, &amp;#39;/&amp;#39;, 0); // Fetch database connection information SQLRTGetConnectionInfo( &amp;#39;mysql&amp;#39;, szServer, szDB, szUser, szPassword ); sCMD = WINSYSDIR^&amp;#39;cmd.exe&amp;#39;; sOPT = &amp;#39; /c &amp;#39;+SRCDIR^&amp;#39;mysql.exe -h&amp;#39;+szServer+&amp;#39; -u&amp;#39;+szUser+&amp;#39; -p&amp;#39;+szPassword+&amp;#39; -D&amp;#39;+szDB; sOPT = sOPT+&amp;#39; -e &amp;#34;source &amp;#39;+sPath^szComponent+&amp;#39;.sql&amp;#34; &amp;gt; &amp;#39;+SRCDIR^&amp;#39;dbstatus.txt 2&amp;gt;&amp;amp;1&amp;#39;; // Execute the script associated with the given component in database nResult=LaunchAppAndWait(sCMD, sOPT, WAIT|LAAW_OPTION_HIDDEN); if (nResult &amp;lt; 0) then MessageBox(&amp;#39;Failed installing &amp;#39;+szComponent+&amp;#39; !</description></item><item><title>使Thinkpad的静音按钮能被识别的方法</title><link>http://0x3f.org/posts/howto-make-thinkpad-mute-button-detected-on-linux/</link><pubDate>Mon, 09 Aug 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-make-thinkpad-mute-button-detected-on-linux/</guid><description>我的型号是X200，问题表现为在GNOME或XFCE下静音按钮无效，使用xev也捕获不到输入信号，而音量增加和减小按钮可以正常使用且有OSD。
解决办法是在grub的启动菜单中，给内核加上参数acpi_osi=“Linux”，如：
1 2 3 4 5 # (0) Arch Linux title Arch Linux root (hd0,2) kernel /boot/vmlinuz26 root=/dev/sda3 resume=/dev/sda4 ro acpi_osi=&amp;#34;Linux&amp;#34; initrd /boot/kernel26.img 从查到的资料看，acpi_osi参数是用来指定操作系统接口的，据说有些硬件都只针对Windows做了测试或优化，对于这些硬件，如果将内核的操作系统接口指定为Linux，则有可能会出问题。所以内核从2.6.23版本开始，此参数的默认值被改成了“!Linux”，以保证更广泛的兼容性和稳定性。
而根据这里的说法，thinkpad一直以来在对Linux的兼容程度上有很好的口碑，故可以放心添加这个参数。
另外，xfce下使用OSD需要安装xfce4-volumed。</description></item><item><title>swfdec：简单好用的Flash播放器</title><link>http://0x3f.org/posts/swfdec-as-a-slim-flash-player/</link><pubDate>Sun, 01 Aug 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/swfdec-as-a-slim-flash-player/</guid><description>早在keke童鞋的博客上见过，直到今天下载了个flash视频教程要看时才想起来，毕竟已经不是几年前Flash很火的时候了，为了降低CPU占用，我连Chromium的Flash插件都禁用了。
使用后的感觉就是简单实用，有暂停，有快进，能调进度，功能一样不多，一样不少。
要装两个包，swfdec是解码包，swfdec-gnome是播放器。
http://swfdec.freedesktop.org</description></item><item><title>TTL线在Linux下的用法</title><link>http://0x3f.org/posts/usage-of-ttl-wire-on-linux/</link><pubDate>Sun, 18 Jul 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/usage-of-ttl-wire-on-linux/</guid><description>虽然由于我的H108B没有TTL引脚而无法通过TTL线登入猫的BusyBox系统，但TTL线在Linux下的使用方法仍然值得一叙，因为除此之外，它还有较为广泛的用途，例如为路由器刷OpenWRT系统等等。
TTL转USB端子是目前较为常见的此类设备，这得益于它的简单易用和便携性。在这类设备上最常见的就是台湾的Prolific Technology生产的PL2303：
这种芯片的驱动已被编译进Linux内核，如果使用的是较新版本的内核，则使用该芯片的TTL转USB端子会被自动识别，通常为/dev/ttyUSB0设备，使用lsusb命令可以查看：
将四根杜邦线连接到TTL转USB插头上，并接入相应设备的对应引脚。同一根线两端连接的引脚必须对应，另外，VCC引脚不能接线，否则会烧坏TTL转 USB芯片。
在计算机上使用串口通讯程序进行操控，常见的串口通讯程序有：minicom，microcom，picocom，tinyserial，xgcom。
以minicom为例，进入minicom的设置界面：
先设置默认的通讯设备为ttyUSB0并设置硬件流控制（Hardware Flow Control）为No：
保存为缺省设置：
启动minicom：
理论上说，此时即可和设备进行通讯了。
Windows下要安装相应芯片的驱动，通讯程序一般用SecureCRT。</description></item><item><title>网通ADSL猫开启路由和自动拨号功能的方法之二</title><link>http://0x3f.org/posts/howto-enable-routing-and-auto-dialing-for-unicom-adsl-modem-2/</link><pubDate>Sun, 18 Jul 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-enable-routing-and-auto-dialing-for-unicom-adsl-modem-2/</guid><description>之前提到过对华为HG522、HG527的超级用户的破解方法。网通附送的另一种猫，是中兴ZXV10 H108B无线猫，体积更小，而且天线是内置的。
上次的方法不能用在这个型号的猫上，但可以用ftp的方式破解。以下步骤基于Linux，并只在硬件版本为V1.1.02、软件版本为V1.1.02T18_N的H108B上测试通过：
使用普通用户进入猫的设置页面并开启FTP服务，将用户名和密码均设为admin
连接ftp服务器：
输入用户名和密码，成功登录FTP服务器：
切换到/etc目录并下载配置文件board.conf： 如下所示：
在下载到本地的board.conf中查找right，后跟0表示超级用户，若为1则表示普通用户，如下所示： 1 2 3 4 5 6 7 8 9 10 11 &amp;lt;row id=&amp;#34;0&amp;#34;&amp;gt; &amp;lt;item&amp;gt;&amp;#34;right&amp;#34;, &amp;#34;0&amp;#34;&amp;lt;/item&amp;gt; &amp;lt;item&amp;gt;&amp;#34;username&amp;#34;, &amp;#34;bjcnchgw&amp;#34;&amp;lt;/item&amp;gt; &amp;lt;item&amp;gt;&amp;#34;enable&amp;#34;, &amp;#34;1&amp;#34;&amp;lt;/item&amp;gt; &amp;lt;item&amp;gt;&amp;#34;password&amp;#34;, &amp;#34;bjcnchgw72915767&amp;#34;&amp;lt;/item&amp;gt; &amp;lt;/row&amp;gt; &amp;lt;row id=&amp;#34;1&amp;#34;&amp;gt; &amp;lt;item&amp;gt;&amp;#34;right&amp;#34;, &amp;#34;1&amp;#34;&amp;lt;/item&amp;gt; &amp;lt;item&amp;gt;&amp;#34;username&amp;#34;, &amp;#34;user&amp;#34;&amp;lt;/item&amp;gt; &amp;lt;item&amp;gt;&amp;#34;password&amp;#34;, &amp;#34;mypasswd&amp;#34;&amp;lt;/item&amp;gt; &amp;lt;/row&amp;gt; 在如下页面使用超级用户登录： 进入“网络”→“宽带设置”页面，删除所有“连接名称”列出的连接（其中，TR069是网通远程控制猫并修改超级用户密码的连接；INTERNET被设置成了桥接，所以不能实现路由功能；另外两个应该是用来屏蔽第三、四个LAN口的。所以要全部删除。），并创建新的连接： 进入“网络”→“远程管理”页面，取消“周期上报功能”。
由于“用户管理”页面不提供超级用户改密码的功能，所以此时应下载最新的board.conf，修改里面的超级用户的密码，再上传到/etc目录，假设已登入FTP并切换到/etc目录下：
最后重启猫即可。 据说有使用TTL转USB线登入H108B的嵌入式Linux操作系统来破解超级用户的，但是我的猫的集成电路板上居然没有焊TTL引脚，显然H108B不只一个硬件版本，TTL线白买了。
以上照片出自G7+Camera360</description></item><item><title>Linux下pppoe连接建立后仍不能上网的问题</title><link>http://0x3f.org/posts/problem-on-pppoe-connections-on-linux/</link><pubDate>Sat, 10 Jul 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/problem-on-pppoe-connections-on-linux/</guid><description>问题描述
pppoe可以连接，ifconfig可以看到ppp0接口，一切正常，只是不能上网。
解决办法
使用如下命令查看路由表：
1 route 正常情况下返回的结果中应该有如下内容：
如果没有，可手工添加：
1 route add default dev ppp0 如果可以上网，就成功了。
使用如下脚本在pppoe连接成功时自动添加路由表项：
1 2 3 4 5 6 #!/bin/sh if ifconfig ppp0 &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 ; then route del default route add default dev ppp0 fi 将上述内容保存成名为01-route.sh的文件，权限755，放到/etc/ppp/ip-up.d目录下。
然后创建以下两个脚本：
1 2 3 4 5 6 7 8 9 10 11 12 #!/bin/bash if ifconfig ppp0 &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 ; then echo &amp;#39;PPPOE has already been switched on !</description></item><item><title>网通ADSL猫开启路由和自动拨号功能的方法之一</title><link>http://0x3f.org/posts/howto-enable-routing-and-auto-dialing-for-unicom-adsl-modem-1/</link><pubDate>Sun, 04 Jul 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-enable-routing-and-auto-dialing-for-unicom-adsl-modem-1/</guid><description>北京网通送的无线猫有的是华为HG522，有的是HG527，屏蔽了路由和PPPOE自动拨号功能，须使用超级用户登入才能使用这些功能。
假设网关为默认的192.168.1.1，先使用普通用户登录，然后访问地址： 下载该文件并搜索username，找到超级用户的用户名和密码，如：
1 &amp;lt;X_ATP_UserInfoInstance InstanceID=&amp;#34;1&amp;#34; Username=&amp;#34;bjcnchgw&amp;#34; Userpassword=&amp;#34;bjcnchgw27852654&amp;#34; Userlevel=&amp;#34;2&amp;#34; Busy=&amp;#34;0&amp;#34; LoginIP=&amp;#34;&amp;#34;/&amp;gt; 在如下地址使用超级用户登录： 设置内容如下图： 终于不用再忍受公共网络了……</description></item><item><title>cd到目录下后自动ls的方法</title><link>http://0x3f.org/posts/howto-do-auto-listing-after-changing-directory/</link><pubDate>Sun, 20 Jun 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-do-auto-listing-after-changing-directory/</guid><description>每cd到一个目录下就ls，这成了我的习惯。以下Bash函数和别名可以实现cd到一个目录下就自动执行ls命令：
1 2 3 4 5 cdl() { cd &amp;#34;${1}&amp;#34;; ls; } alias cd=cdl 将上述内容添加到用户主目录中的.bashrc中即可。</description></item><item><title>Linux下使用freetds连接SQL Server</title><link>http://0x3f.org/posts/connect-to-sqlserver-using-freetds-on-linux/</link><pubDate>Sun, 20 Jun 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/connect-to-sqlserver-using-freetds-on-linux/</guid><description>freetds是第三方、开源的数据库客户端和连接库，支持Sybase和Microsoft SQL Server，它最大的好处是允许非Windows平台的程序连接SQL Server。
freetds的编译和安装命令如下：
1 2 3 ./configure --with-tdsver=8.0 --enable-msdblib make make install configure的这两个参数是必不可少的，否则可能无法连接SQL Server。
安装后修改freetds.conf（一般应该在/usr/local/etc/freetds.conf），添加如下内容：
上述参数应根据实际情况修改。
最后使用如下命令测试连接：
1 tsql -S mysvr -U sa -P 123456 给公司产品做Linux下的安装包，把开发环境放在了Cygwin中，非常享受在全屏、半透明的mintty下敲命令。今天发现在Cygwin下也是可以编译安装Linux下的程序的，只是效率非常低下。故上述内容对Cygwin环境同样成立。</description></item><item><title>升级到wordpress3.0</title><link>http://0x3f.org/posts/after-upgrading-to-wordpress30/</link><pubDate>Sat, 19 Jun 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/after-upgrading-to-wordpress30/</guid><description>昨天发现wordpress3.0已经发布，就顺手升级了。
略看了一下更新内容，几乎没什么让我感兴趣的，但与MU版本的合并堪称WP历史上的一个里程碑，从此一套WP可以支持创建多个博客了。
但我最近几度都想把博客换到dokuwiki下。
自从开始用dokuwiki来组织知识和GTD以来，我对wiki产生了越来越深的痴迷，最主要的原因就是它可以用很简单的语法写出格式规整的文章，我几乎可以不用考虑排版布局而只需把注意力放在文章内容上就行了。而将wiki上的文章发到博客上时，还需要重写，比较浪费时间。
但我最终放弃这个想法，最主要的原因是博客文章太多了，截至现在已经有五百多篇且大多是用HTML写的，难以转换。何况WP作为一个博客系统较wiki有着天生的优势，使用较为方便，如果用wiki来做博客，要做不少工作。</description></item><item><title>用JavaScript实现分页打印</title><link>http://0x3f.org/posts/howto-do-paged-printing-using-javascript/</link><pubDate>Sat, 19 Jun 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-do-paged-printing-using-javascript/</guid><description>最近客户提的一个需求，要实现分页打印功能。公司产品对打印功能实现得不够好，排版全由程序生成，耦合度高，且不支持分页，需要用笨拙的方法变通。
于是我对如何更好地实现分页打印产生了兴趣，Google了一下，整理了一个Demo：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 &amp;lt;html&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta http-equiv=&amp;#34;Content-Type&amp;#34; content=&amp;#34;text/html;charset=utf-8&amp;#34;/&amp;gt; &amp;lt;style media=print&amp;gt; .Noprint{display:none;} .PageNext{page-break-after: always;} &amp;lt;/style&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt; &amp;lt;OBJECT id=WebBrowser classid=CLSID:8856F961-340A-11D0-A96B-00C04FD705A2 height=0 width=0 VIEWASTEXT&amp;gt; &amp;lt;/OBJECT&amp;gt; &amp;lt;div class=&amp;#34;Noprint&amp;#34;&amp;gt; &amp;lt;input onclick=document.all.WebBrowser.ExecWB(6,1) type=button value=打印 name=Button&amp;gt; &amp;lt;input onclick=document.all.WebBrowser.ExecWB(7,1) type=button value=打印预览 name=Button&amp;gt; &amp;lt;input onclick=document.all.WebBrowser.ExecWB(8,1) type=button value=页面设置 name=Button4&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div class=&amp;#34;PageNext&amp;#34;&amp;gt; &amp;lt;center&amp;gt;&amp;lt;h1&amp;gt;雅游&amp;lt;/h1&amp;gt;&amp;lt;/center&amp;gt; &amp;lt;p&amp;gt;旧院人称曲中，前门对武定桥，后门在钞库街。妓家鳞次，比屋而居。屋宇精洁，花木萧疏，迥非尘境。&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;到门则铜环半启，珠箔低垂;升阶则猧儿吠客，鹦哥唤茶；登堂则假母肃迎，分宾抗礼；&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;进轩则丫鬟毕妆，捧艳而出；坐久则水陆备至，丝肉竞陈；定情则目眺心挑，绸缪宛转。&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;纨绔少年，绣肠才子，无不魂迷色阵，气尽雌风矣。&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;妓家，仆婢称之曰娘，外人呼之曰小娘，假母称之曰娘儿。&amp;lt;/p&amp;gt; &amp;lt;p&amp;gt;有客称客曰姐夫，客称假母曰外婆。&amp;lt;/p&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div class=&amp;#34;PageNext&amp;#34;&amp;gt; &amp;lt;center&amp;gt;&amp;lt;h1&amp;gt;木兰花令·拟古决绝词&amp;lt;/h1&amp;gt;&amp;lt;/center&amp;gt; &amp;lt;center&amp;gt;&amp;lt;h3&amp;gt;清·纳兰容若&amp;lt;/h3&amp;gt;&amp;lt;/center&amp;gt; &amp;lt;p&amp;gt;人生若只如初见，何事秋风悲画扇。等闲变却故人心，却道故人心易变!</description></item><item><title>中转feedburner订阅数图标</title><link>http://0x3f.org/posts/howto-display-feedburner-subscription-image/</link><pubDate>Mon, 14 Jun 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-display-feedburner-subscription-image/</guid><description>利用国外服务器中转feedburner的图标：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 &amp;lt;?php /* * 将$fburl替换为自己的feedburner订阅数图片地址，然后将博客中的图片地址换成此脚本的URL即可 */ $fburl = &amp;#39;http://feeds.feedburner.com/~fc/leninlee?bg=99CCFF&amp;amp;amp;fg=444444&amp;amp;amp;anim=0&amp;#39;; $fbfl = &amp;#39;fb.gif&amp;#39;; $fp = fopen($fburl, &amp;#39;rb&amp;#39;); if ($fp) { $fp_local = fopen($fbfl, &amp;#39;wb&amp;#39;); if ($fp_local) { while (!feof($fp)) { fwrite($fp_local, fread($fp, 1024*8), 1024*8); } fclose($fp_local); } fclose($fp); } header(&amp;#39;Location: &amp;#39;.$fbfl); ?&amp;gt; 或者：
1 2 3 4 &amp;lt;?php header(&amp;#39;Content-Type: image/gif&amp;#39;); readfile(&amp;#39;http://feeds.feedburner.com/~fc/leninlee?bg=99CCFF&amp;amp;fg=444444&amp;amp;anim=0&amp;#39;); ?&amp;gt;</description></item><item><title>低碳生活：使用 cpufrequtils降低CPU温度</title><link>http://0x3f.org/posts/using-cpufrequtils-to-reduce-cpu-temperature/</link><pubDate>Fri, 11 Jun 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/using-cpufrequtils-to-reduce-cpu-temperature/</guid><description>cpufrequtils可以根据不同的方案自动调节CPU的频率，从而达到在系统空闲时降低CPU温度、节省电力的目的。
Archlinux官方wiki已经介绍得很明白了：http://wiki.archlinux.org/index.php/Cpufrequtils_(简体中文)
使用后效果明显，CPU温度有所下降，下面是cpufrequtils在Arch上的工作情况：
[lenin@archer ~]$ cpufreq-info cpufrequtils 007: cpufreq-info (C) Dominik Brodowski 2004-2009 Report errors and bugs to cpufreq@vger.kernel.org, please. analyzing CPU 0: driver: acpi-cpufreq CPUs which run at the same hardware frequency: 0 1 CPUs which need to have their frequency coordinated by software: 0 maximum transition latency: 10.0 us. hardware limits: 800 MHz - 2.53 GHz available frequency steps: 2.53 GHz, 2.53 GHz, 1.60 GHz, 800 MHz available cpufreq governors: ondemand, performance current policy: frequency should be within 800 MHz and 1.</description></item><item><title>Inno Setup执行SQL脚本的方法</title><link>http://0x3f.org/posts/howto-execute-sql-scripts-in-inno-setup/</link><pubDate>Mon, 17 May 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-execute-sql-scripts-in-inno-setup/</guid><description>作为和NSIS并立的、两个最流行的免费Windows应用程序安装包制作工具之一，Inno在学习难度上相对要低一些，非常适合对一些简单的桌面程序打包。但对于较复杂的安装过程，或者Web应用程序来说，我个人觉得不是Inno的强项。当然，既然Inno内嵌了Pascal语言用以扩展功能，理论上不是不可以应付复杂的安装过程，但实现起来要复杂一些。
比如对于在安装过程中连接数据库并执行SQL脚本这样的需求，使用InstallShield应该会简单地多，而Inno却不支持直接操作数据库，并且相关的资料说明少之又少，还不如NSIS丰富，以至于我踏破铁鞋无觅处，最终却在NSIS的资料中找到了思路。
主要的思路是，在安装过程中，调用数据库客户端连接数据库并执行SQL脚本，然后将执行结果或错误信息输出到文件中，最后通过分析这个文件来判断命令执行的结果。但是，既然是调用特定的客户端，那么对不同数据库的操作自然就有所区别，具体情况如下所述。
首先在打包脚本的[Files]段将必需的文件包含进来：
```ini [Files] Source: "D:\Development\MyDemoApp\code\*"; DestDir: "{app}"; Flags: ignoreversion recursesubdirs createallsubdirs Source: "D:\Development\MyDemoApp\sqlcmd.exe"; Flags: dontcopy Source: "D:\Development\MyDemoApp\sqlcmd.rll"; Flags: dontcopy Source: "D:\Development\MyDemoApp\mysql.exe"; Flags: dontcopy Source: "D:\Development\MyDemoApp\script_mssql.sql"; Flags: dontcopy Source: "D:\Development\MyDemoApp\script_mysql.sql"; Flags: dontcopy Source: "D:\Development\MyDemoApp\script_oracle.sql"; Flags: dontcopy ``` 在SQL Server中执行脚本的代码片断：
```pascal function ExecScriptInMSSQL(DBHost, DBLogin, DBPass, DBName: String): Boolean; var ConnectExe: String; ConnectParam: String; begin {解压临时文件} ExtractTemporaryFile('sqlcmd.exe'); ExtractTemporaryFile('sqlcmd.rll'); ExtractTemporaryFile('script_mssql.sql'); {构造数据库连接字符串} ConnectExe := ExpandConstant('{tmp}') + '\sqlcmd.exe'; ConnectParam := ' -S ' + DBHost + ' -U ' + DBLogin + ' -P ' + DBPass + ' -d ' + DBName + ' -i script_mssql.</description></item><item><title>FreeArc：兼顾压缩比率与效率的压缩程序</title><link>http://0x3f.org/posts/freearc/</link><pubDate>Sun, 09 May 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/freearc/</guid><description>FreeArc的特点在于它在压缩比率与效率上取得了一个很好的平衡。传统的压缩程序则多偏重一点，要么占用系统资源低、速度快，但压缩比率小，如ZIP、RAR；要么压缩比率高，但占用系统资源大、速度慢，如7z。 把RAR归于前者只是相对而言，除了WinZip，没有哪个压缩工具能取得像WinRAR那样的成功。之所以能做到这一点，是因为WinRAR不但继承了WinZip易用的优点，还具有对多种压缩算法广泛的兼容度，最重要的是，RAR压缩算法在效率与比率之间取得了一个非常好的平衡。凭借这些优势，WinRAR一举推翻了WinZip的王座，直到现在，它都是这个领域值得学习的榜样。 早在7-Zip刚刚推出的时候，我就用过它。在压缩比率上，7z较RAR有着明显的优势，但在系统资源占用和压缩速度上，7z的表现非常不理想。最糟糕的是，如果你的机器配置较低，再加上你使用Windows系统，并且尤其喜欢使用图形界面的压缩工具，那7-zip对你来说就是一场恶梦，我曾经有过压缩一个较大的文件时进度条半天都不移动的经历。当然，在Windows命令行或Linux的终端中使用7-zip情况要好很多。此外，随着7-zip自身的完善和电脑配置的更新换代，这些劣势对7-zip普及的限制正逐渐弱化，事实上，我倾向于推荐用7-zip取代WinRAR，因为前者免费且有较大的压缩比率，而后者是收费的。 上周偶然发现的FreeArc，它的主页上居然宣称比最好的压缩工具都快1.5到3倍，并且同时拥有超高的压缩比率。于是我拿7-zip与之作了几个粗略的对比测试，发现虽然没有宣称的那么夸张，但在压缩同样的文件并使用同样的压缩级别时，FreeArc均比7-zip快一些，而压缩比率却要稍高于后者。甚至对于某些格式的文件，FreeArc的“普通”级别的压缩比率都比7-zip“最高”级别的大。 鉴于7-zip是资源占用大户，我非常怀疑在效率上FreeArc较WinRAR会有什么优势，更遑论快上1.5到3倍，但它的效率高于7-zip却是一个不争的事实，何况还有更高的压缩比率。此外，这次的测试中使用的操作系统和7-zip都是64位的，而FreeArc却是32位的，因此在效率的比试上会有不公平的地方。 当然，FreeArc自身的缺点也很大： 尚无64位版本 只支持Windows和Linux系统 不支持多卷压缩（分割压缩） 其它一些问题 如果能在较短的时间内解决这些问题，我认为FreeArc还是很有前景的。</description></item><item><title>SSL证书生成方法</title><link>http://0x3f.org/posts/howto-create-ssl-certificates/</link><pubDate>Mon, 03 May 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/howto-create-ssl-certificates/</guid><description>一般情况下，如果能找到可用的证书，就可以直接使用，只不过会因证书的某些信息不正确或与部署证书的主机不匹配而导致浏览器提示证书无效，但这并不影响使用。
需要手工生成证书的情况有：
找不到可用的证书 需要配置双向SSL，但缺少客户端证书 需要对证书作特别的定制 首先，无论是在Linux下还是在Windows下的Cygwin中，进行下面的操作前都须确认已安装OpenSSL软件包。
1. 创建根证书密钥文件root.key：
``` openssl genrsa -des3 -out root.key ``` 输出内容为：
``` [lenin@archer ~]$ openssl genrsa -des3 -out root.key Generating RSA private key, 512 bit long modulus .................++++++++++++ ..++++++++++++ e is 65537 (0x10001) Enter pass phrase for root.key: ← 输入一个新密码 Verifying - Enter pass phrase for root.key: ← 重新输入一遍密码 ``` 2. 创建根证书的申请文件root.req：
``` openssl req -new -key root.key -out root.req ``` 输出内容为：
``` [lenin@archer ~]$ openssl req -new -key root.</description></item><item><title>强大的工具函数库：php.js</title><link>http://0x3f.org/posts/phpjs/</link><pubDate>Sat, 24 Apr 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/phpjs/</guid><description>PHP最大的特点在于它拥有一个丰富、灵活、强大的函数库，因此得以机动灵活成为软件开发语言中的轻骑兵。
php.js是一个用Javascript实现的函数库，它试图用Javascript最大程度地重写PHP的函数库。相对于JQuery、ExtJS这些Javascript库，php.js不并致力于为AJAX、DOM和界面开发提供一揽子解决方案，它只是将PHP函数的强大和简便带到前端开发中来，由于JQuery这样的库并不旨在提供完全的Javascript开发标准和手段，实际上，它弥补了这些高端的工具库与低端的Javascript开发之间的一个空白。
对于熟悉PHP的人尤其是PHP程序员来说，使用php.js是几乎不需要切换思维方式的。
这是使用php实现的日期格式校验函数：
```php function IsValidDate($strDate, $strFormat='Y-m-d') { $strDate = trim($strDate); $unixTime = strtotime($strDate); $strNewDate = date($strFormat, $unixTime); return $strDate == $strNewDate; } ``` 这是使用php.js实现的日期格式校验函数：
```javascript function IsValidDate(strDate, strFormat) { strDate = trim(strDate); var unixTime = strtotime(strDate); var strNewDate = date(strFormat, unixTime); return strDate == strNewDate; } ```</description></item><item><title>在Vim中检查语法和执行代码</title><link>http://0x3f.org/posts/syntax-checking-and-code-executing-in-vim/</link><pubDate>Sat, 17 Apr 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/syntax-checking-and-code-executing-in-vim/</guid><description>《The Pragmatic Programmer》是本好书，虽然中文译名极为恶俗。为践行书中提到的DRY原则，我开始反思平时编码时总是重复出现的问题，其中之一就是很低级的语法错误，有时忘了语句最后的分号，有时忘了声明变量，凡此种种，不一而足。
相对于IDE，我更喜欢Vim，这也是语法错误没有检查出来的原因。因此就产生了给Vim添加语法检查功能的需求。下面是检查PHP代码的vimrc内容：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 &amp;#34; Check the syntax of a PHP file function! CheckPHPSyntax() if &amp;amp;filetype != &amp;#39;php&amp;#39; echohl WarningMsg | echo &amp;#39;This is not a PHP file !&amp;#39; | echohl None return endif setlocal makeprg=php\ -l\ -n\ -d\ html_errors=off\ % setlocal errorformat=%m\ in\ %f\ on\ line\ %l echohl WarningMsg | echo &amp;#39;Syntax checking output:&amp;#39; | echohl None if &amp;amp;modified == 1 silent write endif silent make clist endfunction au filetype php map &amp;lt;F5&amp;gt; :call CheckPHPSyntax()&amp;lt;CR&amp;gt; au filetype php imap &amp;lt;F5&amp;gt; &amp;lt;ESC&amp;gt;:call CheckPHPSyntax()&amp;lt;CR&amp;gt; 以上脚本为Vim添加了一个检查PHP语法错误的函数和两个快捷键映射，此后可按F5键即时检查当前Buffer中的PHP当面的语法。和网上其它同类的函数相比，这个函数的优点在于改进了检查结果的显示，使用silent命令隐藏了所有不必要的输出。</description></item><item><title>Buuf-Deuce：搞怪的图标主题</title><link>http://0x3f.org/posts/buuf-deuce-icon-theme/</link><pubDate>Sat, 10 Apr 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/buuf-deuce-icon-theme/</guid><description>发现这个图标主题有段时间了，但直到今天偶然重新启用它，才突然觉得这套色调灰暗、风格搞怪的图标其实整体效果很好，很有个性，且极为闷骚，实为标榜非主流人士居家旅行必备。</description></item><item><title>Archlinux升级到GNOME2.30后的光标主题问题</title><link>http://0x3f.org/posts/problem-about-icon-theme-on-gnome230/</link><pubDate>Sun, 04 Apr 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/problem-about-icon-theme-on-gnome230/</guid><description>Archlinux下的GNOME升级到2.30后，若启用了Compiz，则光标主题只能使用X默认的主题，无法自定义。尚不清楚是GNOME新版本自身的问题还是仅限于Arch发行版。
在官方提供解决方案或更新之前，可以先使用Xdefault或Xresource文件实现。
以后者为例，编辑用户主目录下的.Xresource，在文件最后添加如下内容：
Xcursor.theme: faber-anthracite-shd-m
faber-anthracite-sdh-m是我使用的光标主题的文件夹名。
然后执行如下命令：
xrdb ~/.Xresource
最后注销并重新登录即可。</description></item><item><title>phpsh：PHP的交互式解释器</title><link>http://0x3f.org/posts/phpsh/</link><pubDate>Mon, 29 Mar 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/phpsh/</guid><description>时常需要测试一些简短的代码是否能得到需要的结果，如果去写测试脚本再执行，显然太麻烦。虽然PHP自身也支持通过-a参数启动交互模式，但功能较为局限。如果PHP有像bpython那样的交互式解释器，就太好了。
phpsh就是这样一个工具，它是由facebook的开发者用Python实现的PHP的交互式解释器，并具备以下特性：
命令行历史回溯 tab键自动补全 快速文档索引</description></item><item><title>使用cx_Freeze的distutils脚本打包Python程序</title><link>http://0x3f.org/posts/cx-freeze/</link><pubDate>Fri, 26 Mar 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/cx-freeze/</guid><description>cx_Freeze打包Python程序的命令基本格式如下：
```python cxfreeze main.py --target-dir appdir ``` 它表示把脚本main.py或以main.py为程序入口的程序打包并导出到当前路径中名为appdir的目录中。
对于Windows下的GUI应用程序，以上面的命令导出后，运行时会弹出cmd命令行的黑窗口，须加上如下命令中的参数：
```python cxfreeze main.py --target-dir appdir --base-name=win32gui ``` 对于比较复杂的程序，cx_Freeze支持distutils格式的打包脚本，当然，彼此之间在引入的模块和支持的参数上还是有差别的。
cx_Freeze的文档中有其支持的全部命令参数及说明，写到setup.py脚本中时，所有参数中的-符号应换成下划线。
我的setup.py内容大致如下：
```python #!/usr/bin/python # -*- coding: utf-8 -*- from cx_Freeze import setup,Executable includefiles = [('settings.ini.jctest','settings.ini') ,'README.mkd'] includes = [] excludes = ['Tkinter'] packages = ['sqlalchemy.engine', 'sqlalchemy.orm', 'sqlalchemy.dialects.mssql'] setup( name = 'pyutil', version = '0.1', description = 'A general enhancement utility for XXX', author = 'Lenin Lee', author_email = 'lenin.lee@xxx.com', options = {'build_exe':{'excludes':excludes,'packages':packages,'include_files':includefiles}}, executables = [Executable('jcitk.</description></item><item><title>开始玩儿茶道</title><link>http://0x3f.org/posts/starting-tea-ceremony/</link><pubDate>Sat, 20 Mar 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/starting-tea-ceremony/</guid><description>前年买了个倒把小西施开始喝茶，渐渐地就觉得喝茶的趣味一半在茶，一半在泡。这周买了茶盘、茶道组等一应物件儿，直到周五晚上才有时间过把瘾。怕睡不着觉，没敢泡生茶，新开了一饼易武大树熟茶。</description></item><item><title>SQL Server的自定义函数：统计两日期之间工作日的数量</title><link>http://0x3f.org/posts/counting-days-between-dates-in-sqlserver/</link><pubDate>Sat, 13 Mar 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/counting-days-between-dates-in-sqlserver/</guid><description>前段时间工作中遇到的一个需求，要求计算两个日期之间工作日的数量，即排除期间所有的周六和周日之后的天数。
在网上找到一个自定义函数，原函数有些小问题，例如如果传入的截止日期如果有时间且足够大，则计算结果可能出错，修正后代码如下：
```sql --函数：类似datediff，不统计期间所有的周六和周日 if exists (select * from dbo.sysobjects where id=object_id(N'[dbo].[f_WorkDay]') and xtype in (N'FN',N'IF',N'TF')) drop function [dbo].[f_WorkDay] GO CREATE FUNCTION f_WorkDay( @dt_begin datetime, @dt_end datetime )RETURNS int AS BEGIN DECLARE @workday int,@i int,@bz bit,@dt datetime set @dt_begin = convert(datetime, convert(nvarchar(32), @dt_begin, 23)) set @dt_end = convert(datetime, convert(nvarchar(32), @dt_end, 23)) IF @dt_begin>@dt_end SELECT @bz=1,@dt=@dt_begin,@dt_begin=@dt_end,@dt_end=@dt ELSE SET @bz=0 SELECT @i=DATEDIFF(Day,@dt_begin,@dt_end),@workday=@i/7*5,@dt_begin=DATEADD(Day,@i/7*7,@dt_begin) WHILE @dt_begin&lt;@dt_end BEGIN SELECT @workday=CASE WHEN (@@DATEFIRST+DATEPART(Weekday,@dt_begin)-1)%7 BETWEEN 1 AND 5 THEN @workday+1 ELSE @workday END,@dt_begin=@dt_begin+1 END RETURN(CASE WHEN @bz=1 THEN -@workday ELSE @workday END) END GO ``` 此函数的原理是，使用datediff计算两日期之间的差值A，然后取A与7的商，即计算期间内有几个整周。然后使用这个商与5相乘，得到所有整周内的工作日天数B。接着，使用A除以7再乘以7得到C，这就约去了A中最后不到一个整周的天数。再在起始日期的基础上加上C，得到一个新的起始日期，然后从这个新的起始日期开始遍历至截止日期的每一天，每增加一天，判断若此日期是工作日，则在C的基础上累加一。判断一个日期（假设使用@dt_begin表示）是否是工作日的方法是：(@@datefirst+datepart(Weekday, @dt_begin)-1)%7的值在1和5之间。</description></item><item><title>Python控制外部进程的灵异事件</title><link>http://0x3f.org/posts/supernatural-phenomenon-of-controlling-external-processes-in-python/</link><pubDate>Mon, 08 Mar 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/supernatural-phenomenon-of-controlling-external-processes-in-python/</guid><description>春节前的一段时间，重新拾起近一年没动过的ForeverFantasy。
虽然一年内没什么更新，但是我却一直都在用，基本上只限于将用Vim写好的Markdown格式的文档转换成HTML。
重写了相当一部分代码，较大程度地改变了界面布局，突然发现经过一年的沉淀，对wxPython的理解增进了不少，开发起来比起去年这个时候清楚了很多。
这些天来一直坚持着每天或多或少的做一些，如果说有什么主要的进展的话，那就是界面的重构，以及昨天实现了调用Vim编辑文档并回收文档内容的功能。
ForeverFantasy和Vim协同的一个最大的问题就是如何判断Vim已经退出。Python调用外部程序的方法有很多，比如传统的commands模块、os.system()等，subprocess是致力于替代这些旧有的方式的一个模块，它的一个特点是可以在启动一个外部程序作为子进程后还能监控这个进程的运行状态。这为ForeverFantasy在Vim退出后回收文档内容提供了更简捷的途径。
下面的代码可以说明如何使用subprocess运行外部程序并监控运行状态：
```python import subprocess process = subprocess.Popen('gvim', shell=True) status = process.poll() if 0 == status: print 'The external program exited.' if status is None: print 'The external program is still running.' ``` 理论上，可以拿实例process的poll()方法监视进程的运行状态，而且这一点在Windows上也确实可以做到，但是到了Linux下，诡异的事出现了，即使刚刚打开gvim，poll()方法也会马上返回一个0，同时process.pid的值总是和实际在运行的那个gvim进程的pid的值差3，而且在虚拟终端中输入gvim命令也不会阻塞终端，就像别的命令加上“&amp;amp;”符号的效果一样。尝试用strace跟踪gvim的运行，试图找到问题原因，无果。我猜想可能/usr/bin/gvim是一个跳板，它启动后会启动一个新的gvim进程。总之，这个方法在Linux下是行不通的。
因此我觉得只能另寻出路了，既然不能监控gvim进程，那就监控gvim进程所编辑的文件，只要这个文件不被任何进程占用，就可以判定gvim已退出。这一点，在Linux下易如反掌，不用说，lsof当仁不让。
用commands.getstatusoutput('lsof file.txt')测试发现，如果文件file.txt被某进程占用，则返回的状态值为0，反之，返回256。
最终，我在程序中使用了两种判断方式，在Windows平台使用subprocess跟踪gvim.exe进程，而在Linux及Unix平台使用lsof检查文档占用情况。
剩下的就是进行这个判断的时间问题了。
很显然，如果在子进程被启动后马上使用while循环不停的检查，一来必须使用多线程，二来系统资源占用也会很高。这时就需要利用wxPython的事件机制了，当ForeverFantasy启动Gvim时，主窗口失去焦点，而当Gvim退出时，ForeverFantasy又会获得焦点，只要能在ForeverFantasy窗口获得焦点时做一次检查即可。不过，在选择最合适的事件的问题上，又是一波三折。
在wxPython的API文档中没有找到事件列表，倒是在Wiki中找到了。顾名思义，觉得wx.EVT_SET_FOCUS比较靠谱，但试用失败，看API中关于FocusEvent的说明，这个事件适用于窗口控件；然后又试了wx.EVT_CHILD_FOCUS，只有在窗口包含的控件中有获得焦点的情况才会触发；最后才发现wx.EVT_ACTIVATE，这个事件会在窗口失去焦点和获得焦点时各触发一次，使用GetActive()方法可以判断是获得焦点还是失去焦点。
完成与Vim的协同使ForeverFantasy在我手上由原来单纯的格式转换工具进化为基本可用的文档编辑器，就算是Milestone 2吧。
此外，还有一些小的经验：
1. 调用非环境变量下的程序，即命令中必须带程序所在的路径时，应当将程序所在目录的完整路径以自然字符串的形式传递给subprocess.Popen类的构造方法的cwd参数，即如下所示：
```python process = subprocess.Popen('gvim.exe', cwd=r'C:\program files\vim\vim72', shell=True) ``` 这样可以有效避免路径中的空格和特殊字符对命令执行的影响。
2. Vim编辑一个文档时，实际操作的是一个临时文件，而不是原文件，这个临时文件与原文件同路径，名称为在原文件名的基础上，前面加一个句点，后面加后缀“.swp”。应该用lsof监控这个临时文件，才可以判断出编辑该文档的Vim进程的运行状态。由于对于不存在的文件使用lsof命令的返回值也是256，故可以同时判断临时文件和原文件的占用情况，这样就为对其它编辑器的支持奠定了基础。
2010-03-10 Wednesday 22:52:13 更新
感谢KL童鞋和依云童鞋指教，果然加上-f参数就可以了。</description></item><item><title>Vim的终极自动补全插件：NeoComplCache</title><link>http://0x3f.org/posts/neocomplcache-vim/</link><pubDate>Sat, 27 Feb 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/neocomplcache-vim/</guid><description>
相关阅读： 用neocomplete换掉了YouCompleteMe How to Make YouCompleteMe Compatible with UltiSnips</description></item><item><title>SQLAlchemy操作SQL Server的中文问题</title><link>http://0x3f.org/posts/chinese-problem-of-sqlalchemy-with-sqlserver/</link><pubDate>Wed, 24 Feb 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/chinese-problem-of-sqlalchemy-with-sqlserver/</guid><description>最初将脚本的文件编码和coding行都设定为UTF-8，在windows下执行时，中文无法保存，报编码错误。将上述两个编码改为GBK后，保存正常，但查询时报错。
Traceback内容如下：
``` Traceback (most recent call last): File "test.py", line 36, in &amp;lt;module&amp;gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for obj in session.query(User): File "C:\Python26\lib\site-packages\sqlalchemy-0.6beta1-py2.6.egg\sqlalchemy\orm\query.py", line 1411, in instances &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rows = [process[0](row, None) for row in fetch] File "C:\Python26\lib\site-packages\sqlalchemy-0.6beta1-py2.6.egg\sqlalchemy\orm\mapper.py", line 1788, in _instance &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;populate_state(state, dict_, row, isnew, only_load_props) File "C:\Python26\lib\site-packages\sqlalchemy-0.6beta1-py2.6.egg\sqlalchemy\orm\mapper.py", line 1677, in populate_state &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;populator(state, dict_, row, isnew=isnew, **flags) File "C:\Python26\lib\site-packages\sqlalchemy-0.6beta1-py2.6.egg\sqlalchemy\orm\strategies.py", line 118, in new_execute &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;dict_[key] = row[col] File "C:\Python26\lib\site-packages\sqlalchemy-0.6beta1-py2.6.egg\sqlalchemy\engine\base.py", line 1634, in __getitem__ &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return self.</description></item><item><title>被迫弃UMS而用KMS</title><link>http://0x3f.org/posts/switching-from-ums-to-kms/</link><pubDate>Sat, 13 Feb 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/switching-from-ums-to-kms/</guid><description>昨天更新了一下系统，今天开机就白屏了。于是先关掉Compiz，看了一下Archlinux的新闻，发现新的xf86-video-intel中已经移除了UMS，也就意味着只能使用KMS做3D加速了。
UMS的全称是User Mode-Setting，是一种传统的图形界面初始化方案，即在X加载之后由它初始化图形界面。这种方案的弊端是虚拟终端不具备显示和处理图形的能力，同时虚拟终端和图形界面之间的切换显得缓慢并带有闪烁。
KMS的全称是Kernel Mode-Setting，是新一代图形界面初始化方案，它将图形界面的初始化由X加载之后由X负责进行改为在内核初始化时由内核进行。KMS的好处不仅仅是解决了上面UMS的问题，同时也使得Linux具备了在启动时显示漂亮的开机图示的能力。另外，在3D加速性能和低功耗方面，KMS也较UMS更胜一筹。
我的Thinkpad X200使用的是Intel GMA 945的芯片组，而Archlinux的Wiki上仍以915为例，所以尝试着做如下内容：
一、去除/boot/grub/menu.lst中Kernel启动参数中的vga参数；
二、加入以下内容到/etc/modprobe.d/modprobe.conf：
options i945 modeset=1
三、在/etc/rc.conf中的MODULES行加入intel_agp和i945；
重启系统后，Compiz白屏问题解决，3D加速性能似乎有所上升。</description></item><item><title>PHP后台echo过多会导致进程崩溃</title><link>http://0x3f.org/posts/too-many-echoes-may-crash-php/</link><pubDate>Sun, 31 Jan 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/too-many-echoes-may-crash-php/</guid><description>这是去年晚些时侯发现的一个问题。
公司产品的后台定时任务应该是用独立的PHP进程驱动的。在做一个项目的时候，为了便于手工调试，我在定时任务中使用了大量的echo输出信息并在浏览器中手工执行此任务的脚本。
手工执行通过，输出信息完全没有问题。但在实际运行的过程中，一个很诡异的事情发生了：即使我将实际处理数据的代码全部注释掉，只对原始数据做简单的查询，此定时任务仍然极其健壮地中途退出。最要命的是无论程序日志还是PHP的错误日志，都没有任何相关信息。直到后来我把所有echo输出都取消，问题才解决。
事后模糊地记得很久以前似乎在哪本书上看到过在无输出设备的情况下echo过多数据会导致PHP进程崩溃的内容，但原因已想不起来了。</description></item><item><title>VirtualBox的Host Interface网络接入方式的配置</title><link>http://0x3f.org/posts/virtualbox-host-interface/</link><pubDate>Sun, 31 Jan 2010 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/virtualbox-host-interface/</guid><description>VirtualBox安装后默认的网络接入方式是NAT，也是最简单的一种。但NAT网络中的虚拟机系统不具有和主机同一网段的IP地址，不能和主机直接通信。这对于开发者来说是不适用的。
Host Interface网络接入方式可以使虚拟机系统获得与主机同一网段的IP地址，因此也使得虚拟机系统像主机所在的局域网中的一台真实的计算机一样，可以和其它计算机通信。
对于Linux平台的VirtualBox，可以有两种方式实现Host Interface网络。一是使用系统网桥，二是使用VirtualBox内建的机制。
第一种方式复杂但通用，尤其是对于2.1.0以前的版本来说，这是唯一的途径。从2.1.0开始，VirtuaBox内建了支持Host Interface的机制，这极大地简化了此类型网络的配置。
首先，加载vboxnetflt模块：
sudo modprobe vboxnetflt
然后在VirtualBox中配置虚拟机的网络连接方式，选择“Bridged Adapter”。
最后启动虚拟机即可。
另外，若虚拟机系统是精简版的Windows，网卡驱动可能不会自动安装，这时需要另外下载网卡的驱动并安装。
为方便起见，可将vboxnetflt模块加入到开机自动启动的模块列表中，每种发行版设置自启动模块的位置和方法不一样，在Archlinux下，是在/etc/rc.conf文件中的modules行中设置。
参考文章：Archlinux Wiki: VirtualBox</description></item><item><title>立方体归来</title><link>http://0x3f.org/posts/cube-is-back/</link><pubDate>Tue, 24 Nov 2009 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/cube-is-back/</guid><description> 上次鼓捣出立方体还是几年前在学校的时候，Ubuntu+Beryl。 我那个时候的台式机，Celeron Tualatin+256M SDRAM+GForce 440，跑XP要了亲命，忍无可忍而投奔Linux，结果一不小心鼓捣出了立方体，捎带着Firefox、OpenOffice开了一大堆，屁事儿没有，我就是这么死心塌地地上了贼船，直至今天。 后来一直用Archlinux，习惯了Fluxbox和Openbox的简洁。买了X200后曾试图找寻一下旧日华丽的记忆，但却人是物非，新的X200、新的Archlinux、新的Compiz-fusion远不如当年的老牛破车那么搭调。虽说也搞出了立方体，但所有的窗口都没有边框，于是作罢。 上周六鬼使神差的进入GNOME并打开Fusion-icon，奇迹就这么出现了：</description></item><item><title>Windows下GVim的全屏</title><link>http://0x3f.org/posts/fullscreen-for-gvim-on-windows/</link><pubDate>Thu, 17 Sep 2009 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/fullscreen-for-gvim-on-windows/</guid><description>下载gvim的一个扩展“gvimfullscreen_win32”，并解压缩。 将gvimfullscreen.dll复制到gvim安装目录下，与gvim.exe同目录。 修改gvim配置文件_vimrc，在其中添加如下内容： ```vim if has('win32') map :call libcallnr("gvimfullscreen.dll", "ToggleFullScreen", 0) endif ``` 此后，即可使用F11键开关gvim的全屏状态。</description></item><item><title>欧拉工程第十一解</title><link>http://0x3f.org/posts/project-euler-11/</link><pubDate>Tue, 12 May 2009 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-11/</guid><description>In the 20×20 grid below, four numbers along a diagonal line have been marked in red.
08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08 49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00 81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65 52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91 22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80 24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50 32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70 67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21 24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72 21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95 78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92 16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57 86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58 19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40 04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66 88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69 04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36 20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16 20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54 01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48</description></item><item><title>rxvt-unicode的真透明</title><link>http://0x3f.org/posts/true-transparent-of-rxvt-unicode/</link><pubDate>Sat, 28 Feb 2009 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/true-transparent-of-rxvt-unicode/</guid><description>nacre同学说，urxvt是可以实现真透明的。起初我以为是要用transset-df来实现，但这个东西一般需要手动操作，不具有太大的实用性，而且会把整个窗口透明化。不过后来发现真的不需要用它来画蛇添足，有xcompmgr足矣。
因为我用openbox，要实现窗口的阴影和动画效果，xcompmgr是必须的，我把它设成了开机自启动。比起xcompmgr默认的参数值，下面这条定制的命令实现了简洁的阴影和合理的渐隐渐显时间，因此提供了一个各方面都比较均衡、合理的桌面体验：
xcompmgr -Ss -n -Cc -fF -I-10 -O-10 -D1 -t-3 -l-4 -r4
然后在.Xresources中添加以下两行：
URxvt.depth:32 URxvt.background:rgba:0000/0000/0000/dddd
最后当然要执行一下：
xrdb ~/.Xresources
此后直接启动urxvt即可。
这里面最有意思的就是background项的配置，它有两种形式，一种是：
URxvt.background:[80]black
还有一种就是前面提到的形式。
第一种形式中，中括号里的数字表示半透明度对应的百分比，括号外是颜色名称；第二种形式提供了比第一种更多的色彩选择，四组数字都是十六进制数，前三组是RGB颜色值，最后一组是半透明度，数值越大，透明度越低。
在查阅“man urxvt”的时候，发现urxvt的man pages里的内容真是异常丰富，大部分功能都讲解得言简意赅。以往还抱怨这个东西在网上连个健全的文档都找不到，原来全在这儿呢，真不知道以往无数次地man的时候为什么没有注意到这些，难道man了rxvt了？
PS：这样实现urxvt的真半透明后，貌似xcompmgr实现的阴影在urxvt身上就消失了，求解中……</description></item><item><title>完美的终端模拟器：rxvt-unicode</title><link>http://0x3f.org/posts/rxvt-unicode-256color-is-perfect/</link><pubDate>Sun, 08 Feb 2009 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/rxvt-unicode-256color-is-perfect/</guid><description>urxvt（rxvt的unicode版本，支持多国语言，官方网站）。
具有以下特性：
支持真半透明 支持Unicode编码，支持多国语言 支持英文和非英文字符使用不同的字体 支持CS模式，节省系统资源 轻量，速度快 支持Perl扩展功能 但是urxvt有一个很影响情绪的缺陷，就是字符的间距过大，看起来很不舒服。不过已有补丁用来解决这个问题，例如Archlinux用户可以安装rxvt-unicode-chinese：
urxvt的配置选项可以参考其官方网站上的说明，另外这里有一份详细的配置文件。 更新日志： 2011-01-15 修改文章标题 重写文章内容 由于原来的rxvt-unicode-256color包已不存在，更换为rxvt-unicode-chinese 补充一份配置文件</description></item><item><title>欧拉工程第十解</title><link>http://0x3f.org/posts/project-euler-10/</link><pubDate>Tue, 18 Nov 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-10/</guid><description>The sum of the primes below 10 is 2 + 3 + 5 + 7 = 17.
Find the sum of all the primes below two million.
题目越来越变态，开始好玩儿了。
第七解里的算法在这里算是废了，一万个素数都算得那么费劲，两百万以下的素数有十几万个，不得不用筛选法了。
普通的筛选效率也不行，当初就是因为这个原因才没用它。不过优化过的筛选法就很奇妙了，下面是Lua的实现：
```lua require('math') local limit = 2000000 local primes = {} for i=1,limit do table.insert(primes,true) end primes[0] = false primes[1] = false for i=0,math.floor(math.sqrt(limit)) do if primes[i] then for j=math.pow(i,2),limit,i do primes[j] = false end end end local sumVal = 0 for i,j in ipairs(primes) do if j then sumVal = sumVal + i end end print(sumVal) ``` 在我这里两秒半就出结果了，Python的表现也不错，四秒半出结果：</description></item><item><title>欧拉工程第九解</title><link>http://0x3f.org/posts/project-euler-9/</link><pubDate>Mon, 10 Nov 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-9/</guid><description> A Pythagorean triplet is a set of three natural numbers, a &lt; b &lt; c, for which,
a2 + b2 = c2
For example, 32 + 42 = 9 + 16 = 25 = 52.
There exists exactly one Pythagorean triplet for which a + b + c = 1000. Find the product abc. 解：
```python flag = False for a in range(1,1000): for b in range(1,1000): if a ** 2 + b ** 2 == (1000 - a - b) ** 2: print a,b,(1000 - a - b) print a * b * (1000 - a - b) flag = True break if flag: break ```</description></item><item><title>欧拉工程第八解</title><link>http://0x3f.org/posts/project-euler-8/</link><pubDate>Sun, 09 Nov 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-8/</guid><description>Find the greatest product of five consecutive digits in the 1000-digit number.
73167176531330624919225119674426574742355349194934 96983520312774506326239578318016984801869478851843 85861560789112949495459501737958331952853208805511 12540698747158523863050715693290963295227443043557 66896648950445244523161731856403098711121722383113 62229893423380308135336276614282806444486645238749 30358907296290491560440772390713810515859307960866 70172427121883998797908792274921901699720888093776 65727333001053367881220235421809751254540594752243 52584907711670556013604839586446706324415722155397 53697817977846174064955149290862569321978468622482 83972241375657056057490261407972968652414535100474 82166370484403199890008895243450658541227588666881 16427171479924442928230863465674813919123162824586 17866458359124566529476545682848912883142607690042 24219022671055626321111109370544217506941658960408 07198403850962455444362981230987879927244284909188 84580156166097919133875499200524063689912560717606 05886116467109405077541002256983155200055935729725 71636269561882670428252483600823257530420752963450
穷举，解：
```python def MakeProduct(strNum): prod = 1 for char in strNum: prod = prod * int(char) return prod def GetTheFirstProduct(strNum): if len(strNum) &lt; 5: return 0,0 return MakeProduct(strNum[:5]),strNum[1:] num = '7316717653133062491922511967442657474235534919493496983520312774506326239578318016984801869478851843858615607891129494954595017379583319528532088055111254069874715852386305071569329096329522744304355766896648950445244523161731856403098711121722383113622298934233803081353362766142828064444866452387493035890729629049156044077239071381051585930796086670172427121883998797908792274921901699720888093776657273330010533678812202354218097512545405947522435258490771167055601360483958644670632441572215539753697817977846174064955149290862569321978468622482839722413756570560574902614079729686524145351004748216637048440319989000889524345065854122758866688116427171479924442928230863465674813919123162824586178664583591245665294765456828489128831426076900422421902267105562632111110937054421750694165896040807198403850962455444362981230987879927244284909188845801561660979191338754992005240636899125607176060588611646710940507754100225698315520005593572972571636269561882670428252483600823257530420752963450' largestProduct = 0 while len(num) >= 5: tmp = GetTheFirstProduct(num) if tmp == (0,0): break num = tmp[1] if largestProduct &lt; tmp[0]: largestProduct = tmp[0] print largestProduct ``` 如果先找到下五个均不为零的连续整数，然后计算它们的积并以之参与比较，效率会更高：</description></item><item><title>欧拉工程第七解</title><link>http://0x3f.org/posts/project-euler-7/</link><pubDate>Fri, 31 Oct 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-7/</guid><description>第七解：
By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13, we can see that the 6th prime is 13.
What is the 10001st prime number?
穷举，并加以最大程度的优化：对大于2的素数，只判断奇数；判断一个奇数是否素数时，只拿已经找到的素数中小于第这个数平方根的数来相除，如果均不能整除，就是素数。Python的实现：
```python def IsPrimeNum(num,feed): from math import sqrt tmp = feed[:] while tmp[-1] > int(sqrt(num)): tmp.pop() for i in tmp: if num % i == 0: return False return True limit = 10001 feed = [2,3,5,7] temp = 7 counter = 4 while counter &lt; limit : temp += 2 if IsPrimeNum(temp,feed): feed.</description></item><item><title>欧拉工程第六解</title><link>http://0x3f.org/posts/project-euler-6/</link><pubDate>Wed, 29 Oct 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-6/</guid><description>第六解：
The sum of the squares of the first ten natural numbers is, 12 + 22 + &amp;hellip; + 102 = 385
The square of the sum of the first ten natural numbers is, (1 + 2 + &amp;hellip; + 10)2 = 552 = 3025
Hence the difference between the sum of the squares of the first ten natural numbers and the square of the sum is 3025 385 = 2640.</description></item><item><title>欧拉工程第五解</title><link>http://0x3f.org/posts/project-euler-5/</link><pubDate>Mon, 27 Oct 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-5/</guid><description>第五解：
2520 is the smallest number that can be divided by each of the numbers from 1 to 10 without any remainder. What is the smallest number that is evenly divisible by all of the numbers from 1 to 20?
解：
```python #为简洁明了，此处不作校验 def GetGreatestCommonDivisor(min,max): '''辗转相除法求最大公约数''' while min > 0: tmp = min min = max % min max = tmp return max def GetLeastCommonMultiple(a,b): if a > b: max = a min = b else: max = b min = a div = GetGreatestCommonDivisor(min,max) return min * max / div temp = 1 for i in range(1,21): temp = GetLeastCommonMultiple(i,temp) print temp ``` 本题旨在求最小公倍数。此算法有意思的是，它的精华在于如何求解两个正整数的最大公约数，有点围魏救赵的意思。</description></item><item><title>欧拉工程第四解</title><link>http://0x3f.org/posts/project-euler-4/</link><pubDate>Wed, 22 Oct 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-4/</guid><description>第四解：
A palindromic number reads the same both ways. The largest palindrome made from the product of two 2-digit numbers is 9009 = 91 × 99. Find the largest palindrome made from the product of two 3-digit numbers.
解：
```python largestPalindrome = 0 for i in range(100,1000): for j in range(100,1000): product = i * j if int(str(product)[::-1]) == product and product > largestPalindrome: largestPalindrome = product print largestPalindrome ``` 穷举，有没有效率高的办法？</description></item><item><title>欧拉工程第三解</title><link>http://0x3f.org/posts/project-euler-3/</link><pubDate>Tue, 21 Oct 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-3/</guid><description>第三解：
The prime factors of 13195 are 5, 7, 13 and 29. What is the largest prime factor of the number 600851475143 ?
解：
```python feed = 600851475143 def GetFactor(feed,footmark): while footmark &lt; feed: footmark += 2 if feed % footmark == 0: print footmark GetFactor(feed / footmark,footmark) break GetFactor(feed,1) ```</description></item><item><title>欧拉工程第二解</title><link>http://0x3f.org/posts/project-euler-2/</link><pubDate>Sun, 19 Oct 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-2/</guid><description>第二解：
Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be: 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, &amp;hellip; Find the sum of all the even-valued terms in the sequence which do not exceed four million.
解：
```python i = 1 j = 2 sum = 0 while j &lt; 4000000 : if j % 2 == 0 : sum = sum + j t = i i = j j = t + j print sum ```</description></item><item><title>欧拉工程第一解</title><link>http://0x3f.org/posts/project-euler-1/</link><pubDate>Mon, 06 Oct 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/project-euler-1/</guid><description> “欧拉工程”是一个很有意思的网站，它每周会提供一道数学题，要求访问者使用任一种编程语言设计一个计算机程序求解。到现在为止已经出了二百一十一道题，当然，题的难度是依次递增的。几十个国家的程序员已参与了这个工程，截至目前，中国有四百多人参与，但是解决所有的二百多道题的只有一个人。 我觉得没事儿的时候做一道很有意思，下面是第一道，很简单： If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9. The sum of these multiples is 23. Find the sum of all the multiples of 3 or 5 below 1000. 最容易想到的一算法就是依次取出一到一千的整数，只要是三或五的倍数，就累加起来，最终的和就是结果： ```python sum = 0 for num in range(1,1000): if not (num % 3 != 0 and num % 5 != 0): sum += num print sum ``` 但是我觉得这个算法太普通了，从一到一千要做一千次循环，时间复杂度会比较高。所以我设想只取出三和五的倍数，然后相加就行了，所需要考虑的只是怎么处理三和五的公倍数的问题。下面是我的算法，只有三百多次循环： ```python def SumMultiple(feed,limit): threeMultiple = 3 * feed fiveMultiple = 5 * feed if threeMultiple >= limit: return None if fiveMultiple >= limit: return threeMultiple if fiveMultiple % 3 == 0: return threeMultiple return threeMultiple + fiveMultiple sum = 0 for feed in range(1,500): if SumMultiple(feed,1000) == None: break; sum += SumMultiple(feed,1000) print sum ``` 不过事与愿违，通过测试，这个算法的效率要比上一种低，我想应该是SumMultiple()函数中运算和比较次数较多导致的。 不管怎样，第一个问题已经顺利解决了：</description></item><item><title>为rxvt-unicode开启标签和链接支持</title><link>http://0x3f.org/posts/let-rxvt-unicode-support-tags-and-links/</link><pubDate>Thu, 20 Mar 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/let-rxvt-unicode-support-tags-and-links/</guid><description>写完urxvt-unicode快速上手，本以为已将urxvt的用法一网打尽，不料AndyWxy网友又找到了两个新的功能：使urxvt启用标签和在urxvt中打开网页链接。
标签功能很实用，一般为了达到复用终端窗口的目的会采用两种方式：一是配合screen使用，另一个就是启用标签。然而前者有一个缺点就是不直观，标签页恰好能弥补这个缺陷。urxvt不愧是个功能强大的终端工具，如果在编译时开启perl支持，则urxvt可启用多标签功能。用法如下：
一是在启动的时候加入命令行参数：
urxvt -pe tabbed
二是在配置文件“.Xresources”中添加如下配置信息：
URxvt.perl-ext-common: default,tabbed
则默认情况下执行urxvt就会打开多标签功能。urxvt的标签支持使用鼠标操作，同时可以使用Ctrl+Shift+左右箭头来切换标签页，使用Ctrl+Shift+向下箭头开启新标签。
另外一个功能就是可以通过在urxvt中的链接上点击鼠标左键来通过设定的浏览器打开之。首先在“.Xresources”文件中添加如下内容：
URxvt.urlLauncher: firefox URxvt.matcher.button: 1
然后使用如下命令打开urxvt：
urxvt -pe matcher
即可。也可以在配置文件中添加上述内容之后再添加一行：
URxvt.perl-ext-common: matcher
此后即默认开启在终端窗口中打开链接的功能。注意修改“.Xresources”文件后需要执行如下命令才能使修改后的配置文件生效：
xrdb ~/.Xresources</description></item><item><title>rxvt-unicode快速上手</title><link>http://0x3f.org/posts/quick-guide-for-rxvt-unicode/</link><pubDate>Fri, 07 Mar 2008 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/quick-guide-for-rxvt-unicode/</guid><description> &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rxvt是我最喜欢的虚拟终端，它有以下优点： &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;轻量：体积小，启动速度快，占用系统资源极低 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;美观：各种外观（如颜色、字体、半透明等）均可定制 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;功能强：具备一个终端工具应当有的各种实用功能 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;然而它很难被初学者接受，一是因为它的缺省外观很难看，而自身又不提供图形界面的配置工具，只能通过修改配置文件来设置，然而网上相关的资料却非常少；二是因为在rxvt中使用复制和粘贴非常“不方便”，它并不支持人们已经习惯的Ctrl+C和Ctrl+V的复制、粘贴方式，这也是网上关于rxvt问得最多的问题；最后一个门槛是它对中文等东亚文字的支持不好。 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;其实rxvt以上三个所谓的门槛都是初学者对它的误解。首先rxvt的配置文件非常简单，只要学过英语的人都能看明白，通过简单的配置就可以使之变得非常漂亮，丝毫不逊色于Konsole、Gnome-terminal等主流终端。 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;其次，rxvt虽然不支持Ctrl+C和Ctrl+V的复制、粘贴，但是它有自己的一套操作方式。Linux下普遍使用的图形界面均为X11，而X11支持一种独特的复制粘贴方式，即如果你在另一个程序比如文本编辑器中使用鼠标拖动来高亮一段文字后，不用进行任何操作，此时选中的内容已经复制到剪贴板中了，随后在rxvt中单击鼠标中键即可将选中内容粘贴到其中，此外，如果鼠标没有中键，可以同时按下左右键以达到同样的效果，还可以使用Shift+Insert组合键来完成粘贴；反之，从rxvt中向外复制内容同样如此。 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最后，虽然rxvt对东亚文字支持不好，但是rxvt有几个修改版，其中一个就是rxvt-unicode。顾名思义，rxvt-unicode支持unicode编码，因此对东亚文字的支持完全没有问题。安装完成后，使用urxvt即可打开之。 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;此外，rxvt-unicode还有一个很好的特性，它可以工作在C/S模式。使用urxvtd启动rxvt的后台程序，此后任何时候使用urxvtc即可打开一个rxvt终端，所有的rxvtc共用一个urxvtd，因此在同时运行的终端比较多的时候，在内存占用上要比全部使用urxvt少一些。不过据我粗略计算，如果打开的终端不是非常多（比如说几十个），那么使用普通模式和使用C/S模式对内存的占用没有太大的差距，因为普通模式下的urxvt占用内存本身就非常少。在我看来使用C/S模式的最大好处是启动速度比普通模式要快一些。 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;关于rxvt的美化和设置，可以参看我以前写的一篇文章。下图是我现在使用的rxvt的截图： &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;以下是我当前的rxvt配置文件的内容： !Xft.dpi:96 !fontforge.FontView.FontFamily:wenquanyi bitmap song Rxvt.geometry:192×144 Rxvt.background:#2e2e2e Rxvt.foreground:antiquewhite Rxvt.colorBD:yellow Rxvt.colorUL:green Rxvt.multichar_encoding:utf-8 Rxvt.scrollBar:Fault Rxvt.scrollBar_right:True Rxvt.scrollBar_floating: True Rxvt.scrollstyle: next Rxvt.saveLines:10000 Rxvt.color0:black Rxvt.color1:red3 Rxvt.color2:springgreen Rxvt.color3:wheat3 Rxvt.color4:navy Rxvt.color5:magenta4 Rxvt.color6:steelblue1 Rxvt.color7:gray85 Rxvt.color8:gray10 Rxvt.color9:SkyBlue3 Rxvt.color10:chartreuse3 Rxvt.color11:lightgoldenrod2 Rxvt.color12:SkyBlue1 Rxvt.color13:pink1 Rxvt.color14:lightblue1 Rxvt.color15:#dbeff9 Rxvt.font:xft:Vera Sans YuanTi Mono :size=10,xft:Monospace:size=10 Rxvt.menu:/etc/X11/rxvt.menu Rxvt.preeditType:Root Rxvt.transparency:255</description></item><item><title>rxvt-unicode的半透明方案</title><link>http://0x3f.org/posts/half-transparent-for-rxvt-unicode/</link><pubDate>Tue, 16 Oct 2007 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/half-transparent-for-rxvt-unicode/</guid><description> &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rxvt是个快速且节省内存的模拟终端，原版rxvt对中文等非字母语言的支持不好，所以它有许多修改版，rxvt-unicode-ml是比较适合中国人使用的rxvt修改版。
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rxvt轻量但不简单，它有许多设置选项和启动参数，用户可以在命令行使用“rxvt -help”查看其常用启动参数，使用“rxvt --help”查看更为详细的启动参数。
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;通过修改用户主目录下的“.Xresources”文件可以配置urxvt的行为，从而不必每次都加启动参数，我的".Xresources"文件内容如下：
Rxvt.background:white
Rxvt.foreground:black
Rxvt.colorBD:yellow
Rxvt.colorUL:green
Rxvt.multichar_encoding:gb2312
Rxvt.scrollBar:Fault
Rxvt.scrollBar_right:True
Rxvt.scrollBar_floating: True
Rxvt.scrollstyle: next
Rxvt.saveLines:10000
Rxvt.color0:black
Rxvt.color1:red3
Rxvt.color2:springgreen
Rxvt.color3:wheat3
Rxvt.color4:navy
Rxvt.color5:magenta4
Rxvt.color6:steelblue1
Rxvt.color7:gray85
Rxvt.color8:gray10
Rxvt.color9:SkyBlue3
Rxvt.color10:chartreuse3
Rxvt.color11:lightgoldenrod2
Rxvt.color12:SkyBlue1
Rxvt.color13:pink1
Rxvt.color14:lightblue1
Rxvt.color15:#dbeff9
Rxvt.font:xft:Vera Sans YuanTi Mono :size=10,xft:Monospace:size=10
Rxvt.menu:/etc/X11/rxvt.menu
Rxvt.preeditType:Root
Rxvt.geometry:192×174
Rxvt.transparency:255 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;这个配置文件是白底黑字，当然可以修改为全透明或者半透明，不过，只要在启动时加入启动参数就可以实现全透明：
urxvt -tr &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;也可以实现半透明：
urxvt -fg lightgray -bg black -bc -tr -tint lightgray -sh 60 -sr</description></item><item><title>UBUNTU 6.10 Edgy Eft 入门全程导用</title><link>http://0x3f.org/posts/ubuntu-610-tutorial/</link><pubDate>Sun, 08 Apr 2007 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/ubuntu-610-tutorial/</guid><description>http://forum.ubuntu.org.cn/viewtopic.php?t=32798&amp;amp;amp;highlight=
目录 一、安装Edgy与硬盘的分区
（1）安装与分区&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;3
（2）多硬盘需要注意的一点&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;3
（3）Linux下硬盘分区的概念&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-4
二、改变账户操作理念&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-4
三、修改源并配置网络
（1）源及其使用方法&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-5
（2）配置ADSL网络&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-6
四、系统的中文化与输入法
（1）系统的中文化&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;6
（2）中文字体的美化&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-6
（3）中文输入法的安装与配置&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;8
（4）主要程序界面的汉化&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;11
（5）Abiword中文乱码的解决办法&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-11
五、多媒体播放器的安装与配置
（1）万能播放器 mplayer&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-12
（2）音频播放器 audacious 及 mp3 文件 tag 乱码的解决&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-12
（3）媒体解码库 gstreamer&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;13
六、网络工具的安装与配置
（1）Opera 的安装与配置及中文输入法问题的解决&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;13
（2）即时通讯程序&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;14
（a）集成即时通讯工具 gaim&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-14
（b）最逼真的 QQ 工具&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;15
（c）功能最强大的 QQ 工具 Eva&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;16
（d）多协议即时通讯工具 Kopete&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-16
（3）新闻阅读&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-16
（4）邮件客户端&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;17
（5）下载工具&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-17
（6）p2p 工具&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-17
七、编辑器、编译环境与词典
（1）编辑器&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;17
（2）编译环境&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-17
（3）词典&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;18
八、NVIDA 显卡驱动与 Beryl 的安装
（1）nvida 显卡驱动的安装&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;18
（2）安装 Beryl&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;20
（3）Splash Screen 的安装&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;22
九、Wine 的安装&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;22
十、虚拟机 Vmware&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;23
十一、磁盘分区的挂载
（1）挂载一个原先存在而没有挂载的分区&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;23
（2）新加入一块还没有分区的全新的硬盘&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;24</description></item><item><title>「熊猫烧香」</title><link>http://0x3f.org/posts/panda-burning-joss-sticks/</link><pubDate>Sat, 17 Feb 2007 18:28:00 +0000</pubDate><guid>http://0x3f.org/posts/panda-burning-joss-sticks/</guid><description>前一段的维金，现在的熊猫烧香，windows上总是不消停。
当年的冲击波，那是我唯一一次中毒的经历，居然还很兴奋。自从转到Linux，感觉这些都离我越来越远，窃自暗爽。
说到瑞星和卡巴斯基的撕逼，曾经也为选杀毒软件很头疼，后来幡然醒悟，只是个心理安慰，随便装一个就行了。当然，还是现在在Linux上裸奔更好。</description></item></channel></rss>