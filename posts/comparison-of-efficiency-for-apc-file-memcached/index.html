<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="http://0x3f.org/posts/comparison-of-efficiency-for-apc-file-memcached/"><meta property="og:site_name" content="æ™´è€•é›¨è®€"><meta property="og:title" content="APCã€æ–‡ä»¶å’ŒMemcachedæ•ˆç‡å¯¹æ¯”"><meta property="og:description" content="å¯¹ä¸€ä¸ªä¿å­˜äº†100ä¸ªå¯¹è±¡å®ä¾‹çš„æ•°ç»„è¿›è¡Œ300æ¬¡è¯»å†™ï¼Œè¯¥æ•°ç»„åºåˆ—åŒ–åå¤§å°ä¸º232KBã€‚
æµ‹è¯•ç¯å¢ƒ ç½‘ç»œæœåŠ¡å™¨ PHPç‰ˆæœ¬ æ“ä½œç³»ç»Ÿ ç¡¬ä»¶é…ç½® NGINX v1.0.4 PHP-FPM v5.3.6
APCå¯ç”¨ Archlinux 32bit Intel(R) Core(TM)2 Duo CPU T9400 @ 2.53GHz
Mem: 3G DDR3
Disk: 5400r/s æµ‹è¯•è„šæœ¬ æµ‹è¯•æ•°æ®ï¼š
```php <?php /* * @file data.php */ class XTest { var $x0; var $x1; var $x2; var $x3; var $x4; var $x5; var $x6; var $x7; var $x8; var $x9; var $x10; var $x11; var $x12; var $x13; var $x14; var $x15; var $x16; var $x17; var $x18; var $x19; var $x20; var $x21; var $x22; var $x23; var $x24; var $x25; var $x26; var $x27; var $x28; var $x29; var $x30; var $x31; var $x32; var $x33; var $x34; var $x35; var $x36; var $x37; var $x38; var $x39; var $x40; var $x41; var $x42; var $x43; var $x44; var $x45; var $x46; var $x47; var $x48; var $x49; var $x50; var $x51; var $x52; var $x53; var $x54; var $x55; var $x56; var $x57; var $x58; var $x59; var $x60; var $x61; var $x62; var $x63; var $x64; var $x65; var $x66; var $x67; var $x68; var $x69; var $x70; var $x71; var $x72; var $x73; var $x74; var $x75; var $x76; var $x77; var $x78; var $x79; var $x80; var $x81; var $x82; var $x83; var $x84; var $x85; var $x86; var $x87; var $x88; var $x89; var $x90; var $x91; var $x92; var $x93; var $x94; var $x95; var $x96; var $x97; var $x98; var $x99; function __construct() { $this->x0 = 1234567890; $this->x1 = 1234567890; $this->x2 = 1234567890; $this->x3 = 1234567890; $this->x4 = 1234567890; $this->x5 = 1234567890; $this->x6 = 1234567890; $this->x7 = 1234567890; $this->x8 = 1234567890; $this->x9 = 1234567890; $this->x10 = 1234567890; $this->x11 = 1234567890; $this->x12 = 1234567890; $this->x13 = 1234567890; $this->x14 = 1234567890; $this->x15 = 1234567890; $this->x16 = 1234567890; $this->x17 = 1234567890; $this->x18 = 1234567890; $this->x19 = 1234567890; $this->x20 = 1234567890; $this->x21 = 1234567890; $this->x22 = 1234567890; $this->x23 = 1234567890; $this->x24 = 1234567890; $this->x25 = 1234567890; $this->x26 = 1234567890; $this->x27 = 1234567890; $this->x28 = 1234567890; $this->x29 = 1234567890; $this->x30 = 1234567890; $this->x31 = 1234567890; $this->x32 = 1234567890; $this->x33 = 1234567890; $this->x34 = 1234567890; $this->x35 = 1234567890; $this->x36 = 1234567890; $this->x37 = 1234567890; $this->x38 = 1234567890; $this->x39 = 1234567890; $this->x40 = 1234567890; $this->x41 = 1234567890; $this->x42 = 1234567890; $this->x43 = 1234567890; $this->x44 = 1234567890; $this->x45 = 1234567890; $this->x46 = 1234567890; $this->x47 = 1234567890; $this->x48 = 1234567890; $this->x49 = 1234567890; $this->x50 = 1234567890; $this->x51 = 1234567890; $this->x52 = 1234567890; $this->x53 = 1234567890; $this->x54 = 1234567890; $this->x55 = 1234567890; $this->x56 = 1234567890; $this->x57 = 1234567890; $this->x58 = 1234567890; $this->x59 = 1234567890; $this->x60 = 1234567890; $this->x61 = 1234567890; $this->x62 = 1234567890; $this->x63 = 1234567890; $this->x64 = 1234567890; $this->x65 = 1234567890; $this->x66 = 1234567890; $this->x67 = 1234567890; $this->x68 = 1234567890; $this->x69 = 1234567890; $this->x70 = 1234567890; $this->x71 = 1234567890; $this->x72 = 1234567890; $this->x73 = 1234567890; $this->x74 = 1234567890; $this->x75 = 1234567890; $this->x76 = 1234567890; $this->x77 = 1234567890; $this->x78 = 1234567890; $this->x79 = 1234567890; $this->x80 = 1234567890; $this->x81 = 1234567890; $this->x82 = 1234567890; $this->x83 = 1234567890; $this->x84 = 1234567890; $this->x85 = 1234567890; $this->x86 = 1234567890; $this->x87 = 1234567890; $this->x88 = 1234567890; $this->x89 = 1234567890; $this->x90 = 1234567890; $this->x91 = 1234567890; $this->x92 = 1234567890; $this->x93 = 1234567890; $this->x94 = 1234567890; $this->x95 = 1234567890; $this->x96 = 1234567890; $this->x97 = 1234567890; $this->x98 = 1234567890; $this->x99 = 1234567890; } } $repeat = 300; $arr = array(); for ($i = 0; $i < 100; $i++) { $arr[] = new XTest; } ?> ``` APC:"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2011-07-13T00:00:00+00:00"><meta property="article:modified_time" content="2011-07-13T00:00:00+00:00"><meta property="article:tag" content="Memcached"><meta property="article:tag" content="PHP"><meta property="article:tag" content="ç¼–ç¨‹"><meta property="article:tag" content="ç¼“å­˜"><meta property="article:tag" content="è¯„æµ‹"><meta name=twitter:card content="summary"><meta name=twitter:title content="APCã€æ–‡ä»¶å’ŒMemcachedæ•ˆç‡å¯¹æ¯”"><meta name=twitter:description content="å¯¹ä¸€ä¸ªä¿å­˜äº†100ä¸ªå¯¹è±¡å®ä¾‹çš„æ•°ç»„è¿›è¡Œ300æ¬¡è¯»å†™ï¼Œè¯¥æ•°ç»„åºåˆ—åŒ–åå¤§å°ä¸º232KBã€‚
æµ‹è¯•ç¯å¢ƒ ç½‘ç»œæœåŠ¡å™¨ PHPç‰ˆæœ¬ æ“ä½œç³»ç»Ÿ ç¡¬ä»¶é…ç½® NGINX v1.0.4 PHP-FPM v5.3.6
APCå¯ç”¨ Archlinux 32bit Intel(R) Core(TM)2 Duo CPU T9400 @ 2.53GHz
Mem: 3G DDR3
Disk: 5400r/s æµ‹è¯•è„šæœ¬ æµ‹è¯•æ•°æ®ï¼š
```php <?php /* * @file data.php */ class XTest { var $x0; var $x1; var $x2; var $x3; var $x4; var $x5; var $x6; var $x7; var $x8; var $x9; var $x10; var $x11; var $x12; var $x13; var $x14; var $x15; var $x16; var $x17; var $x18; var $x19; var $x20; var $x21; var $x22; var $x23; var $x24; var $x25; var $x26; var $x27; var $x28; var $x29; var $x30; var $x31; var $x32; var $x33; var $x34; var $x35; var $x36; var $x37; var $x38; var $x39; var $x40; var $x41; var $x42; var $x43; var $x44; var $x45; var $x46; var $x47; var $x48; var $x49; var $x50; var $x51; var $x52; var $x53; var $x54; var $x55; var $x56; var $x57; var $x58; var $x59; var $x60; var $x61; var $x62; var $x63; var $x64; var $x65; var $x66; var $x67; var $x68; var $x69; var $x70; var $x71; var $x72; var $x73; var $x74; var $x75; var $x76; var $x77; var $x78; var $x79; var $x80; var $x81; var $x82; var $x83; var $x84; var $x85; var $x86; var $x87; var $x88; var $x89; var $x90; var $x91; var $x92; var $x93; var $x94; var $x95; var $x96; var $x97; var $x98; var $x99; function __construct() { $this->x0 = 1234567890; $this->x1 = 1234567890; $this->x2 = 1234567890; $this->x3 = 1234567890; $this->x4 = 1234567890; $this->x5 = 1234567890; $this->x6 = 1234567890; $this->x7 = 1234567890; $this->x8 = 1234567890; $this->x9 = 1234567890; $this->x10 = 1234567890; $this->x11 = 1234567890; $this->x12 = 1234567890; $this->x13 = 1234567890; $this->x14 = 1234567890; $this->x15 = 1234567890; $this->x16 = 1234567890; $this->x17 = 1234567890; $this->x18 = 1234567890; $this->x19 = 1234567890; $this->x20 = 1234567890; $this->x21 = 1234567890; $this->x22 = 1234567890; $this->x23 = 1234567890; $this->x24 = 1234567890; $this->x25 = 1234567890; $this->x26 = 1234567890; $this->x27 = 1234567890; $this->x28 = 1234567890; $this->x29 = 1234567890; $this->x30 = 1234567890; $this->x31 = 1234567890; $this->x32 = 1234567890; $this->x33 = 1234567890; $this->x34 = 1234567890; $this->x35 = 1234567890; $this->x36 = 1234567890; $this->x37 = 1234567890; $this->x38 = 1234567890; $this->x39 = 1234567890; $this->x40 = 1234567890; $this->x41 = 1234567890; $this->x42 = 1234567890; $this->x43 = 1234567890; $this->x44 = 1234567890; $this->x45 = 1234567890; $this->x46 = 1234567890; $this->x47 = 1234567890; $this->x48 = 1234567890; $this->x49 = 1234567890; $this->x50 = 1234567890; $this->x51 = 1234567890; $this->x52 = 1234567890; $this->x53 = 1234567890; $this->x54 = 1234567890; $this->x55 = 1234567890; $this->x56 = 1234567890; $this->x57 = 1234567890; $this->x58 = 1234567890; $this->x59 = 1234567890; $this->x60 = 1234567890; $this->x61 = 1234567890; $this->x62 = 1234567890; $this->x63 = 1234567890; $this->x64 = 1234567890; $this->x65 = 1234567890; $this->x66 = 1234567890; $this->x67 = 1234567890; $this->x68 = 1234567890; $this->x69 = 1234567890; $this->x70 = 1234567890; $this->x71 = 1234567890; $this->x72 = 1234567890; $this->x73 = 1234567890; $this->x74 = 1234567890; $this->x75 = 1234567890; $this->x76 = 1234567890; $this->x77 = 1234567890; $this->x78 = 1234567890; $this->x79 = 1234567890; $this->x80 = 1234567890; $this->x81 = 1234567890; $this->x82 = 1234567890; $this->x83 = 1234567890; $this->x84 = 1234567890; $this->x85 = 1234567890; $this->x86 = 1234567890; $this->x87 = 1234567890; $this->x88 = 1234567890; $this->x89 = 1234567890; $this->x90 = 1234567890; $this->x91 = 1234567890; $this->x92 = 1234567890; $this->x93 = 1234567890; $this->x94 = 1234567890; $this->x95 = 1234567890; $this->x96 = 1234567890; $this->x97 = 1234567890; $this->x98 = 1234567890; $this->x99 = 1234567890; } } $repeat = 300; $arr = array(); for ($i = 0; $i < 100; $i++) { $arr[] = new XTest; } ?> ``` APC:"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#262d33"><title>æ™´è€•é›¨è®€ - APCã€æ–‡ä»¶å’ŒMemcachedæ•ˆç‡å¯¹æ¯”
</title><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=/minima.1733755510.css><script defer type=text/javascript src=/minima.1733755510.js></script></head><script>let theme_2b_used=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";try{if(!("theme"in localStorage)){const e="";(e==="dark"||e==="light")&&(theme_2b_used=e),localStorage.theme=theme_2b_used}document.querySelector("html").classList.add(localStorage.theme)}catch(e){console.error(e)}</script><body class="sm:mx-5 sm:my-0"><header class="flex justify-between items-center mb-6 sm:my-3"><div class="flex items-center"><div id=theme-switcher class="text-4xl cursor-pointer">ğŸŒš</div></div><nav class="flex items-center
whitespace-nowrap overflow-x-auto overflow-y-hidden"><a class=ml-5 href=/>ä¸»é </a>
<a class=ml-5 href=/posts>æ–‡ç« </a>
<a class=ml-5 href=/tags>æ¨™ç±¤</a>
<a class=ml-5 href=/categories>åˆ†é¡</a>
<a class=ml-5 href=/about>é—œæ–¼</a></nav></header><h1 class="mt-6 mb-6">APCã€æ–‡ä»¶å’ŒMemcachedæ•ˆç‡å¯¹æ¯”</h1><div class="mb-3 text-xs flex justify-between sm:flex-col"><div>Posted at &mdash; Jul 13, 2011</div><div class=sm:mt-4><a class=not-first:ml-3 href=/tags/Memcached>#Memcached</a>
<a class=not-first:ml-3 href=/tags/PHP>#PHP</a>
<a class=not-first:ml-3 href=/tags/%e7%bc%96%e7%a8%8b>#ç¼–ç¨‹</a>
<a class=not-first:ml-3 href=/tags/%e7%bc%93%e5%ad%98>#ç¼“å­˜</a>
<a class=not-first:ml-3 href=/tags/%e8%af%84%e6%b5%8b>#è¯„æµ‹</a></div></div><main><p></p><article class=md><p>å¯¹ä¸€ä¸ªä¿å­˜äº†100ä¸ªå¯¹è±¡å®ä¾‹çš„æ•°ç»„è¿›è¡Œ300æ¬¡è¯»å†™ï¼Œè¯¥æ•°ç»„åºåˆ—åŒ–åå¤§å°ä¸º232KBã€‚</p><h2>æµ‹è¯•ç¯å¢ƒ</h2><table><tr><th>ç½‘ç»œæœåŠ¡å™¨</th><th>PHPç‰ˆæœ¬</th><th>æ“ä½œç³»ç»Ÿ</th><th>ç¡¬ä»¶é…ç½®</th></tr><tr><td>NGINX v1.0.4</td><td>PHP-FPM v5.3.6<br>APCå¯ç”¨</td><td>Archlinux 32bit</td><td>Intel(R) Core(TM)2 Duo CPU T9400 @ 2.53GHz<br>Mem: 3G DDR3<br>Disk: 5400r/s</td></tr></table><h2>æµ‹è¯•è„šæœ¬</h2><p>æµ‹è¯•æ•°æ®ï¼š</p>```php
x0 = 1234567890;
$this->x1 = 1234567890;
$this->x2 = 1234567890;
$this->x3 = 1234567890;
$this->x4 = 1234567890;
$this->x5 = 1234567890;
$this->x6 = 1234567890;
$this->x7 = 1234567890;
$this->x8 = 1234567890;
$this->x9 = 1234567890;
$this->x10 = 1234567890;
$this->x11 = 1234567890;
$this->x12 = 1234567890;
$this->x13 = 1234567890;
$this->x14 = 1234567890;
$this->x15 = 1234567890;
$this->x16 = 1234567890;
$this->x17 = 1234567890;
$this->x18 = 1234567890;
$this->x19 = 1234567890;
$this->x20 = 1234567890;
$this->x21 = 1234567890;
$this->x22 = 1234567890;
$this->x23 = 1234567890;
$this->x24 = 1234567890;
$this->x25 = 1234567890;
$this->x26 = 1234567890;
$this->x27 = 1234567890;
$this->x28 = 1234567890;
$this->x29 = 1234567890;
$this->x30 = 1234567890;
$this->x31 = 1234567890;
$this->x32 = 1234567890;
$this->x33 = 1234567890;
$this->x34 = 1234567890;
$this->x35 = 1234567890;
$this->x36 = 1234567890;
$this->x37 = 1234567890;
$this->x38 = 1234567890;
$this->x39 = 1234567890;
$this->x40 = 1234567890;
$this->x41 = 1234567890;
$this->x42 = 1234567890;
$this->x43 = 1234567890;
$this->x44 = 1234567890;
$this->x45 = 1234567890;
$this->x46 = 1234567890;
$this->x47 = 1234567890;
$this->x48 = 1234567890;
$this->x49 = 1234567890;
$this->x50 = 1234567890;
$this->x51 = 1234567890;
$this->x52 = 1234567890;
$this->x53 = 1234567890;
$this->x54 = 1234567890;
$this->x55 = 1234567890;
$this->x56 = 1234567890;
$this->x57 = 1234567890;
$this->x58 = 1234567890;
$this->x59 = 1234567890;
$this->x60 = 1234567890;
$this->x61 = 1234567890;
$this->x62 = 1234567890;
$this->x63 = 1234567890;
$this->x64 = 1234567890;
$this->x65 = 1234567890;
$this->x66 = 1234567890;
$this->x67 = 1234567890;
$this->x68 = 1234567890;
$this->x69 = 1234567890;
$this->x70 = 1234567890;
$this->x71 = 1234567890;
$this->x72 = 1234567890;
$this->x73 = 1234567890;
$this->x74 = 1234567890;
$this->x75 = 1234567890;
$this->x76 = 1234567890;
$this->x77 = 1234567890;
$this->x78 = 1234567890;
$this->x79 = 1234567890;
$this->x80 = 1234567890;
$this->x81 = 1234567890;
$this->x82 = 1234567890;
$this->x83 = 1234567890;
$this->x84 = 1234567890;
$this->x85 = 1234567890;
$this->x86 = 1234567890;
$this->x87 = 1234567890;
$this->x88 = 1234567890;
$this->x89 = 1234567890;
$this->x90 = 1234567890;
$this->x91 = 1234567890;
$this->x92 = 1234567890;
$this->x93 = 1234567890;
$this->x94 = 1234567890;
$this->x95 = 1234567890;
$this->x96 = 1234567890;
$this->x97 = 1234567890;
$this->x98 = 1234567890;
$this->x99 = 1234567890;
}
}
$repeat = 300;
$arr = array();
for ($i = 0; $i < 100; $i++) {
$arr[] = new XTest;
}
?>
```<p>APC:</p>```php
```<p>æ–‡ä»¶ï¼š</p>```php
```<p>Memcached:</p>```php
addServer("127.0.0.1", 11211);
$stime = microtime(true);
for ($i = 0; $i < $repeat; $i++) {
$mem->set('key'.$i, $arr);
$mem->get('key'.$i);
}
$etime = microtime(true);
echo $etime-$stime;
?>
```<h2>æµ‹è¯•ç»“æœ</h2><table><tr><th>APC</th><th>æ–‡ä»¶</th><th>Memcached</th></tr><tr><td>3.4926421642303</td><td>3.6572530269623</td><td>4.6224999427795</td></tr></table><h2>æ€»ç»“</h2><ul><li>APCæ•ˆç‡æœ€é«˜ï¼ŒMemcachedæ•ˆç‡æœ€ä½</li><li>APCå’ŒMemcachedçš„æµ‹è¯•ç»“æœå¾ˆç¨³å®šï¼Œæ–‡ä»¶æ–¹å¼çš„è€—æ—¶ä»å¼€å§‹æ—¶çš„4ç§’é€æ­¥é™ä½å¹¶ç¨³å®šåœ¨3.6ç§’</li><li>çŒœæƒ³ï¼š<ul><li>åœ¨IOé‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œæ–‡ä»¶è¯»å†™å¯èƒ½ç¡®å®æ¯”é€šè¿‡TCPæ“ä½œMemcachedæ•ˆç‡é«˜ï¼Œä½†æ˜¯åœ¨IOé‡è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æ–¹å¼ä¼šå‡ºç°ç“¶é¢ˆï¼ŒMemcachedçš„ä¼˜åŠ¿ä¼šå¾—åˆ°ä½“ç°</li><li>å¯¹äºé›†ç¾¤åº”ç”¨ï¼Œé€šè¿‡NFSå…±äº«æ–‡ä»¶ç¼“å­˜çš„æ•ˆç‡ä¼šä½äºMemcached</li></ul></li></ul><p>Posted via <a href=http://0x3f.org/posts/ultrablog-as-an-ultimate-vim-blogging-plugin/>UltraBlog.vim</a>.</p></article></main><script>const repo="xbot/blog-comments",issueTerm="pathname",theme=localStorage.theme?`github-${localStorage.theme}`:"preferred-color-scheme",script=document.createElement("script");script.src="https://utteranc.es/client.js",script.async=!0,script.crossOrigin="anonymous",script.setAttribute("repo",repo),script.setAttribute("issue-term",issueTerm),script.setAttribute("theme",theme),script.setAttribute("label","comment"),document.querySelector("main").appendChild(script)</script><footer class="mt-8 flex sm:flex-col-reverse justify-between items-center"><p class="mt-0 text-sm">Â© æ·˜æ°” 2022 |
<a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a> on
<a href=https://github.com/mivinci/hugo-theme-minima target=_blank rel="noopener noreferrer">Minima</a></p><p class="flex items-center mt-0"><a class="icon mx-2" href=https://github.com/xbot title=github><svg fill="#63636f" width="18" role="img" viewBox="0 0 24 24"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
</a><a class="icon mx-2" href=/index.xml title=rss><svg fill="#63636f" t="1626591563876" viewBox="0 0 1024 1024" p-id="1984" width="18" height="16"><path d="M128 768a128 128 0 100 256 128 128 0 000-256zM0 368v176c265.104.0 480 214.912 480 480h176c0-362.32-293.696-656-656-656zM0 0v176c468.336.0 848 379.664 848 848h176C1024 458.464 565.536.0.0.0z" p-id="1985"/></svg></a></p></footer></body></html>