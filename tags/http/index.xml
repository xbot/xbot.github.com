<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>HTTP on 晴耕雨讀</title><link>http://0x3f.org/tags/http/</link><description>Recent content in HTTP on 晴耕雨讀</description><generator>Hugo</generator><language>zh-cn</language><copyright>© 2007-2024 鬼马妖刀</copyright><lastBuildDate>Sun, 19 Feb 2012 00:00:00 +0000</lastBuildDate><atom:link href="http://0x3f.org/tags/http/index.xml" rel="self" type="application/rss+xml"/><item><title>NGINX: 405 Not Allowed</title><link>http://0x3f.org/posts/nginx-405-not-allowed/</link><pubDate>Sun, 19 Feb 2012 00:00:00 +0000</pubDate><guid>http://0x3f.org/posts/nginx-405-not-allowed/</guid><description>&lt;p&gt;NGINX不允许向静态文件提交POST方式的请求，否则报405错误。测试方法为，使用curl向服务器上的静态文件提交POST请求：&lt;/p&gt;

```bash
curl -d 1=1 http://localhost/version.txt
```

得到以下结果：

```html
&lt;html&gt;
&lt;head&gt;&lt;title&gt;405 Not Allowed&lt;/title&gt;&lt;/head&gt;
&lt;body bgcolor="white"&gt;
&lt;center&gt;&lt;h1&gt;405 Not Allowed&lt;/h1&gt;&lt;/center&gt;
&lt;hr&gt;&lt;center&gt;nginx/1.0.11&lt;/center&gt;
&lt;/body&gt;
&lt;/html&gt;
```

&lt;p&gt;网上传抄的添加以下配置的解决办法不可用：&lt;/p&gt;

```nginx
error_page 405 =200 @405;
location @405
{
 root /srv/http;
}
```

&lt;p&gt;一种不完美但可用的方法为：&lt;/p&gt;

```nginx
upstream static_backend {
 server localhost:80;
}

server {
 listen 80;

 # ...

 error_page 405 =200 @405;
 location @405 {
 root /srv/http;
 proxy_method GET;
 proxy_pass http://static_backend;
 }
}
```

&lt;p&gt;即转换静态文件接收的POST请求到GET方式。&lt;/p&gt;

&lt;p&gt;Posted via &lt;a href="http://0x3f.org/posts/ultrablog-as-an-ultimate-vim-blogging-plugin/"&gt;UltraBlog.vim&lt;/a&gt;.&lt;/p&gt;</description></item></channel></rss>