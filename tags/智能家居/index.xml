<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>智能家居 on 晴耕雨讀</title><link>http://0x3f.org/tags/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/</link><description>Recent content in 智能家居 on 晴耕雨讀</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>© 淘气 2022</copyright><lastBuildDate>Tue, 07 Apr 2015 10:56:00 +0000</lastBuildDate><atom:link href="http://0x3f.org/tags/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/index.xml" rel="self" type="application/rss+xml"/><item><title>用树苺派做家庭监控</title><link>http://0x3f.org/posts/monitor-home-with-raspberry-pi/</link><pubDate>Tue, 07 Apr 2015 10:56:00 +0000</pubDate><guid>http://0x3f.org/posts/monitor-home-with-raspberry-pi/</guid><description>用树苺派做视频监控，当视野内有物体移动时，自动拍照、录视频、同步到远程主机，并提醒到远程电脑和手机。
用Motion做视频监控 安装Motion，修改几项必要的配置：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 # 照片和视频存储路径 target_dir = /media/sda1/cam # 允许局域网内其它主机访问视频 webcam_localhost off # 监测到移动物体时，创建作为标识的临时文件 on_event_start &amp;#34;echo 1 &amp;gt; /tmp/invasion_detected&amp;#34; # 移动物体消失时，移除临时文件 on_event_end &amp;#34;rm /tmp/invasion_detected&amp;#34; # 监测到移动物体并在保存第一张照片时，发送提醒到电脑和手机 on_picture_save [ -f /tmp/invasion_detected ] &amp;amp;&amp;amp; [ `cat /tmp/invasion_detected` -gt 0 ] &amp;amp;&amp;amp; echo 0 &amp;gt; /tmp/invasion_detected &amp;amp;&amp;amp; proxychains /root/SmartHome/script/alert.py -f %f 用Lsyncd同步到VPS 安装lsyncd并配置：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 settings{ pidfile = &amp;#34;/var/log/lsyncd/lsyncd.</description></item><item><title>用树苺派搭NAS</title><link>http://0x3f.org/posts/make-nas-with-raspberry-pi/</link><pubDate>Fri, 03 Apr 2015 15:13:00 +0000</pubDate><guid>http://0x3f.org/posts/make-nas-with-raspberry-pi/</guid><description>为了让盒子能直接播放远程下载的电影，继续在树苺派上搭NAS。
安装samba，然后配置：
1 2 3 4 5 6 7 [nas] path = /media/sda1 valid users = @users force group = users create mask = 0660 directory mask = 0771 read only = no 把Linux用户添加到samba并设置密码：
1 smbpasswd -a pi 盒子上的Kodi硬解有问题，用ES+MX Player替代。电脑上用Kodi。</description></item><item><title>用树苺派实现远程下载</title><link>http://0x3f.org/posts/remote-downloading-with-raspberry-pi/</link><pubDate>Sat, 28 Mar 2015 19:14:00 +0000</pubDate><guid>http://0x3f.org/posts/remote-downloading-with-raspberry-pi/</guid><description>远程用树苺派利用空闲时间下载大文件，需要百度云、aria2和VPS。因为网络运营商给的IP不是真的公网IP，而且免费的动态域名服务不稳定，所以用VPS把树苺派上的端口转发到外网。
树苺派 在树苺派上部署aria2下载服务，并发布到VPS。
安装aria2，创建以下配置文件，修改/media/sda1为实际下载目录：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 dir=/media/sda1 file-allocation=prealloc continue=true log-level=info #log-level=debug max-connection-per-server=10 summary-interval=120 daemon=true enable-rpc=true rpc-listen-port=6800 rpc-listen-all=true max-concurrent-downloads=3 save-session=/etc/aria2/save-session.list input-file=/etc/aria2/save-session.list log=/media/sda1/aria.log disable-ipv6=true disk-cache=25M timeout=600 retry-wait=30 max-tries=0 user-agent=netdisk;4.4.0.6;PC;PC-Windows;6.2.9200;WindowsBaiduYunGuanJia 我的树苺派用Archlinux，创建systemd的服务配置文件：
1 2 3 4 5 6 7 8 9 10 11 12 13 [Unit] Description=aria2c -- file download manager After=network.target [Service] Type=forking User=%i WorkingDirectory=%h Environment=VAR=/var/%i ExecStart=/usr/bin/aria2c --daemon --enable-rpc --rpc-listen-all --rpc-allow-origin-all -c -D --conf-path=/etc/aria2/aria2.</description></item></channel></rss>