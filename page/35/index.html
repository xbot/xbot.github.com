<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>晴耕雨讀</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="晴耕雨讀">
<meta property="og:url" content="http://0x3f.org/page/35/index.html">
<meta property="og:site_name" content="晴耕雨讀">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="晴耕雨讀">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel="stylesheet" type="text/css">
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-93233020-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
</html>
<body>
  <div id="container">
    <!-- blair add baidu tongji start... @2017.10.03 -->
<!-- blair add baidu tongji end ! @2017.10.03 -->

<header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/archives">目录</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="https://t.me/s/blingings">不灵</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://0x3f.org"></form>
        </div>
      </nav>
    </div>
  </div>
</header>

    <br>
    <section id="main" class="outer">
      <article id="post-upgraded-to-fcitx4" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/upgraded-to-fcitx4/"><strong>升级fcitx到4.0</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-20</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/upgraded-to-fcitx4/" class="article-date">
  <time datetime="2010-11-19T16:00:00.000Z" itemprop="datePublished">2010-11-20</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/upgraded-to-fcitx4/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>虽然是个大版本，但4.0在实际功能上并没有太大的进步。新版本相对于3.x增加的主要特性是：</p>
<ol><br>  <li>支持皮肤</li><br>  <li>图形界面的配置工具</li><br>  <li>增加系统托盘图标</li><br>  <li>托盘图标和输入条提供右键菜单，如皮肤切换、选择输入法等</li><br>  <li>放弃GBK编码，改用UTF-8编码</li><br>  <li>拼音支持多词库</li><br>  <li>一系列细节功能及Bug修复</li><br></ol>

<p>最主要的特性只有前两个，可见fcitx 4.0只是这个项目涅槃后的一个新的起点，象征意义大于实际意义，尤其对于码表输入法用户来说是这样。三年前我就<a href="http://0x3f.org/?p=185">说过</a>，fcitx在用户造词上有个致命缺陷，就是对于多音字它总是使用字母表中声母靠前的编码，对于音码或者音形码输入法来说，这样造出来的词的编码经常会是错的，更糟糕的是用户还不容易自行修改词组编码。三年后的今天，新版本并没有解决这个问题。</p>
<p>此外，需要注意的是，新版本对界面和易用性的改进也带来一些负面的影响，fcitx不再是当年以轻巧著称的那只小企鹅了，在我这里，它的内存占用达到了26M，所幸反应速度仍然很快。</p>
<p>三年前，由于众所周知的原因，fcitx的路线图显得非常混乱，几个新版本都非常不稳定，所以我不再使用源中的版本，转而编译安装了新版本中相对稳定的黑色星期五版，不知不觉中三年过去了，想到一直用著这个版本就这么过来了，很感慨。要卸载编译安装的程序就得用源码重新configure一下再make uninstall，所幸还能在<a href="http://www.fcitx.org/download/fcitx-3.5-BlackFri.tar.bz2" target="_blank" rel="noopener">这里</a>找到这个版本。</p>
<p>Archlinux下安装AUR中的fcitx-config时报如下错误：</p>
<blockquote><br>ERROR: certificate common name “*.github.com” doesn’t match requested host name “github.com”.<br></blockquote>

<p>需要修改/etc/makepkg.conf，使wget在下载源码时不做安全验证：</p>
<blockquote><br># 增加–no-check-certificate参数<br>DLAGENTS=(‘ftp::/usr/bin/wget -c –passive-ftp -t 3 –waitretry=3’<br>          ‘http::/usr/bin/wget -c -t 3 –waitretry=3 –no-check-certificate’<br>          ‘https::/usr/bin/wget -c -t 3 –waitretry=3 –no-check-certificate’<br>          ‘rsync::/usr/bin/rsync -z’<br>          ‘scp::/usr/bin/scp -C’)<br></blockquote>

<p>新版本的稳定性不如黑色星期五版，如果把简繁转换热键修改为ALT+J，使用时会导致fcitx崩溃。加之实际功能的改进不大，所以是否升级就无可无不可了。</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-adjust-disk-partitions-in-archlinux" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/adjust-disk-partitions-in-archlinux/"><strong>调整Arch的磁盘分区</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/adjust-disk-partitions-in-archlinux/" class="article-date">
  <time datetime="2010-11-12T16:00:00.000Z" itemprop="datePublished">2010-11-13</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/adjust-disk-partitions-in-archlinux/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><h2>简述</h2><p></p>

<p>目标：移除Windows 7，整块硬盘完全分配给Archlinux。</p>

<p>原分区结构：</p>

<p>
<table class="art_tbl">
<tr><th class="art_tbl_th">分区</th><th class="art_tbl_th">类型</th><th class="art_tbl_th">挂载</th><th class="art_tbl_th">文件系统</th><th class="art_tbl_th">容量</th></tr>
<tr><td class="art_tbl_td">/dev/sda1</td><td class="art_tbl_td">主分区，启动分区</td><td class="art_tbl_td">Windows 7的安装分区</td><td class="art_tbl_td">ntfs</td><td class="art_tbl_td">30G</td></tr>
<tr><td class="art_tbl_td">/dev/sda2</td><td class="art_tbl_td">扩展分区</td><td class="art_tbl_td">-</td><td class="art_tbl_td">-</td><td class="art_tbl_td">-</td></tr>
<tr><td class="art_tbl_td">/dev/sda5</td><td class="art_tbl_td">逻辑分区</td><td class="art_tbl_td">Windows的D盘</td><td class="art_tbl_td">ntfs</td><td class="art_tbl_td">40G</td></tr>
<tr><td class="art_tbl_td">/dev/sda3</td><td class="art_tbl_td">主分区</td><td class="art_tbl_td">/</td><td class="art_tbl_td">ext3</td><td class="art_tbl_td">78G</td></tr>
<tr><td class="art_tbl_td">/dev/sda4</td><td class="art_tbl_td">交换分区</td><td class="art_tbl_td">swap</td><td class="art_tbl_td">-</td><td class="art_tbl_td">2G</td></tr>
</table>
</p>

<p>调整后分区结构：</p>

<p>
<table class="art_tbl">
<tr><th class="art_tbl_th">分区</th><th class="art_tbl_th">类型</th><th class="art_tbl_th">挂载</th><th class="art_tbl_th">文件系统</th><th class="art_tbl_th">容量</th></tr>
<tr><td class="art_tbl_td">/dev/sda1</td><td class="art_tbl_td">主分区，启动分区</td><td class="art_tbl_td">/</td><td class="art_tbl_td">ext3</td><td class="art_tbl_td">30G</td></tr>
<tr><td class="art_tbl_td">/dev/sda2</td><td class="art_tbl_td">主分区</td><td class="art_tbl_td">/home</td><td class="art_tbl_td">ext3</td><td class="art_tbl_td">120G</td></tr>
<tr><td class="art_tbl_td">/dev/sda3</td><td class="art_tbl_td">交换分区</td><td class="art_tbl_td">swap</td><td class="art_tbl_td">-</td><td class="art_tbl_td">2G</td></tr>
</table>
</p>

<p></p><h2>步骤</h2><p></p>

<ol>
  <li>Archlinux中重装GRUB，覆盖Windows 7的BCD：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grub-install /dev/sda</span><br></pre></td></tr></table></figure></li>
  <li>在GRUB启动菜单中加入将要复制到sda1分区中的Archlinux的启动项：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /boot/grub/menu.lst</span><br></pre></td></tr></table></figure><br><blockquote>
# (2) Arch Linux
title  Arch Linux
root   (hd0,0)
kernel /boot/vmlinuz26 root=/dev/sda1 resume=/dev/sda4 ro acpi_osi="Linux"
initrd /boot/kernel26.img
</blockquote></li>
  <li><a href="http://0x3f.org/?p=1699">安装U盘启动的Puppy Linux</a></li>
  <li>Puppy中格式化sda1分区：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext3 /dev/sda1</span><br></pre></td></tr></table></figure></li>
  <li>复制sda3上的Archlinux所有的文件到sda1：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先点击桌面上sda1和sda3的盘符，使之被挂载到/mnt下</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /mnt/sda3</span><br><span class="line">cp -a * /mnt/sda1</span><br></pre></td></tr></table></figure></li>
  <li>修改sda1上的fstab：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /mnt/sda1/etc/fstab</span><br></pre></td></tr></table></figure><br><blockquote>
# 修改必要的挂载点，如将根目录的挂载点由sda3改为sda1：
/dev/sda1           /         ext3      defaults,noatime       0       1
</blockquote></li>
  <li>重启系统，并引导到新分区上的系统中</li>
  <li>重新安装GRUB，使之引导sda1分区中的系统：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grub-install /dev/sda</span><br></pre></td></tr></table></figure></li>
  <li>重启并进入Puppy，使用gparted删除除sda1以外的所有分区，然后在空闲的空间上创建ext3格式的主分区sda2和交换分区sda3</li>
  <li>移动sda1上home目录下的所有东西到sda2：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -a /mnt/sda1/home/* /mnt/sda2</span><br><span class="line">rm -rf /mnt/sda1/home/*</span><br></pre></td></tr></table></figure></li>
  <li>修改sda1上的fstab和menu.lst：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /mnt/sda1/etc/fstab</span><br></pre></td></tr></table></figure><blockquote>
# 将fstab中磁盘分区的挂载点配置为如下内容
/dev/sda1        /          ext3      defaults,noatime         0        1
/dev/sda2        /home      ext3      defaults,noatime         1        2
/dev/sda3        swap       swap      defaults                 0        0
</blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /mnt/boot/grub/menu.lst</span><br></pre></td></tr></table></figure><blockquote>
# 将原来启动项中的sda3修改为sda1，由于配置过休眠，也将resume参数中的sda4改为sda3，即交换分区
</blockquote>
  </li><li>重启系统</li>
</ol>

<p></p><h2>后记</h2><p></p>

<p>从<a href="http://0x3f.org/?tag=arch">Arch</a><a href="http://0x3f.org/?p=819">诞生</a>时只装XP，到<a href="http://0x3f.org/?p=836">装上Archlinux</a>后双系统并存，再到<a href="http://0x3f.org/?p=1180">尝试Win7</a>，两年的时间里，一直有很多原因让Windows像只寄生虫一样顽强地活著。最近硬盘空间越来越紧张，早前装的Win7也很长时间不用了，于是时隔三年之后，我又成了个纯粹的Archer。</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-howto-create-bootable-udisk-for-puppylinux" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/howto-create-bootable-udisk-for-puppylinux/"><strong>制作Puppy Linux的启动U盘</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-11</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/howto-create-bootable-udisk-for-puppylinux/" class="article-date">
  <time datetime="2010-11-10T16:00:00.000Z" itemprop="datePublished">2010-11-11</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/howto-create-bootable-udisk-for-puppylinux/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Puppy Linux的体积只有一百多兆字节，但图形界面实现得很完备，也包含了很多短小精悍的工具，安装和使用都很方便，非常适合用来做日常维护工具盘。</p>
<p>Puppy自带了傻瓜式的启动U盘制作工具，但官方只提供整个发行版的ISO镜像下载，通常需要刻录成光盘并引导系统启动后才可以继续将Puppy安装到U盘。其实也可以不刻录光盘，而是把Puppy安装到硬盘上。</p>
<p>Puppy本身封装得很好，对软硬件环境的要求不高，完全可以安装到一个独立的目录中而不影响其它操作系统。本文基于Linux环境下通过GRUB引导的前提，Windows下应该可以通过GRUB4DOS引导。</p>
<ol>
<li>挂载Puppy的ISO镜像到一个目录：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o loop puppy.iso /media/puppy</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>复制镜像中的所有文件到根目录下的puppy目录：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /puppy</span><br><span class="line">sudo cp -a /media/puppy/* /puppy</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>修改GRUB的引导文件，加入Puppy的引导项：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /boot/grub/menu.lst</span><br></pre></td></tr></table></figure>
<blockquote><br># (2) Puppy<br>title Puppy<br>root (hd0,2)<br>kernel /puppy/vmlinuz root=/dev/ram0<br>initrd /puppy/initrd.gz<br></blockquote>

<ol start="4">
<li><p>重启系统并启动到Puppy</p>
</li>
<li><p>使用桌面上的<strong>Setup</strong>中的<strong>Puppy Universal Installer</strong>制作启动U盘。不过虽然这是官方推荐的制作工具，但我的杂牌U盘无论如何也不能引导系统，最后使用另一个备选的工具“<strong>BootFlash USB Installer</strong>”的<strong>USB-HDD</strong>模式制作成功。</p>
</li>
</ol>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-storage-space-analysing-tools" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/storage-space-analysing-tools/"><strong>目录与文件的存储空间占用分析工具</strong></a>
      <small class="article-date-index">&nbsp; 2010-10-01</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/storage-space-analysing-tools/" class="article-date">
  <time datetime="2010-09-30T16:00:00.000Z" itemprop="datePublished">2010-10-01</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/storage-space-analysing-tools/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h3>du</h3>

<p>du是命令行中用于查看目录和文件的空间占用情况的指令。</p>
<p>常用示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h /tmp/logs</span><br></pre></td></tr></table></figure>
<h3>ncdu</h3>

<p><a href="http://dev.yorhel.nl/ncdu" target="_blank" rel="noopener">ncdu</a>为du提供了一个基于NCurses的命令行用户界面，并能够按照多种条件对分析结果进行排序，它大大简化了du指令的使用。</p>
<p><a href="http://picasaweb.google.com/lh/photo/xQINh1zrBdZcY27Evm9Cog?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh5.ggpht.com/_ceUJ_lBTHzc/TKWkJk8hkjI/AAAAAAAABfU/vTIJqHTxAX0/s400/disk_usage_analyzers-ncdu_01.png" height="250" width="400"></a></p>
<h3>baobab</h3>

<p><a href="http://www.marzocca.net/linux/baobab/index.html" target="_blank" rel="noopener">baobab</a>使用基于GTK的图形用户界面，突出特点是可以分析远程目录。</p>
<p><a href="http://picasaweb.google.com/lh/photo/rGbtFe2Je23r1TB1MmX-tA?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh3.ggpht.com/_ceUJ_lBTHzc/TKWkJ1_yLJI/AAAAAAAABfY/pt_peEEU2f8/s400/disk_usage_analyzers-baobab_01.png" height="400" width="386"></a></p>
<h3>参考</h3>

<ol><br>    <li><a href="http://www.vpser.net/manage/ncdu.html" target="_blank" rel="noopener">磁盘目录占用空间计算排序工具 - ncdu</a></li><br></ol>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-howto-setup-twitter-api-of-your-own" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/howto-setup-twitter-api-of-your-own/"><strong>搭建自己的Twitter API</strong></a>
      <small class="article-date-index">&nbsp; 2010-10-01</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/howto-setup-twitter-api-of-your-own/" class="article-date">
  <time datetime="2010-09-30T16:00:00.000Z" itemprop="datePublished">2010-10-01</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/howto-setup-twitter-api-of-your-own/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2> 创建Twitter应用程序 </h2>

<p>从2010年9月起，twitter只支持第三方应用程序使用oauth方式登录。要使用第三方API程序，就必须先在twitter中创建应用程序。</p>
<p>申请地址如下：</p>
<p><a href="https://twitter.com/apps/" target="_blank" rel="noopener">https://twitter.com/apps/</a></p>
<p>填写信息时，<b>Application Type</b>应该选<b>Browser</b>，<b>Default Access type</b>应选<b>Read &amp; Write</b>，<b>User Twitter for login</b>不选，其它随便。</p>
<p>创建成功后，该应用程序的<b>Consumer key</b>和<b>Consumer secret</b>在部署API时一般都要用到。</p>
<h2> 第三方API程序 </h2>

<h3> gtap </h3>

<p><a href="http://code.google.com/p/gtap/" target="_blank" rel="noopener">gtap</a>使用python开发，可部署在appspot上。</p>
<p>部署前，先修改<b>app.yaml</b>，填写在appspot上创建的应用程序的ID，并使用符号#注释掉<b>secure: always</b>，因为GFW屏蔽了appspot的https。</p>
<p>然后修改<b>main.py</b>，填写Consumer key和Consumer secret。</p>
<p>最后安装<a href="http://code.google.com/intl/zh-CN/appengine/downloads.html" target="_blank" rel="noopener">App Engine SDK</a>，使用其中的<b>appcfg.py</b>上传gtap文件夹：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">appcfg.py update gtap</span><br></pre></td></tr></table></figure>
<p>在浏览器中（此时应使用可以翻墙的代理）访问在appspot上创建的应用程序的URL地址（如：<a href="http://xxx.appspot.com" target="_blank" rel="noopener">http://xxx.appspot.com</a> ），在打开的页面中点击<b>Sign in with Twitter</b>，然后在跳转到的页面中点击<b>Allow</b>按钮。在跳转到的页面上修改API的密码（据说有些客户端要求API的密码与Twitter的密码一致）。</p>
<p>在客户端中使用API的地址如下：</p>
<blockquote><br><a href="http://xxx.appspot.com/" target="_blank" rel="noopener">http://xxx.appspot.com/</a><br></blockquote>

<p>其中，<b>xxx</b>是appspot应用程序的ID，末尾的斜杠必不可少。</p>
<h3> twip </h3>

<p><a href="http://code.google.com/p/twip/" target="_blank" rel="noopener">twip</a>使用php开发，应部署在支持PHP的服务器上。</p>
<p>首先将<b>config-example.php</b>改名为<b>config.php</b>，然后修改其中的OAUTH_KEY/OAUTH_SECRET/BASE_URL三项内容，前两项分别是Consumer key和Consumer secret，base_url应该是twip部署到服务器上后的URL地址（如<a href="http://myblog.com/twip/" target="_blank" rel="noopener">http://myblog.com/twip/</a> ，最后的斜杠必不可少）。</p>
<p>然后在浏览器中访问上面的base_url，选择使用o模式，API地址会在最后的页面中输出。</p>
<h2> 补充说明 </h2>

<ol><br><li>当前版本的Google App Engine SDK要求使用python 2.5，但如果只是用来上传应用程序到appspot，2.5以上版本的python也可以用，只是在上传时会报某些模块已不推荐使用。如果使用appcfg.py时报找不到2.5版本的python，可以强制使用已安装的新版本的python执行之，即：python appcfg.py update gtap</li><br></ol>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-note-after-the-mid-autumn-day" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/note-after-the-mid-autumn-day/"><strong>中秋后记</strong></a>
      <small class="article-date-index">&nbsp; 2010-09-26</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/note-after-the-mid-autumn-day/" class="article-date">
  <time datetime="2010-09-25T16:00:00.000Z" itemprop="datePublished">2010-09-26</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/note-after-the-mid-autumn-day/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>可以让回忆放肆一些。</p>
<p>中秋的晚上公司餐厅放电影，《邻家特工》和《越光宝盒》，本来打算看完《越光》就走，结果先放的是《特工》。也好，复习一下，好在这片子不错，再看也挺有意思。《越光》纯属烂片，但是如今看看这种不费脑子的东西也变得无可无不可。免费的零食很烘托气氛，唯一的惊喜是居然还有罐装啤酒。</p>
<p>回到住处的当夜就发布了Dumperor。其实这个东西很早就开始做了，起初的目的是为了判断数据库脚本从SQL Server迁移到Oracle和MySQL是否成功。单纯的迁移只能保证修改后的脚本在这两个数据库中执行不会报错，但究竟是不是该执行的东西都成功执行了，一般很难判断，尤其是那帮家伙总是在发版前一两天才告诉我要迁移脚本，那么多不规范的语句，能保证不报错就已经不错了，遑论没有遗漏。所以就著手做一个数据库表结构和数据的导出工具，这样只需用diff工具比较标准数据库和测试数据库导出的脚本就可以了。</p>
<p>从一开始我就决定不使用公司产品的一行代码。其实做这个东西最大的麻烦不是来自来自于如何查询不同的数据库的表结构，而是数据库抽象层。如果要白手起家搞个抽象层的话，我想可能代码量比Dumperor本身都大，于是选择了Yii框架。后来在Dumperor基本成型时又觉得为了仅仅使用最基本的数据库查询功能就捆绑这么大一个框架，有点搞笑，谢天谢地，我终于花时间学了PDO。</p>
<p>中秋节放假的第二天，开始读Google Code上关于Chrome扩展开发的官方文档。这事源于本尊被另一个Chrome扩展作者无视了。</p>
<p>一直强迫自己喜欢上Firefox，但都败了。本来对Opera充满希望，但是从10.0起它带给我的除了失望就是更多的失望，这个东西的发展就像它的国家的位置一样怪异，你永远不能以常人的思维去臆测Opera的开发者，他们就像一群母系氏族社会的娘们儿一样整天跟著感觉走。</p>
<p>于是不知道什么时候我就开始经常用Chrome了，前段时间开始用一个扩展辅助MLDonkey下载。这个东西会在工具栏里添加一个图标，唯一的作用就是打开选项设置页面设置那个也许这辈子都只需要设置一次的MLDonkey的URL地址。于是我给那个扩展的作者写了封邮件，那家伙居然到现在都没有回复。</p>
<p>所以本尊决定无视他了。太祖武皇帝的那句丰衣足食的圣谕真是至理名言，读完文档我就发现这个扩展完全应该用Chrome的Page Action取代Browser Action，简单地说就是当且仅当本页面中包含有可下载的资源时才在地址栏中显示一个图标，而不应该总是在工具栏占用一个图标的位置。</p>
<p>随后要做的就是用AJAX请求取代弹出新窗口的方式添加下载任务，我嫌每次添加一个下载任务后都要关闭一个弹出窗口太麻烦。我的目标是用AJAX请求将要下载的任务在后台传递给MLDonkey，并用Chrome的Desktop Notification功能弹出桌面提示对话框显示结果状态。这样很优雅。</p>
<p>但是实际去做的时候问题来了，虽然Chrome本身允许扩展使用跨域的AJAX，但是至少在和MLDonkey进行通讯时，无论成功与否，得到的返回信息都是空的，状态码也都是0。这个问题浪费了我几乎一整天的时间，最终我决定用AJAX的请求响应时间来判断失败或成功，因为一次AJAX请求响应过程在MLDonkey没启动的时候耗费的时间一般会比正在运行时要长。这就要求每个用户都要根据自己的情况设定合适的超时时间。为了避免麻烦，最后还是实现了通过弹窗添加下载任务的模式，毕竟这个东西总是可靠的。</p>
<p>要发布的时候发现如今在Chrome Extension Gallery中发布扩展居然要收费了，虽然只是一次性的。最后花了八两银子注册了Google Checkout账户，又付了五刀美帝币，才把DonkeyBuddy传上去。发布个免费扩展还得倒贴，本尊也太背了吧。</p>
<p>节后收到了Dell sk8115键盘、HP百灵无线鼠标和Nokia BH-105蓝牙耳机，sk8115是用来让我的纤纤玉手撒野的，百灵鼠是用来接替即将退役的雷柏7100的，而BH-105和我的小七搭配得天衣无缝。</p>
<p>很久没有安静地整理一下头绪了，感谢我那价值四十两银子的Dell sk8115，它让我显得如此的语无伦次。</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-donkeybuddy-a-chrome-extension-for-mldonkey" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/donkeybuddy-a-chrome-extension-for-mldonkey/"><strong>DonkeyBuddy: A Chrome Extension for MLDonkey</strong></a>
      <small class="article-date-index">&nbsp; 2010-09-24</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/donkeybuddy-a-chrome-extension-for-mldonkey/" class="article-date">
  <time datetime="2010-09-23T16:00:00.000Z" itemprop="datePublished">2010-09-24</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/donkeybuddy-a-chrome-extension-for-mldonkey/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <div class="illustration_left">
<a href="http://picasaweb.google.com/lh/photo/CLpE8Gtpb3r3F9kcqmS60g?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh5.ggpht.com/_ceUJ_lBTHzc/TJyWhIpMAgI/AAAAAAAABec/KDw6n_qdQ98/s800/donkey-256x256.png"></a>
</div>

<p><strong>DonkeyBuddy</strong> is an extension for Google Chrome Browser. It's intended to make life easier when you add downloading tasks to MLDonkey.</p>

<h2>Features</h2>

<ol>
<li>Users can choose how to interact with MLDonkey, either by AJAX or
popup windows.</li>
<li>The AJAX mode interacts with MLDonkey by AJAX requests and uses
desktop notifications to show the results, so it won't bother you by
popping up windows and forcing you to close them.</li>
<li>The popup-window mode interacts with MLDonkey by popping up a window
and displays results in it, this is always a reliable way to add
downloads but annoying.</li>
<li>An icon will be displayed in the location bar only when downloadable
resources are found in the current tab, so it saves you the space in
both toolbar and location bar.</li>
<li>Batch downloading.</li>
</ol>

<h2>Screenshots</h2>

<ol>
<li>Location bar icon: <br>
<a href="http://picasaweb.google.com/lh/photo/021647BS--VLalgORMtuVA?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh6.ggpht.com/_ceUJ_lBTHzc/TJyWhUJIzBI/AAAAAAAABeg/ZQ2WeLfTf0k/s800/donkeybuddy-location_bar_icon_01.png" alt="image"></a></li>
<li>Desktop notification: <br>
<a href="http://picasaweb.google.com/lh/photo/aBu0jSZu3y7Ux-EKKgQibQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh6.ggpht.com/_ceUJ_lBTHzc/TJyWhchc1lI/AAAAAAAABek/O3OuDRkgL88/s400/donkeybuddy-notification_01.png" alt="image"></a></li>
<li>Popup window: <br>
<a href="http://picasaweb.google.com/lh/photo/GbGe38VG8mU_LyXZDFYgtA?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh5.ggpht.com/_ceUJ_lBTHzc/TJyWhmg-04I/AAAAAAAABeo/8cbj0a-m_Fg/s400/donkeybuddy-popup_window_01.png" alt="image"></a></li>
<li>Settings page: <br>
<a href="http://picasaweb.google.com/lh/photo/uUKzfwcmEQfJaHY6cHVNqw?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh3.ggpht.com/_ceUJ_lBTHzc/TJyWhsEQILI/AAAAAAAABes/ezlPD6jaUuQ/s400/donkeybuddy-settings_01.png" alt="image"></a></li>
</ol>

<h2>Install</h2>

<p><a href="https://chrome.google.com/webstore/detail/hbajjpcakkngealbehjippmdbfapodnn" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/hbajjpcakkngealbehjippmdbfapodnn</a></p>

<h2>FAQ</h2>

<ol>
<li><p><strong>Why a success notification pops up when I haven't even started
MLDonkey ?</strong></p>

<ul>
<li>Since the responses of the cross-domain AJAX requests have an
empty message and a status which has the value 0, so I can't
identify that whether they are successful or not.</li>
<li>But when MLDonkey is not running, AJAX requests always take more
time to receive responses, so if a request has not received its
reponse within a reasonable time, DonkeyBuddy will take it as a
failure. So you should set the *AJAX timeout* option to a
suitable value on your condition.</li>
<li>If you are still in trouble, use the popup-windows mode instead.</li>
</ul></li>
<li><p><strong>Why a failure notification pops up when the downloading task has
acturally been added ?</strong></p>

<ul>
<li>Take a look at the upper question.</li>
</ul></li>
<li><p><strong>How can I send the selected links to MLDonkey in one click ?</strong></p>

<ul>
<li>Click on this extension's icon in the address bar.</li>
</ul></li>
</ol>

<h2>Change log</h2>

<blockquote>
  <p><strong>version 1.1.0 (2011-05-15 Sunday)</strong>
  Enable batch downloading for VeryCD.com.</p>
  
  <p><strong>version 1.0.1 (2010-09-25 Saturday)</strong>
  1.  Fix the problem that the image in the option page doesn't display
      as is expected.
  2.  Set the default value of the option *AJAX timeout* to 1000.</p>
  
  <p><strong>version 1.0 (2010-09-24 Friday)</strong> Initial release.</p>
</blockquote>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-dumperor-as-a-multidb-dumping-tool" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/dumperor-as-a-multidb-dumping-tool/"><strong>Dumperor: Multi-Database Dumping Toolkit</strong></a>
      <small class="article-date-index">&nbsp; 2010-09-23</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/dumperor-as-a-multidb-dumping-tool/" class="article-date">
  <time datetime="2010-09-22T16:00:00.000Z" itemprop="datePublished">2010-09-23</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/dumperor-as-a-multidb-dumping-tool/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <div class="illustration_left"><br>    <a href="http://picasaweb.google.com/lh/photo/lR2jgtHibgYwfhCy3fJyMQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh3.ggpht.com/_ceUJ_lBTHzc/TI44ZufyOhI/AAAAAAAABeM/6ElHu0gdYzY/s800/dumperor.png"></a><br></div>

<p><strong>Dumperor</strong> is a multi-database dumping toolkit. It dumps table structures and data from databases, and generates CREATE-TABLE SQL statements for table structures or INSERT SQL statements for data.</p>
<p>Part of the original intention for developing Dumperor is to check whether a migration of SQL scripts from one database to another is successful, you know, by comparing the differences between two files, one dumped before executing scripts and the other after. The second part is to ensure that upgrades to table structures or data not miss anything, similarly. The last part is to take samples of databases and put up development or testing environments with them, or even replace sensitive information with fake data.</p>
<p>Dumperor is written in PHP 5 and hosted on GitHub with the New BSD License:</p>
<p><a href="https://github.com/xbot/Dumperor" target="_blank" rel="noopener">https://github.com/xbot/Dumperor</a></p>
<p>For the shortage of time, there must be some limitations and bugs in Dumperor. So reports from users are welcome, emails prefered. I will be very grateful if someone send their suggestions on Dumpeor to me.</p>
<h2>Features</h2>

<ol><br>    <li>Currently support Microsoft SQL Server, Oracle and MySQL.</li><br>    <li>Dump table structures and generate CREATE-TABLE SQL statements.</li><br>    <li>Dump data and generate INSERT SQL statements.</li><br>    <li>Dump table structures or data and output them in a human readable format.</li><br>    <li>Save dumped information to user-specified files.</li><br>    <li>Display table structures with web page tables in the web browser.</li><br>    <li>Options controlling which information should be displayed in the web browser.</li><br>    <li>Options controlling which information should be and should not be dumped from the database.</li><br>    <li>A limit number can be set to take sample of a huge database.</li><br>    <li>Needless tables or columns can be prevented from appearing in dumped results.</li><br>    <li>Only the needed tables are to be exported if you like.</li><br>    <li>Sensitive columns can be dumped with fake data.</li><br>    <li>Conditions can be added to data querying statements.</li><br>    <li>With PDO support by default but extensive to many kinds of database toolkits.</li><br>    <li>More in the future …</li><br></ol>

<h2>Requirements</h2>

<ol><br>    <li>A web server configured with PHP5 support.</li><br>    <li>PDO feature of PHP.</li><br>    <li>PHP 5.x, notice that some versions in 5.3.x series have a <a href="http://bugs.php.net/bug.php?id=47332" target="_blank" rel="noopener">bug in function parse_ini_file(), which may cause trouble.</a></li><br></ol>

<h2>Limitations (Known Issues)</h2>

<ol><br>    <li>Conditions for data querying only support numeric columns and equation relation.</li><br>    <li>Support for auto increment columns has not been implemented.</li><br>    <li>Sensitive columns must be prefixed with table names.</li><br>    <li>Needless columns must be specified only with column names, nothing more.</li><br>    <li>Data types which have not been tested may fail dumping.</li><br></ol>

<h2>Installation Instructions</h2>

<ol><br>    <li>Download a stable release from GitHub or clone a git repo:</li><br>    <ul><br>        <li><code>git clone git://github.com/xbot/Dumperor.git</code></li><br>    </ul><br>    <li>Copy files to a folder which can be visited by the web server, e.g. www/dumperor.</li><br>    <li>Rename dumperor.ini.sample to dumperor.ini and change the settings to meet your needs.</li><br>    <li>Visit Dumperor from the web browser to start dumping.</li><br></ol>

<h2>News</h2>

<ol><br>    <li>2011-03-14 v1.0.0 released. <a href="https://github.com/xbot/Dumperor/wiki/Changelog" target="_blank" rel="noopener">changelog</a></li><br>    <li>2010-09-22 v0.1a released. <a href="https://github.com/xbot/Dumperor/wiki/Changelog" target="_blank" rel="noopener">changelog</a></li><br></ol>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-howto-cool-archlinux-down" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/howto-cool-archlinux-down/"><strong>Arch不完全降温笔记</strong></a>
      <small class="article-date-index">&nbsp; 2010-09-18</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/howto-cool-archlinux-down/" class="article-date">
  <time datetime="2010-09-17T16:00:00.000Z" itemprop="datePublished">2010-09-18</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/howto-cool-archlinux-down/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>主要目标是解决我的X200在Archlinux<em>（本文内容均基于此发行版）</em>下CPU温度长期居高不下的问题，基本原理是使用<a href="http://wiki.archlinux.org/index.php/Cpufrequtils" target="_blank" rel="noopener">cpufrequtils</a>根据CPU负载状况自动变频，和使用<a href="http://wiki.archlinux.org/index.php/Laptop_Mode_Tools" target="_blank" rel="noopener">laptop-mode-tools</a>实现其它硬件设备的自动节能。最直接的效果是省电，从而延长电池的使用时间，产生的附加影响就是CPU及笔记本整体的温度下降。我几乎不用电池，所以节能不是我的关注点，但降温却是我所欲也。</p>

<p>首先安装cpufrequtils，并将<strong>acpi-cpufreq</strong>、<strong>cpufreq_ondemand</strong>、<strong>cpufreq_powersave</strong>加入<strong>rc.conf</strong>的<strong>MODULES</strong>中，使系统在启动时加载这些模块。</p>

<p>默认情况下，内核采用cpufreq的performance模式，以获得最高性能，现在用ondemand模式使CPU根据负载状况自动变频。修改<strong>/etc/conf.d/cpufreq</strong>文件，将<strong>governor</strong>项设为<strong>ondemand</strong>。</p>

<p>将<strong>cpufreq</strong>加入<strong>rc.conf</strong>的<strong>DAEMONS</strong>中，此守护进程会在系统启动时读取配置文件<strong>/etc/conf.d/cpufreq</strong>中的设置项，故上面设置的ondemand模式会在系统启动时得以自动生效。</p>

<p>然后安装laptop-mode-tools，并修改<strong>/etc/laptop-mode/laptop-mode.conf</strong>，打开所有的三个以<strong>ENABLE</strong>开头的选项，和所有以<strong>CONTROL</strong>开头的选项。</p>

<p>将<strong>laptop-mode</strong>加入<strong>rc.conf</strong>的<strong>DAEMONS</strong>中，使其随系统自动启动。</p>

<p>修改<strong>/etc/laptop-mode/conf.d/usb-autosuspend.conf</strong>，此配置文件用来配置laptop-mode如何管理USB设备的电源使用。我希望在任何时候都启用USB设备自动节能，但需要把我的无线鼠标排除在外，故作如下配置：</p>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启用USB设备自动挂起</span></span><br><span class="line">CONTROL_USB_AUTOSUSPEND=<span class="string">"auto"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将不使用自动挂起的USB设备的ID填在下面，使用lsusb命令查看ID</span></span><br><span class="line">AUTOSUSPEND_USBID_BLACKLIST=<span class="string">"04fc:05dc"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 总是启用USB自动挂起</span></span><br><span class="line">BATT_SUSPEND_USB=1</span><br><span class="line">LM_AC_SUSPEND_USB=1</span><br><span class="line">NOLM_AC_SUSPEND_USB=1</span><br></pre></td></tr></table></figure>

<p>类似地，修改<strong>intel-hda-powersave.conf</strong>，此配置文件用于配置laptop-mode如何管理Intel HDA音频芯片的电源使用。我希望一直启用声卡自动节能，并适当地将自动进入节电模式的空闲时间增加到30秒，故配置如下：</p>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启用Intel音频芯片电源管理</span></span><br><span class="line">CONTROL_INTEL_HDA_POWER=<span class="string">"auto"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 总是启用</span></span><br><span class="line">BATT_INTEL_HDA_POWERSAVE=1</span><br><span class="line">LM_AC_INTEL_HDA_POWERSAVE=1</span><br><span class="line">NOLM_AC_INTEL_HDA_POWERSAVE=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 适当地设置声卡进入节电模式的超时时间</span></span><br><span class="line">INTEL_HDA_DEVICE_TIMEOUT=30</span><br></pre></td></tr></table></figure>

<p>类似地，修改<strong>intel-sata-powermgmt.conf</strong>，启用sata硬盘接口的电源管理。由于我用Blueman控制蓝牙设备，一般不用时都将其关闭，同时经常使用wifi，故蓝牙和无线网卡均未作配置。</p>

<p>最后，关闭conky,Firefox和Chromium，<a href="http://www.lesswatts.org/projects/powertop/" target="_blank" rel="noopener">powertop</a>显示conky是个很吵闹的东西，关掉它可以使<strong>Wakeups-from-idle per second</strong>的值下降很多，另外Chromium和Firefox也是耗电大户。</p>

<p><em>在此之前，系统空闲时CPU温度一般是50多度，普通使用时一般在60多度，如果开了kvm虚拟机会达到60至90度间。经过以上设置，系统空闲时CPU温度一度下降到39度，即使开了虚拟机，一般也可维持在50到80度间。</em></p>

<p>另外，对于以上内容，我还有些没搞明白的地方和要补充说明的东西：</p>

<ol>
<li>虽然将laptop-mode加入rc.conf且已随系统启动，但使用命令“<strong>cat /proc/sys/vm/laptop_mode</strong>”查询得到的结果仍然是0，也就是说没有自动启用laptop-mode，必须使用命令“<strong>sudo /etc/rc.d/laptop-mode restart</strong>”手动重启才行。目前没有找到解决办法。</li>
<li>虽然启用laptop-mode接管声卡电源管理，但没找到查看是否生效的方法，于是在/etc/rc.local中加入命令“<strong>echo 1 &gt; /sys/module/snd<em>hda</em>intel/parameters/power_save</strong>”以强制声卡节电。</li>
<li>Intel的powertop是个好东西，用它可以查看哪些进程最影响CPU节能。我们优化的标准之一就是使powertop中显示的“Wakeups-from-idle per second”尽可能地减少。powertop的另一个特点就是通过自动检查当前系统中电源使用的配置情况给出优化的建议，这是个很贴心的功能。</li>
</ol>

<p>鉴于目前存疑较多并将继续尝试，所以在标题中特别注明“不完全”三个字……</p>

<h3>参考</h3>

<ol>
<li>http://itgen.blogspot.com/2009/03/energy-management-in-linux.html</li>
<li>http://www.ibm.com/developerworks/cn/linux/l-cpufreq-1/index.html</li>
<li>http://www.lesswatts.org/</li>
</ol>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-howto-toggle-quickfix-in-vim-using-hotkeys" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/howto-toggle-quickfix-in-vim-using-hotkeys/"><strong>使用热键切换Vim的QuickFix窗口打开状态</strong></a>
      <small class="article-date-index">&nbsp; 2010-09-10</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/howto-toggle-quickfix-in-vim-using-hotkeys/" class="article-date">
  <time datetime="2010-09-09T16:00:00.000Z" itemprop="datePublished">2010-09-10</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/howto-toggle-quickfix-in-vim-using-hotkeys/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>QuickFix窗口只有打开和关闭的命令，而使用一个热键来切换打开状态可以减少热键资源的浪费，使用也更方便。</p>
<p>从<a href="http://vim.wikia.com/wiki/Toggle_to_open_or_close_the_quickfix_window" target="_blank" rel="noopener">这里</a>找到使用自定义函数完成此功能的方法：使用一个全局变量记录QuickFix窗口的打开状态，从而判断是应该关闭还是打开。但其提供的函数存在状态同步的问题，假如在QuickFix窗口中使用“:q”退出窗口，此方法将不能正常工作。评论中给出了很好的解决方法，但其提供的代码有些小问题，修改之后如下：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">co</span> :QFix<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span>ct :<span class="keyword">call</span> QFixToggle(<span class="number">1</span>)<span class="symbol">&lt;CR&gt;</span></span><br><span class="line">command! -bang -nargs=? QFix <span class="keyword">call</span> QFixToggle(<span class="symbol">&lt;bang&gt;</span><span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">QFixToggle</span><span class="params">(forced)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">exists</span>(<span class="string">"g:qfix_win"</span>) &amp;&amp; <span class="variable">a:forced</span> != <span class="number">0</span></span><br><span class="line">        <span class="keyword">cclose</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">exists</span>(<span class="string">"g:my_quickfix_win_height"</span>)</span><br><span class="line">            <span class="keyword">execute</span> <span class="string">"copen "</span>.<span class="variable">g:my_quickfix_win_height</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">copen</span></span><br><span class="line">        <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">augroup</span> QFixToggle</span><br><span class="line">    autocmd!</span><br><span class="line">    <span class="keyword">autocmd</span> BufWinEnter quickfix <span class="keyword">let</span> <span class="variable">g:qfix_win</span> = <span class="built_in">bufnr</span>(<span class="string">"$"</span>)</span><br><span class="line">    <span class="keyword">autocmd</span> BufWinLeave * <span class="keyword">if</span> <span class="built_in">exists</span>(<span class="string">"g:qfix_win"</span>) &amp;&amp; <span class="built_in">expand</span>(<span class="string">"&lt;abuf&gt;"</span>) == <span class="variable">g:qfix_win</span> | unlet! <span class="variable">g:qfix_win</span> | <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">augroup</span> END</span><br></pre></td></tr></table></figure>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/34/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="page-number" href="/page/34/">34</a><span class="page-number current">35</span><a class="page-number" href="/page/36/">36</a><a class="page-number" href="/page/37/">37</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><a class="extend next" rel="next" href="/page/36/">Next &raquo;</a>
      </nav>
    

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 晴耕雨讀&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/52binge/hexo-theme-blairos">blairos</a>
    </div>
  </div>
</footer>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

    
<script type="text/javascript"> <!-- add by blair 0724 type=text/javascript -->
  var disqus_shortname = '0x3f';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
