<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>晴耕雨讀</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="晴耕雨讀">
<meta property="og:url" content="http://0x3f.org/page/34/index.html">
<meta property="og:site_name" content="晴耕雨讀">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="晴耕雨讀">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel="stylesheet" type="text/css">
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <!-- blair add baidu tongji start... @2017.10.03 -->
<!-- blair add baidu tongji end ! @2017.10.03 -->

<header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/archives">目录</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://0x3f.org"></form>
        </div>
      </nav>
    </div>
  </div>
</header>

    <br>
    <section id="main" class="outer">
      <article id="post-a-fools-paradise" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/a-fools-paradise/"><strong>黄粱一梦</strong></a>
      <small class="article-date-index">&nbsp; 2010-12-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/a-fools-paradise/" class="article-date">
  <time datetime="2010-12-04T09:51:00.000Z" itemprop="datePublished">2010-12-04</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>昨天晚上放弃了年终聚餐，去看了《黄粱梦》。</p>
<p>一个很老套的故事，耳熟能详，但是经过精心的演绎，加上声、光、电的完美运用，真就给人以耳目一新的感觉。我一直不怎么观注地方戏曲，以往觉得能凑合听听的也就是河南的越调、安徽的黄梅戏等，河北的地方戏也就听说过一个河北梆子，像邯郸的平调落子这样的闻所未闻。《黄粱梦》彻底改变了我对地方戏曲的看法，京剧、昆曲固然高雅，但假如也加入魔术、杂技、俚语甚至RAP，肯定会让人觉得不伦不类，地方戏曲的长处就在于灵活多变，不拘泥形式，能够很快地针对时代变化作出改进，如果分寸拿捏得好，就能不断推陈出新。</p>
<p>整场戏用两个小时的时间表现了卢生一梦中的一生，故事情节十分紧凑，每折都用不同的场景、不同的唱腔、不同的表现形式，让人眼花缭乱，一改传统戏剧连篇累牍的大段说词，整场看下来从未觉得枯燥乏味，很适应时下流行的快餐文化。在故事情节上，《黄粱梦》并没有跳出惩恶扬善、因果报应的老套，当然，一味地追求突破未见得是好事。</p>
<p>虽然时间不长，但是整场戏有很多地方让人印象深刻，比如有句意味深长的戏词“邯郸道长，人生路短”，还有那句雷倒了无数人的“现在哪里还有什么纯真美女啊”。当然，最让人意犹未尽的还是这段高潮的“贪官舞”：</p>
<embed src="http://www.tudou.com/v/anrxiFeKSfM/v.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="opaque" width="480" height="400">

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-gtk-theme-hope" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/gtk-theme-hope/"><strong>Hope GTK：平静、柔和、细腻的主题</strong></a>
      <small class="article-date-index">&nbsp; 2010-12-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/gtk-theme-hope/" class="article-date">
  <time datetime="2010-12-03T16:00:00.000Z" itemprop="datePublished">2010-12-04</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://0rax0.deviantart.com/art/Hope-GTK-187658025" target="_blank" rel="noopener">Hope GTK</a>是套漂亮的冷色调的GTK主题，色调过渡柔和，细节表现得也很好，整体给人以平静的感觉。</p>
<p><a href="http://picasaweb.google.com/lh/photo/4_sO8LFMCRO5xLKi6v9wQA?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh4.ggpht.com/_ceUJ_lBTHzc/TPpOe4PGEjI/AAAAAAAABgc/Lhir6fzkDWE/s400/hope_gtk_by_0rax0-d33q5ux.jpg" height="320" width="400"></a></p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-virto-may-breakdown-windows" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/virto-may-breakdown-windows/"><strong>virtio可能导致windows蓝屏</strong></a>
      <small class="article-date-index">&nbsp; 2010-12-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/virto-may-breakdown-windows/" class="article-date">
  <time datetime="2010-12-03T16:00:00.000Z" itemprop="datePublished">2010-12-04</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>前段时间突然发现kvm中的windows在启动时蓝屏，开始以为是kvm新版本的bug，后来发现如果不启用虚拟机硬盘的virtio就不会出现蓝屏。</p>
<p>于是下载了最新版的virtio，然而更新后，蓝屏的问题并没有解决，所以目前只能暂时不使用virtio。不过网卡的virtio是没有问题的。</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-howto-enable-hotkey-for-gtk-menus" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/howto-enable-hotkey-for-gtk-menus/"><strong>开启自定义GTK程序菜单快捷键的方法</strong></a>
      <small class="article-date-index">&nbsp; 2010-12-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/howto-enable-hotkey-for-gtk-menus/" class="article-date">
  <time datetime="2010-12-03T16:00:00.000Z" itemprop="datePublished">2010-12-04</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>基于GTK的程序菜单本身支持通过在焦点所在的菜单项上按下组合键来定义该菜单项的快捷键，但默认并不开启。</p>
<p>一般来说，对于支持X的会话管理的桌面环境，可以通过修改相应的设置来开启这个功能：</p>
<ol><br>    <li>GNOME中该设置项所在的路径是：主选单 &gt; 桌面 &gt; 偏好设定 &gt; 选单及功具列 &gt; 可编辑选单捷径键</li><br>    <li>XFCE中该设置项所在的路径是：主选单 &gt; 设置 &gt; 外观 &gt; 设置 &gt; 开启可编辑快捷键</li><br></ol>

<p>对于不支持会话管理的桌面环境，可在~/.gtkrc-2.0中添加如下配置内容：</p>
<blockquote><br>gtk-can-change-accels = 1<br></blockquote>



      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-screen-is-sorry-for-term-being-too-long" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/screen-is-sorry-for-term-being-too-long/"><strong>screen曰：$TERM too long - sorry.</strong></a>
      <small class="article-date-index">&nbsp; 2010-12-01</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/screen-is-sorry-for-term-being-too-long/" class="article-date">
  <time datetime="2010-11-30T16:00:00.000Z" itemprop="datePublished">2010-12-01</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近rxvt-unicode-256color的一次更新触发了screen的一个缺陷。新的版本将默认的环境变量$TERM由rxvt-256color改成了rxvt-unicode-256color，这导致在rxvt中启动screen时报这样的错误：</p>
<blockquote><br>$TERM too long - sorry.<br></blockquote>

<p>虽然可以在.Xdefaults中指定$TERM的值，但是<a href="https://aur.archlinux.org/packages.php?ID=13060" target="_blank" rel="noopener">据说</a>这样会导致rxvt加载错误的terminfo，并导致终端的颜色由256色降低到88色。另外虽然按照同样的说法，可以在screenrc中设置$TERM的值，但是不知道是我写的格式不对还是什么原因，无效。</p>
<p>最终还是设了个别名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vi ~/.bashrc</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> screenx=<span class="string">'export TERM=screen-256color &amp;&amp; screen'</span></span><br></pre></td></tr></table></figure>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-oxygen-iconset-fit-for-xfce" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/oxygen-iconset-fit-for-xfce/"><strong>Oxygen Refit：适用于xfce的Oxygen图标集</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-29</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/oxygen-iconset-fit-for-xfce/" class="article-date">
  <time datetime="2010-11-28T16:00:00.000Z" itemprop="datePublished">2010-11-29</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Oxygen是KDE桌面环境中的一套著名的图标集，但是据说基于GTK的桌面环境如GNOME、XFCE等对其支持得不好，我这里在GNOME下倒没发现问题，不过在XFCE下文件夹的图标显示的是缺省的图标，不好看。</p>
<p><a href="http://gnome-look.org/content/show.php/Oxygen+Refit+2?content=79756" target="_blank" rel="noopener">Oxygen Refit</a>是针对GTK的桌面环境修改的Oxygen图标集，在XFCE下可以正常显示，但是缺点是最大分辨率只有48×48，不能显示较大的高清图标。Archlinux下可以安装AUR中的<a href="http://aur.archlinux.org/packages.php?ID=18673" target="_blank" rel="noopener">oxygenrefit2-icon-theme</a>。</p>
<p><a href="http://picasaweb.google.com/lh/photo/cURosgqNAesp47LgLj4LpA?feat=embedwebsite" target="_blank" rel="noopener"><img src="http://lh5.ggpht.com/_ceUJ_lBTHzc/TPJ4grT0drI/AAAAAAAABf0/R22H_Nv6kbA/s400/2010-11-28.23%3A33%3A01.-usr-share-icons-oxygen-256x256-places%20%28%E9%A1%AF%E7%A4%BA%E7%B8%AE%E5%9C%96%29%20.01.png" height="249" width="400"></a></p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-winmerge-as-a-free-diff-tool" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/winmerge-as-a-free-diff-tool/"><strong>WinMerge：开源的差异比较工具</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-29</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/winmerge-as-a-free-diff-tool/" class="article-date">
  <time datetime="2010-11-28T16:00:00.000Z" itemprop="datePublished">2010-11-29</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://winmerge.org/" target="_blank" rel="noopener">WinMerge</a>是开源的差异比较工具，只运行于Windows平台。</p>
<p>具有以下实用特性：</p>
<ol><br>    <li>支持文件内容和文件、文件夹差异比较</li><br>    <li>文件内容比较采用左右双栏显示，支持语法高亮</li><br>    <li>提供Windows资源管理器右键菜单，以选择文件或文件夹进行比较</li><br></ol>

<p>具有以下不足：</p>
<ol><br>    <li>文件夹比较结果以单栏显示，不直观</li><br>    <li>仅支持两方比较，不支持多方比较</li><br></ol>

<p>使用时的注意事项：</p>
<ol><br>    <li>使用树状的列表显示文件夹比较结果可以稍微缓解单栏显示导致的不直观的问题</li><br>    <li>Windows资源管理器的右键菜单需要在设置界面手工设置才能加入选取不同目标进行比较的菜单项</li><br></ol>

<p>相较于商业的Beyong Compare等工具，WinMerge在操作的直观度和功能细节上存在不足，但是在差异比较的主要功能上，WinMerge完全可以胜任日常工作。同时，由于免费，WinMerge可以作为这些商业软件很好的替代工具。</p>
<p><strong>后记：这些天越来越对使用未授权的商业软件感到不安，于是开始寻找这些工具的开源、免费替代品。</strong></p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-upgraded-to-fcitx4" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/upgraded-to-fcitx4/"><strong>升级fcitx到4.0</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-20</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/upgraded-to-fcitx4/" class="article-date">
  <time datetime="2010-11-19T16:00:00.000Z" itemprop="datePublished">2010-11-20</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>虽然是个大版本，但4.0在实际功能上并没有太大的进步。新版本相对于3.x增加的主要特性是：</p>
<ol><br>  <li>支持皮肤</li><br>  <li>图形界面的配置工具</li><br>  <li>增加系统托盘图标</li><br>  <li>托盘图标和输入条提供右键菜单，如皮肤切换、选择输入法等</li><br>  <li>放弃GBK编码，改用UTF-8编码</li><br>  <li>拼音支持多词库</li><br>  <li>一系列细节功能及Bug修复</li><br></ol>

<p>最主要的特性只有前两个，可见fcitx 4.0只是这个项目涅槃后的一个新的起点，象征意义大于实际意义，尤其对于码表输入法用户来说是这样。三年前我就<a href="http://0x3f.org/?p=185">说过</a>，fcitx在用户造词上有个致命缺陷，就是对于多音字它总是使用字母表中声母靠前的编码，对于音码或者音形码输入法来说，这样造出来的词的编码经常会是错的，更糟糕的是用户还不容易自行修改词组编码。三年后的今天，新版本并没有解决这个问题。</p>
<p>此外，需要注意的是，新版本对界面和易用性的改进也带来一些负面的影响，fcitx不再是当年以轻巧著称的那只小企鹅了，在我这里，它的内存占用达到了26M，所幸反应速度仍然很快。</p>
<p>三年前，由于众所周知的原因，fcitx的路线图显得非常混乱，几个新版本都非常不稳定，所以我不再使用源中的版本，转而编译安装了新版本中相对稳定的黑色星期五版，不知不觉中三年过去了，想到一直用著这个版本就这么过来了，很感慨。要卸载编译安装的程序就得用源码重新configure一下再make uninstall，所幸还能在<a href="http://www.fcitx.org/download/fcitx-3.5-BlackFri.tar.bz2" target="_blank" rel="noopener">这里</a>找到这个版本。</p>
<p>Archlinux下安装AUR中的fcitx-config时报如下错误：</p>
<blockquote><br>ERROR: certificate common name “*.github.com” doesn’t match requested host name “github.com”.<br></blockquote>

<p>需要修改/etc/makepkg.conf，使wget在下载源码时不做安全验证：</p>
<blockquote><br># 增加–no-check-certificate参数<br>DLAGENTS=(‘ftp::/usr/bin/wget -c –passive-ftp -t 3 –waitretry=3’<br>          ‘http::/usr/bin/wget -c -t 3 –waitretry=3 –no-check-certificate’<br>          ‘https::/usr/bin/wget -c -t 3 –waitretry=3 –no-check-certificate’<br>          ‘rsync::/usr/bin/rsync -z’<br>          ‘scp::/usr/bin/scp -C’)<br></blockquote>

<p>新版本的稳定性不如黑色星期五版，如果把简繁转换热键修改为ALT+J，使用时会导致fcitx崩溃。加之实际功能的改进不大，所以是否升级就无可无不可了。</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-adjust-disk-partitions-in-archlinux" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/adjust-disk-partitions-in-archlinux/"><strong>调整Arch的磁盘分区</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/adjust-disk-partitions-in-archlinux/" class="article-date">
  <time datetime="2010-11-12T16:00:00.000Z" itemprop="datePublished">2010-11-13</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><h2>简述</h2><p></p>

<p>目标：移除Windows 7，整块硬盘完全分配给Archlinux。</p>

<p>原分区结构：</p>

<p>
<table class="art_tbl">
<tr><th class="art_tbl_th">分区</th><th class="art_tbl_th">类型</th><th class="art_tbl_th">挂载</th><th class="art_tbl_th">文件系统</th><th class="art_tbl_th">容量</th></tr>
<tr><td class="art_tbl_td">/dev/sda1</td><td class="art_tbl_td">主分区，启动分区</td><td class="art_tbl_td">Windows 7的安装分区</td><td class="art_tbl_td">ntfs</td><td class="art_tbl_td">30G</td></tr>
<tr><td class="art_tbl_td">/dev/sda2</td><td class="art_tbl_td">扩展分区</td><td class="art_tbl_td">-</td><td class="art_tbl_td">-</td><td class="art_tbl_td">-</td></tr>
<tr><td class="art_tbl_td">/dev/sda5</td><td class="art_tbl_td">逻辑分区</td><td class="art_tbl_td">Windows的D盘</td><td class="art_tbl_td">ntfs</td><td class="art_tbl_td">40G</td></tr>
<tr><td class="art_tbl_td">/dev/sda3</td><td class="art_tbl_td">主分区</td><td class="art_tbl_td">/</td><td class="art_tbl_td">ext3</td><td class="art_tbl_td">78G</td></tr>
<tr><td class="art_tbl_td">/dev/sda4</td><td class="art_tbl_td">交换分区</td><td class="art_tbl_td">swap</td><td class="art_tbl_td">-</td><td class="art_tbl_td">2G</td></tr>
</table>
</p>

<p>调整后分区结构：</p>

<p>
<table class="art_tbl">
<tr><th class="art_tbl_th">分区</th><th class="art_tbl_th">类型</th><th class="art_tbl_th">挂载</th><th class="art_tbl_th">文件系统</th><th class="art_tbl_th">容量</th></tr>
<tr><td class="art_tbl_td">/dev/sda1</td><td class="art_tbl_td">主分区，启动分区</td><td class="art_tbl_td">/</td><td class="art_tbl_td">ext3</td><td class="art_tbl_td">30G</td></tr>
<tr><td class="art_tbl_td">/dev/sda2</td><td class="art_tbl_td">主分区</td><td class="art_tbl_td">/home</td><td class="art_tbl_td">ext3</td><td class="art_tbl_td">120G</td></tr>
<tr><td class="art_tbl_td">/dev/sda3</td><td class="art_tbl_td">交换分区</td><td class="art_tbl_td">swap</td><td class="art_tbl_td">-</td><td class="art_tbl_td">2G</td></tr>
</table>
</p>

<p></p><h2>步骤</h2><p></p>

<ol>
  <li>Archlinux中重装GRUB，覆盖Windows 7的BCD：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grub-install /dev/sda</span><br></pre></td></tr></table></figure></li>
  <li>在GRUB启动菜单中加入将要复制到sda1分区中的Archlinux的启动项：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /boot/grub/menu.lst</span><br></pre></td></tr></table></figure><br><blockquote>
# (2) Arch Linux
title  Arch Linux
root   (hd0,0)
kernel /boot/vmlinuz26 root=/dev/sda1 resume=/dev/sda4 ro acpi_osi="Linux"
initrd /boot/kernel26.img
</blockquote></li>
  <li><a href="http://0x3f.org/?p=1699">安装U盘启动的Puppy Linux</a></li>
  <li>Puppy中格式化sda1分区：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext3 /dev/sda1</span><br></pre></td></tr></table></figure></li>
  <li>复制sda3上的Archlinux所有的文件到sda1：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先点击桌面上sda1和sda3的盘符，使之被挂载到/mnt下</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /mnt/sda3</span><br><span class="line">cp -a * /mnt/sda1</span><br></pre></td></tr></table></figure></li>
  <li>修改sda1上的fstab：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /mnt/sda1/etc/fstab</span><br></pre></td></tr></table></figure><br><blockquote>
# 修改必要的挂载点，如将根目录的挂载点由sda3改为sda1：
/dev/sda1           /         ext3      defaults,noatime       0       1
</blockquote></li>
  <li>重启系统，并引导到新分区上的系统中</li>
  <li>重新安装GRUB，使之引导sda1分区中的系统：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grub-install /dev/sda</span><br></pre></td></tr></table></figure></li>
  <li>重启并进入Puppy，使用gparted删除除sda1以外的所有分区，然后在空闲的空间上创建ext3格式的主分区sda2和交换分区sda3</li>
  <li>移动sda1上home目录下的所有东西到sda2：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -a /mnt/sda1/home/* /mnt/sda2</span><br><span class="line">rm -rf /mnt/sda1/home/*</span><br></pre></td></tr></table></figure></li>
  <li>修改sda1上的fstab和menu.lst：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /mnt/sda1/etc/fstab</span><br></pre></td></tr></table></figure><blockquote>
# 将fstab中磁盘分区的挂载点配置为如下内容
/dev/sda1        /          ext3      defaults,noatime         0        1
/dev/sda2        /home      ext3      defaults,noatime         1        2
/dev/sda3        swap       swap      defaults                 0        0
</blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /mnt/boot/grub/menu.lst</span><br></pre></td></tr></table></figure><blockquote>
# 将原来启动项中的sda3修改为sda1，由于配置过休眠，也将resume参数中的sda4改为sda3，即交换分区
</blockquote>
  </li><li>重启系统</li>
</ol>

<p></p><h2>后记</h2><p></p>

<p>从<a href="http://0x3f.org/?tag=arch">Arch</a><a href="http://0x3f.org/?p=819">诞生</a>时只装XP，到<a href="http://0x3f.org/?p=836">装上Archlinux</a>后双系统并存，再到<a href="http://0x3f.org/?p=1180">尝试Win7</a>，两年的时间里，一直有很多原因让Windows像只寄生虫一样顽强地活著。最近硬盘空间越来越紧张，早前装的Win7也很长时间不用了，于是时隔三年之后，我又成了个纯粹的Archer。</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-howto-create-bootable-udisk-for-puppylinux" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/howto-create-bootable-udisk-for-puppylinux/"><strong>制作Puppy Linux的启动U盘</strong></a>
      <small class="article-date-index">&nbsp; 2010-11-11</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/howto-create-bootable-udisk-for-puppylinux/" class="article-date">
  <time datetime="2010-11-10T16:00:00.000Z" itemprop="datePublished">2010-11-11</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Puppy Linux的体积只有一百多兆字节，但图形界面实现得很完备，也包含了很多短小精悍的工具，安装和使用都很方便，非常适合用来做日常维护工具盘。</p>
<p>Puppy自带了傻瓜式的启动U盘制作工具，但官方只提供整个发行版的ISO镜像下载，通常需要刻录成光盘并引导系统启动后才可以继续将Puppy安装到U盘。其实也可以不刻录光盘，而是把Puppy安装到硬盘上。</p>
<p>Puppy本身封装得很好，对软硬件环境的要求不高，完全可以安装到一个独立的目录中而不影响其它操作系统。本文基于Linux环境下通过GRUB引导的前提，Windows下应该可以通过GRUB4DOS引导。</p>
<ol>
<li>挂载Puppy的ISO镜像到一个目录：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o loop puppy.iso /media/puppy</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>复制镜像中的所有文件到根目录下的puppy目录：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /puppy</span><br><span class="line">sudo cp -a /media/puppy/* /puppy</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>修改GRUB的引导文件，加入Puppy的引导项：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /boot/grub/menu.lst</span><br></pre></td></tr></table></figure>
<blockquote><br># (2) Puppy<br>title Puppy<br>root (hd0,2)<br>kernel /puppy/vmlinuz root=/dev/ram0<br>initrd /puppy/initrd.gz<br></blockquote>

<ol start="4">
<li><p>重启系统并启动到Puppy</p>
</li>
<li><p>使用桌面上的<strong>Setup</strong>中的<strong>Puppy Universal Installer</strong>制作启动U盘。不过虽然这是官方推荐的制作工具，但我的杂牌U盘无论如何也不能引导系统，最后使用另一个备选的工具“<strong>BootFlash USB Installer</strong>”的<strong>USB-HDD</strong>模式制作成功。</p>
</li>
</ol>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/33/">&laquo; Назад</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="page-number" href="/page/33/">33</a><span class="page-number current">34</span><a class="page-number" href="/page/35/">35</a><a class="page-number" href="/page/36/">36</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><a class="extend next" rel="next" href="/page/35/">Далее &raquo;</a>
      </nav>
    

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 晴耕雨讀&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/52binge/hexo-theme-blairos">blairos</a>
    </div>
  </div>
</footer>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
