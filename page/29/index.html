<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>晴耕雨讀</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="晴耕雨讀">
<meta property="og:url" content="http://0x3f.org/page/29/index.html">
<meta property="og:site_name" content="晴耕雨讀">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="晴耕雨讀">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel="stylesheet" type="text/css">
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <!-- blair add baidu tongji start... @2017.10.03 -->
<!-- blair add baidu tongji end ! @2017.10.03 -->

<header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/archives">目录</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://0x3f.org"></form>
        </div>
      </nav>
    </div>
  </div>
</header>

    <br>
    <section id="main" class="outer">
      <article id="post-yyets-torrents-download-script" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/yyets-torrents-download-script/"><strong>YYeTs.py：人人影视BT种子下载辅助脚本</strong></a>
      <small class="article-date-index">&nbsp; 2011-11-14</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/yyets-torrents-download-script/" class="article-date">
  <time datetime="2011-11-13T16:00:00.000Z" itemprop="datePublished">2011-11-14</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>这是最好的时代，这是最坏的时代。现在还有像<a href="ftp://zhongzi.yyets.net" target="_blank" rel="noopener">人人影视的BT种子FTP</a>这样的站点，实在不容易。但是所有种子列在一块，想看看最近几天都更新了甚么都很困难，于是早想写个脚本省时省力。这周末终于实现了这个想法。</p>

<h2>主要功能</h2>

<ul>
<li>按关键词查询种子</li>
<li>限制查询范围为最近几天新增的</li>
<li>下载符合查询条件的种子，允许下载前编辑任务列表</li>
</ul>

<h2>使用说明</h2>

<h3>环境</h3>

<ul>
<li>Python 2.7，不支持Python3</li>
<li>Mac OS X Lion，Archlinux测试通过，理论上支持Windows</li>
</ul>

<h3>配置</h3>

<p>如果需要编辑下载任务列表（<em>即使用-s选项</em>），应事先配置环境变量<strong>YYETS_EDITOR</strong>，将值设定为一个文本编辑器的路径，或者修改脚本的私有属性<strong>__editor__</strong>也一样。如果这两个位置都没有设置，则使用环境变量<strong>EDITOR</strong>。否则，将报“<strong>Command not found</strong>”的错误。</p>

<p>有一点提示，如果使用GVim或MacVim，需要加上选项<strong>-f</strong>，以阻塞的方式启动它，否则会导致下载结果不能达到预期。例如对于MacVim，可配置<strong>YYETS_EDITOR</strong>为：</p>

<blockquote>
  <p>mvim -f</p>
</blockquote>

<h3>使用举例</h3>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有种子</span></span><br><span class="line">./yyets.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索关键词</span></span><br><span class="line">./yyets.py 猩球崛起 1080p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索最近三天新增的种子</span></span><br><span class="line">./yyets.py --past=3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索最近七天内新增的、满足关键词条件的种子</span></span><br><span class="line">./yyets.py --past=7 蓝精灵</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载满足查询条件的种子</span></span><br><span class="line">./yyets.py -d --past=30 1080p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载满足查询条件的种子，下载前编辑任务列表</span></span><br><span class="line">./yyets.py -d -p --past=30 1080p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更多详细信息，参阅帮助</span></span><br><span class="line">./yyets.py -h</span><br><span class="line">./yyets.py --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<h3>下载</h3>

<p>移步GitHub获取最新版本：</p>

<p><a href="https://github.com/xbot/shell" target="_blank" rel="noopener">https://github.com/xbot/shell</a></p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ultrablog-v310-released" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/ultrablog-v310-released/"><strong>UltraBlog.vim v3.1释出：代码重构与MacVim支持</strong></a>
      <small class="article-date-index">&nbsp; 2011-11-05</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/ultrablog-v310-released/" class="article-date">
  <time datetime="2011-11-04T16:00:00.000Z" itemprop="datePublished">2011-11-05</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>距离上一个版本的释出已经有三个月了，这次新版并没有增加多少功能性的内容，主要是代码的重构和对在MacVim下稳定性的改进。</p>

<p>对依赖关系检查的不细致导致了一些麻烦，抛出的错误信息有时与实际原因相距甚远。由于开始时是以实现功能为主，所以都是直接用函数实现的，之后修修补补，代码冗余而且维护麻烦。于是著手重构主要功能的源码，面向对象，把所有检查逻辑放到父类中去实现，子类只关注自身逻辑，最后新版减少了二百多行的代码量。</p>

<p>在重构的过程中偶然发现，在MacVim中，程序抛出任何异常，即便是有捕获逻辑，也会导致编辑器崩溃。在<a href="http://stackoverflow.com/questions/5574702/how-to-print-to-stderr-in-python" target="_blank" rel="noopener">这里</a>简略地提到：</p>

<blockquote>
  <p>the failure was actual a crash, through some strange combination of threading, matplotlib pyplot backend, and ssh X11 forwarding, sys.stderr had somehow been assigned to something which python complained wasn't a file-like object</p>
</blockquote>

<p>于是将所有标准输出与标准错误输出语句换成另一种形式：</p>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原形式</span></span><br><span class="line">sys.stdout.write(<span class="string">'xxx'</span>)</span><br><span class="line">sys.stderr.write(<span class="string">'xxx'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新形式</span></span><br><span class="line"><span class="keyword">print</span> &gt;&gt; sys.stdout, <span class="string">'xxx'</span></span><br><span class="line"><span class="keyword">print</span> &gt;&gt; sys.stderr, <span class="string">'xxx'</span></span><br></pre></td></tr></table></figure>

<p>以上是新版主要变更的内容，此外，也顺便解决了开发过程中发现的个别Bug和做了其它一些改动：</p>

<ul>
<li>Change:  The key "xmlrpc" of the settings list is dropped, a new one with the name "url" is added, you should set its value to the blog url.</li>
<li>Change:  Source code refactorings.</li>
<li>Change:  Solve the crash problem existing in MacVim only.</li>
<li>Change:  <strong>:UBConv</strong> can be used in any buffer.</li>
<li>Change:  <strong>:UBThis</strong> now has a third parameter, which enables convertions between syntaxes.</li>
<li>Bugfix:  The second parameter of <strong>:UBThis</strong> cannot take effect.</li>
</ul>

<p>这也是将源码从Google Code迁移到GitHub后发布的第一个新版本，更详细的信息请移步<a href="http://0x3f.org/?p=1894">插件主页</a>或GitHub上的<a href="https://github.com/xbot/UltraBlog.vim" target="_blank" rel="noopener">代码仓库</a>。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-double-commander" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/double-commander/"><strong>Double Commander: 免费、跨平台的Total Commander</strong></a>
      <small class="article-date-index">&nbsp; 2011-08-31</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/double-commander/" class="article-date">
  <time datetime="2011-08-30T16:00:00.000Z" itemprop="datePublished">2011-08-31</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>由于Total Commander很贵，在Windows下又是必不可少的，我一直希望能找到一个TC的免费替代品。试用过很多免费的文件管理器，但都不理想。偶然看到<a href="http://doublecmd.sourceforge.net/" target="_blank" rel="noopener">Double Commander</a>，才发现这几乎完全就是我想要的。</p>

<p><a href="https://picasaweb.google.com/lh/photo/ioR_w9MmX81q_5a8xjUPsA?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh4.googleusercontent.com/-gkI4K4m5SSM/Tl31NceNNhI/AAAAAAAABzs/3AigwSN7whI/s640/doublecmd_screenshot.png" height="360" width="640"></a></p>

<h2>特性</h2>

<ul>
<li>几乎完全模仿TC，甚至连插件的API都一致</li>
<li>界面布局、样式高度可定制</li>
<li>热键高度可定制</li>
<li>开源、免费、跨平台</li>
</ul>

<h2>局限</h2>

<ul>
<li>功能相对TC少很多</li>
<li>稳定性不是非常高</li>
<li>运行速度稍嫌慢</li>
<li>开发进度慢</li>
</ul>

<h2>小技巧</h2>

<h3>热键设置</h3>

<p>每个内置命令可以设置多个热键，每个热键可以指定参数，参数中可以使用环境变量，如下图所示：</p>

<p><a href="https://picasaweb.google.com/lh/photo/Z3jLMCGkoAbs1XC6yOhElg?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-lFMDaSny_gw/Tl31OKrfhMI/AAAAAAAABzs/2XX44Go-3zc/s640/doublecmd_hotkey.png" height="417" width="640"></a></p>

<p>针对命令<code>cm_ChangeDir</code>设置了两个热键，其中，给<strong>Ctrl+Home</strong>指定的参数是<strong>$HOME</strong>，给<strong>Ctrl+Shift+Home</strong>指定的参数是<strong>$HOME/Desktop</strong>，即分别切换到当前用户的主目录和桌面目录。</p>

<h3>自定义文件类型命令</h3>

<p>可以为每种文件类型定义多个命令，这些自定义命令将显示为上下文菜单的“动作”菜单的子菜单项。如下图所示：</p>

<p><a href="https://picasaweb.google.com/lh/photo/m7mjk4g77XsMZw58ayJnEw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-4Z6LcQg9YIc/Tl31OqcRqKI/AAAAAAAABzs/wJjK8noUWM8/s400/doublecmd_filetype_command_01.png" height="400" width="376"></a></p>

<p>定义了名称为“Archive”的文件类型，关联了一系列的文件后缀名。然后添加了一个名为“解压缩到当前目录”的动作，并指定所执行的命令为<code>urxvt -e aunpack %f</code>。其中，<strong>%f</strong>是一个占位符，代表当前文件的全名。DC预置了几个占位符，可以点击命令输入框右侧图标是加号的按钮选择。</p>

<p>最终的效果如下：</p>

<p><a href="https://picasaweb.google.com/lh/photo/mXYVL8uX1TNw0ENFur1PUQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-smFkdYyLMHE/Tl31QAWMNXI/AAAAAAAABzs/hIBW-yVpBuQ/s400/doublecmd_filetype_command_02.png" height="236" width="400"></a></p>

<h3>解决日期时间乱码的问题</h3>

<p>截至版本0.5.0 beta，如果设置了使用日期时间字符串的格式为“yyyy-mm-dd hh:mm:ss”，在<strong>zh_CN.UTF-8</strong>的区域设置下，字符串中将出现乱码：</p>

<p><a href="https://picasaweb.google.com/lh/photo/gMOlqF5DOQQ5otUEBon7lA?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-LfvO5yBH_F0/Tl3_d13FCNI/AAAAAAAAB0A/MHApuvTvkSg/s400/doublecmd_datetime_illegle_char.png" height="400" width="168"></a></p>

<p>临时解决办法是以英文区域设置启动doublecmd：</p>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8</span><br><span class="line">doublecmd &amp;</span><br></pre></td></tr></table></figure>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-enable-code-snippet-highlighting-for-ultrablog-vim-templates" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/enable-code-snippet-highlighting-for-ultrablog-vim-templates/"><strong>Enable Code Snippet Highlighting For UltraBlog.vim Templates</strong></a>
      <small class="article-date-index">&nbsp; 2011-08-27</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/enable-code-snippet-highlighting-for-ultrablog-vim-templates/" class="article-date">
  <time datetime="2011-08-26T16:00:00.000Z" itemprop="datePublished">2011-08-27</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Templates make it possible for users previewing posts in custom formats in <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>. However, there is more you can do with our highly customizable templates. This article discusses how to highlight code snippets in posts by the use of some third-party open-source tools.</p>

<p>Before setting out to work, let me introduce the tools we are about to use:</p>

<ul>
<li><a href="http://softwaremaniacs.org/soft/highlight/en/" target="_blank" rel="noopener">highlight.js</a>: A javascript library which highlights code blocks in web pages automatically.</li>
<li><a href="http://jquery.com/" target="_blank" rel="noopener">jquery</a>: The famous RIA development javascript library.</li>
</ul>

<p>Download the upper two libraries and put them under any folder accessible to your webbrowser, in my case, it is <strong>/home/lenin/.vim/bundle/ultrablog/vendor/</strong>.</p>

<p>Then open UltraBlog.vim and edit the template you are using, put the following lines in the <code>&lt;head&gt;...&lt;/head&gt;</code> area:</p>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/home/lenin/.vim/bundle/ultrablog/vendor/highlight/styles/default.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/home/lenin/.vim/bundle/ultrablog/vendor/highlight/highlight.pack.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/home/lenin/.vim/bundle/ultrablog/vendor/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">'pre'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i, e</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(<span class="keyword">typeof</span> e.lang != <span class="string">'undefined'</span>)</span></span><br><span class="line"><span class="undefined">            e.className = e.lang;</span></span><br><span class="line"><span class="javascript">        hljs.highlightBlock(e, <span class="string">'    '</span>);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>If you are using the default template UltraBlog.vim supplies, change <strong>.title</strong> to <strong>.postTitle</strong> in the pre-defined <code>&lt;style&gt;...&lt;/style&gt;</code> area, and change the class name of the div element in the <code>&lt;body&gt;...&lt;/body&gt;</code> area from <strong>title</strong> to <strong>postTitle</strong>, that is because this class name is also used by highlight.js.</p>

<p>An important point, the jquery selector I used in the code snippet above selects every <code>&lt;pre&gt;...&lt;/pre&gt;</code> element and copies the value of its attribute <strong>lang</strong> to <strong>class</strong>. This is specified for the wordpress plugin <a href="http://wordpress.org/extend/plugins/wp-syntax/" target="_blank" rel="noopener">wp-syntax</a> I use. If you use another syntax highlighting tool which uses different markup for code blocks, you should modify the code above to make highlight.js find code blocks correctly.</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-dualhead-display-on-linux" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/dualhead-display-on-linux/"><strong>Linux下双屏显示的设置</strong></a>
      <small class="article-date-index">&nbsp; 2011-08-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/dualhead-display-on-linux/" class="article-date">
  <time datetime="2011-08-03T16:00:00.000Z" itemprop="datePublished">2011-08-04</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>RandR是对X11的一个扩展协议，允许在不重启X的情况下修改输出的一些参数并使之生效，xrandr是该协议的命令行界面，它的功能之一就是用来设置双屏显示。</p>

<p>缺省情况下，外接显示器后启用的是屏幕复制模式，即两个屏幕显示完全相同的内容。使用命令<code>xrandr -q</code>查看当前的输出状态：</p>

<blockquote>
  <p>Screen 0: minimum 320 x 200, current 1920 x 1080, maximum 8192 x 8192
  LVDS1 connected 1280x800+0+0 (normal left inverted right x axis y axis) 261mm x 163mm
    1280x800       60.0<em>+   60.0     50.0 <br>
    1024x768       75.1     70.1     60.0 <br>
    800x600        72.2     75.0     60.3     56.2 <br>
    768x576        75.0     72.0     60.0 <br>
    640x480        72.8     75.0     60.0     59.9 <br>
  VGA1 connected 1920x1080+0+0 (normal left inverted right x axis y axis) 509mm x 286mm
    1920x1080      60.0</em>+
    1680x1050      60.0 <br>
    1280x1024      75.0     60.0 <br>
    1440x900       59.9 <br>
    1280x960       60.0 <br>
    1024x768       75.1     70.1     60.0 <br>
    832x624        74.6 <br>
    800x600        72.2     75.0     60.3     56.2 <br>
    640x480        72.8     75.0     66.7     60.0 <br>
    720x400        70.1 <br>
  HDMI1 disconnected (normal left inverted right x axis y axis)
  DP1 disconnected (normal left inverted right x axis y axis)
  HDMI2 disconnected (normal left inverted right x axis y axis)
  DP2 disconnected (normal left inverted right x axis y axis)
  DP3 disconnected (normal left inverted right x axis y axis)</p>
</blockquote>

<p>可见，笔记本电脑的屏幕输出（<em>LVDS1</em>）的显示分辨率是1280x800，外接显示器的输出（<em>VGA1</em>）的分辨率是1920x1080。两个输出在整个虚拟屏幕（<em>名称：Screen 0；当前大小：1920x1080；最大：8192x8192</em>）上的坐标都是+0+0。所以在外接显示器中可以看到屏幕左上角有一个1280x800分辨率的小屏幕。</p>

<p>屏幕复制模式最常用于外接投影仪，现在我需要两个屏幕分别显示在各自的显示器中，并在两个屏幕中显示不同的内容（<em>也就是Windows下设置双屏显示时选择的扩展模式</em>）。</p>

<p>由于我将笔记本电脑放在外接显示器的左边，所以为了操作的自然，使用命令<code>xrandr --output VGA1 --right-of LVDS1</code>将外接显示器的输出在虚拟屏幕上的位置设置在笔记本电脑的输出的右边，示意图如下：</p>

<p><a href="https://picasaweb.google.com/lh/photo/twh2zzOQbv1YrOA_WPPxMg?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-otYnRD5mkv4/Tjqox_Fjl4I/AAAAAAAABzI/FxTmXNf-lk0/s640/xrandr%2525E8%2525A8%2525AD%2525E7%2525BD%2525AE%2525E9%25259B%252599%2525E5%2525B1%25258F%2525E9%2525A1%2525AF%2525E7%2525A4%2525BA.png" height="215" width="640"></a></p>

<p>这样，两个显示器中就可以显示不同的内容了。由于属于同一个虚拟屏幕，当然也可以将一个窗口跨过边界从一个显示器拖到另一个显示器中。再使用命令<code>xrandr -q</code>查看现在的输出状态：</p>

<blockquote>
  <p>Screen 0: minimum 320 x 200, current 3200 x 1080, maximum 8192 x 8192
  LVDS1 connected 1280x800+0+0 (normal left inverted right x axis y axis) 261mm x 163mm
    1280x800       60.0<em>+   60.0     50.0 <br>
    1024x768       75.1     70.1     60.0 <br>
    800x600        72.2     75.0     60.3     56.2 <br>
    768x576        75.0     72.0     60.0 <br>
    640x480        72.8     75.0     60.0     59.9 <br>
  VGA1 connected 1920x1080+1280+0 (normal left inverted right x axis y axis) 509mm x 286mm
    1920x1080      60.0</em>+
    1680x1050      60.0 <br>
    1280x1024      75.0     60.0 <br>
    1440x900       59.9 <br>
    1280x960       60.0 <br>
    1024x768       75.1     70.1     60.0 <br>
    832x624        74.6 <br>
    800x600        72.2     75.0     60.3     56.2 <br>
    640x480        72.8     75.0     66.7     60.0 <br>
    720x400        70.1 <br>
  HDMI1 disconnected (normal left inverted right x axis y axis)
  DP1 disconnected (normal left inverted right x axis y axis)
  HDMI2 disconnected (normal left inverted right x axis y axis)
  DP2 disconnected (normal left inverted right x axis y axis)
  DP3 disconnected (normal left inverted right x axis y axis)</p>
</blockquote>

<p>使用xrandr做的设置只对当前的X会话有效，重启后恢复原样。使设置持久化的方法为修改xorg.conf或设置自动执行命令。据说有一些图形界面封装的xrandr的前端，完善的桌面环境如GNOME和KDE应该也是可以在图形界面中设置的，不过我所使用的XFCE目前似乎只能启用/禁用复制模式，而不支持在图形界面中设置扩展模式。</p>

<p>下面的脚本用来简化双屏显示的设置：</p>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Restart trayer and cairo-dock which I use on my desktop</span></span><br><span class="line">restart_widget()</span><br><span class="line">&#123;</span><br><span class="line">    killall trayer</span><br><span class="line">    killall cairo-dock</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Another script which starts trayer and set some options</span></span><br><span class="line">    mytrayer</span><br><span class="line">    cairo-dock &amp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">set_dualhead()</span><br><span class="line">&#123;</span><br><span class="line">    xrandr --output LVDS1 --auto</span><br><span class="line">    xrandr --output VGA1 --auto</span><br><span class="line">    xrandr --output VGA1 --right-of LVDS1</span><br><span class="line">    restart_widget</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">set_lvds()</span><br><span class="line">&#123;</span><br><span class="line">    xrandr --output VGA1 --off</span><br><span class="line">    xrandr --output LVDS1 --auto</span><br><span class="line">    restart_widget</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">set_vga()</span><br><span class="line">&#123;</span><br><span class="line">    xrandr --output LVDS1 --off</span><br><span class="line">    xrandr --output VGA1 --auto</span><br><span class="line">    restart_widget</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">    set_dualhead</span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1x</span>"</span> <span class="keyword">in</span></span><br><span class="line">    <span class="string">"lvdsx"</span>) set_lvds;;</span><br><span class="line">    <span class="string">"vgax"</span>) set_vga;;</span><br><span class="line">    *) <span class="built_in">echo</span> <span class="string">'Unknown parameter !'</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ultrablog-v300-released" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/ultrablog-v300-released/"><strong>UltraBlog.vim v3.0释出：全文检索与事件驱动</strong></a>
      <small class="article-date-index">&nbsp; 2011-07-25</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/ultrablog-v300-released/" class="article-date">
  <time datetime="2011-07-24T16:00:00.000Z" itemprop="datePublished">2011-07-25</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>用了一周的业余时间，昨天我释出了<a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>的3.0版。新版本主要加入了全文检索的功能，并引入事件驱动的模式。</p>

<p>全文检索是我蓄谋已久的功能，一个不能搜索的博客客户端的管理功能是大打折扣的。得益于SQLite数据库和SQLAlchemy框架，全文检索的实现是很简单的，新增加的<code>:UBFind</code>命令将在所有文章和页面的标题与内容中查询，并将搜索结果显示在一个可分页的列表中。这个命令支持任意多个关键词，各关键词之间遵循与的关系。此外，检索结果中，所有的关键词将被自动标记为高亮。</p>

<p>事件驱动模式的引入是我悍然将版本号跳跃到3.x的主要原因。</p>

<p>在前几个版本中，我实现了对多窗口的支持，它使得用户可以在新窗口中打开列表中的文章。但UltraBlog.vim最初开发的时候并没有考虑到多窗口的问题，所有命令都只针对当前窗口进行操作。这就有了缓冲区内容同步的问题，假如在一个新的缓冲区中打开了和另一个缓冲区相同的文章，则一个缓冲区内容的改变不会同步到另外一个中，这多少是有些隐患的。</p>

<p>最直接的做法是在所有可能改变缓冲区内容的功能中加入对其它缓冲区的处理，但这样做有不少问题：</p>

<ul>
<li>代码耦合度太高，违反K.I.S.S原则，不利于今后的开发和维护</li>
<li>函数体过长，我讨厌难看的代码</li>
<li>代码冗余，重复劳动</li>
</ul>

<p>事件驱动模式可以很好的解决以上问题，一个函数只干一件事，做完后一个事件抛出去，至于连带著要做什么，谁监听这个事件谁去处理，代码的耦合度很低，复用度很高，易于维护和阅读。</p>

<p>UltraBlog.vim引入事件驱动模式处理缓冲区同步的问题。不同的操作抛出不同的事件，所有的事件继承自父类<strong>UBEvent</strong>：</p>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBEvent</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, srcObj)</span>:</span></span><br><span class="line">        self.srcObj = srcObj</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBDebugEvent</span><span class="params">(UBEvent)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBTmplDelEvent</span><span class="params">(UBEvent)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBTmplSaveEvent</span><span class="params">(UBEvent)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBLocalPostDelEvent</span><span class="params">(UBEvent)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBRemotePostDelEvent</span><span class="params">(UBEvent)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBPostSendEvent</span><span class="params">(UBEvent)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBPostSaveEvent</span><span class="params">(UBEvent)</span>:</span> <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>一个可能改变缓冲区内容的操作执行完后，创建一个特定的事件并将其加入到事件队列中。事件队列类中存放两个列表，一是事件队列，二是事件监听器列表；提供三个方法，分别用来注册事件监听器、对事件执行入队列操作和处理队列中所有事件：</p>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBEventQueue</span>:</span></span><br><span class="line">    queue = []</span><br><span class="line">    listeners = []</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fireEvent</span><span class="params">(cls, evt)</span>:</span></span><br><span class="line">        cls.queue.append(evt)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">processEvents</span><span class="params">(cls)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> evt <span class="keyword">in</span> cls.queue:</span><br><span class="line">            <span class="keyword">for</span> listener <span class="keyword">in</span> cls.listeners:</span><br><span class="line">                <span class="keyword">if</span> listener.isTarget(evt):</span><br><span class="line">                    cls.queue.remove(evt)</span><br><span class="line">                    listener.processEvent(evt)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">registerListener</span><span class="params">(cls, lsnr)</span>:</span></span><br><span class="line">        cls.listeners.append(lsnr)</span><br></pre></td></tr></table></figure>

<p>事件队列对事件的处理是通过事件监听器进行的，每个事件监听器要实现两个功能：识别监听对象和处理监听对象。所有具体事件的监听类都是<strong>UBListener</strong>的子类：</p>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBListener</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">''' Parent class of all listeners</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    eventType = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isTarget</span><span class="params">(cls, evt)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> isinstance(evt, cls.eventType)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">processEvent</span><span class="params">(evt)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UBPostSaveListener</span><span class="params">(UBListener)</span>:</span></span><br><span class="line">    <span class="string">''' Listener for saving posts/pages</span></span><br><span class="line"><span class="string">    1. Refresh the current view if it is an edit/list view of this post</span></span><br><span class="line"><span class="string">    2. Mark all edit/list views of posts/pages outdated</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    eventType = UBPostSaveEvent</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">processEvent</span><span class="params">(evt)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> nr <span class="keyword">in</span> ub_get_buffers([<span class="string">'post_edit'</span>,<span class="string">'page_edit'</span>]):</span><br><span class="line">            <span class="keyword">if</span> evt.srcObj==ub_get_meta(<span class="string">'id'</span>, nr):</span><br><span class="line">                <span class="keyword">if</span> nr==ub_get_bufnr(<span class="string">'%'</span>):</span><br><span class="line">                    ub_refresh_current_view()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    ub_set_view_outdated(nr)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> nr <span class="keyword">in</span> ub_get_buffers([<span class="string">'post_list'</span>,<span class="string">'page_list'</span>,<span class="string">'search_result_list'</span>]):</span><br><span class="line">            <span class="keyword">if</span> nr == ub_get_bufnr(<span class="string">'%'</span>):</span><br><span class="line">                ub_refresh_current_view()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ub_set_view_outdated(nr)</span><br></pre></td></tr></table></figure>

<p>事件监听器遍历所有满足处理条件的缓冲区，对当前缓冲区，立即刷新，其余的标记为已过期。同时利用Vim自身的事件驱动特性，在进入已过期的缓冲区时，再更新之，也就是传说中的懒加载模式：</p>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">au</span> BufEnter * <span class="keyword">py</span> __ub_on_buffer_enter()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@__ub_exception_handler</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__ub_on_buffer_enter</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">''' Triggered by BufEnter event, check if the buffer is outdated</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">if</span> ub_is_view_outdated(<span class="string">'%'</span>):</span><br><span class="line">        ub_refresh_current_view()</span><br><span class="line">        ub_set_view_outdated(<span class="string">'%'</span>, <span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>

<p>此外，随著代码量的增加，原来把全部代码都放在一个文件中的做法不再适用，尤其是以<a href="http://en.wikipedia.org/wiki/Here_document" target="_blank" rel="noopener">Here Document</a>形式存放在vim脚本文件中的Python代码不能被ctags识别，所以按类别分别存放到<strong>$VIMRUNTIME/plugin/ultrablog/</strong>下的几个Python源文件中。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-got-aoc-e2343f" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/got-aoc-e2343f/"><strong>收入AOC E2343F</strong></a>
      <small class="article-date-index">&nbsp; 2011-07-24</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/got-aoc-e2343f/" class="article-date">
  <time datetime="2011-07-23T16:00:00.000Z" itemprop="datePublished">2011-07-24</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>当初在深圳被公司的Dell Inspiron 1300吓怕了，所以不惜重金<a href="http://0x3f.org/?p=819">收入</a>了高配的Thinkpad X200 FN3。最近越来越觉得12寸的屏幕看代码实在是太局促了。</p>

<p>今天中午收到AOC E2343F，979￥，23寸屏里算是价位很低的了，不算是很好的屏，不过看看代码、电影足够了。外接到X200上，人品不错，完美屏，没坏点，桌面环境下可以使用最大1920x1080x32分辨率，但是不知道为什么，<code>hwinfo --framebuffer</code>列出的结果中没有这个最佳分辨率，<a href="http://0x3f.org/?p=1377">KMS</a>自动选用了1280x1024x32，可惜不能在<a href="http://linuxtoy.org/archives/fbterm.html" target="_blank" rel="noopener">fbterm</a>下撒野了。</p>

<p>下午复习了一下<a href="http://zh.wikipedia.org/wiki/阿凡达" target="_blank" rel="noopener">AVATAR</a>，720P，有点儿冲动，<a href="http://0x3f.org/?p=970">Intel GMA X4500</a>还是很坚挺的。打开Vim，分割窗口，豁然开朗，对于这个根本目的，结果相当冲动。</p>

<p><a href="https://picasaweb.google.com/lh/photo/4HIWgaUq4G0PV4MnMapZ1Q?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh4.googleusercontent.com/-jUv8m-8etm4/Tiqpqyp-LCI/AAAAAAAAByY/R8_PZiw3s_c/s400/C360_2011-07-23%25252018-38-10.jpg" height="300" width="400"></a></p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-manage-ssh-connections-using-pac-manager" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/manage-ssh-connections-using-pac-manager/"><strong>使用PAC Manager管理SSH连接</strong></a>
      <small class="article-date-index">&nbsp; 2011-07-14</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/manage-ssh-connections-using-pac-manager/" class="article-date">
  <time datetime="2011-07-13T16:00:00.000Z" itemprop="datePublished">2011-07-14</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
  <p>本文发表在今年一月份的『Linuxpilot』上，已经过了半年，可以放到博客上了。本文基于PAC 2.x版，最近PAC发布了3.0版，界面和功能都有一定的变化。</p>
</blockquote>

<h2>简介</h2>

<p><a href="http://pacmanager.sourceforge.net" target="_blank" rel="noopener">PAC Manager</a>（以下简称PAC）是一个使用Perl编程语言和GTK图形界面开发套件实现的SSH/Telnet/Serial连接管理工具，是同类的PuTTY、SecureCRT、SSHMenu的一个开源、免费的替代品。</p>

<h2>具备哪些特性</h2>

<ul>
<li>可创建本地端口转发、远程端口转发和动态端口转发，并支持X图形界面转发</li>
<li>对连接分组，方便管理较多连接</li>
<li>将指定的、已打开的连接加入集群，同一集群的所有终端共享键盘输入</li>
<li>虚拟终端窗口支持多标签</li>
<li>虚拟终端窗口的样式可定制，支持半透明</li>
<li>支持通过代理服务器建立连接</li>
<li>支持通过Expect表达式进行自动交互</li>
<li>支持使用本地和远程宏管理数量众多且复杂的常用指令</li>
<li>支持定制连接前和断开后自动执行的指令</li>
<li>为每个连接保存截图</li>
</ul>

<h2>针对重要特性的细解</h2>

<h3>创建SSH隧道</h3>

<p>假如当我们在进行诸如收发电邮、使用即时通讯工具聊天或者使用网络银行等网络通讯行为时，也许有些重要的数据我们不希望被明文传递；亦或某些资源受限于网络结构和防火墙等因素而不能被我们直接访问，这时我们往往就可以通过SSH的端口转发功能来实现。</p>

<p>所谓端口转发，即是指将原本使用其它TCP端口访问的数据经由SSH连接占用的端口发送，加之这一过程也伴随有数据的加密和解密，因此也往往被称作“隧道”。根据连接方向的不同，SSH的隧道一般分为三种，即正向隧道、反向隧道和动态隧道；同时，根据端口转发方式的不同，这三种隧道又分别被称为本地端口转发、远程端口转发与动态端口转发。</p>

<p>那么这三种端口转发方式彼此之间有什么异同，分别又都有什么用途呢？这里举个例子来说明一下。</p>

<p>假设我的公司有一个较大的内部网络，而只有一台服务器作为网关对公网提供服务。如果我需要在家里的个人电脑上访问公司的办公系统，而这套系统又部署在内部网络中的一台服务器上、不能被公网访问，该怎么办呢？</p>

<p>第一种情况，假设网关服务器对外提供了SSH服务，那么我就可以在家庭电脑上使用如下指令建立一个隧道：</p>

<p><code>ssh -L 9999:192.168.1.128:80 111.111.111.111</code></p>

<p>这条指令中，192.168.1.128是公司办公系统服务器在内网中的IP地址，111.111.111.111是公司网关服务器的公网IP地址。整条指令的意思是：我在家庭电脑中访问本机的9999端口，就如同我在IP地址为111.111.111.111的公司网关服务器上访问IP地址为192.168.1.128的主机的80端口一样。因此，当这条指令执行成功后，我就可以在家庭电脑中通过访问9999端口来打开公司内部办公系统了。</p>

<p>第二种情况，假设网关服务器不对外提供SSH服务但安装了SSH客户端，而我的家庭电脑却安装了SSH服务，那么我就可以在公司网关服务器上执行如下指令建立一个隧道：</p>

<p><code>ssh -R 9999:192.168.1.128:80 222.222.222.222</code></p>

<p>这条指令中，222.222.222.222是家庭电脑的公网IP地址。整条指令的意思是：我在公网IP地址为222.222.222.222的电脑上访问9999端口，就如同在本机（公司网关服务器）上访问IP地址为192.168.1.128的主机的80端口一样。当我回到家中，就可以和前面一样通过访问9999端口来打开办公系统了。</p>

<p>事实上，第一种情况是将本地端口映射为远程主机所能访问的资源，故称为本地端口转发；而第二种情况是将远程主机的端口映射为本机所能访问的资源，故称为远程端口转发。</p>

<p>但无论是本地端口转发还是远程端口转发，都只能将一个资源转发到一个端口上，假若我要访问很多资源，岂非要建立很多SSH隧道，不但操作麻烦，而且浪费本机资源。这时，我们就可以使用第三种端口转发方式--动态端口转发：</p>

<p><code>ssh -D 9999 111.111.111.111</code></p>

<p>这条指令的意思是：我在本机访问9999端口，就像在IP地址为111.111.111.111的主机上访问它所能访问的某些资源一样。这个所谓的“某些资源”，需要由我在发起访问请求时通过SSH隧道告诉远程主机，事实上，SSH的动态端口转发就是创建了一个SOCKS代理服务器。</p>

<p>在PAC Manager中，我们可以在每个SSH连接的配置界面创建隧道。对于上面的例子，创建本地端口转发时，应点击“Local Port Forwarding”区域的“Add”按钮，并将本地端口、远程资源IP地址和端口分别填写到“Local Port”、“Remote Address”和“Remote Port”中：</p>

<p><a href="https://picasaweb.google.com/lh/photo/Gfzyo3h4hUrTUxA4YIlRuw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh3.googleusercontent.com/--l0NMNEs-Qs/Th70Q2lplvI/AAAAAAAABxo/EDBIPjRL0nY/s640/pac_manager_introduction-tunnel_01.png" height="166" width="640"></a></p>

<p>截至当前最新的版本（2.4.1.3），PAC Manager尚未为远程端口转发提供像本地端口转发功能一样单独的配置界面，但可以使用高级选项功能实现。在“Advanced Options”输入框中填写如下内容：</p>

<p><a href="https://picasaweb.google.com/lh/photo/fru1uaGuVQ57mXRBiFRMeA?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-iFwTWK2ZL4M/Th70Q7NcE6I/AAAAAAAABxs/pTEh2LGkwV8/s640/pac_manager_introduction-tunnel_03.png" height="31" width="640"></a></p>

<p>如果需要建立多个远程端口转发，可以在“Advanced Options”中填写多个类似上面内容的选项，彼此之间使用空格分隔即可。</p>

<p>创建动态端口转发时，应选中“Dynamic Port Forwarding”区域前面的复选框，然后填写“Forwarded SOCKS Port”即可：</p>

<p><a href="https://picasaweb.google.com/lh/photo/hnRb67QlipzpHb_IaeyYiw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh3.googleusercontent.com/-JHN7-EI7pjc/Th70QhAOCUI/AAAAAAAABxk/4D2e1SpcS-U/s640/pac_manager_introduction-tunnel_02.png" height="55" width="640"></a></p>

<h3>连接前及断开后的自动指令</h3>

<p>通过在PAC Manager中定义连接前和断开后的自动指令，我们可以指定一些在相应的SSH连接建立之前及断开之后通常要在本机执行的指令。</p>

<p>例如假设我使用的是计时收费的网络服务，为了节省资费，我希望只在每次建立SSH连接时才激活网络服务，并且在完成工作后断开SSH连接时自动断开网络服务。那么就可以在“Pre Exec”中定义激活网络服务的指令，如下图所示：</p>

<p><a href="https://picasaweb.google.com/lh/photo/_P1JaaI5sF8gDTMulaljVA?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-nPz5VHhK0vk/Th70MQLOVOI/AAAAAAAABxM/Q-mwNmyxzOo/s640/pac_manager_introduction-exec_01.png" height="136" width="640"></a></p>

<p>在“Post Exec”中定义断开网络服务的指令，如下图所示：</p>

<p><a href="https://picasaweb.google.com/lh/photo/fsRPp-6-Uskq_MA3JxoZsA?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-xjZjpDdtlkc/Th70Nqu4LRI/AAAAAAAABxU/AJZoptvtR2A/s640/pac_manager_introduction-exec_02.png" height="136" width="640"></a></p>

<p>PAC Manager会在每次建立SSH连接前和断开SSH连接后弹出对话框请求用户选择要在本机执行的指令。</p>

<h3>Expect正则表达式</h3>

<p>Expect是一个用以实现终端中自动交互功能的软件套件，它允许用户通过编写脚本实现自动响应终端中的指令对用户输入的请求，从而将用户从日常重复的劳动中解脱出来。利用Expect，我们可以实现自动输入日常使用的指令中密码的输入；可以在安装程式要求确认时自动确认；甚至实现一个IRC聊天机器人，在你不在时自动回复你的朋友！</p>

<p>那么在PAC Manager中，Expect是怎样使用的呢？我们用一个示例来说明。</p>

<p>假设我是公司内部邮件系统的管理员，每天下班后回到家都要时常查看一下系统的日志记录，而邮件系统服务器位于公司内部网络，我只有公司网关的SSH访问权限。这样我每次查看日志都要做至少三件事：</p>

<ul>
<li>通过SSH登录到公司网关主机</li>
<li>使用SCP指令从内网邮件服务器上下载日志文件到公司网关主机（需要输入密码）</li>
<li>使用vi编辑器打开日志文件</li>
</ul>

<p>如果经常这样做，会是件很烦琐的事。那么在PAC Manager中可以这样实现：</p>

<p>首先创建一个到公司网关的SSH连接，然后添加Expect配置如下：</p>

<p><a href="https://picasaweb.google.com/lh/photo/QvMWuVXQw3YCKGJL-M6IPw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh4.googleusercontent.com/-kB7IeFYEw3o/Th70Nxj6cvI/AAAAAAAABxY/Erk3uOTnExw/s640/pac_manager_introduction-expect_01.png" height="203" width="640"></a></p>

<p>第一个Expect配置项的意思是在到公司网关的SSH连接建立成功后马上从邮件服务器（IP是192.168.1.3）上下载日志文件（mail.log），然后使用vi编辑器打开该日志文件。由于SCP指令需要输入密码，故第二个Expect配置项会在SCP请求密码时自动输入。这样，在PAC Manager中每次连接到公司网关时就会自动下载并打开日志文件了。</p>

<h3>宏</h3>

<p>对于经常要做远程管理的用户，通常会有一些常用的指令，有时指令太多或太长，记忆和输入都不方便，这时就可以使用PAC Manager的宏管理功能来管理这些常用指令。</p>

<p>例如在下面的图中，我们定义了两个指令：</p>

<p><a href="https://picasaweb.google.com/lh/photo/p5j9nUq8dU6tEjZD48ZqjA?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-lEEfQ-KS6MI/Th70PiPEptI/AAAAAAAABxc/XVZiAi_Jcxs/s640/pac_manager_introduction-macros_01.png" height="142" width="640"></a></p>

<p>然后在建立SSH连接后就可以在需要的时候通过右键菜单选择要执行的指令：</p>

<p><a href="https://picasaweb.google.com/lh/photo/toIv5UpSbJpWBm935x5riw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh4.googleusercontent.com/-u8Ay_1jNMmM/Th70QNyV_SI/AAAAAAAABxg/riFqK-0-Ljw/s800/pac_manager_introduction-macros_02.png" height="435" width="514"></a></p>

<p>如果在编辑宏时选中了输入框前面的“Confirm”，则表示在使用此指令前会弹出一个对话框要求用户确认，对于一些危险的指令，这会是防止自己犯下不可饶恕的错误的最后一道屏障。</p>

<h3>集群</h3>

<p>如果您有多台远程主机需要管理，并且经常会对所有主机都执行一些相同的操作，那么PAC Manager的集群功能就可以免去在每台主机上都执行一遍相同指令的麻烦。</p>

<p>首先我们打开三个SSH连接，假设现在需要在其中的两台主机中输入同样的指令，那么可以点击PAC Manager主窗口上的“Clusters”按钮，在弹出的对话框中的集群列表中新建或选择一个集群。</p>

<p>在对话框左边的列表中列出的是当前所有打开的连接中没有被加入集群的连接，选中其中的两个，并点击“Add to Cluster”，这两个连接即被加入指定的集群中。如下图所示：</p>

<p><a href="https://picasaweb.google.com/lh/photo/KmS2UPOgXmgv5pRlFu2DMQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh3.googleusercontent.com/-6OtjbnT17aQ/Th70NhoCZ2I/AAAAAAAABxQ/-0uDjq4WGEI/s640/pac_manager_introduction-cluster_01.png" height="452" width="640"></a></p>

<p>同一集群中的所有终端窗口将共享用户的输入，例如在集群中的任一终端中输入“hostname”并点击Enter键，则集群中所有终端都会显示该连接对应主机的主机名。</p>

<h3>环境变量及用户自定义变量</h3>

<p>PAC Manager允许用户在定义宏、Expect脚本和其它指令时使用系统环境变量和自定义的变量。对于某些需要用到会经常变化的特定值的指令，这个功能免去了每当这些值变化后都必须逐个修改相关指令的麻烦。</p>

<p>以前面在“Expect正则表达式”节举的例子来说，假设我不但定义了连接后自动下载日志文件的Expect表达式，还定义了几个使用lftp指令下载远程主机其它文件的宏，那么每当远程主机的FTP账号密码发生变化，我都必须逐个修改所有使用了这个密码的宏，设想如果这种情况很多，那将会是怎样的噩梦！</p>

<p>此时我就可以使用自定义变量的功能定义一个变量，以存储这个密码，如下图所示：</p>

<p><a href="https://picasaweb.google.com/lh/photo/GbNSktQyEHUDLrwiGgQ2Zg?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-qGDhT2O4fgQ/Th70Roa8eOI/AAAAAAAABxw/aDPvXG2dSLE/s640/pac_manager_introduction-user_variables_01.png" height="138" width="640"></a></p>

<p>然后在所有使用这个密码的位置使用这个变量作为替代值。查找已定义变量的方法是在指令输入框中点击右键，所有的用户自定义变量都显示在“User variables”菜单中：</p>

<p><a href="https://picasaweb.google.com/lh/photo/P6MQxVuYx2gh1eGAzcH6qQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh4.googleusercontent.com/-Py5Ci0-H-vE/Th70R25OsEI/AAAAAAAABx0/57aU98zSEIU/s640/pac_manager_introduction-user_variables_02.png" height="184" width="640"></a></p>

<p>如果需要在指令中引入系统环境变量，则可以在与“User variables”平级的“Environment variables”菜单中选择。</p>

<h3>灵活的可定制性</h3>

<p>PAC Manager提供一个简洁直观的全局定制界面，用户可在其中定义程式本身行为的参数、建立连接后的虚拟终端窗口的样式、连接的超时时间及建立连接时使用的代理服务器信息。</p>

<p>它甚至为每个连接都提供了定制功能，用户可以针对个别连接进行个性化定制，单个连接中的配置信息将会覆盖全局配置中对应的信息。</p>

<h3>管理Telnet/Serial连接</h3>

<p>PAC Manager不但支持SSH协议，也可以作为Telnet和Serial协议的连接管理工具，在此不作赘述。</p>

<h2>结束语</h2>

<p>PAC Manager是一个年轻的项目，在用户体验和功能上还有很大的发展空间。但凭借出色的用户界面设计和实用细致的功能，即使与那些老牌的同类工具相比也不遑多让，从它华丽的现身我们高兴地看到在SSH/Telnet管理工具中又多出一个易用、强大、美观和免费的选择。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-comparison-of-efficiency-for-apc-file-memcached" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/comparison-of-efficiency-for-apc-file-memcached/"><strong>APC、文件和Memcached效率对比</strong></a>
      <small class="article-date-index">&nbsp; 2011-07-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/comparison-of-efficiency-for-apc-file-memcached/" class="article-date">
  <time datetime="2011-07-12T16:00:00.000Z" itemprop="datePublished">2011-07-13</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>对一个保存了100个对象实例的数组进行300次读写，该数组序列化后大小为232KB。</p>

<h2>测试环境</h2>

<table>
    <tr>
        <th>网络服务器</th>
        <th>PHP版本</th>
        <th>操作系统</th>
        <th>硬件配置</th>
    </tr>
    <tr>
        <td>NGINX v1.0.4</td>
        <td>PHP-FPM v5.3.6<br>APC启用</td>
        <td>Archlinux 32bit</td>
        <td>Intel(R) Core(TM)2 Duo CPU T9400 @ 2.53GHz<br>Mem: 3G DDR3<br>Disk: 5400r/s</td>
    </tr>
</table>

<h2>测试脚本</h2>

<p>测试数据：</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> data.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $x0;</span><br><span class="line">    <span class="keyword">var</span> $x1;</span><br><span class="line">    <span class="keyword">var</span> $x2;</span><br><span class="line">    <span class="keyword">var</span> $x3;</span><br><span class="line">    <span class="keyword">var</span> $x4;</span><br><span class="line">    <span class="keyword">var</span> $x5;</span><br><span class="line">    <span class="keyword">var</span> $x6;</span><br><span class="line">    <span class="keyword">var</span> $x7;</span><br><span class="line">    <span class="keyword">var</span> $x8;</span><br><span class="line">    <span class="keyword">var</span> $x9;</span><br><span class="line">    <span class="keyword">var</span> $x10;</span><br><span class="line">    <span class="keyword">var</span> $x11;</span><br><span class="line">    <span class="keyword">var</span> $x12;</span><br><span class="line">    <span class="keyword">var</span> $x13;</span><br><span class="line">    <span class="keyword">var</span> $x14;</span><br><span class="line">    <span class="keyword">var</span> $x15;</span><br><span class="line">    <span class="keyword">var</span> $x16;</span><br><span class="line">    <span class="keyword">var</span> $x17;</span><br><span class="line">    <span class="keyword">var</span> $x18;</span><br><span class="line">    <span class="keyword">var</span> $x19;</span><br><span class="line">    <span class="keyword">var</span> $x20;</span><br><span class="line">    <span class="keyword">var</span> $x21;</span><br><span class="line">    <span class="keyword">var</span> $x22;</span><br><span class="line">    <span class="keyword">var</span> $x23;</span><br><span class="line">    <span class="keyword">var</span> $x24;</span><br><span class="line">    <span class="keyword">var</span> $x25;</span><br><span class="line">    <span class="keyword">var</span> $x26;</span><br><span class="line">    <span class="keyword">var</span> $x27;</span><br><span class="line">    <span class="keyword">var</span> $x28;</span><br><span class="line">    <span class="keyword">var</span> $x29;</span><br><span class="line">    <span class="keyword">var</span> $x30;</span><br><span class="line">    <span class="keyword">var</span> $x31;</span><br><span class="line">    <span class="keyword">var</span> $x32;</span><br><span class="line">    <span class="keyword">var</span> $x33;</span><br><span class="line">    <span class="keyword">var</span> $x34;</span><br><span class="line">    <span class="keyword">var</span> $x35;</span><br><span class="line">    <span class="keyword">var</span> $x36;</span><br><span class="line">    <span class="keyword">var</span> $x37;</span><br><span class="line">    <span class="keyword">var</span> $x38;</span><br><span class="line">    <span class="keyword">var</span> $x39;</span><br><span class="line">    <span class="keyword">var</span> $x40;</span><br><span class="line">    <span class="keyword">var</span> $x41;</span><br><span class="line">    <span class="keyword">var</span> $x42;</span><br><span class="line">    <span class="keyword">var</span> $x43;</span><br><span class="line">    <span class="keyword">var</span> $x44;</span><br><span class="line">    <span class="keyword">var</span> $x45;</span><br><span class="line">    <span class="keyword">var</span> $x46;</span><br><span class="line">    <span class="keyword">var</span> $x47;</span><br><span class="line">    <span class="keyword">var</span> $x48;</span><br><span class="line">    <span class="keyword">var</span> $x49;</span><br><span class="line">    <span class="keyword">var</span> $x50;</span><br><span class="line">    <span class="keyword">var</span> $x51;</span><br><span class="line">    <span class="keyword">var</span> $x52;</span><br><span class="line">    <span class="keyword">var</span> $x53;</span><br><span class="line">    <span class="keyword">var</span> $x54;</span><br><span class="line">    <span class="keyword">var</span> $x55;</span><br><span class="line">    <span class="keyword">var</span> $x56;</span><br><span class="line">    <span class="keyword">var</span> $x57;</span><br><span class="line">    <span class="keyword">var</span> $x58;</span><br><span class="line">    <span class="keyword">var</span> $x59;</span><br><span class="line">    <span class="keyword">var</span> $x60;</span><br><span class="line">    <span class="keyword">var</span> $x61;</span><br><span class="line">    <span class="keyword">var</span> $x62;</span><br><span class="line">    <span class="keyword">var</span> $x63;</span><br><span class="line">    <span class="keyword">var</span> $x64;</span><br><span class="line">    <span class="keyword">var</span> $x65;</span><br><span class="line">    <span class="keyword">var</span> $x66;</span><br><span class="line">    <span class="keyword">var</span> $x67;</span><br><span class="line">    <span class="keyword">var</span> $x68;</span><br><span class="line">    <span class="keyword">var</span> $x69;</span><br><span class="line">    <span class="keyword">var</span> $x70;</span><br><span class="line">    <span class="keyword">var</span> $x71;</span><br><span class="line">    <span class="keyword">var</span> $x72;</span><br><span class="line">    <span class="keyword">var</span> $x73;</span><br><span class="line">    <span class="keyword">var</span> $x74;</span><br><span class="line">    <span class="keyword">var</span> $x75;</span><br><span class="line">    <span class="keyword">var</span> $x76;</span><br><span class="line">    <span class="keyword">var</span> $x77;</span><br><span class="line">    <span class="keyword">var</span> $x78;</span><br><span class="line">    <span class="keyword">var</span> $x79;</span><br><span class="line">    <span class="keyword">var</span> $x80;</span><br><span class="line">    <span class="keyword">var</span> $x81;</span><br><span class="line">    <span class="keyword">var</span> $x82;</span><br><span class="line">    <span class="keyword">var</span> $x83;</span><br><span class="line">    <span class="keyword">var</span> $x84;</span><br><span class="line">    <span class="keyword">var</span> $x85;</span><br><span class="line">    <span class="keyword">var</span> $x86;</span><br><span class="line">    <span class="keyword">var</span> $x87;</span><br><span class="line">    <span class="keyword">var</span> $x88;</span><br><span class="line">    <span class="keyword">var</span> $x89;</span><br><span class="line">    <span class="keyword">var</span> $x90;</span><br><span class="line">    <span class="keyword">var</span> $x91;</span><br><span class="line">    <span class="keyword">var</span> $x92;</span><br><span class="line">    <span class="keyword">var</span> $x93;</span><br><span class="line">    <span class="keyword">var</span> $x94;</span><br><span class="line">    <span class="keyword">var</span> $x95;</span><br><span class="line">    <span class="keyword">var</span> $x96;</span><br><span class="line">    <span class="keyword">var</span> $x97;</span><br><span class="line">    <span class="keyword">var</span> $x98;</span><br><span class="line">    <span class="keyword">var</span> $x99;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x0 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x1 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x2 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x3 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x4 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x5 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x6 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x7 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x8 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x9 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x10 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x11 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x12 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x13 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x14 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x15 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x16 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x17 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x18 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x19 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x20 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x21 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x22 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x23 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x24 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x25 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x26 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x27 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x28 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x29 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x30 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x31 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x32 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x33 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x34 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x35 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x36 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x37 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x38 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x39 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x40 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x41 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x42 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x43 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x44 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x45 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x46 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x47 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x48 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x49 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x50 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x51 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x52 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x53 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x54 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x55 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x56 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x57 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x58 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x59 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x60 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x61 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x62 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x63 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x64 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x65 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x66 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x67 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x68 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x69 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x70 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x71 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x72 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x73 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x74 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x75 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x76 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x77 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x78 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x79 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x80 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x81 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x82 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x83 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x84 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x85 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x86 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x87 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x88 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x89 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x90 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x91 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x92 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x93 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x94 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x95 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x96 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x97 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x98 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x99 = <span class="number">1234567890</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$repeat = <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line">$arr = <span class="keyword">array</span>();</span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; <span class="number">100</span>; $i++) &#123;</span><br><span class="line">    $arr[] = <span class="keyword">new</span> XTest;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>APC:</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> t1.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'data.php'</span>;</span><br><span class="line"></span><br><span class="line">$stime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $repeat; $i++) &#123;</span><br><span class="line">    apc_store(<span class="string">'key'</span>.$i, $arr);</span><br><span class="line">    apc_fetch(<span class="string">'key'</span>.$i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$etime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $etime-$stime;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>文件：</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> t2.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'data.php'</span>;</span><br><span class="line"></span><br><span class="line">$stime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $repeat; $i++) &#123;</span><br><span class="line">    file_put_contents(<span class="string">'/tmp/xtest_key'</span>.$i.<span class="string">'.srl'</span>, serialize($arr));</span><br><span class="line">    unserialize(file_get_contents(<span class="string">'/tmp/xtest_key'</span>.$i.<span class="string">'.srl'</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$etime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $etime-$stime;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Memcached:</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> t3.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'data.php'</span>;</span><br><span class="line"></span><br><span class="line">$mem = <span class="keyword">new</span> Memcached;</span><br><span class="line">$mem-&gt;addServer(<span class="string">"127.0.0.1"</span>, <span class="number">11211</span>);</span><br><span class="line"></span><br><span class="line">$stime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $repeat; $i++) &#123;</span><br><span class="line">    $mem-&gt;set(<span class="string">'key'</span>.$i, $arr);</span><br><span class="line">    $mem-&gt;get(<span class="string">'key'</span>.$i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$etime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $etime-$stime;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h2>测试结果</h2>

<table>
    <tr>
        <th>APC</th>
        <th>文件</th>
        <th>Memcached</th>
    </tr>
    <tr>
        <td>3.4926421642303</td>
        <td>3.6572530269623</td>
        <td>4.6224999427795</td>
    </tr>
</table>

<h2>总结</h2>

<ul>
<li>APC效率最高，Memcached效率最低</li>
<li>APC和Memcached的测试结果很稳定，文件方式的耗时从开始时的4秒逐步降低并稳定在3.6秒</li>
<li>猜想：
<ul>
<li>在IO量较小的情况下，文件读写可能确实比通过TCP操作Memcached效率高，但是在IO量较大的情况下，文件方式会出现瓶颈，Memcached的优势会得到体现</li>
<li>对于集群应用，通过NFS共享文件缓存的效率会低于Memcached</li>
</ul></li>
</ul>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-how-to-hide-dialog-in-installshield" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/how-to-hide-dialog-in-installshield/"><strong>隐藏InstallShield对话框控件的方法</strong></a>
      <small class="article-date-index">&nbsp; 2011-06-22</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/how-to-hide-dialog-in-installshield/" class="article-date">
  <time datetime="2011-06-21T16:00:00.000Z" itemprop="datePublished">2011-06-22</time>
</a>-->
      <!--
-->
      <!--
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>SQLServerSelectLogin对话框中如果选择Windows身份验证，在附加数据库时会因权限不够而失败，所以应该隐藏这个选项，从而要求用户只执行SQL身份验证。</p>

<p>但是如果在定制对话框布局时直接删除两个单选框，会导致用户输入的用户名和密码不能被安装程序获取，并且InstallShield也没有提供隐藏这些控件的属性。解决方法是修改控件的定位属性，将其定位到对话框的大小范围之外：</p>

<p>要达到的目标：</p>

<p><a href="https://picasaweb.google.com/lh/photo/pDxRP_-E5wL7hAoCGYhHXQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-069F7ZsOWOo/TgHdXDlb7iI/AAAAAAAABv0/zd6y0KAlYWM/s400/SQLServerSelectLogin_Customization_01.png" height="299" width="400"></a></p>

<p>修改Top属性，将指定的控件定位在对话框之外：</p>

<p><a href="https://picasaweb.google.com/lh/photo/5NUaJ2Re61aWiUcJwDOHZg?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-9xthNFn9b2U/TgHdXnU-TmI/AAAAAAAABv4/-pQdJWF3nM8/s400/SQLServerSelectLogin_Customization_02.png" height="302" width="400"></a></p>

<p>最终效果：</p>

<p><a href="https://picasaweb.google.com/lh/photo/PImOz5YLlQKHAS2KUfggyw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-o2S0V7IzHKg/TgHdWxwEWMI/AAAAAAAABvw/2q4M26A_O2s/s400/SQLServerSelectLogin_Customization_03.png" height="299" width="400"></a></p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/28/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a><span class="page-number current">29</span><a class="page-number" href="/page/30/">30</a><a class="page-number" href="/page/31/">31</a><span class="space">&hellip;</span><a class="page-number" href="/page/40/">40</a><a class="extend next" rel="next" href="/page/30/">Next &raquo;</a>
      </nav>
    

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 晴耕雨讀&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/52binge/hexo-theme-blairos">blairos</a>
    </div>
  </div>
</footer>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
