<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>晴耕雨讀</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="晴耕雨讀">
<meta property="og:url" content="http://0x3f.org/page/30/index.html">
<meta property="og:site_name" content="晴耕雨讀">
<meta property="og:locale" content="zh-TW">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="晴耕雨讀">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel="stylesheet" type="text/css">
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-93233020-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
</html>
<body>
  <div id="container">
    <!-- blair add baidu tongji start... @2017.10.03 -->
<!-- blair add baidu tongji end ! @2017.10.03 -->

<header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/archives">目录</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="https://t.me/s/blingings">不灵</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://0x3f.org"></form>
        </div>
      </nav>
    </div>
  </div>
</header>

    <br>
    <section id="main" class="outer">
      <article id="post-comparison-of-efficiency-for-apc-file-memcached" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/comparison-of-efficiency-for-apc-file-memcached/"><strong>APC、文件和Memcached效率对比</strong></a>
      <small class="article-date-index">&nbsp; 2011-07-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/comparison-of-efficiency-for-apc-file-memcached/" class="article-date">
  <time datetime="2011-07-12T16:00:00.000Z" itemprop="datePublished">2011-07-13</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/comparison-of-efficiency-for-apc-file-memcached/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>对一个保存了100个对象实例的数组进行300次读写，该数组序列化后大小为232KB。</p>

<h2>测试环境</h2>

<table>
    <tr>
        <th>网络服务器</th>
        <th>PHP版本</th>
        <th>操作系统</th>
        <th>硬件配置</th>
    </tr>
    <tr>
        <td>NGINX v1.0.4</td>
        <td>PHP-FPM v5.3.6<br>APC启用</td>
        <td>Archlinux 32bit</td>
        <td>Intel(R) Core(TM)2 Duo CPU T9400 @ 2.53GHz<br>Mem: 3G DDR3<br>Disk: 5400r/s</td>
    </tr>
</table>

<h2>测试脚本</h2>

<p>测试数据：</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> data.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $x0;</span><br><span class="line">    <span class="keyword">var</span> $x1;</span><br><span class="line">    <span class="keyword">var</span> $x2;</span><br><span class="line">    <span class="keyword">var</span> $x3;</span><br><span class="line">    <span class="keyword">var</span> $x4;</span><br><span class="line">    <span class="keyword">var</span> $x5;</span><br><span class="line">    <span class="keyword">var</span> $x6;</span><br><span class="line">    <span class="keyword">var</span> $x7;</span><br><span class="line">    <span class="keyword">var</span> $x8;</span><br><span class="line">    <span class="keyword">var</span> $x9;</span><br><span class="line">    <span class="keyword">var</span> $x10;</span><br><span class="line">    <span class="keyword">var</span> $x11;</span><br><span class="line">    <span class="keyword">var</span> $x12;</span><br><span class="line">    <span class="keyword">var</span> $x13;</span><br><span class="line">    <span class="keyword">var</span> $x14;</span><br><span class="line">    <span class="keyword">var</span> $x15;</span><br><span class="line">    <span class="keyword">var</span> $x16;</span><br><span class="line">    <span class="keyword">var</span> $x17;</span><br><span class="line">    <span class="keyword">var</span> $x18;</span><br><span class="line">    <span class="keyword">var</span> $x19;</span><br><span class="line">    <span class="keyword">var</span> $x20;</span><br><span class="line">    <span class="keyword">var</span> $x21;</span><br><span class="line">    <span class="keyword">var</span> $x22;</span><br><span class="line">    <span class="keyword">var</span> $x23;</span><br><span class="line">    <span class="keyword">var</span> $x24;</span><br><span class="line">    <span class="keyword">var</span> $x25;</span><br><span class="line">    <span class="keyword">var</span> $x26;</span><br><span class="line">    <span class="keyword">var</span> $x27;</span><br><span class="line">    <span class="keyword">var</span> $x28;</span><br><span class="line">    <span class="keyword">var</span> $x29;</span><br><span class="line">    <span class="keyword">var</span> $x30;</span><br><span class="line">    <span class="keyword">var</span> $x31;</span><br><span class="line">    <span class="keyword">var</span> $x32;</span><br><span class="line">    <span class="keyword">var</span> $x33;</span><br><span class="line">    <span class="keyword">var</span> $x34;</span><br><span class="line">    <span class="keyword">var</span> $x35;</span><br><span class="line">    <span class="keyword">var</span> $x36;</span><br><span class="line">    <span class="keyword">var</span> $x37;</span><br><span class="line">    <span class="keyword">var</span> $x38;</span><br><span class="line">    <span class="keyword">var</span> $x39;</span><br><span class="line">    <span class="keyword">var</span> $x40;</span><br><span class="line">    <span class="keyword">var</span> $x41;</span><br><span class="line">    <span class="keyword">var</span> $x42;</span><br><span class="line">    <span class="keyword">var</span> $x43;</span><br><span class="line">    <span class="keyword">var</span> $x44;</span><br><span class="line">    <span class="keyword">var</span> $x45;</span><br><span class="line">    <span class="keyword">var</span> $x46;</span><br><span class="line">    <span class="keyword">var</span> $x47;</span><br><span class="line">    <span class="keyword">var</span> $x48;</span><br><span class="line">    <span class="keyword">var</span> $x49;</span><br><span class="line">    <span class="keyword">var</span> $x50;</span><br><span class="line">    <span class="keyword">var</span> $x51;</span><br><span class="line">    <span class="keyword">var</span> $x52;</span><br><span class="line">    <span class="keyword">var</span> $x53;</span><br><span class="line">    <span class="keyword">var</span> $x54;</span><br><span class="line">    <span class="keyword">var</span> $x55;</span><br><span class="line">    <span class="keyword">var</span> $x56;</span><br><span class="line">    <span class="keyword">var</span> $x57;</span><br><span class="line">    <span class="keyword">var</span> $x58;</span><br><span class="line">    <span class="keyword">var</span> $x59;</span><br><span class="line">    <span class="keyword">var</span> $x60;</span><br><span class="line">    <span class="keyword">var</span> $x61;</span><br><span class="line">    <span class="keyword">var</span> $x62;</span><br><span class="line">    <span class="keyword">var</span> $x63;</span><br><span class="line">    <span class="keyword">var</span> $x64;</span><br><span class="line">    <span class="keyword">var</span> $x65;</span><br><span class="line">    <span class="keyword">var</span> $x66;</span><br><span class="line">    <span class="keyword">var</span> $x67;</span><br><span class="line">    <span class="keyword">var</span> $x68;</span><br><span class="line">    <span class="keyword">var</span> $x69;</span><br><span class="line">    <span class="keyword">var</span> $x70;</span><br><span class="line">    <span class="keyword">var</span> $x71;</span><br><span class="line">    <span class="keyword">var</span> $x72;</span><br><span class="line">    <span class="keyword">var</span> $x73;</span><br><span class="line">    <span class="keyword">var</span> $x74;</span><br><span class="line">    <span class="keyword">var</span> $x75;</span><br><span class="line">    <span class="keyword">var</span> $x76;</span><br><span class="line">    <span class="keyword">var</span> $x77;</span><br><span class="line">    <span class="keyword">var</span> $x78;</span><br><span class="line">    <span class="keyword">var</span> $x79;</span><br><span class="line">    <span class="keyword">var</span> $x80;</span><br><span class="line">    <span class="keyword">var</span> $x81;</span><br><span class="line">    <span class="keyword">var</span> $x82;</span><br><span class="line">    <span class="keyword">var</span> $x83;</span><br><span class="line">    <span class="keyword">var</span> $x84;</span><br><span class="line">    <span class="keyword">var</span> $x85;</span><br><span class="line">    <span class="keyword">var</span> $x86;</span><br><span class="line">    <span class="keyword">var</span> $x87;</span><br><span class="line">    <span class="keyword">var</span> $x88;</span><br><span class="line">    <span class="keyword">var</span> $x89;</span><br><span class="line">    <span class="keyword">var</span> $x90;</span><br><span class="line">    <span class="keyword">var</span> $x91;</span><br><span class="line">    <span class="keyword">var</span> $x92;</span><br><span class="line">    <span class="keyword">var</span> $x93;</span><br><span class="line">    <span class="keyword">var</span> $x94;</span><br><span class="line">    <span class="keyword">var</span> $x95;</span><br><span class="line">    <span class="keyword">var</span> $x96;</span><br><span class="line">    <span class="keyword">var</span> $x97;</span><br><span class="line">    <span class="keyword">var</span> $x98;</span><br><span class="line">    <span class="keyword">var</span> $x99;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x0 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x1 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x2 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x3 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x4 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x5 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x6 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x7 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x8 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x9 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x10 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x11 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x12 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x13 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x14 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x15 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x16 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x17 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x18 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x19 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x20 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x21 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x22 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x23 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x24 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x25 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x26 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x27 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x28 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x29 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x30 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x31 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x32 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x33 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x34 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x35 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x36 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x37 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x38 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x39 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x40 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x41 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x42 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x43 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x44 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x45 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x46 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x47 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x48 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x49 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x50 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x51 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x52 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x53 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x54 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x55 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x56 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x57 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x58 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x59 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x60 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x61 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x62 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x63 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x64 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x65 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x66 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x67 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x68 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x69 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x70 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x71 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x72 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x73 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x74 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x75 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x76 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x77 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x78 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x79 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x80 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x81 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x82 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x83 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x84 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x85 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x86 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x87 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x88 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x89 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x90 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x91 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x92 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x93 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x94 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x95 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x96 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x97 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x98 = <span class="number">1234567890</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;x99 = <span class="number">1234567890</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$repeat = <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line">$arr = <span class="keyword">array</span>();</span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; <span class="number">100</span>; $i++) &#123;</span><br><span class="line">    $arr[] = <span class="keyword">new</span> XTest;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>APC:</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> t1.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'data.php'</span>;</span><br><span class="line"></span><br><span class="line">$stime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $repeat; $i++) &#123;</span><br><span class="line">    apc_store(<span class="string">'key'</span>.$i, $arr);</span><br><span class="line">    apc_fetch(<span class="string">'key'</span>.$i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$etime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $etime-$stime;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>文件：</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> t2.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'data.php'</span>;</span><br><span class="line"></span><br><span class="line">$stime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $repeat; $i++) &#123;</span><br><span class="line">    file_put_contents(<span class="string">'/tmp/xtest_key'</span>.$i.<span class="string">'.srl'</span>, serialize($arr));</span><br><span class="line">    unserialize(file_get_contents(<span class="string">'/tmp/xtest_key'</span>.$i.<span class="string">'.srl'</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$etime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $etime-$stime;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>Memcached:</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@file</span> t3.php</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'data.php'</span>;</span><br><span class="line"></span><br><span class="line">$mem = <span class="keyword">new</span> Memcached;</span><br><span class="line">$mem-&gt;addServer(<span class="string">"127.0.0.1"</span>, <span class="number">11211</span>);</span><br><span class="line"></span><br><span class="line">$stime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $repeat; $i++) &#123;</span><br><span class="line">    $mem-&gt;set(<span class="string">'key'</span>.$i, $arr);</span><br><span class="line">    $mem-&gt;get(<span class="string">'key'</span>.$i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$etime = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $etime-$stime;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h2>测试结果</h2>

<table>
    <tr>
        <th>APC</th>
        <th>文件</th>
        <th>Memcached</th>
    </tr>
    <tr>
        <td>3.4926421642303</td>
        <td>3.6572530269623</td>
        <td>4.6224999427795</td>
    </tr>
</table>

<h2>总结</h2>

<ul>
<li>APC效率最高，Memcached效率最低</li>
<li>APC和Memcached的测试结果很稳定，文件方式的耗时从开始时的4秒逐步降低并稳定在3.6秒</li>
<li>猜想：
<ul>
<li>在IO量较小的情况下，文件读写可能确实比通过TCP操作Memcached效率高，但是在IO量较大的情况下，文件方式会出现瓶颈，Memcached的优势会得到体现</li>
<li>对于集群应用，通过NFS共享文件缓存的效率会低于Memcached</li>
</ul></li>
</ul>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-how-to-hide-dialog-in-installshield" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/how-to-hide-dialog-in-installshield/"><strong>隐藏InstallShield对话框控件的方法</strong></a>
      <small class="article-date-index">&nbsp; 2011-06-22</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/how-to-hide-dialog-in-installshield/" class="article-date">
  <time datetime="2011-06-21T16:00:00.000Z" itemprop="datePublished">2011-06-22</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/how-to-hide-dialog-in-installshield/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>SQLServerSelectLogin对话框中如果选择Windows身份验证，在附加数据库时会因权限不够而失败，所以应该隐藏这个选项，从而要求用户只执行SQL身份验证。</p>

<p>但是如果在定制对话框布局时直接删除两个单选框，会导致用户输入的用户名和密码不能被安装程序获取，并且InstallShield也没有提供隐藏这些控件的属性。解决方法是修改控件的定位属性，将其定位到对话框的大小范围之外：</p>

<p>要达到的目标：</p>

<p><a href="https://picasaweb.google.com/lh/photo/pDxRP_-E5wL7hAoCGYhHXQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-069F7ZsOWOo/TgHdXDlb7iI/AAAAAAAABv0/zd6y0KAlYWM/s400/SQLServerSelectLogin_Customization_01.png" height="299" width="400"></a></p>

<p>修改Top属性，将指定的控件定位在对话框之外：</p>

<p><a href="https://picasaweb.google.com/lh/photo/5NUaJ2Re61aWiUcJwDOHZg?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-9xthNFn9b2U/TgHdXnU-TmI/AAAAAAAABv4/-pQdJWF3nM8/s400/SQLServerSelectLogin_Customization_02.png" height="302" width="400"></a></p>

<p>最终效果：</p>

<p><a href="https://picasaweb.google.com/lh/photo/PImOz5YLlQKHAS2KUfggyw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-o2S0V7IzHKg/TgHdWxwEWMI/AAAAAAAABvw/2q4M26A_O2s/s400/SQLServerSelectLogin_Customization_03.png" height="299" width="400"></a></p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-after-reading-extjs-in-action" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/after-reading-extjs-in-action/"><strong>读完『Ext JS IN Action』</strong></a>
      <small class="article-date-index">&nbsp; 2011-06-21</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/after-reading-extjs-in-action/" class="article-date">
  <time datetime="2011-06-20T16:00:00.000Z" itemprop="datePublished">2011-06-21</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/after-reading-extjs-in-action/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>这是本需要仔细读的书，对ExtJS的主要控件有比较详细的解说，有一定的原理性解释，并且对扩展ExtJS和ExtJS项目开发的模式有一些介绍。但不涉及底层特性，例如DOM、AJAX等。</p>

<p><a href="https://picasaweb.google.com/lh/photo/-SKr3JvnYwcLN0fb6sxCpw?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/-buAuqjZT0o4/Tf9kmGOt4vI/AAAAAAAABvQ/LezmUW7CJ74/s400/ExtJS_In_Action.jpg" height="400" width="319"></a></p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ultrablog-v230-released" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/ultrablog-v230-released/"><strong>UltraBlog.vim v2.3.0 Released With Templates</strong></a>
      <small class="article-date-index">&nbsp; 2011-06-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/ultrablog-v230-released/" class="article-date">
  <time datetime="2011-06-12T16:00:00.000Z" itemprop="datePublished">2011-06-13</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/ultrablog-v230-released/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>I released the new version 2.3.0 of <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a> last week. The main improvement in this version is that templates are introduced in.</p>

<p>Templates are simply HTML strings, they are used to preview posts/pages in the browser locally. This feature is a reparation for the remote previewing, due to the limit of the API, users cannot send a post to Wordpress as draft and preview it without affecting the post status if the post has been published. With templates, they do not have to send drafts to blogs to preview the final effect, but preview drafts directly in the browser in a pre-defined style. Templates can be created as many as users like and their looks can be customized with CSS, HTML and Javascript.</p>

<p>The following illustrations show the content and final effect of the default template:</p>

<p>
<div style="display:table;">
    <span style="display:table-cell;"><a href="https://picasaweb.google.com/lh/photo/bixn15q6ujUIQmamJDm7lQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh4.googleusercontent.com/-RCCNuSJbvsc/TfX_QuWobsI/AAAAAAAABuY/2eeov12lzX0/s288/ultrablog_default_template.png" title="The Content of The Default Template" height="180" width="288"></a></span>
    <span style="display:table-cell;width:10px;"></span>
    <span style="display:table-cell;"><a href="https://picasaweb.google.com/lh/photo/B0fBmAnyW2IAYDFcWb2e7Q?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-d0B7UEfZEYs/TfYEEJobpfI/AAAAAAAABug/OVYAB-imXlE/s288/ultrablog_template_effect.png" title="The Final Effect of The Default Template" height="180" width="288"></a></span>
</div>
</p>

<p>Templates should be formatted as valid Python template strings, that is, use the following avaliable placeholders and escape any literal '%' with another '%':</p>

<blockquote>
  <p>%(title)s <br>
     The title of the current post/page.</p>
  
  <p>%(content)s <br>
     The content of the current post/page.</p>
  
  <p>%% <br>
     A literal '%'.</p>
</blockquote>

<p>Users can take the default template whose name is 'default' as an example for writing their own templates. The default template can be changed to another one by setting the name of that template to the option <strong>ub_default_template</strong>.</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-how-to-define-auto-completion-for-vim-commands" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/how-to-define-auto-completion-for-vim-commands/"><strong>Vim自定义命令的参数自动补全</strong></a>
      <small class="article-date-index">&nbsp; 2011-06-11</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/how-to-define-auto-completion-for-vim-commands/" class="article-date">
  <time datetime="2011-06-10T16:00:00.000Z" itemprop="datePublished">2011-06-11</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/how-to-define-auto-completion-for-vim-commands/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>起初的几个版本采用增加命令个数的方式减少每个命令的参数个数，目的是降低命令格式记忆的难度。从2.3.0版本起，开始采用Vim自定义命令的一些高级特性，精简命令个数，虽然参数个数增加了，但由于实现了参数补全，反而更加直观。</p>

<p>Vim对自定义命令提供了多种补全参数的方式，详见<code>:h command-complete</code>。其中，最常用的当属<strong>custom</strong>：</p>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command! -nargs=? -<span class="built_in">complete</span>=custom,StatusCmpl UBSend exec(<span class="string">'py ub_send_item(&lt;f-args&gt;)'</span>)</span><br></pre></td></tr></table></figure>

<p>以上代码定义了一个自定义命令<strong>UBSend</strong>，它可以获得一个或零个参数（<em>-nargs=?</em>），如果指定参数，则补全方式采用<strong>custom</strong>，该方式调用一个名为<strong>StatusCmpl</strong>的函数并以其返回值作为补全的值域：</p>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">StatusCmpl</span><span class="params">(ArgLead, CmdLine, CursorPos)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"draft\npublish\nprivate\npending\n"</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>

<p>从以上代码可以看出，该函数需要接受三个参数，返回值应该是一个用换行符“\n”分割的字符串，在执行补全时，Vim自动使用正则表达式匹配备选项。对于只有一个参数的情况，这种实现方式简单高效。</p>

<p>对于参数较多的情况，<strong>customlist</strong>补全方式最为适用：</p>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command! -nargs=* -<span class="built_in">complete</span>=customlist,UBNewCmpl UBNew exec(<span class="string">'py ub_new_item(&lt;f-args&gt;)'</span>)</span><br></pre></td></tr></table></figure>

<p>以上代码定义了命令<strong>UBNew</strong>，<strong>customlist</strong>补全方式调用函数<strong>UBNewCmpl</strong>获取补全的值域：</p>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">UBNewCmpl</span><span class="params">(ArgLead, CmdLine, CursorPos)</span></span></span><br><span class="line">    <span class="keyword">let</span> lst = <span class="keyword">split</span>(<span class="variable">a:CmdLine</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(<span class="variable">a:ArgLead</span>)&gt;<span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> lst = lst[<span class="number">0</span>:-<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> results = []</span><br><span class="line">    <span class="comment">" For the first argument, complete the object type</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(lst)==<span class="number">1</span></span><br><span class="line">        <span class="keyword">let</span> objects = [<span class="string">'post'</span>,<span class="string">'page'</span>,<span class="string">'tmpl'</span>]</span><br><span class="line">        <span class="keyword">for</span> obj in objects</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">stridx</span>(obj,<span class="variable">a:ArgLead</span>)==<span class="number">0</span></span><br><span class="line">                <span class="keyword">call</span> <span class="built_in">add</span>(results,obj)</span><br><span class="line">            <span class="keyword">endif</span></span><br><span class="line">        <span class="keyword">endfor</span></span><br><span class="line">    <span class="comment">" For the second argument, complete the syntax for :UBNew post or :UBNew</span></span><br><span class="line">    <span class="comment">" page</span></span><br><span class="line">    <span class="keyword">elseif</span> <span class="built_in">len</span>(lst)==<span class="number">2</span> &amp;&amp; <span class="built_in">count</span>([<span class="string">'post'</span>, <span class="string">'page'</span>], lst[<span class="number">1</span>])==<span class="number">1</span></span><br><span class="line">        <span class="keyword">let</span> syntaxes = [<span class="string">'markdown'</span>,<span class="string">'html'</span>,<span class="string">'rst'</span>,<span class="string">'textile'</span>,<span class="string">'latex'</span>]</span><br><span class="line">        <span class="keyword">for</span> synx in syntaxes</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">stridx</span>(synx,<span class="variable">a:ArgLead</span>)==<span class="number">0</span></span><br><span class="line">                <span class="keyword">call</span> <span class="built_in">add</span>(results,synx)</span><br><span class="line">            <span class="keyword">endif</span></span><br><span class="line">        <span class="keyword">endfor</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>

<p>这时侯，前面提到的三个参数就派上用场了。<strong>ArgLead</strong>是进行补全时，已输入的参数部分，例如输入<code>:UBNew p</code>，然后按Tab键，则ArgLead的值就是“p”；<strong>CmdLine</strong>是已经输入的命令的全部，按上例，这个参数的值就是“UBNew p”；<strong>CursorPost</strong>是当前光标距离命令行开头的字符数。利用这三个参数，就可以判断正在补全命令的第几个参数，进而利用ArgLead筛选该参数的值域。</p>

<p>与<strong>custom</strong>调用的函数不同，<strong>customlist</strong>调用的函数的返回值应该是一个<strong>list</strong>类型的值。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-burn-personal-info-into-one-feed-using-yahoo-pipes" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/burn-personal-info-into-one-feed-using-yahoo-pipes/"><strong>聚合个人资讯</strong></a>
      <small class="article-date-index">&nbsp; 2011-06-08</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/burn-personal-info-into-one-feed-using-yahoo-pipes/" class="article-date">
  <time datetime="2011-06-07T16:00:00.000Z" itemprop="datePublished">2011-06-08</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/burn-personal-info-into-one-feed-using-yahoo-pipes/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>前段时间我把Twitter整合进博客之后，忽然觉得，既然微博已经很重要了，就应该加强它的地位，使其与博客分庭抗礼。于是开始用<a href="http://www.blueprintcss.org/" target="_blank" rel="noopener">blueprint</a>做CSS框架，对两三年没变过的<a href="http://0x3f.org/?p=198">iterse</a>做一些调整。</p>

<p>我对前端不太熟悉，这时候CSS框架的优越性就充分体现出来了，它让页面的布局变得相当容易，尤其是对前端设计最烦人的对多浏览器的兼容问题。现在的主题采用流行的950px宽度，比以前800px要宽裕了不少。其中，三分之一的宽度分给侧边栏，剩余部分留给博客文章列表，仍然采用两栏结构。</p>

<p>我在页面顶部加了顶栏，将原来侧边栏中的分类、归档、页面、搜索框、RSS订阅全部扔到里面。同时提升Twitter和最新评论列表的位置，增加它们显示条目的数量，以加强这两个时效性和互动性比较强的栏目。</p>

<p>然后我觉得资讯订阅中的内容也不应该再仅仅局限于博客文章了，应该把我在用的Twitter、豆瓣、Google Reader分享、PicasaWeb等服务中我的资讯也聚合进来。<del>开始的时候打算用<a href="http://pipes.yahoo.com/" target="_blank" rel="noopener">Yahoo! Pipes</a>，后来突然发现<a href="http://friendfeed.com" target="_blank" rel="noopener">FriendFeed</a>就可以做这个事，而且更好用，于是将原来烧录的<a href="http://feeds.feedburner.com/leninlee" target="_blank" rel="noopener">http://feeds.feedburner.com/leninlee</a>指向FriendFeed。</del></p>

<p>所以对于订阅原来的FeedBurner烧录的feed的读者，如果希望仍然只订阅博客文章，可以订阅<a href="http://feeds.feedburner.com/sinolog" target="_blank" rel="noopener">http://feeds.feedburner.com/sinolog</a>。这两个feed都放到了顶栏中，请以各种姿态翻墙订阅。</p>

<p><strong>2011-06-08 更新</strong></p>

<p>时隔一天，我认识到一个错误，FriendFeed毕竟还是一个微博，用它聚合个人资讯是不合适的，比如不能全文输出博客文章。最终还是使用Yahoo! Pipes，这货很强大、很好用。</p>

<p><a href="https://picasaweb.google.com/lh/photo/A47YaQXgVCk4TjIny4MSZQ?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-XeC4asNS_rU/Te-jeQU1jbI/AAAAAAAABs4/qMPXWNyciuA/s400/2011-06-09.00%25253A33%25253A19.%2525E6%252593%2525B7%2525E5%25258F%252596%2525E9%252581%2525B8%2525E5%25258F%252596%2525E5%25258D%252580%2525E5%25259F%25259F.01.png" height="239" width="400"></a></p>

<p>另外，<a href="http://twitter2rss.com/" target="_blank" rel="noopener">twitter2rss</a>是支持OAuth的Twitter烧录服务，非常好用。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-humanize-preview-window-in-vim" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/humanize-preview-window-in-vim/"><strong>人性化Vim的预览窗口</strong></a>
      <small class="article-date-index">&nbsp; 2011-05-29</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/humanize-preview-window-in-vim/" class="article-date">
  <time datetime="2011-05-28T16:00:00.000Z" itemprop="datePublished">2011-05-29</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/humanize-preview-window-in-vim/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Vim的预览窗口由<code>:ptag</code>等命令触发，可用于预览函数定义。但在缺省情况下，预览窗口的高度是固定的，对于注释信息较多的函数，往往不能完全显示注释，而对于注释较少的函数，又会有多余的行浪费屏幕空间。</p>

<p>下面的函数用于解决这个问题：</p>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">" 调用:ptag命令预览光标所在&lt;word&gt;的定义</span></span><br><span class="line"><span class="comment">" 对类C语言风格的函数/方法定义和注释有效，对其余情况仍沿用:ptag的原有效果</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">PTagIt</span><span class="params">()</span></span></span><br><span class="line">    exec <span class="string">"ptag "</span>.<span class="built_in">expand</span>(<span class="string">"&lt;cword&gt;"</span>)</span><br><span class="line">    <span class="keyword">let</span> cwin = <span class="built_in">winnr</span>()</span><br><span class="line">    silent! <span class="keyword">wincmd</span> <span class="keyword">P</span></span><br><span class="line">    <span class="keyword">let</span> lnr = <span class="built_in">line</span>(<span class="string">'.'</span>)</span><br><span class="line">    <span class="keyword">if</span> lnr &lt; <span class="number">3</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">foldlevel</span>(<span class="string">'.'</span>)&gt;<span class="number">0</span></span><br><span class="line">        <span class="keyword">normal</span> zo</span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> chead = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> linestr = <span class="built_in">getline</span>(lnr-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> linestr =~ <span class="string">'^\s*\*/'</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">ptr</span> = lnr-<span class="number">2</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">ptr</span>&gt;<span class="number">0</span></span><br><span class="line">            <span class="keyword">let</span> linestr = <span class="built_in">getline</span>(<span class="keyword">ptr</span>)</span><br><span class="line">            <span class="keyword">if</span> linestr =~ <span class="string">'^\s*/\*'</span></span><br><span class="line">                <span class="keyword">let</span> chead = <span class="keyword">ptr</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">endif</span></span><br><span class="line">            <span class="keyword">let</span> <span class="keyword">ptr</span> = <span class="keyword">ptr</span>-<span class="number">1</span></span><br><span class="line">        <span class="keyword">endwhile</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> chead&gt;<span class="number">0</span></span><br><span class="line">        exec <span class="string">'resize '</span>.(lnr-chead+<span class="number">1</span>)</span><br><span class="line">        exec <span class="string">'normal '</span>.chead.<span class="string">"z\&lt;CR&gt;"</span></span><br><span class="line">        exec <span class="string">'normal '</span>.lnr.<span class="string">'G'</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line">    exec cwin.<span class="string">'wincmd w'</span>  </span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">pp</span> :<span class="keyword">call</span> PTagIt()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">pc</span> :<span class="keyword">pclose</span><span class="symbol">&lt;CR&gt;</span></span><br></pre></td></tr></table></figure>

<p>例如对于如下的函数定义：</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 我是一个测试函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> int 我是整型形参</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string 我是字符串形参</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array 我是返回值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">($bar1, $bar2)</span> </span>&#123;...&#125;</span><br></pre></td></tr></table></figure>

<p>实际效果为打开的预览窗口将完全显示并只显示以上内容。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-use-ack-as-an-alternative-to-grep" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/use-ack-as-an-alternative-to-grep/"><strong>ack: grep的同类替代品</strong></a>
      <small class="article-date-index">&nbsp; 2011-05-09</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/use-ack-as-an-alternative-to-grep/" class="article-date">
  <time datetime="2011-05-08T16:00:00.000Z" itemprop="datePublished">2011-05-09</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/use-ack-as-an-alternative-to-grep/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://betterthangrep.com" target="_blank" rel="noopener">ack</a>是一个perl脚本，是grep的一个可选替换。</p>

<p>有以下优势：</p>

<ul>
<li>为程序员设计，使用方便，输入较少
<ul>
<li>默认递归搜索</li>
<li>缺省提供多种文件类型供选，文件类型对应的后缀名可修改</li>
</ul></li>
<li>使用perl的正则表达式，而grep只支持其一个子集</li>
<li>搜索结果高亮输出</li>
</ul>

<p>很多人以讹传讹，使人容易对ack的搜索速度产生误解。ack的官方宣传中说比grep快，其前提是ack可方便地针对部分后缀的文件进行搜索，而grep默认对所有文件搜索。ack的官方文档中明确指出，在对大量文件进行搜索时，grep的速度还是最快的。</p>

<h2>~/.ackrc</h2>

<p>使用此配置文件存储ack的常用选项。</p>

<blockquote>
  <p>-i
  --type-add
  php=.lib</p>
</blockquote>

<p>如上所示，该文件中每一行应该是ack命令行参数中用空格分隔的一个部分。</p>

<h2>例子</h2>

<p>如果搜索的关键词是正则表达式，在Linux下必须将其用双引号包围起来。</p>

<p>如：</p>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ack <span class="string">"gbldb\s*="</span></span><br></pre></td></tr></table></figure>

<h2>Windows下的安装</h2>

<ul>
<li>安装<a href="http://strawberryperl.com" target="_blank" rel="noopener">strawberryperl</a></li>
<li>保存<a href="http://betterthangrep.com/ack-standalone" target="_blank" rel="noopener">ack.pl</a>到<em>C:\bin</em></li>
<li>创建批处理文件<em>C:\bin\ack.bat</em>：<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">perl.exe c:/bin/ack.pl %*</span><br></pre></td></tr></table></figure></li>
<li>将<em>C:\bin</em>加入环境变量<strong>%PATH%</strong></li>
</ul>

<h2>资源</h2>

<ul>
<li><a href="http://www.vim.org/scripts/script.php?script_id=2572" target="_blank" rel="noopener">ack.vim</a>: Vim使用ack的辅助扩展</li>
</ul>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-after-reading-nginx-http-server" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/after-reading-nginx-http-server/"><strong>读完《Nginx HTTP Server》</strong></a>
      <small class="article-date-index">&nbsp; 2011-04-29</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/after-reading-nginx-http-server/" class="article-date">
  <time datetime="2011-04-28T16:00:00.000Z" itemprop="datePublished">2011-04-29</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/after-reading-nginx-http-server/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>昨天晚上在杭州飞北京的飞机上读完了这本书，用Kindle DXG。</p>

<p>作者是江苏科技大学的一位外籍老师，所以这本书也很有教科书的风格，先用一章的篇幅介绍Linux的相关概念和日常操作，而后通过和Apache的对比讲述了Nginx的主要特性，并使用Wordpress、MediaWiki等作了实例讲解。面面俱到，简单易懂，但并不深入。</p>

<p>目前介绍Nginx的书还不多，这本算得上是其中很好的一本。但是前六十页都是介绍Linux的基本概念，和后面的内容关系不大，显得很突兀，且很不KISS，对于一本只有三百多页的小书来说，这个篇幅很令人遐想。抛开这一点，这本书当属眼下入门Nginx的优秀指南。</p>

<p><a href="https://picasaweb.google.com/lh/photo/1wfTXx_Zpcr1BVlrh5KD_A?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh5.googleusercontent.com/_ceUJ_lBTHzc/TbrPHzzLMJI/AAAAAAAABqY/2cOJEsushfU/s400/1.png" height="400" width="309"></a></p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-comparison-of-serialization-methods-of-php" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/post/comparison-of-serialization-methods-of-php/"><strong>PHP序列化方案效率比较</strong></a>
      <small class="article-date-index">&nbsp; 2011-04-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
      <br>
      <br> <!-- blair add -->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/post/comparison-of-serialization-methods-of-php/" class="article-date">
  <time datetime="2011-04-16T16:00:00.000Z" itemprop="datePublished">2011-04-17</time>
</a>-->
      <!--
-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://0x3f.org/post/comparison-of-serialization-methods-of-php/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>同时对以下几种PHP的序列化方案进行了测试：</p>

<ul>
<li>serialize() and unserialize()</li>
<li>json_encode() and json_decode()</li>
<li>msgpack_serialize() and msgpack_unserialize()</li>
<li>igbinary_serialize() and igbinary_unserialize()</li>
</ul>

<p>测试环境：</p>

<ul>
<li>OS:        Archlinux 32-bit</li>
<li>CPU:       CORE 2 DUO T9400, 2.53GHz</li>
<li>Mem:       DDR3, 3G</li>
<li>Server:    nginx v1.0.0</li>
<li>PHP:       php v5.3.6 + php-fpm</li>
<li>Profiler:  xhprof v0.9.2</li>
</ul>

<p>测试代码块：</p>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;value = str_repeat(<span class="string">'a'</span>, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">produce</span><span class="params">($num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $arr = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $num; $i++) &#123;</span><br><span class="line">        $arr[] = <span class="keyword">new</span> Test();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $data = serialize($arr);</span><br><span class="line"></span><br><span class="line">    $arr = unserialize($data);</span><br><span class="line"></span><br><span class="line">    $data = json_encode($arr);</span><br><span class="line"></span><br><span class="line">    $arr = json_decode($data);</span><br><span class="line"></span><br><span class="line">    $data = msgpack_serialize($arr);</span><br><span class="line"></span><br><span class="line">    $arr = msgpack_unserialize($data);</span><br><span class="line"></span><br><span class="line">    $data = igbinary_serialize($arr);</span><br><span class="line"></span><br><span class="line">    $arr = igbinary_unserialize($data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">produce(<span class="number">10000</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试结果：</p>

<p><a href="https://picasaweb.google.com/lh/photo/TAyUpJxyW3RVj18DU4B9gg?feat=embedwebsite" target="_blank" rel="noopener"><img src="https://lh6.googleusercontent.com/-2iBCMB4kyOg/Taq-aeruqEI/AAAAAAAABp4/wyqG-Qt5s0c/s400/php_serialization.png" height="124" width="400"></a></p>

<ul>
<li>序列化性能：serialize() <strong><em>24.611ms</em></strong> &gt; msgpack_serialize() <strong><em>32.687ms</em></strong> &gt; igbinary_serialize() <strong><em>36.012ms</em></strong> &gt; json_encode() <strong><em>132.142ms</em></strong></li>
<li>反序列化性能：igbinary_unserialize() <strong><em>12.141ms</em></strong> &gt; msgpack_unserialize() <strong><em>17.185ms</em></strong> &gt; unserialize() <strong><em>28.723ms</em></strong> &gt; json_decode() <strong><em>183.141ms</em></strong></li>
<li>综合性能：igbinary <strong><em>48.153ms</em></strong> &gt; msgpack <strong><em>49.872ms</em></strong> &gt; serialize <strong><em>53.334ms</em></strong> &gt; json <strong><em>315.283ms</em></strong></li>
</ul>

<p>测试结果并没有像传说中的那样，官方的序列化和反序列化函数性能与msgpack和igbinary两个第三方的扩展相差不大，而JSON性能非常差。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/29/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="page-number" href="/page/29/">29</a><span class="page-number current">30</span><a class="page-number" href="/page/31/">31</a><a class="page-number" href="/page/32/">32</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><a class="extend next" rel="next" href="/page/31/">Next &raquo;</a>
      </nav>
    

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 晴耕雨讀&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/52binge/hexo-theme-blairos">blairos</a>
    </div>
  </div>
</footer>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

    
<script type="text/javascript"> <!-- add by blair 0724 type=text/javascript -->
  var disqus_shortname = '0x3f';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
