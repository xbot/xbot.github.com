---
layout: post
title: 慎用PHP的fsockopen()連接localhost
tags:
- PHP
- 性能
- 編程
status: publish
type: post
published: true
comments: true
meta:
  aktt_notify_twitter: 'no'
  posturl_add_url: 'yes'
  views: '37'
---
<p>使用xdebug跟蹤程序性能時發現fsockopen()函數耗時一秒，單步調試發現實際在這裡超時了，而超時時間設置的就是一秒。</p>

<p>如果把目標地址由原來的“localhost”換成“127.0.0.1”，馬上就可以連上。在PHP的Bug跟蹤系統中找到這個問題：</p>

<p>https://bugs.php.net/bug.php?id=50953</p>

<p>看起來像是在5.2.12以後已修改，但我發現在5.2.17中仍存在這個問題。另有說法在5.3中不存在這個問題，我沒有測試。</p>

<p>Posted via <a href="http://0x3f.org/?p=1894">UltraBlog.vim</a>.</p>
